ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"tskmanager.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.TaskTickDiff,"ax",%progbits
  16              		.align	1
  17              		.global	TaskTickDiff
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	TaskTickDiff:
  24              	.LFB66:
  25              		.file 1 "tools/tskmanager.c"
   1:tools/tskmanager.c **** #include "tskmanager.h"
   2:tools/tskmanager.c **** #include "malloc.h"
   3:tools/tskmanager.c **** 
   4:tools/tskmanager.c **** static inline void StartTask(void *args);
   5:tools/tskmanager.c **** static inline void EndTask(void *args);
   6:tools/tskmanager.c **** u64 TaskTickDiff(u64 tick);
   7:tools/tskmanager.c **** static inline void DelayMs(u64 nms);
   8:tools/tskmanager.c **** 
   9:tools/tskmanager.c **** extern _Task eTask;
  10:tools/tskmanager.c **** _Task sTask = {
  11:tools/tskmanager.c **** 	.day = 0,
  12:tools/tskmanager.c **** 	.hour = 0,
  13:tools/tskmanager.c **** 	.min = 0,
  14:tools/tskmanager.c **** 	.sec = 0,
  15:tools/tskmanager.c **** 	.ms = 0,
  16:tools/tskmanager.c **** 	.func = StartTask,
  17:tools/tskmanager.c **** 	.pre = &eTask,
  18:tools/tskmanager.c **** 	.next = &eTask,
  19:tools/tskmanager.c **** };
  20:tools/tskmanager.c **** 
  21:tools/tskmanager.c **** _Task eTask = {
  22:tools/tskmanager.c **** 	.day = 0,
  23:tools/tskmanager.c **** 	.hour = 0,
  24:tools/tskmanager.c **** 	.min = 0,
  25:tools/tskmanager.c **** 	.sec = 0,
  26:tools/tskmanager.c **** 	.ms = 0,
  27:tools/tskmanager.c **** 	.func = EndTask,
  28:tools/tskmanager.c **** 	.pre = &sTask,
  29:tools/tskmanager.c **** 	.next = &sTask,
  30:tools/tskmanager.c **** };
  31:tools/tskmanager.c **** 
  32:tools/tskmanager.c **** _TaskManger TaskManger = {0, 0, &sTask, &sTask, &eTask, TaskTickDiff, DelayMs};
  33:tools/tskmanager.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 2


  34:tools/tskmanager.c **** //计算任务执行时钟
  35:tools/tskmanager.c **** u64 TaskTickDiff(u64 tick)
  36:tools/tskmanager.c **** {
  26              		.loc 1 36 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              		@ link register save eliminated.
  31              	.LVL0:
  32 0000 2DE93008 		push	{r4, r5, fp}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 12
  35              		.cfi_offset 4, -12
  36              		.cfi_offset 5, -8
  37              		.cfi_offset 11, -4
  37:tools/tskmanager.c **** 	if (tick > TaskManger.tick)
  38              		.loc 1 37 0
  39 0004 0F4B     		ldr	r3, .L6
  40 0006 D3E90223 		ldrd	r2, [r3, #8]
  41 000a 8B42     		cmp	r3, r1
  42 000c 08BF     		it	eq
  43 000e 8242     		cmpeq	r2, r0
  44 0010 0CD3     		bcc	.L5
  38:tools/tskmanager.c **** 		return 0xFFFFFFFFFFFFFFFF - tick + TaskManger.tick;
  39:tools/tskmanager.c **** 	else
  40:tools/tskmanager.c **** 		return TaskManger.tick - tick;
  45              		.loc 1 40 0
  46 0012 0C4B     		ldr	r3, .L6
  47 0014 D3E90223 		ldrd	r2, [r3, #8]
  48 0018 121A     		subs	r2, r2, r0
  49 001a 63EB0103 		sbc	r3, r3, r1
  50 001e 1446     		mov	r4, r2
  51 0020 1D46     		mov	r5, r3
  52              	.L1:
  41:tools/tskmanager.c **** }
  53              		.loc 1 41 0
  54 0022 2046     		mov	r0, r4
  55              	.LVL1:
  56 0024 2946     		mov	r1, r5
  57 0026 BDE83008 		pop	{r4, r5, fp}
  58              	.LCFI1:
  59              		.cfi_remember_state
  60              		.cfi_restore 11
  61              		.cfi_restore 5
  62              		.cfi_restore 4
  63              		.cfi_def_cfa_offset 0
  64 002a 7047     		bx	lr
  65              	.LVL2:
  66              	.L5:
  67              	.LCFI2:
  68              		.cfi_restore_state
  38:tools/tskmanager.c **** 		return 0xFFFFFFFFFFFFFFFF - tick + TaskManger.tick;
  69              		.loc 1 38 0
  70 002c 054B     		ldr	r3, .L6
  71 002e D3E90223 		ldrd	r2, [r3, #8]
  72 0032 121A     		subs	r2, r2, r0
  73 0034 63EB0103 		sbc	r3, r3, r1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 3


  74 0038 12F1FF34 		adds	r4, r2, #-1
  75 003c 43F1FF35 		adc	r5, r3, #-1
  76 0040 EFE7     		b	.L1
  77              	.L7:
  78 0042 00BF     		.align	2
  79              	.L6:
  80 0044 00000000 		.word	.LANCHOR0
  81              		.cfi_endproc
  82              	.LFE66:
  84              		.section	.text.StartTask,"ax",%progbits
  85              		.align	1
  86              		.syntax unified
  87              		.thumb
  88              		.thumb_func
  89              		.fpu softvfp
  91              	StartTask:
  92              	.LFB67:
  42:tools/tskmanager.c **** 
  43:tools/tskmanager.c **** //默认创建任务，位于任务链表开始节点
  44:tools/tskmanager.c **** static inline void StartTask(void *args)
  45:tools/tskmanager.c **** {
  93              		.loc 1 45 0
  94              		.cfi_startproc
  95              		@ args = 0, pretend = 0, frame = 0
  96              		@ frame_needed = 0, uses_anonymous_args = 0
  97              		@ link register save eliminated.
  98              	.LVL3:
  46:tools/tskmanager.c **** 
  47:tools/tskmanager.c **** }
  99              		.loc 1 47 0
 100 0000 7047     		bx	lr
 101              		.cfi_endproc
 102              	.LFE67:
 104              		.section	.text.EndTask,"ax",%progbits
 105              		.align	1
 106              		.syntax unified
 107              		.thumb
 108              		.thumb_func
 109              		.fpu softvfp
 111              	EndTask:
 112              	.LFB68:
  48:tools/tskmanager.c **** 
  49:tools/tskmanager.c **** //默认创建任务，位于任务链表结束节点
  50:tools/tskmanager.c **** static inline void EndTask(void *args)
  51:tools/tskmanager.c **** {
 113              		.loc 1 51 0
 114              		.cfi_startproc
 115              		@ args = 0, pretend = 0, frame = 0
 116              		@ frame_needed = 0, uses_anonymous_args = 0
 117              		@ link register save eliminated.
 118              	.LVL4:
  52:tools/tskmanager.c **** 
  53:tools/tskmanager.c **** }
 119              		.loc 1 53 0
 120 0000 7047     		bx	lr
 121              		.cfi_endproc
 122              	.LFE68:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 4


 124              		.section	.text.DelayMs,"ax",%progbits
 125              		.align	1
 126              		.syntax unified
 127              		.thumb
 128              		.thumb_func
 129              		.fpu softvfp
 131              	DelayMs:
 132              	.LFB72:
  54:tools/tskmanager.c **** 
  55:tools/tskmanager.c **** //创建新任务，添加到任务链表结束节点的上一节点
  56:tools/tskmanager.c **** void CreateTask(_Task *tsk)
  57:tools/tskmanager.c **** {
  58:tools/tskmanager.c **** 	tsk->tick = TaskManger.tick;
  59:tools/tskmanager.c **** 	tsk->period = (((u64)tsk->day * 86400000) + ((u64)tsk->hour * 3600000) + ((u64)tsk->min * 60000) +
  60:tools/tskmanager.c **** 	tsk->pre = TaskManger.lasTask->pre;
  61:tools/tskmanager.c **** 	tsk->next = TaskManger.lasTask;
  62:tools/tskmanager.c **** 	TaskManger.lasTask->pre->next = tsk;
  63:tools/tskmanager.c **** 	TaskManger.lasTask->pre = tsk;
  64:tools/tskmanager.c **** }
  65:tools/tskmanager.c **** 
  66:tools/tskmanager.c **** //从任务链表中删除任务
  67:tools/tskmanager.c **** void DelTask(_Task *delTask)
  68:tools/tskmanager.c **** {
  69:tools/tskmanager.c **** 	if (delTask != 0)
  70:tools/tskmanager.c **** 	{
  71:tools/tskmanager.c **** 		delTask->pre->next = delTask->next;
  72:tools/tskmanager.c **** 		delTask->next->pre = delTask->pre;
  73:tools/tskmanager.c **** 		myfree(delTask);
  74:tools/tskmanager.c **** 	}
  75:tools/tskmanager.c **** }
  76:tools/tskmanager.c **** 
  77:tools/tskmanager.c **** //修改任务执行周期
  78:tools/tskmanager.c **** void SetTaskPeriod(u64 day, u64 hour, u64 min, u64 sec, u64 ms, _Task *Task)
  79:tools/tskmanager.c **** {
  80:tools/tskmanager.c **** 	Task->period = ((day * 86400000) + (hour * 3600000) + (min * 60000) + (sec * 1000) + ms);        /
  81:tools/tskmanager.c **** }
  82:tools/tskmanager.c **** 
  83:tools/tskmanager.c **** volatile u64 delayTick;
  84:tools/tskmanager.c **** void DelayMs(u64 nms)
  85:tools/tskmanager.c **** {
 133              		.loc 1 85 0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 0
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 137              	.LVL5:
 138 0000 38B5     		push	{r3, r4, r5, lr}
 139              	.LCFI3:
 140              		.cfi_def_cfa_offset 16
 141              		.cfi_offset 3, -16
 142              		.cfi_offset 4, -12
 143              		.cfi_offset 5, -8
 144              		.cfi_offset 14, -4
 145 0002 0446     		mov	r4, r0
 146 0004 0D46     		mov	r5, r1
  86:tools/tskmanager.c **** 	delayTick = TaskManger.tick;
 147              		.loc 1 86 0
 148 0006 084B     		ldr	r3, .L13
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 5


 149 0008 D3E90201 		ldrd	r0, [r3, #8]
 150              	.LVL6:
 151 000c 074B     		ldr	r3, .L13+4
 152 000e C3E90001 		strd	r0, [r3]
 153              	.L11:
  87:tools/tskmanager.c **** 	while (TaskTickDiff(delayTick) < nms);
 154              		.loc 1 87 0 discriminator 1
 155 0012 064B     		ldr	r3, .L13+4
 156 0014 D3E90001 		ldrd	r0, [r3]
 157 0018 FFF7FEFF 		bl	TaskTickDiff
 158              	.LVL7:
 159 001c A942     		cmp	r1, r5
 160 001e 08BF     		it	eq
 161 0020 A042     		cmpeq	r0, r4
 162 0022 F6D3     		bcc	.L11
  88:tools/tskmanager.c **** }
 163              		.loc 1 88 0
 164 0024 38BD     		pop	{r3, r4, r5, pc}
 165              	.L14:
 166 0026 00BF     		.align	2
 167              	.L13:
 168 0028 00000000 		.word	.LANCHOR0
 169 002c 00000000 		.word	delayTick
 170              		.cfi_endproc
 171              	.LFE72:
 173              		.section	.text.CreateTask,"ax",%progbits
 174              		.align	1
 175              		.global	CreateTask
 176              		.syntax unified
 177              		.thumb
 178              		.thumb_func
 179              		.fpu softvfp
 181              	CreateTask:
 182              	.LFB69:
  57:tools/tskmanager.c **** 	tsk->tick = TaskManger.tick;
 183              		.loc 1 57 0
 184              		.cfi_startproc
 185              		@ args = 0, pretend = 0, frame = 8
 186              		@ frame_needed = 0, uses_anonymous_args = 0
 187              	.LVL8:
 188 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 189              	.LCFI4:
 190              		.cfi_def_cfa_offset 36
 191              		.cfi_offset 4, -36
 192              		.cfi_offset 5, -32
 193              		.cfi_offset 6, -28
 194              		.cfi_offset 7, -24
 195              		.cfi_offset 8, -20
 196              		.cfi_offset 9, -16
 197              		.cfi_offset 10, -12
 198              		.cfi_offset 11, -8
 199              		.cfi_offset 14, -4
 200 0004 83B0     		sub	sp, sp, #12
 201              	.LCFI5:
 202              		.cfi_def_cfa_offset 48
  58:tools/tskmanager.c **** 	tsk->period = (((u64)tsk->day * 86400000) + ((u64)tsk->hour * 3600000) + ((u64)tsk->min * 60000) +
 203              		.loc 1 58 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 6


 204 0006 3449     		ldr	r1, .L17
 205 0008 D1E90223 		ldrd	r2, [r1, #8]
 206 000c C0E90023 		strd	r2, [r0]
  59:tools/tskmanager.c **** 	tsk->pre = TaskManger.lasTask->pre;
 207              		.loc 1 59 0
 208 0010 0469     		ldr	r4, [r0, #16]
 209 0012 4669     		ldr	r6, [r0, #20]
 210 0014 314B     		ldr	r3, .L17+4
 211 0016 A4FB0345 		umull	r4, r5, r4, r3
 212 001a 03FB0655 		mla	r5, r3, r6, r5
 213 001e 8369     		ldr	r3, [r0, #24]
 214 0020 C269     		ldr	r2, [r0, #28]
 215 0022 2F4E     		ldr	r6, .L17+8
 216 0024 A3FB06AB 		umull	r10, fp, r3, r6
 217 0028 06FB02BB 		mla	fp, r6, r2, fp
 218 002c 1AEB0408 		adds	r8, r10, r4
 219 0030 4BEB0509 		adc	r9, fp, r5
 220 0034 D0E90A45 		ldrd	r4, [r0, #40]
 221 0038 6E01     		lsls	r6, r5, #5
 222 003a 6201     		lsls	r2, r4, #5
 223 003c 46EAD463 		orr	r3, r6, r4, lsr #27
 224 0040 121B     		subs	r2, r2, r4
 225 0042 63EB0503 		sbc	r3, r3, r5
 226 0046 9E00     		lsls	r6, r3, #2
 227 0048 46EA9276 		orr	r6, r6, r2, lsr #30
 228 004c 9700     		lsls	r7, r2, #2
 229 004e 3A19     		adds	r2, r7, r4
 230 0050 46EB0503 		adc	r3, r6, r5
 231 0054 DC00     		lsls	r4, r3, #3
 232 0056 44EA5274 		orr	r4, r4, r2, lsr #29
 233 005a D500     		lsls	r5, r2, #3
 234 005c 0095     		str	r5, [sp]
 235 005e 0194     		str	r4, [sp, #4]
 236 0060 D0E90867 		ldrd	r6, [r0, #32]
 237 0064 4FEA471C 		lsl	ip, r7, #5
 238 0068 7401     		lsls	r4, r6, #5
 239 006a 4CEAD665 		orr	r5, ip, r6, lsr #27
 240 006e A21B     		subs	r2, r4, r6
 241 0070 65EB0703 		sbc	r3, r5, r7
 242 0074 4FEA830C 		lsl	ip, r3, #2
 243 0078 4CEA927C 		orr	ip, ip, r2, lsr #30
 244 007c 4FEA820E 		lsl	lr, r2, #2
 245 0080 1EEB0604 		adds	r4, lr, r6
 246 0084 4CEB0705 		adc	r5, ip, r7
 247 0088 2F01     		lsls	r7, r5, #4
 248 008a 47EA1477 		orr	r7, r7, r4, lsr #28
 249 008e 2601     		lsls	r6, r4, #4
 250 0090 361B     		subs	r6, r6, r4
 251 0092 67EB0507 		sbc	r7, r7, r5
 252 0096 B246     		mov	r10, r6
 253 0098 7E01     		lsls	r6, r7, #5
 254 009a 46EADA66 		orr	r6, r6, r10, lsr #27
 255 009e 4FEA4A17 		lsl	r7, r10, #5
 256 00a2 DDE90023 		ldrd	r2, [sp]
 257 00a6 D219     		adds	r2, r2, r7
 258 00a8 7341     		adcs	r3, r3, r6
 259 00aa 18EB0204 		adds	r4, r8, r2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 7


 260 00ae 49EB0305 		adc	r5, r9, r3
 261 00b2 D0E90CAB 		ldrd	r10, [r0, #48]
 262 00b6 14EB0A08 		adds	r8, r4, r10
 263 00ba 45EB0B09 		adc	r9, r5, fp
 264 00be C0E90289 		strd	r8, [r0, #8]
  60:tools/tskmanager.c **** 	tsk->next = TaskManger.lasTask;
 265              		.loc 1 60 0
 266 00c2 8B69     		ldr	r3, [r1, #24]
 267 00c4 1A6C     		ldr	r2, [r3, #64]
 268 00c6 0264     		str	r2, [r0, #64]
  61:tools/tskmanager.c **** 	TaskManger.lasTask->pre->next = tsk;
 269              		.loc 1 61 0
 270 00c8 4364     		str	r3, [r0, #68]
  62:tools/tskmanager.c **** 	TaskManger.lasTask->pre = tsk;
 271              		.loc 1 62 0
 272 00ca 1A6C     		ldr	r2, [r3, #64]
 273 00cc 5064     		str	r0, [r2, #68]
  63:tools/tskmanager.c **** }
 274              		.loc 1 63 0
 275 00ce 1864     		str	r0, [r3, #64]
  64:tools/tskmanager.c **** 
 276              		.loc 1 64 0
 277 00d0 03B0     		add	sp, sp, #12
 278              	.LCFI6:
 279              		.cfi_def_cfa_offset 36
 280              		@ sp needed
 281 00d2 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 282              	.L18:
 283 00d6 00BF     		.align	2
 284              	.L17:
 285 00d8 00000000 		.word	.LANCHOR0
 286 00dc 005C2605 		.word	86400000
 287 00e0 80EE3600 		.word	3600000
 288              		.cfi_endproc
 289              	.LFE69:
 291              		.section	.text.DelTask,"ax",%progbits
 292              		.align	1
 293              		.global	DelTask
 294              		.syntax unified
 295              		.thumb
 296              		.thumb_func
 297              		.fpu softvfp
 299              	DelTask:
 300              	.LFB70:
  68:tools/tskmanager.c **** 	if (delTask != 0)
 301              		.loc 1 68 0
 302              		.cfi_startproc
 303              		@ args = 0, pretend = 0, frame = 0
 304              		@ frame_needed = 0, uses_anonymous_args = 0
 305              	.LVL9:
  69:tools/tskmanager.c **** 	{
 306              		.loc 1 69 0
 307 0000 48B1     		cbz	r0, .L22
  68:tools/tskmanager.c **** 	if (delTask != 0)
 308              		.loc 1 68 0
 309 0002 08B5     		push	{r3, lr}
 310              	.LCFI7:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 8


 311              		.cfi_def_cfa_offset 8
 312              		.cfi_offset 3, -8
 313              		.cfi_offset 14, -4
  71:tools/tskmanager.c **** 		delTask->next->pre = delTask->pre;
 314              		.loc 1 71 0
 315 0004 036C     		ldr	r3, [r0, #64]
 316 0006 426C     		ldr	r2, [r0, #68]
 317 0008 5A64     		str	r2, [r3, #68]
  72:tools/tskmanager.c **** 		myfree(delTask);
 318              		.loc 1 72 0
 319 000a 436C     		ldr	r3, [r0, #68]
 320 000c 026C     		ldr	r2, [r0, #64]
 321 000e 1A64     		str	r2, [r3, #64]
  73:tools/tskmanager.c **** 	}
 322              		.loc 1 73 0
 323 0010 FFF7FEFF 		bl	myfree
 324              	.LVL10:
  75:tools/tskmanager.c **** 
 325              		.loc 1 75 0
 326 0014 08BD     		pop	{r3, pc}
 327              	.LVL11:
 328              	.L22:
 329              	.LCFI8:
 330              		.cfi_def_cfa_offset 0
 331              		.cfi_restore 3
 332              		.cfi_restore 14
 333 0016 7047     		bx	lr
 334              		.cfi_endproc
 335              	.LFE70:
 337              		.section	.text.SetTaskPeriod,"ax",%progbits
 338              		.align	1
 339              		.global	SetTaskPeriod
 340              		.syntax unified
 341              		.thumb
 342              		.thumb_func
 343              		.fpu softvfp
 345              	SetTaskPeriod:
 346              	.LFB71:
  79:tools/tskmanager.c **** 	Task->period = ((day * 86400000) + (hour * 3600000) + (min * 60000) + (sec * 1000) + ms);        /
 347              		.loc 1 79 0
 348              		.cfi_startproc
 349              		@ args = 28, pretend = 0, frame = 8
 350              		@ frame_needed = 0, uses_anonymous_args = 0
 351              		@ link register save eliminated.
 352              	.LVL12:
 353 0000 2DE9F00B 		push	{r4, r5, r6, r7, r8, r9, fp}
 354              	.LCFI9:
 355              		.cfi_def_cfa_offset 28
 356              		.cfi_offset 4, -28
 357              		.cfi_offset 5, -24
 358              		.cfi_offset 6, -20
 359              		.cfi_offset 7, -16
 360              		.cfi_offset 8, -12
 361              		.cfi_offset 9, -8
 362              		.cfi_offset 11, -4
 363 0004 83B0     		sub	sp, sp, #12
 364              	.LCFI10:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 9


 365              		.cfi_def_cfa_offset 40
 366 0006 DDE90A89 		ldrd	r8, [sp, #40]
 367 000a DDE90C67 		ldrd	r6, [sp, #48]
  80:tools/tskmanager.c **** }
 368              		.loc 1 80 0
 369 000e DFF8B0C0 		ldr	ip, .L27
 370 0012 A0FB0C45 		umull	r4, r5, r0, ip
 371 0016 0CFB0155 		mla	r5, ip, r1, r5
 372 001a DFF8A8C0 		ldr	ip, .L27+4
 373 001e A2FB0C01 		umull	r0, r1, r2, ip
 374              	.LVL13:
 375 0022 0CFB0311 		mla	r1, ip, r3, r1
 376 0026 2218     		adds	r2, r4, r0
 377              	.LVL14:
 378 0028 45EB0103 		adc	r3, r5, r1
 379 002c 7901     		lsls	r1, r7, #5
 380 002e 7401     		lsls	r4, r6, #5
 381 0030 41EAD665 		orr	r5, r1, r6, lsr #27
 382 0034 A41B     		subs	r4, r4, r6
 383 0036 65EB0705 		sbc	r5, r5, r7
 384 003a A900     		lsls	r1, r5, #2
 385 003c 41EA9471 		orr	r1, r1, r4, lsr #30
 386 0040 A000     		lsls	r0, r4, #2
 387 0042 8419     		adds	r4, r0, r6
 388 0044 41EB0705 		adc	r5, r1, r7
 389 0048 E900     		lsls	r1, r5, #3
 390 004a 41EA5471 		orr	r1, r1, r4, lsr #29
 391 004e E000     		lsls	r0, r4, #3
 392 0050 0090     		str	r0, [sp]
 393 0052 0191     		str	r1, [sp, #4]
 394 0054 4FEA4911 		lsl	r1, r9, #5
 395 0058 4FEA4816 		lsl	r6, r8, #5
 396 005c 41EAD867 		orr	r7, r1, r8, lsr #27
 397 0060 B6EB0804 		subs	r4, r6, r8
 398 0064 67EB0905 		sbc	r5, r7, r9
 399 0068 A900     		lsls	r1, r5, #2
 400 006a 41EA9471 		orr	r1, r1, r4, lsr #30
 401 006e A000     		lsls	r0, r4, #2
 402 0070 10EB0806 		adds	r6, r0, r8
 403 0074 41EB0907 		adc	r7, r1, r9
 404 0078 4FEA0719 		lsl	r9, r7, #4
 405 007c 49EA1679 		orr	r9, r9, r6, lsr #28
 406 0080 4FEA0618 		lsl	r8, r6, #4
 407 0084 B8EB0608 		subs	r8, r8, r6
 408 0088 69EB0709 		sbc	r9, r9, r7
 409 008c 4FEA4911 		lsl	r1, r9, #5
 410 0090 41EAD861 		orr	r1, r1, r8, lsr #27
 411 0094 4FEA4810 		lsl	r0, r8, #5
 412 0098 DDE90045 		ldrd	r4, [sp]
 413 009c 2418     		adds	r4, r4, r0
 414 009e 4D41     		adcs	r5, r5, r1
 415 00a0 A018     		adds	r0, r4, r2
 416 00a2 45EB0301 		adc	r1, r5, r3
 417 00a6 DDE90E23 		ldrd	r2, [sp, #56]
 418 00aa 8418     		adds	r4, r0, r2
 419 00ac 41EB0305 		adc	r5, r1, r3
 420 00b0 109B     		ldr	r3, [sp, #64]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 10


 421 00b2 C3E90245 		strd	r4, [r3, #8]
  81:tools/tskmanager.c **** 
 422              		.loc 1 81 0
 423 00b6 03B0     		add	sp, sp, #12
 424              	.LCFI11:
 425              		.cfi_def_cfa_offset 28
 426              		@ sp needed
 427 00b8 BDE8F00B 		pop	{r4, r5, r6, r7, r8, r9, fp}
 428              	.LCFI12:
 429              		.cfi_restore 11
 430              		.cfi_restore 9
 431              		.cfi_restore 8
 432              		.cfi_restore 7
 433              		.cfi_restore 6
 434              		.cfi_restore 5
 435              		.cfi_restore 4
 436              		.cfi_def_cfa_offset 0
 437              	.LVL15:
 438 00bc 7047     		bx	lr
 439              	.L28:
 440 00be 00BF     		.align	2
 441              	.L27:
 442 00c0 005C2605 		.word	86400000
 443 00c4 80EE3600 		.word	3600000
 444              		.cfi_endproc
 445              	.LFE71:
 447              		.section	.text.TskTickHandler,"ax",%progbits
 448              		.align	1
 449              		.global	TskTickHandler
 450              		.syntax unified
 451              		.thumb
 452              		.thumb_func
 453              		.fpu softvfp
 455              	TskTickHandler:
 456              	.LFB73:
  89:tools/tskmanager.c **** 
  90:tools/tskmanager.c **** void TskTickHandler(void)
  91:tools/tskmanager.c **** {
 457              		.loc 1 91 0
 458              		.cfi_startproc
 459              		@ args = 0, pretend = 0, frame = 0
 460              		@ frame_needed = 0, uses_anonymous_args = 0
 461              		@ link register save eliminated.
 462 0000 4DF804BD 		push	{fp}
 463              	.LCFI13:
 464              		.cfi_def_cfa_offset 4
 465              		.cfi_offset 11, -4
  92:tools/tskmanager.c ****     TaskManger.tick++;
 466              		.loc 1 92 0
 467 0004 0549     		ldr	r1, .L31
 468 0006 D1E902BC 		ldrd	fp, [r1, #8]
 469 000a 1BF10102 		adds	r2, fp, #1
 470 000e 4CF10003 		adc	r3, ip, #0
 471 0012 C1E90223 		strd	r2, [r1, #8]
  93:tools/tskmanager.c **** }
 472              		.loc 1 93 0
 473 0016 5DF804BB 		ldr	fp, [sp], #4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 11


 474              	.LCFI14:
 475              		.cfi_restore 11
 476              		.cfi_def_cfa_offset 0
 477 001a 7047     		bx	lr
 478              	.L32:
 479              		.align	2
 480              	.L31:
 481 001c 00000000 		.word	.LANCHOR0
 482              		.cfi_endproc
 483              	.LFE73:
 485              		.section	.text.ExecTask,"ax",%progbits
 486              		.align	1
 487              		.global	ExecTask
 488              		.syntax unified
 489              		.thumb
 490              		.thumb_func
 491              		.fpu softvfp
 493              	ExecTask:
 494              	.LFB74:
  94:tools/tskmanager.c **** 
  95:tools/tskmanager.c **** _Noreturn //循环执行任务链表中的任务
  96:tools/tskmanager.c **** void ExecTask(void)
  97:tools/tskmanager.c **** {
 495              		.loc 1 97 0
 496              		.cfi_startproc
 497              		@ Volatile: function does not return.
 498              		@ args = 0, pretend = 0, frame = 0
 499              		@ frame_needed = 0, uses_anonymous_args = 0
 500 0000 08B5     		push	{r3, lr}
 501              	.LCFI15:
 502              		.cfi_def_cfa_offset 8
 503              		.cfi_offset 3, -8
 504              		.cfi_offset 14, -4
 505              	.LVL16:
  98:tools/tskmanager.c **** 	_Task *RunTask = &sTask;
 506              		.loc 1 98 0
 507 0002 0B4C     		ldr	r4, .L37
 508 0004 00E0     		b	.L35
 509              	.LVL17:
 510              	.L34:
  99:tools/tskmanager.c **** 	for (;;)
 100:tools/tskmanager.c **** 	{
 101:tools/tskmanager.c **** 		if (TaskTickDiff(RunTask->tick) >= RunTask->period)
 102:tools/tskmanager.c **** 		{
 103:tools/tskmanager.c **** 			RunTask->tick = TaskManger.tick;
 104:tools/tskmanager.c **** 			RunTask->func(RunTask->args);//调用任务处理函数
 105:tools/tskmanager.c **** 		}
 106:tools/tskmanager.c **** 		RunTask = RunTask->next;
 511              		.loc 1 106 0
 512 0006 646C     		ldr	r4, [r4, #68]
 513              	.LVL18:
 514              	.L35:
 101:tools/tskmanager.c **** 		{
 515              		.loc 1 101 0
 516 0008 D4E90001 		ldrd	r0, [r4]
 517 000c FFF7FEFF 		bl	TaskTickDiff
 518              	.LVL19:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 12


 519 0010 D4E90223 		ldrd	r2, [r4, #8]
 520 0014 9942     		cmp	r1, r3
 521 0016 08BF     		it	eq
 522 0018 9042     		cmpeq	r0, r2
 523 001a F4D3     		bcc	.L34
 103:tools/tskmanager.c **** 			RunTask->func(RunTask->args);//调用任务处理函数
 524              		.loc 1 103 0
 525 001c 054B     		ldr	r3, .L37+4
 526 001e D3E90223 		ldrd	r2, [r3, #8]
 527 0022 C4E90023 		strd	r2, [r4]
 104:tools/tskmanager.c **** 		}
 528              		.loc 1 104 0
 529 0026 E36B     		ldr	r3, [r4, #60]
 530 0028 A06B     		ldr	r0, [r4, #56]
 531 002a 9847     		blx	r3
 532              	.LVL20:
 533 002c EBE7     		b	.L34
 534              	.L38:
 535 002e 00BF     		.align	2
 536              	.L37:
 537 0030 00000000 		.word	.LANCHOR1
 538 0034 00000000 		.word	.LANCHOR0
 539              		.cfi_endproc
 540              	.LFE74:
 542              		.comm	delayTick,8,8
 543              		.global	TaskManger
 544              		.global	eTask
 545              		.global	sTask
 546              		.section	.data.TaskManger,"aw",%progbits
 547              		.align	3
 548              		.set	.LANCHOR0,. + 0
 551              	TaskManger:
 552 0000 00000000 		.word	0
 553 0004 00000000 		.word	0
 554 0008 00000000 		.word	0
 555 000c 00000000 		.word	0
 556 0010 00000000 		.word	sTask
 557 0014 00000000 		.word	sTask
 558 0018 00000000 		.word	eTask
 559 001c 00000000 		.word	TaskTickDiff
 560 0020 00000000 		.word	DelayMs
 561 0024 00000000 		.space	4
 562              		.section	.data.eTask,"aw",%progbits
 563              		.align	3
 566              	eTask:
 567 0000 00000000 		.space	16
 567      00000000 
 567      00000000 
 567      00000000 
 568 0010 00000000 		.word	0
 569 0014 00000000 		.word	0
 570 0018 00000000 		.word	0
 571 001c 00000000 		.word	0
 572 0020 00000000 		.word	0
 573 0024 00000000 		.word	0
 574 0028 00000000 		.word	0
 575 002c 00000000 		.word	0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 13


 576 0030 00000000 		.word	0
 577 0034 00000000 		.word	0
 578 0038 00000000 		.space	4
 579 003c 00000000 		.word	EndTask
 580 0040 00000000 		.word	sTask
 581 0044 00000000 		.word	sTask
 582              		.section	.data.sTask,"aw",%progbits
 583              		.align	3
 584              		.set	.LANCHOR1,. + 0
 587              	sTask:
 588 0000 00000000 		.space	16
 588      00000000 
 588      00000000 
 588      00000000 
 589 0010 00000000 		.word	0
 590 0014 00000000 		.word	0
 591 0018 00000000 		.word	0
 592 001c 00000000 		.word	0
 593 0020 00000000 		.word	0
 594 0024 00000000 		.word	0
 595 0028 00000000 		.word	0
 596 002c 00000000 		.word	0
 597 0030 00000000 		.word	0
 598 0034 00000000 		.word	0
 599 0038 00000000 		.space	4
 600 003c 00000000 		.word	StartTask
 601 0040 00000000 		.word	eTask
 602 0044 00000000 		.word	eTask
 603              		.text
 604              	.Letext0:
 605              		.file 2 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/machine/_
 606              		.file 3 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/lock.
 607              		.file 4 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_type
 608              		.file 5 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-7-2017-q4-major/lib/gcc/arm-none-eabi/7.2.1/inc
 609              		.file 6 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/reent
 610              		.file 7 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_stdi
 611              		.file 8 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/stdlib.h"
 612              		.file 9 "Inc/core_cm3.h"
 613              		.file 10 "startup/inc/sys.h"
 614              		.file 11 "tools/inc/malloc.h"
 615              		.file 12 "tools/inc/tskmanager.h"
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s 			page 14


DEFINED SYMBOLS
                            *ABS*:0000000000000000 tskmanager.c
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:16     .text.TaskTickDiff:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:23     .text.TaskTickDiff:0000000000000000 TaskTickDiff
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:80     .text.TaskTickDiff:0000000000000044 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:85     .text.StartTask:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:91     .text.StartTask:0000000000000000 StartTask
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:105    .text.EndTask:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:111    .text.EndTask:0000000000000000 EndTask
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:125    .text.DelayMs:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:131    .text.DelayMs:0000000000000000 DelayMs
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:168    .text.DelayMs:0000000000000028 $d
                            *COM*:0000000000000008 delayTick
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:174    .text.CreateTask:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:181    .text.CreateTask:0000000000000000 CreateTask
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:285    .text.CreateTask:00000000000000d8 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:292    .text.DelTask:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:299    .text.DelTask:0000000000000000 DelTask
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:338    .text.SetTaskPeriod:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:345    .text.SetTaskPeriod:0000000000000000 SetTaskPeriod
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:442    .text.SetTaskPeriod:00000000000000c0 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:448    .text.TskTickHandler:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:455    .text.TskTickHandler:0000000000000000 TskTickHandler
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:481    .text.TskTickHandler:000000000000001c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:486    .text.ExecTask:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:493    .text.ExecTask:0000000000000000 ExecTask
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:537    .text.ExecTask:0000000000000030 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:551    .data.TaskManger:0000000000000000 TaskManger
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:566    .data.eTask:0000000000000000 eTask
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:587    .data.sTask:0000000000000000 sTask
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:547    .data.TaskManger:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:563    .data.eTask:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccLUCQnn.s:583    .data.sTask:0000000000000000 $d

UNDEFINED SYMBOLS
myfree

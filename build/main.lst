ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"main.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.OnMsgRecv,"ax",%progbits
  16              		.align	1
  17              		.global	OnMsgRecv
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	OnMsgRecv:
  24              	.LFB66:
  25              		.file 1 "app/main.c"
   1:app/main.c    **** //
   2:app/main.c    **** // Created by 周洋 on 2020/3/29.
   3:app/main.c    **** //
   4:app/main.c    **** #include "public.h"
   5:app/main.c    **** #include "bsp_f1xx_timer.h"
   6:app/main.c    **** #include "runled.h"
   7:app/main.c    **** #include "bsp_f1xx_uart.h"
   8:app/main.c    **** 
   9:app/main.c    **** _timer tiktimer = {
  10:app/main.c    **** 		.timx = TIM2,
  11:app/main.c    **** 		.sec = 0,
  12:app/main.c    **** 		.ms = 1,
  13:app/main.c    **** 		.ontimout = TskTickHandler,
  14:app/main.c    **** };
  15:app/main.c    **** 
  16:app/main.c    **** void OnMsgRecv(u8 *msg,u16 len)
  17:app/main.c    **** {
  26              		.loc 1 17 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              		@ link register save eliminated.
  31              	.LVL0:
  18:app/main.c    **** 
  19:app/main.c    **** }
  32              		.loc 1 19 0
  33 0000 7047     		bx	lr
  34              		.cfi_endproc
  35              	.LFE66:
  37              		.section	.text.UploadTsk,"ax",%progbits
  38              		.align	1
  39              		.global	UploadTsk
  40              		.syntax unified
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s 			page 2


  41              		.thumb
  42              		.thumb_func
  43              		.fpu softvfp
  45              	UploadTsk:
  46              	.LFB67:
  20:app/main.c    **** 
  21:app/main.c    **** _DataUtil *util;
  22:app/main.c    **** _uartpara uartpara={
  23:app/main.c    **** 		.comx = COM2,
  24:app/main.c    **** 		.baud = 115200,
  25:app/main.c    **** 		.rxbuflen = 1024,
  26:app/main.c    **** 		.txbuflen = 1024,
  27:app/main.c    **** 		.recver = OnMsgRecv,
  28:app/main.c    **** };
  29:app/main.c    **** 
  30:app/main.c    **** double test = 23.324;
  31:app/main.c    **** u8 *msg;
  32:app/main.c    **** 
  33:app/main.c    **** void UploadTsk(void *args)
  34:app/main.c    **** {
  47              		.loc 1 34 0
  48              		.cfi_startproc
  49              		@ args = 0, pretend = 0, frame = 0
  50              		@ frame_needed = 0, uses_anonymous_args = 0
  51              	.LVL1:
  52 0000 38B5     		push	{r3, r4, r5, lr}
  53              	.LCFI0:
  54              		.cfi_def_cfa_offset 16
  55              		.cfi_offset 3, -16
  56              		.cfi_offset 4, -12
  57              		.cfi_offset 5, -8
  58              		.cfi_offset 14, -4
  35:app/main.c    **** 	sprintf((char*)msg,"test:%f",test);
  59              		.loc 1 35 0
  60 0002 094C     		ldr	r4, .L4
  61 0004 094B     		ldr	r3, .L4+4
  62 0006 D3E90023 		ldrd	r2, [r3]
  63 000a 0949     		ldr	r1, .L4+8
  64 000c 2068     		ldr	r0, [r4]
  65              	.LVL2:
  66 000e FFF7FEFF 		bl	sprintf
  67              	.LVL3:
  36:app/main.c    **** 	util->write(msg,strlen(msg));
  68              		.loc 1 36 0
  69 0012 084B     		ldr	r3, .L4+12
  70 0014 1B68     		ldr	r3, [r3]
  71 0016 5D68     		ldr	r5, [r3, #4]
  72 0018 2468     		ldr	r4, [r4]
  73 001a 2046     		mov	r0, r4
  74 001c FFF7FEFF 		bl	strlen
  75              	.LVL4:
  76 0020 81B2     		uxth	r1, r0
  77 0022 2046     		mov	r0, r4
  78 0024 A847     		blx	r5
  79              	.LVL5:
  37:app/main.c    **** }
  80              		.loc 1 37 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s 			page 3


  81 0026 38BD     		pop	{r3, r4, r5, pc}
  82              	.L5:
  83              		.align	2
  84              	.L4:
  85 0028 00000000 		.word	msg
  86 002c 00000000 		.word	.LANCHOR0
  87 0030 00000000 		.word	.LC0
  88 0034 00000000 		.word	util
  89              		.cfi_endproc
  90              	.LFE67:
  92              		.section	.text.main,"ax",%progbits
  93              		.align	1
  94              		.global	main
  95              		.syntax unified
  96              		.thumb
  97              		.thumb_func
  98              		.fpu softvfp
 100              	main:
 101              	.LFB68:
  38:app/main.c    **** 
  39:app/main.c    **** _Task uploadTsk = {
  40:app/main.c    **** 		.ms = 1000,
  41:app/main.c    **** 		.func = UploadTsk,
  42:app/main.c    **** };
  43:app/main.c    **** 
  44:app/main.c    **** int main(void)
  45:app/main.c    **** {
 102              		.loc 1 45 0
 103              		.cfi_startproc
 104              		@ Volatile: function does not return.
 105              		@ args = 0, pretend = 0, frame = 0
 106              		@ frame_needed = 0, uses_anonymous_args = 0
 107 0000 08B5     		push	{r3, lr}
 108              	.LCFI1:
 109              		.cfi_def_cfa_offset 8
 110              		.cfi_offset 3, -8
 111              		.cfi_offset 14, -4
  46:app/main.c    **** 	Stm32_Clock_Init(9);
 112              		.loc 1 46 0
 113 0002 0920     		movs	r0, #9
 114 0004 FFF7FEFF 		bl	Stm32_Clock_Init
 115              	.LVL6:
  47:app/main.c    **** 	delay_init(72);
 116              		.loc 1 47 0
 117 0008 4820     		movs	r0, #72
 118 000a FFF7FEFF 		bl	delay_init
 119              	.LVL7:
  48:app/main.c    **** 	my_mem_init();
 120              		.loc 1 48 0
 121 000e FFF7FEFF 		bl	my_mem_init
 122              	.LVL8:
  49:app/main.c    **** 	bsp_TimerInit(&tiktimer);
 123              		.loc 1 49 0
 124 0012 0A48     		ldr	r0, .L8
 125 0014 FFF7FEFF 		bl	bsp_TimerInit
 126              	.LVL9:
  50:app/main.c    **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s 			page 4


  51:app/main.c    **** 	runledinit();
 127              		.loc 1 51 0
 128 0018 FFF7FEFF 		bl	runledinit
 129              	.LVL10:
  52:app/main.c    **** 	msg = mymalloc(100);
 130              		.loc 1 52 0
 131 001c 6420     		movs	r0, #100
 132 001e FFF7FEFF 		bl	mymalloc
 133              	.LVL11:
 134 0022 074B     		ldr	r3, .L8+4
 135 0024 1860     		str	r0, [r3]
  53:app/main.c    **** 	util = CreateDataUtil(DataUtil_UART,&uartpara);
 136              		.loc 1 53 0
 137 0026 0749     		ldr	r1, .L8+8
 138 0028 0020     		movs	r0, #0
 139 002a FFF7FEFF 		bl	CreateDataUtil
 140              	.LVL12:
 141 002e 064B     		ldr	r3, .L8+12
 142 0030 1860     		str	r0, [r3]
  54:app/main.c    **** 	CreateTask(&uploadTsk);
 143              		.loc 1 54 0
 144 0032 0648     		ldr	r0, .L8+16
 145 0034 FFF7FEFF 		bl	CreateTask
 146              	.LVL13:
  55:app/main.c    **** 	ExecTask();
 147              		.loc 1 55 0
 148 0038 FFF7FEFF 		bl	ExecTask
 149              	.LVL14:
 150              	.L9:
 151              		.align	2
 152              	.L8:
 153 003c 00000000 		.word	.LANCHOR1
 154 0040 00000000 		.word	msg
 155 0044 00000000 		.word	.LANCHOR2
 156 0048 00000000 		.word	util
 157 004c 00000000 		.word	.LANCHOR3
 158              		.cfi_endproc
 159              	.LFE68:
 161              		.global	uploadTsk
 162              		.comm	msg,4,4
 163              		.global	test
 164              		.global	uartpara
 165              		.comm	util,4,4
 166              		.global	tiktimer
 167              		.section	.data.test,"aw",%progbits
 168              		.align	3
 169              		.set	.LANCHOR0,. + 0
 172              	test:
 173 0000 6DE7FBA9 		.word	2851858285
 174 0004 F1523740 		.word	1077367537
 175              		.section	.data.tiktimer,"aw",%progbits
 176              		.align	2
 177              		.set	.LANCHOR1,. + 0
 180              	tiktimer:
 181 0000 00000040 		.word	1073741824
 182 0004 00       		.byte	0
 183 0005 00       		.space	1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s 			page 5


 184 0006 0100     		.short	1
 185 0008 00000000 		.word	TskTickHandler
 186              		.section	.data.uartpara,"aw",%progbits
 187              		.align	2
 188              		.set	.LANCHOR2,. + 0
 191              	uartpara:
 192 0000 02       		.byte	2
 193 0001 000000   		.space	3
 194 0004 00C20100 		.word	115200
 195 0008 0004     		.short	1024
 196 000a 0004     		.short	1024
 197 000c 00000000 		.word	OnMsgRecv
 198              		.section	.data.uploadTsk,"aw",%progbits
 199              		.align	3
 200              		.set	.LANCHOR3,. + 0
 203              	uploadTsk:
 204 0000 00000000 		.space	48
 204      00000000 
 204      00000000 
 204      00000000 
 204      00000000 
 205 0030 E8030000 		.word	1000
 206 0034 00000000 		.word	0
 207 0038 00000000 		.space	4
 208 003c 00000000 		.word	UploadTsk
 209 0040 00000000 		.space	8
 209      00000000 
 210              		.section	.rodata.UploadTsk.str1.4,"aMS",%progbits,1
 211              		.align	2
 212              	.LC0:
 213 0000 74657374 		.ascii	"test:%f\000"
 213      3A256600 
 214              		.text
 215              	.Letext0:
 216              		.file 2 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/machine/_
 217              		.file 3 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/lock.
 218              		.file 4 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_type
 219              		.file 5 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-7-2017-q4-major/lib/gcc/arm-none-eabi/7.2.1/inc
 220              		.file 6 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/reent
 221              		.file 7 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_stdi
 222              		.file 8 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/stdlib.h"
 223              		.file 9 "Inc/core_cm3.h"
 224              		.file 10 "Inc/stm32f103xe.h"
 225              		.file 11 "startup/inc/sys.h"
 226              		.file 12 "tools/inc/malloc.h"
 227              		.file 13 "tools/inc/tskmanager.h"
 228              		.file 14 "drivers/inc/bsp_f1xx_timer.h"
 229              		.file 15 "drivers/inc/datautil.h"
 230              		.file 16 "app/inc/runled.h"
 231              		.file 17 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/stdio.h"
 232              		.file 18 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/string.h
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s 			page 6


DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:16     .text.OnMsgRecv:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:23     .text.OnMsgRecv:0000000000000000 OnMsgRecv
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:38     .text.UploadTsk:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:45     .text.UploadTsk:0000000000000000 UploadTsk
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:85     .text.UploadTsk:0000000000000028 $d
                            *COM*:0000000000000004 msg
                            *COM*:0000000000000004 util
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:93     .text.main:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:100    .text.main:0000000000000000 main
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:153    .text.main:000000000000003c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:203    .data.uploadTsk:0000000000000000 uploadTsk
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:172    .data.test:0000000000000000 test
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:191    .data.uartpara:0000000000000000 uartpara
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:180    .data.tiktimer:0000000000000000 tiktimer
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:168    .data.test:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:176    .data.tiktimer:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:187    .data.uartpara:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:199    .data.uploadTsk:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccfc1djL.s:211    .rodata.UploadTsk.str1.4:0000000000000000 $d

UNDEFINED SYMBOLS
sprintf
strlen
Stm32_Clock_Init
delay_init
my_mem_init
bsp_TimerInit
runledinit
mymalloc
CreateDataUtil
CreateTask
ExecTask
TskTickHandler

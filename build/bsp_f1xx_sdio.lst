ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"bsp_f1xx_sdio.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.SDIO_Clock_Set,"ax",%progbits
  16              		.align	1
  17              		.global	SDIO_Clock_Set
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	SDIO_Clock_Set:
  24              	.LFB67:
  25              		.file 1 "drivers/bsp_f1xx_sdio.c"
   1:drivers/bsp_f1xx_sdio.c **** //
   2:drivers/bsp_f1xx_sdio.c **** // Created by Âë®Ê¥ã on 2020/3/31.
   3:drivers/bsp_f1xx_sdio.c **** //
   4:drivers/bsp_f1xx_sdio.c **** 
   5:drivers/bsp_f1xx_sdio.c **** #include "bsp_f1xx_sdio.h"
   6:drivers/bsp_f1xx_sdio.c **** 
   7:drivers/bsp_f1xx_sdio.c **** static u8 CardType=SDIO_STD_CAPACITY_SD_CARD_V1_1;		//SDÂç°Á±ªÂûãÔºàÈªòËÆ§‰∏∫1.xÂç°Ôºâ
   8:drivers/bsp_f1xx_sdio.c **** static u32 CSD_Tab[4],CID_Tab[4],RCA=0;					//SDÂç°CSD,CID‰ª•ÂèäÁõ∏ÂØπÂú∞ÂùÄ(RCA)Êï∞ÊçÆ
   9:drivers/bsp_f1xx_sdio.c **** static u8 DeviceMode=SD_DMA_MODE;		   				//Â∑•‰ΩúÊ®°Âºè,Ê≥®ÊÑè,Â∑•‰ΩúÊ®°ÂºèÂøÖÈ°ªÈÄöËøáSD_SetDevic
  10:drivers/bsp_f1xx_sdio.c **** static u8 StopCondition=0; 								//ÊòØÂê¶ÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊ†áÂøó‰Ωç,DMAÂ§öÂùóËØªÂÜôÁöÑÊó∂ÂÄôÁî®Â
  11:drivers/bsp_f1xx_sdio.c **** volatile SD_Error TransferError=SD_OK;					//Êï∞ÊçÆ‰º†ËæìÈîôËØØÊ†áÂøó,DMAËØªÂÜôÊó∂‰ΩøÁî®
  12:drivers/bsp_f1xx_sdio.c **** volatile u8 TransferEnd=0;								//‰º†ËæìÁªìÊùüÊ†áÂøó,DMAËØªÂÜôÊó∂‰ΩøÁî®
  13:drivers/bsp_f1xx_sdio.c **** SD_CardInfo SDCardInfo;									//SDÂç°‰ø°ÊÅØ
  14:drivers/bsp_f1xx_sdio.c **** 
  15:drivers/bsp_f1xx_sdio.c **** //SD_ReadDisk/SD_WriteDiskÂáΩÊï∞‰∏ìÁî®buf,ÂΩìËøô‰∏§‰∏™ÂáΩÊï∞ÁöÑÊï∞ÊçÆÁºìÂ≠òÂå∫Âú∞ÂùÄ‰∏çÊòØ4Â≠óËäÇÂØ
  16:drivers/bsp_f1xx_sdio.c **** //ÈúÄË¶ÅÁî®Âà∞ËØ•Êï∞ÁªÑ,Á°Æ‰øùÊï∞ÊçÆÁºìÂ≠òÂå∫Âú∞ÂùÄÊòØ4Â≠óËäÇÂØπÈΩêÁöÑ.
  17:drivers/bsp_f1xx_sdio.c **** __attribute__((aligned(4))) u8 SDIO_DATA_BUFFER[512];
  18:drivers/bsp_f1xx_sdio.c **** 
  19:drivers/bsp_f1xx_sdio.c **** 
  20:drivers/bsp_f1xx_sdio.c **** //ÂàùÂßãÂåñSDÂç°
  21:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å;(0,Êó†ÈîôËØØ)
  22:drivers/bsp_f1xx_sdio.c **** SD_Error bsp_SD_Init(void)
  23:drivers/bsp_f1xx_sdio.c **** {
  24:drivers/bsp_f1xx_sdio.c ****     u8 clkdiv=0;
  25:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
  26:drivers/bsp_f1xx_sdio.c ****     //SDIO IOÂè£ÂàùÂßãÂåñ
  27:drivers/bsp_f1xx_sdio.c ****     RCC->APB2ENR|=1<<4;    	//‰ΩøËÉΩPORTCÊó∂Èíü
  28:drivers/bsp_f1xx_sdio.c ****     RCC->APB2ENR|=1<<5;    	//‰ΩøËÉΩPORTDÊó∂Èíü
  29:drivers/bsp_f1xx_sdio.c ****     RCC->AHBENR|=1<<10;    	//‰ΩøËÉΩSDIOÊó∂Èíü
  30:drivers/bsp_f1xx_sdio.c ****     RCC->AHBENR|=1<<1;    	//‰ΩøËÉΩDMA2Êó∂Èíü
  31:drivers/bsp_f1xx_sdio.c **** 
  32:drivers/bsp_f1xx_sdio.c ****     GPIOC->CRH&=0XFFF00000;
  33:drivers/bsp_f1xx_sdio.c ****     GPIOC->CRH|=0X000BBBBB;	//PC.8~12 Â§çÁî®ËæìÂá∫
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 2


  34:drivers/bsp_f1xx_sdio.c **** 
  35:drivers/bsp_f1xx_sdio.c ****     GPIOD->CRL&=0XFFFFF0FF;
  36:drivers/bsp_f1xx_sdio.c ****     GPIOD->CRL|=0X00000B00;	//PD2Â§çÁî®ËæìÂá∫,PD7 ‰∏äÊãâËæìÂÖ•
  37:drivers/bsp_f1xx_sdio.c ****     //SDIOÂ§ñËÆæÂØÑÂ≠òÂô®ËÆæÁΩÆ‰∏∫ÈªòËÆ§ÂÄº
  38:drivers/bsp_f1xx_sdio.c ****     SDIO->POWER=0x00000000;
  39:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR=0x00000000;
  40:drivers/bsp_f1xx_sdio.c ****     SDIO->ARG=0x00000000;
  41:drivers/bsp_f1xx_sdio.c ****     SDIO->CMD=0x00000000;
  42:drivers/bsp_f1xx_sdio.c ****     SDIO->DTIMER=0x00000000;
  43:drivers/bsp_f1xx_sdio.c ****     SDIO->DLEN=0x00000000;
  44:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=0x00000000;
  45:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0x00C007FF;
  46:drivers/bsp_f1xx_sdio.c ****     SDIO->MASK=0x00000000;
  47:drivers/bsp_f1xx_sdio.c ****     MY_NVIC_Init(1,0,SDIO_IRQn,1);		//SDIO‰∏≠Êñ≠ÈÖçÁΩÆ
  48:drivers/bsp_f1xx_sdio.c ****     errorstatus=SD_PowerON();			//SDÂç°‰∏äÁîµ
  49:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)errorstatus=SD_InitializeCards();			//ÂàùÂßãÂåñSDÂç°
  50:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)errorstatus=SD_GetCardInfo(&SDCardInfo);	//Ëé∑ÂèñÂç°‰ø°ÊÅØ
  51:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)errorstatus=SD_SelectDeselect((u32)(SDCardInfo.RCA<<16));//ÈÄâ‰∏≠SDÂç°
  52:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)errorstatus=SD_EnableWideBusOperation(1);	//4‰ΩçÂÆΩÂ∫¶,Â¶ÇÊûúÊòØMMCÂç°,Âà
  53:drivers/bsp_f1xx_sdio.c ****     if((errorstatus==SD_OK)||(SDIO_MULTIMEDIA_CARD==CardType))
  54:drivers/bsp_f1xx_sdio.c ****     {
  55:drivers/bsp_f1xx_sdio.c ****         if(SDCardInfo.CardType==SDIO_STD_CAPACITY_SD_CARD_V1_1||SDCardInfo.CardType==SDIO_STD_CAPAC
  56:drivers/bsp_f1xx_sdio.c ****         {
  57:drivers/bsp_f1xx_sdio.c ****             clkdiv=SDIO_TRANSFER_CLK_DIV+6;	//V1.1/V2.0Âç°ÔºåËÆæÁΩÆÊúÄÈ´ò72/12=6Mhz
  58:drivers/bsp_f1xx_sdio.c ****         }else clkdiv=SDIO_TRANSFER_CLK_DIV;	//SDHCÁ≠âÂÖ∂‰ªñÂç°ÔºåËÆæÁΩÆÊúÄÈ´ò72/6=12Mhz
  59:drivers/bsp_f1xx_sdio.c ****         SDIO_Clock_Set(clkdiv);				//ËÆæÁΩÆÊó∂ÈíüÈ¢ëÁéá,SDIOÊó∂ÈíüËÆ°ÁÆóÂÖ¨Âºè:SDIO_CKÊó∂Èíü=SDIOCL
  60:drivers/bsp_f1xx_sdio.c ****         errorstatus=SD_SetDeviceMode(SD_DMA_MODE);	//ËÆæÁΩÆ‰∏∫DMAÊ®°Âºè
  61:drivers/bsp_f1xx_sdio.c ****         //errorstatus=SD_SetDeviceMode(SD_POLLING_MODE);	//ËÆæÁΩÆ‰∏∫Êü•ËØ¢Ê®°Âºè
  62:drivers/bsp_f1xx_sdio.c ****     }
  63:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
  64:drivers/bsp_f1xx_sdio.c **** }
  65:drivers/bsp_f1xx_sdio.c **** //SDIOÊó∂ÈíüÂàùÂßãÂåñËÆæÁΩÆ
  66:drivers/bsp_f1xx_sdio.c **** //clkdiv:Êó∂ÈíüÂàÜÈ¢ëÁ≥ªÊï∞
  67:drivers/bsp_f1xx_sdio.c **** //CKÊó∂Èíü=SDIOCLK/[clkdiv+2];(SDIOCLKÊó∂ÈíüÂõ∫ÂÆö‰∏∫48Mhz)
  68:drivers/bsp_f1xx_sdio.c **** void SDIO_Clock_Set(u8 clkdiv)
  69:drivers/bsp_f1xx_sdio.c **** {
  26              		.loc 1 69 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              		@ link register save eliminated.
  31              	.LVL0:
  70:drivers/bsp_f1xx_sdio.c ****     u32 tmpreg=SDIO->CLKCR;
  32              		.loc 1 70 0
  33 0000 034A     		ldr	r2, .L2
  34 0002 5368     		ldr	r3, [r2, #4]
  35              	.LVL1:
  71:drivers/bsp_f1xx_sdio.c ****     tmpreg&=0XFFFFFF00;
  36              		.loc 1 71 0
  37 0004 23F0FF03 		bic	r3, r3, #255
  38              	.LVL2:
  72:drivers/bsp_f1xx_sdio.c ****     tmpreg|=clkdiv;
  39              		.loc 1 72 0
  40 0008 1843     		orrs	r0, r0, r3
  41              	.LVL3:
  73:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR=tmpreg;
  42              		.loc 1 73 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 3


  43 000a 5060     		str	r0, [r2, #4]
  74:drivers/bsp_f1xx_sdio.c **** }
  44              		.loc 1 74 0
  45 000c 7047     		bx	lr
  46              	.L3:
  47 000e 00BF     		.align	2
  48              	.L2:
  49 0010 00800140 		.word	1073840128
  50              		.cfi_endproc
  51              	.LFE67:
  53              		.section	.text.SDIO_Send_Cmd,"ax",%progbits
  54              		.align	1
  55              		.global	SDIO_Send_Cmd
  56              		.syntax unified
  57              		.thumb
  58              		.thumb_func
  59              		.fpu softvfp
  61              	SDIO_Send_Cmd:
  62              	.LFB68:
  75:drivers/bsp_f1xx_sdio.c **** //SDIOÂèëÈÄÅÂëΩ‰ª§ÂáΩÊï∞
  76:drivers/bsp_f1xx_sdio.c **** //cmdindex:ÂëΩ‰ª§Á¥¢Âºï,‰ΩéÂÖ≠‰ΩçÊúâÊïà
  77:drivers/bsp_f1xx_sdio.c **** //waitrsp:ÊúüÂæÖÁöÑÁõ∏Â∫î.00/10,Êó†ÂìçÂ∫î;01,Áü≠ÂìçÂ∫î;11,ÈïøÂìçÂ∫î
  78:drivers/bsp_f1xx_sdio.c **** //arg:ÂèÇÊï∞
  79:drivers/bsp_f1xx_sdio.c **** void SDIO_Send_Cmd(u8 cmdindex,u8 waitrsp,u32 arg)
  80:drivers/bsp_f1xx_sdio.c **** {
  63              		.loc 1 80 0
  64              		.cfi_startproc
  65              		@ args = 0, pretend = 0, frame = 0
  66              		@ frame_needed = 0, uses_anonymous_args = 0
  67              		@ link register save eliminated.
  68              	.LVL4:
  69 0000 10B4     		push	{r4}
  70              	.LCFI0:
  71              		.cfi_def_cfa_offset 4
  72              		.cfi_offset 4, -4
  81:drivers/bsp_f1xx_sdio.c ****     u32 tmpreg;
  82:drivers/bsp_f1xx_sdio.c ****     SDIO->ARG=arg;
  73              		.loc 1 82 0
  74 0002 084C     		ldr	r4, .L6
  75 0004 A260     		str	r2, [r4, #8]
  83:drivers/bsp_f1xx_sdio.c ****     tmpreg=SDIO->CMD;
  76              		.loc 1 83 0
  77 0006 E368     		ldr	r3, [r4, #12]
  78              	.LVL5:
  84:drivers/bsp_f1xx_sdio.c ****     tmpreg&=0XFFFFF800;		//Ê∏ÖÈô§indexÂíåwaitrsp
  79              		.loc 1 84 0
  80 0008 23F4FF63 		bic	r3, r3, #2040
  81              	.LVL6:
  82 000c 23F00703 		bic	r3, r3, #7
  83              	.LVL7:
  85:drivers/bsp_f1xx_sdio.c ****     tmpreg|=cmdindex&0X3F;	//ËÆæÁΩÆÊñ∞ÁöÑindex
  84              		.loc 1 85 0
  85 0010 00F03F00 		and	r0, r0, #63
  86              	.LVL8:
  87 0014 1843     		orrs	r0, r0, r3
  88              	.LVL9:
  86:drivers/bsp_f1xx_sdio.c ****     tmpreg|=waitrsp<<6;		//ËÆæÁΩÆÊñ∞ÁöÑwait rsp
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 4


  89              		.loc 1 86 0
  90 0016 40EA8110 		orr	r0, r0, r1, lsl #6
  91              	.LVL10:
  87:drivers/bsp_f1xx_sdio.c ****     tmpreg|=0<<8;			//Êó†Á≠âÂæÖ
  88:drivers/bsp_f1xx_sdio.c ****     tmpreg|=1<<10;			//ÂëΩ‰ª§ÈÄöÈÅìÁä∂ÊÄÅÊú∫‰ΩøËÉΩ
  92              		.loc 1 88 0
  93 001a 40F48060 		orr	r0, r0, #1024
  94              	.LVL11:
  89:drivers/bsp_f1xx_sdio.c ****     SDIO->CMD=tmpreg;
  95              		.loc 1 89 0
  96 001e E060     		str	r0, [r4, #12]
  90:drivers/bsp_f1xx_sdio.c **** }
  97              		.loc 1 90 0
  98 0020 10BC     		pop	{r4}
  99              	.LCFI1:
 100              		.cfi_restore 4
 101              		.cfi_def_cfa_offset 0
 102 0022 7047     		bx	lr
 103              	.L7:
 104              		.align	2
 105              	.L6:
 106 0024 00800140 		.word	1073840128
 107              		.cfi_endproc
 108              	.LFE68:
 110              		.section	.text.SDIO_Send_Data_Cfg,"ax",%progbits
 111              		.align	1
 112              		.global	SDIO_Send_Data_Cfg
 113              		.syntax unified
 114              		.thumb
 115              		.thumb_func
 116              		.fpu softvfp
 118              	SDIO_Send_Data_Cfg:
 119              	.LFB69:
  91:drivers/bsp_f1xx_sdio.c **** //SDIOÂèëÈÄÅÊï∞ÊçÆÈÖçÁΩÆÂáΩÊï∞
  92:drivers/bsp_f1xx_sdio.c **** //datatimeout:Ë∂ÖÊó∂Êó∂Èó¥ËÆæÁΩÆ
  93:drivers/bsp_f1xx_sdio.c **** //datalen:‰º†ËæìÊï∞ÊçÆÈïøÂ∫¶,‰Ωé25‰ΩçÊúâÊïà,ÂøÖÈ°ª‰∏∫ÂùóÂ§ßÂ∞èÁöÑÊï¥Êï∞ÂÄç
  94:drivers/bsp_f1xx_sdio.c **** //blksize:ÂùóÂ§ßÂ∞è.ÂÆûÈôÖÂ§ßÂ∞è‰∏∫:2^blksizeÂ≠óËäÇ
  95:drivers/bsp_f1xx_sdio.c **** //dir:Êï∞ÊçÆ‰º†ËæìÊñπÂêë:0,ÊéßÂà∂Âô®Âà∞Âç°;1,Âç°Âà∞ÊéßÂà∂Âô®;
  96:drivers/bsp_f1xx_sdio.c **** void SDIO_Send_Data_Cfg(u32 datatimeout,u32 datalen,u8 blksize,u8 dir)
  97:drivers/bsp_f1xx_sdio.c **** {
 120              		.loc 1 97 0
 121              		.cfi_startproc
 122              		@ args = 0, pretend = 0, frame = 0
 123              		@ frame_needed = 0, uses_anonymous_args = 0
 124              		@ link register save eliminated.
 125              	.LVL12:
 126 0000 10B4     		push	{r4}
 127              	.LCFI2:
 128              		.cfi_def_cfa_offset 4
 129              		.cfi_offset 4, -4
  98:drivers/bsp_f1xx_sdio.c ****     u32 tmpreg;
  99:drivers/bsp_f1xx_sdio.c ****     SDIO->DTIMER=datatimeout;
 130              		.loc 1 99 0
 131 0002 094C     		ldr	r4, .L10
 132 0004 6062     		str	r0, [r4, #36]
 100:drivers/bsp_f1xx_sdio.c ****     SDIO->DLEN=datalen&0X1FFFFFF;	//‰Ωé25‰ΩçÊúâÊïà
 133              		.loc 1 100 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 5


 134 0006 21F07E41 		bic	r1, r1, #-33554432
 135              	.LVL13:
 136 000a A162     		str	r1, [r4, #40]
 101:drivers/bsp_f1xx_sdio.c ****     tmpreg=SDIO->DCTRL;
 137              		.loc 1 101 0
 138 000c E16A     		ldr	r1, [r4, #44]
 139              	.LVL14:
 102:drivers/bsp_f1xx_sdio.c ****     tmpreg&=0xFFFFFF08;		//Ê∏ÖÈô§‰πãÂâçÁöÑËÆæÁΩÆ.
 140              		.loc 1 102 0
 141 000e 21F0F701 		bic	r1, r1, #247
 142              	.LVL15:
 103:drivers/bsp_f1xx_sdio.c ****     tmpreg|=blksize<<4;		//ËÆæÁΩÆÂùóÂ§ßÂ∞è
 143              		.loc 1 103 0
 144 0012 41EA0211 		orr	r1, r1, r2, lsl #4
 145              	.LVL16:
 104:drivers/bsp_f1xx_sdio.c ****     tmpreg|=0<<2;			//ÂùóÊï∞ÊçÆ‰º†Ëæì
 105:drivers/bsp_f1xx_sdio.c ****     tmpreg|=(dir&0X01)<<1;	//ÊñπÂêëÊéßÂà∂
 146              		.loc 1 105 0
 147 0016 5A00     		lsls	r2, r3, #1
 148              	.LVL17:
 149 0018 02F00202 		and	r2, r2, #2
 150 001c 0A43     		orrs	r2, r2, r1
 151              	.LVL18:
 106:drivers/bsp_f1xx_sdio.c ****     tmpreg|=1<<0;			//Êï∞ÊçÆ‰º†Ëæì‰ΩøËÉΩ,DPSMÁä∂ÊÄÅÊú∫
 152              		.loc 1 106 0
 153 001e 42F00102 		orr	r2, r2, #1
 154              	.LVL19:
 107:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=tmpreg;
 155              		.loc 1 107 0
 156 0022 E262     		str	r2, [r4, #44]
 108:drivers/bsp_f1xx_sdio.c **** }
 157              		.loc 1 108 0
 158 0024 10BC     		pop	{r4}
 159              	.LCFI3:
 160              		.cfi_restore 4
 161              		.cfi_def_cfa_offset 0
 162 0026 7047     		bx	lr
 163              	.L11:
 164              		.align	2
 165              	.L10:
 166 0028 00800140 		.word	1073840128
 167              		.cfi_endproc
 168              	.LFE69:
 170              		.section	.text.SD_PowerOFF,"ax",%progbits
 171              		.align	1
 172              		.global	SD_PowerOFF
 173              		.syntax unified
 174              		.thumb
 175              		.thumb_func
 176              		.fpu softvfp
 178              	SD_PowerOFF:
 179              	.LFB71:
 109:drivers/bsp_f1xx_sdio.c **** 
 110:drivers/bsp_f1xx_sdio.c **** //Âç°‰∏äÁîµ
 111:drivers/bsp_f1xx_sdio.c **** //Êü•ËØ¢ÊâÄÊúâSDIOÊé•Âè£‰∏äÁöÑÂç°ËÆæÂ§á,Âπ∂Êü•ËØ¢ÂÖ∂ÁîµÂéãÂíåÈÖçÁΩÆÊó∂Èíü
 112:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å;(0,Êó†ÈîôËØØ)
 113:drivers/bsp_f1xx_sdio.c **** SD_Error SD_PowerON(void)
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 6


 114:drivers/bsp_f1xx_sdio.c **** {
 115:drivers/bsp_f1xx_sdio.c ****     u8 i=0;
 116:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
 117:drivers/bsp_f1xx_sdio.c ****     u32 response=0,count=0,validvoltage=0;
 118:drivers/bsp_f1xx_sdio.c ****     u32 SDType=SD_STD_CAPACITY;
 119:drivers/bsp_f1xx_sdio.c ****     //ÈÖçÁΩÆCLKCRÂØÑÂ≠òÂô®
 120:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR=0;				//Ê∏ÖÁ©∫CLKCR‰πãÂâçÁöÑËÆæÁΩÆ
 121:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR|=0<<9;			//ÈùûÁúÅÁîµÊ®°Âºè
 122:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR|=0<<10;			//ÂÖ≥Èó≠ÊóÅË∑Ø,CKÊ†πÊçÆÂàÜÈ¢ëËÆæÁΩÆËæìÂá∫
 123:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR|=0<<11;			//1‰ΩçÊï∞ÊçÆÂÆΩÂ∫¶
 124:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR|=0<<13;			//SDIOCLK‰∏äÂçáÊ≤ø‰∫ßÁîüSDIOCK
 125:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR|=0<<14;			//ÂÖ≥Èó≠Á°¨‰ª∂ÊµÅÊéßÂà∂
 126:drivers/bsp_f1xx_sdio.c ****     SDIO_Clock_Set(SDIO_INIT_CLK_DIV);//ËÆæÁΩÆÊó∂ÈíüÈ¢ëÁéá(ÂàùÂßãÂåñÁöÑÊó∂ÂÄô,‰∏çËÉΩË∂ÖËøá400Khz)
 127:drivers/bsp_f1xx_sdio.c ****     SDIO->POWER=0X03;			//‰∏äÁîµÁä∂ÊÄÅ,ÂºÄÂêØÂç°Êó∂Èíü
 128:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR|=1<<8;			//SDIOCK‰ΩøËÉΩ
 129:drivers/bsp_f1xx_sdio.c ****     for(i=0;i<74;i++)
 130:drivers/bsp_f1xx_sdio.c ****     {
 131:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_GO_IDLE_STATE,0,0);//ÂèëÈÄÅCMD0ËøõÂÖ•IDLE STAGEÊ®°ÂºèÂëΩ‰ª§.
 132:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdError();
 133:drivers/bsp_f1xx_sdio.c ****         if(errorstatus==SD_OK)break;
 134:drivers/bsp_f1xx_sdio.c ****     }
 135:drivers/bsp_f1xx_sdio.c ****     if(errorstatus)return errorstatus;//ËøîÂõûÈîôËØØÁä∂ÊÄÅ
 136:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SDIO_SEND_IF_COND,1,SD_CHECK_PATTERN);//ÂèëÈÄÅCMD8,Áü≠ÂìçÂ∫î,Ê£ÄÊü•SDÂç°Êé•Âè£Áâπ
 137:drivers/bsp_f1xx_sdio.c ****     //arg[11:8]:01,ÊîØÊåÅÁîµÂéãËåÉÂõ¥,2.7~3.6V
 138:drivers/bsp_f1xx_sdio.c ****     //arg[7:0]:ÈªòËÆ§0XAA
 139:drivers/bsp_f1xx_sdio.c ****     //ËøîÂõûÂìçÂ∫î7
 140:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp7Error();						//Á≠âÂæÖR7ÂìçÂ∫î
 141:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK) 								//R7ÂìçÂ∫îÊ≠£Â∏∏
 142:drivers/bsp_f1xx_sdio.c ****     {
 143:drivers/bsp_f1xx_sdio.c ****         CardType=SDIO_STD_CAPACITY_SD_CARD_V2_0;		//SD 2.0Âç°
 144:drivers/bsp_f1xx_sdio.c ****         SDType=SD_HIGH_CAPACITY;			   			//È´òÂÆπÈáèÂç°
 145:drivers/bsp_f1xx_sdio.c ****     }
 146:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_APP_CMD,1,0);					//ÂèëÈÄÅCMD55,Áü≠ÂìçÂ∫î
 147:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_APP_CMD); 		 	//Á≠âÂæÖR1ÂìçÂ∫î
 148:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)//SD2.0/SD 1.1,Âê¶Âàô‰∏∫MMCÂç°
 149:drivers/bsp_f1xx_sdio.c ****     {
 150:drivers/bsp_f1xx_sdio.c ****         //SDÂç°,ÂèëÈÄÅACMD41 SD_APP_OP_COND,ÂèÇÊï∞‰∏∫:0x80100000
 151:drivers/bsp_f1xx_sdio.c ****         while((!validvoltage)&&(count<SD_MAX_VOLT_TRIAL))
 152:drivers/bsp_f1xx_sdio.c ****         {
 153:drivers/bsp_f1xx_sdio.c ****             SDIO_Send_Cmd(SD_CMD_APP_CMD,1,0);				//ÂèëÈÄÅCMD55,Áü≠ÂìçÂ∫î
 154:drivers/bsp_f1xx_sdio.c ****             errorstatus=CmdResp1Error(SD_CMD_APP_CMD); 	 	//Á≠âÂæÖR1ÂìçÂ∫î
 155:drivers/bsp_f1xx_sdio.c ****             if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 156:drivers/bsp_f1xx_sdio.c ****             SDIO_Send_Cmd(SD_CMD_SD_APP_OP_COND,1,SD_VOLTAGE_WINDOW_SD|SDType);//ÂèëÈÄÅACMD41,Áü≠Âì
 157:drivers/bsp_f1xx_sdio.c ****             errorstatus=CmdResp3Error(); 					//Á≠âÂæÖR3ÂìçÂ∫î
 158:drivers/bsp_f1xx_sdio.c ****             if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 159:drivers/bsp_f1xx_sdio.c ****             response=SDIO->RESP1;;			   				//ÂæóÂà∞ÂìçÂ∫î
 160:drivers/bsp_f1xx_sdio.c ****             validvoltage=(((response>>31)==1)?1:0);			//Âà§Êñ≠SDÂç°‰∏äÁîµÊòØÂê¶ÂÆåÊàê
 161:drivers/bsp_f1xx_sdio.c ****             count++;
 162:drivers/bsp_f1xx_sdio.c ****         }
 163:drivers/bsp_f1xx_sdio.c ****         if(count>=SD_MAX_VOLT_TRIAL)
 164:drivers/bsp_f1xx_sdio.c ****         {
 165:drivers/bsp_f1xx_sdio.c ****             errorstatus=SD_INVALID_VOLTRANGE;
 166:drivers/bsp_f1xx_sdio.c ****             return errorstatus;
 167:drivers/bsp_f1xx_sdio.c ****         }
 168:drivers/bsp_f1xx_sdio.c ****         if(response&=SD_HIGH_CAPACITY)
 169:drivers/bsp_f1xx_sdio.c ****         {
 170:drivers/bsp_f1xx_sdio.c ****             CardType=SDIO_HIGH_CAPACITY_SD_CARD;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 7


 171:drivers/bsp_f1xx_sdio.c ****         }
 172:drivers/bsp_f1xx_sdio.c ****     }else//MMCÂç°
 173:drivers/bsp_f1xx_sdio.c ****     {
 174:drivers/bsp_f1xx_sdio.c ****         //MMCÂç°,ÂèëÈÄÅCMD1 SDIO_SEND_OP_COND,ÂèÇÊï∞‰∏∫:0x80FF8000
 175:drivers/bsp_f1xx_sdio.c ****         while((!validvoltage)&&(count<SD_MAX_VOLT_TRIAL))
 176:drivers/bsp_f1xx_sdio.c ****         {
 177:drivers/bsp_f1xx_sdio.c ****             SDIO_Send_Cmd(SD_CMD_SEND_OP_COND,1,SD_VOLTAGE_WINDOW_MMC);//ÂèëÈÄÅCMD1,Áü≠ÂìçÂ∫î
 178:drivers/bsp_f1xx_sdio.c ****             errorstatus=CmdResp3Error(); 					//Á≠âÂæÖR3ÂìçÂ∫î
 179:drivers/bsp_f1xx_sdio.c ****             if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 180:drivers/bsp_f1xx_sdio.c ****             response=SDIO->RESP1;;			   				//ÂæóÂà∞ÂìçÂ∫î
 181:drivers/bsp_f1xx_sdio.c ****             validvoltage=(((response>>31)==1)?1:0);
 182:drivers/bsp_f1xx_sdio.c ****             count++;
 183:drivers/bsp_f1xx_sdio.c ****         }
 184:drivers/bsp_f1xx_sdio.c ****         if(count>=SD_MAX_VOLT_TRIAL)
 185:drivers/bsp_f1xx_sdio.c ****         {
 186:drivers/bsp_f1xx_sdio.c ****             errorstatus=SD_INVALID_VOLTRANGE;
 187:drivers/bsp_f1xx_sdio.c ****             return errorstatus;
 188:drivers/bsp_f1xx_sdio.c ****         }
 189:drivers/bsp_f1xx_sdio.c ****         CardType=SDIO_MULTIMEDIA_CARD;
 190:drivers/bsp_f1xx_sdio.c ****     }
 191:drivers/bsp_f1xx_sdio.c ****     return(errorstatus);
 192:drivers/bsp_f1xx_sdio.c **** }
 193:drivers/bsp_f1xx_sdio.c **** //SDÂç° Power OFF
 194:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å;(0,Êó†ÈîôËØØ)
 195:drivers/bsp_f1xx_sdio.c **** SD_Error SD_PowerOFF(void)
 196:drivers/bsp_f1xx_sdio.c **** {
 180              		.loc 1 196 0
 181              		.cfi_startproc
 182              		@ args = 0, pretend = 0, frame = 0
 183              		@ frame_needed = 0, uses_anonymous_args = 0
 184              		@ link register save eliminated.
 197:drivers/bsp_f1xx_sdio.c ****     SDIO->POWER&=~(3<<0);//SDIOÁîµÊ∫êÂÖ≥Èó≠,Êó∂ÈíüÂÅúÊ≠¢
 185              		.loc 1 197 0
 186 0000 034A     		ldr	r2, .L13
 187 0002 1368     		ldr	r3, [r2]
 188 0004 23F00303 		bic	r3, r3, #3
 189 0008 1360     		str	r3, [r2]
 198:drivers/bsp_f1xx_sdio.c ****     return SD_OK;
 199:drivers/bsp_f1xx_sdio.c **** }
 190              		.loc 1 199 0
 191 000a 0020     		movs	r0, #0
 192 000c 7047     		bx	lr
 193              	.L14:
 194 000e 00BF     		.align	2
 195              	.L13:
 196 0010 00800140 		.word	1073840128
 197              		.cfi_endproc
 198              	.LFE71:
 200              		.section	.text.SD_GetCardInfo,"ax",%progbits
 201              		.align	1
 202              		.global	SD_GetCardInfo
 203              		.syntax unified
 204              		.thumb
 205              		.thumb_func
 206              		.fpu softvfp
 208              	SD_GetCardInfo:
 209              	.LFB73:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 8


 200:drivers/bsp_f1xx_sdio.c **** //ÂàùÂßãÂåñÊâÄÊúâÁöÑÂç°,Âπ∂ËÆ©Âç°ËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅ
 201:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å
 202:drivers/bsp_f1xx_sdio.c **** SD_Error SD_InitializeCards(void)
 203:drivers/bsp_f1xx_sdio.c **** {
 204:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
 205:drivers/bsp_f1xx_sdio.c ****     u16 rca = 0x01;
 206:drivers/bsp_f1xx_sdio.c ****     if((SDIO->POWER&0X03)==0)return SD_REQUEST_NOT_APPLICABLE;//Ê£ÄÊü•ÁîµÊ∫êÁä∂ÊÄÅ,Á°Æ‰øù‰∏∫‰∏äÁîµÁ
 207:drivers/bsp_f1xx_sdio.c ****     if(SDIO_SECURE_DIGITAL_IO_CARD!=CardType)			//ÈùûSECURE_DIGITAL_IO_CARD
 208:drivers/bsp_f1xx_sdio.c ****     {
 209:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_ALL_SEND_CID,3,0);			//ÂèëÈÄÅCMD2,ÂèñÂæóCID,ÈïøÂìçÂ∫î
 210:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp2Error(); 					//Á≠âÂæÖR2ÂìçÂ∫î
 211:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 212:drivers/bsp_f1xx_sdio.c ****         CID_Tab[0]=SDIO->RESP1;
 213:drivers/bsp_f1xx_sdio.c ****         CID_Tab[1]=SDIO->RESP2;
 214:drivers/bsp_f1xx_sdio.c ****         CID_Tab[2]=SDIO->RESP3;
 215:drivers/bsp_f1xx_sdio.c ****         CID_Tab[3]=SDIO->RESP4;
 216:drivers/bsp_f1xx_sdio.c ****     }
 217:drivers/bsp_f1xx_sdio.c ****     if((SDIO_STD_CAPACITY_SD_CARD_V1_1==CardType)||(SDIO_STD_CAPACITY_SD_CARD_V2_0==CardType)||(SDI
 218:drivers/bsp_f1xx_sdio.c ****     {
 219:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SET_REL_ADDR,1,0);			//ÂèëÈÄÅCMD3,Áü≠ÂìçÂ∫î
 220:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp6Error(SD_CMD_SET_REL_ADDR,&rca);//Á≠âÂæÖR6ÂìçÂ∫î
 221:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 222:drivers/bsp_f1xx_sdio.c ****     }
 223:drivers/bsp_f1xx_sdio.c ****     if (SDIO_MULTIMEDIA_CARD==CardType)
 224:drivers/bsp_f1xx_sdio.c ****     {
 225:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SET_REL_ADDR,1,(u32)(rca<<16));//ÂèëÈÄÅCMD3,Áü≠ÂìçÂ∫î
 226:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp2Error(); 					//Á≠âÂæÖR2ÂìçÂ∫î
 227:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 228:drivers/bsp_f1xx_sdio.c ****     }
 229:drivers/bsp_f1xx_sdio.c ****     if (SDIO_SECURE_DIGITAL_IO_CARD!=CardType)			//ÈùûSECURE_DIGITAL_IO_CARD
 230:drivers/bsp_f1xx_sdio.c ****     {
 231:drivers/bsp_f1xx_sdio.c ****         RCA = rca;
 232:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SEND_CSD,3,(u32)(rca<<16));//ÂèëÈÄÅCMD9+Âç°RCA,ÂèñÂæóCSD,ÈïøÂìçÂ∫î
 233:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp2Error(); 					//Á≠âÂæÖR2ÂìçÂ∫î
 234:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 235:drivers/bsp_f1xx_sdio.c ****         CSD_Tab[0]=SDIO->RESP1;
 236:drivers/bsp_f1xx_sdio.c ****         CSD_Tab[1]=SDIO->RESP2;
 237:drivers/bsp_f1xx_sdio.c ****         CSD_Tab[2]=SDIO->RESP3;
 238:drivers/bsp_f1xx_sdio.c ****         CSD_Tab[3]=SDIO->RESP4;
 239:drivers/bsp_f1xx_sdio.c ****     }
 240:drivers/bsp_f1xx_sdio.c ****     return SD_OK;//Âç°ÂàùÂßãÂåñÊàêÂäü
 241:drivers/bsp_f1xx_sdio.c **** }
 242:drivers/bsp_f1xx_sdio.c **** //ÂæóÂà∞Âç°‰ø°ÊÅØ
 243:drivers/bsp_f1xx_sdio.c **** //cardinfo:Âç°‰ø°ÊÅØÂ≠òÂÇ®Âå∫
 244:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 245:drivers/bsp_f1xx_sdio.c **** SD_Error SD_GetCardInfo(SD_CardInfo *cardinfo)
 246:drivers/bsp_f1xx_sdio.c **** {
 210              		.loc 1 246 0
 211              		.cfi_startproc
 212              		@ args = 0, pretend = 0, frame = 0
 213              		@ frame_needed = 0, uses_anonymous_args = 0
 214              		@ link register save eliminated.
 215              	.LVL20:
 216 0000 F0B4     		push	{r4, r5, r6, r7}
 217              	.LCFI4:
 218              		.cfi_def_cfa_offset 16
 219              		.cfi_offset 4, -16
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 9


 220              		.cfi_offset 5, -12
 221              		.cfi_offset 6, -8
 222              		.cfi_offset 7, -4
 223 0002 0346     		mov	r3, r0
 224              	.LVL21:
 247:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
 248:drivers/bsp_f1xx_sdio.c ****     u8 tmp=0;
 249:drivers/bsp_f1xx_sdio.c ****     cardinfo->CardType=(u8)CardType; 				//Âç°Á±ªÂûã
 225              		.loc 1 249 0
 226 0004 8B4A     		ldr	r2, .L20
 227 0006 1578     		ldrb	r5, [r2]	@ zero_extendqisi2
 228 0008 80F85650 		strb	r5, [r0, #86]
 250:drivers/bsp_f1xx_sdio.c ****     cardinfo->RCA=(u16)RCA;							//Âç°RCAÂÄº
 229              		.loc 1 250 0
 230 000c 8A4A     		ldr	r2, .L20+4
 231 000e 1288     		ldrh	r2, [r2]
 232 0010 A0F85420 		strh	r2, [r0, #84]	@ movhi
 251:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CSD_Tab[0]&0xFF000000)>>24);
 233              		.loc 1 251 0
 234 0014 894C     		ldr	r4, .L20+8
 235 0016 2268     		ldr	r2, [r4]
 236 0018 100E     		lsrs	r0, r2, #24
 237              	.LVL22:
 238 001a C1B2     		uxtb	r1, r0
 239              	.LVL23:
 252:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.CSDStruct=(tmp&0xC0)>>6;		//CSDÁªìÊûÑ
 240              		.loc 1 252 0
 241 001c 8E09     		lsrs	r6, r1, #6
 242 001e 1E70     		strb	r6, [r3]
 253:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.SysSpecVersion=(tmp&0x3C)>>2;	//2.0ÂçèËÆÆËøòÊ≤°ÂÆö‰πâËøôÈÉ®ÂàÜ(‰∏∫‰øùÁïô),Â∫îË
 243              		.loc 1 253 0
 244 0020 C0F38300 		ubfx	r0, r0, #2, #4
 245 0024 5870     		strb	r0, [r3, #1]
 254:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.Reserved1=tmp&0x03;			//2‰∏™‰øùÁïô‰Ωç
 246              		.loc 1 254 0
 247 0026 01F00301 		and	r1, r1, #3
 248              	.LVL24:
 249 002a 9970     		strb	r1, [r3, #2]
 255:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CSD_Tab[0]&0x00FF0000)>>16);			//Á¨¨1‰∏™Â≠óËäÇ
 250              		.loc 1 255 0
 251 002c C2F30741 		ubfx	r1, r2, #16, #8
 252              	.LVL25:
 256:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.TAAC=tmp;				   		//Êï∞ÊçÆËØªÊó∂Èó¥1
 253              		.loc 1 256 0
 254 0030 D970     		strb	r1, [r3, #3]
 257:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CSD_Tab[0]&0x0000FF00)>>8);	  		//Á¨¨2‰∏™Â≠óËäÇ
 255              		.loc 1 257 0
 256 0032 C2F30721 		ubfx	r1, r2, #8, #8
 257              	.LVL26:
 258:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.NSAC=tmp;		  				//Êï∞ÊçÆËØªÊó∂Èó¥2
 258              		.loc 1 258 0
 259 0036 1971     		strb	r1, [r3, #4]
 260              	.LVL27:
 259:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)(CSD_Tab[0]&0x000000FF);				//Á¨¨3‰∏™Â≠óËäÇ
 260:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.MaxBusClkFrec=tmp;		  		//‰º†ËæìÈÄüÂ∫¶
 261              		.loc 1 260 0
 262 0038 5A71     		strb	r2, [r3, #5]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 10


 261:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CSD_Tab[1]&0xFF000000)>>24);			//Á¨¨4‰∏™Â≠óËäÇ
 263              		.loc 1 261 0
 264 003a 6068     		ldr	r0, [r4, #4]
 265 003c 010E     		lsrs	r1, r0, #24
 266              	.LVL28:
 262:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.CardComdClasses=tmp<<4;    	//Âç°Êåá‰ª§Á±ªÈ´òÂõõ‰Ωç
 263:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CSD_Tab[1]&0x00FF0000)>>16);	 		//Á¨¨5‰∏™Â≠óËäÇ
 267              		.loc 1 263 0
 268 003e C0F30744 		ubfx	r4, r0, #16, #8
 269              	.LVL29:
 264:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.CardComdClasses|=(tmp&0xF0)>>4;//Âç°Êåá‰ª§Á±ª‰ΩéÂõõ‰Ωç
 270              		.loc 1 264 0
 271 0042 2209     		lsrs	r2, r4, #4
 272 0044 42EA0112 		orr	r2, r2, r1, lsl #4
 273 0048 DA80     		strh	r2, [r3, #6]	@ movhi
 265:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.RdBlockLen=tmp&0x0F;	    	//ÊúÄÂ§ßËØªÂèñÊï∞ÊçÆÈïøÂ∫¶
 274              		.loc 1 265 0
 275 004a 04F00F04 		and	r4, r4, #15
 276              	.LVL30:
 277 004e 1C72     		strb	r4, [r3, #8]
 266:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CSD_Tab[1]&0x0000FF00)>>8);			//Á¨¨6‰∏™Â≠óËäÇ
 278              		.loc 1 266 0
 279 0050 010A     		lsrs	r1, r0, #8
 280 0052 CAB2     		uxtb	r2, r1
 281              	.LVL31:
 267:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.PartBlockRead=(tmp&0x80)>>7;	//ÂÖÅËÆ∏ÂàÜÂùóËØª
 282              		.loc 1 267 0
 283 0054 D609     		lsrs	r6, r2, #7
 284 0056 5E72     		strb	r6, [r3, #9]
 268:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.WrBlockMisalign=(tmp&0x40)>>6;	//ÂÜôÂùóÈîô‰Ωç
 285              		.loc 1 268 0
 286 0058 C1F38016 		ubfx	r6, r1, #6, #1
 287 005c 9E72     		strb	r6, [r3, #10]
 269:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.RdBlockMisalign=(tmp&0x20)>>5;	//ËØªÂùóÈîô‰Ωç
 288              		.loc 1 269 0
 289 005e C1F34016 		ubfx	r6, r1, #5, #1
 290 0062 DE72     		strb	r6, [r3, #11]
 270:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.DSRImpl=(tmp&0x10)>>4;
 291              		.loc 1 270 0
 292 0064 C1F30016 		ubfx	r6, r1, #4, #1
 293 0068 1E73     		strb	r6, [r3, #12]
 271:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.Reserved2=0; 					//‰øùÁïô
 294              		.loc 1 271 0
 295 006a 0026     		movs	r6, #0
 296 006c 5E73     		strb	r6, [r3, #13]
 272:drivers/bsp_f1xx_sdio.c ****     if((CardType==SDIO_STD_CAPACITY_SD_CARD_V1_1)||(CardType==SDIO_STD_CAPACITY_SD_CARD_V2_0)||(SDI
 297              		.loc 1 272 0
 298 006e 012D     		cmp	r5, #1
 299 0070 1AD9     		bls	.L16
 300              		.loc 1 272 0 is_stmt 0 discriminator 1
 301 0072 032D     		cmp	r5, #3
 302 0074 18D0     		beq	.L16
 273:drivers/bsp_f1xx_sdio.c ****     {
 274:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.DeviceSize=(tmp&0x03)<<10;	//C_SIZE(12‰Ωç)
 275:drivers/bsp_f1xx_sdio.c ****         tmp=(u8)(CSD_Tab[1]&0x000000FF); 			//Á¨¨7‰∏™Â≠óËäÇ
 276:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.DeviceSize|=(tmp)<<2;
 277:drivers/bsp_f1xx_sdio.c ****         tmp=(u8)((CSD_Tab[2]&0xFF000000)>>24);		//Á¨¨8‰∏™Â≠óËäÇ
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 11


 278:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.DeviceSize|=(tmp&0xC0)>>6;
 279:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.MaxRdCurrentVDDMin=(tmp&0x38)>>3;
 280:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.MaxRdCurrentVDDMax=(tmp&0x07);
 281:drivers/bsp_f1xx_sdio.c ****         tmp=(u8)((CSD_Tab[2]&0x00FF0000)>>16);		//Á¨¨9‰∏™Â≠óËäÇ
 282:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.MaxWrCurrentVDDMin=(tmp&0xE0)>>5;
 283:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.MaxWrCurrentVDDMax=(tmp&0x1C)>>2;
 284:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.DeviceSizeMul=(tmp&0x03)<<1;//C_SIZE_MULT
 285:drivers/bsp_f1xx_sdio.c ****         tmp=(u8)((CSD_Tab[2]&0x0000FF00)>>8);	  	//Á¨¨10‰∏™Â≠óËäÇ
 286:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.DeviceSizeMul|=(tmp&0x80)>>7;
 287:drivers/bsp_f1xx_sdio.c ****         cardinfo->CardCapacity=(cardinfo->SD_csd.DeviceSize+1);//ËÆ°ÁÆóÂç°ÂÆπÈáè
 288:drivers/bsp_f1xx_sdio.c ****         cardinfo->CardCapacity*=(1<<(cardinfo->SD_csd.DeviceSizeMul+2));
 289:drivers/bsp_f1xx_sdio.c ****         cardinfo->CardBlockSize=1<<(cardinfo->SD_csd.RdBlockLen);//ÂùóÂ§ßÂ∞è
 290:drivers/bsp_f1xx_sdio.c ****         cardinfo->CardCapacity*=cardinfo->CardBlockSize;
 291:drivers/bsp_f1xx_sdio.c ****     }else if(CardType==SDIO_HIGH_CAPACITY_SD_CARD)	//È´òÂÆπÈáèÂç°
 303              		.loc 1 291 0 is_stmt 1
 304 0076 022D     		cmp	r5, #2
 305 0078 4DD1     		bne	.L18
 306              	.LVL32:
 292:drivers/bsp_f1xx_sdio.c ****     {
 293:drivers/bsp_f1xx_sdio.c ****         tmp=(u8)(CSD_Tab[1]&0x000000FF); 		//Á¨¨7‰∏™Â≠óËäÇ
 294:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.DeviceSize=(tmp&0x3F)<<16;//C_SIZE
 307              		.loc 1 294 0
 308 007a 0104     		lsls	r1, r0, #16
 309 007c 01F47C11 		and	r1, r1, #4128768
 295:drivers/bsp_f1xx_sdio.c ****         tmp=(u8)((CSD_Tab[2]&0xFF000000)>>24); 	//Á¨¨8‰∏™Â≠óËäÇ
 310              		.loc 1 295 0
 311 0080 6E4A     		ldr	r2, .L20+8
 312 0082 9268     		ldr	r2, [r2, #8]
 313 0084 100E     		lsrs	r0, r2, #24
 314              	.LVL33:
 296:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.DeviceSize|=(tmp<<8);
 315              		.loc 1 296 0
 316 0086 41EA0021 		orr	r1, r1, r0, lsl #8
 317              	.LVL34:
 297:drivers/bsp_f1xx_sdio.c ****         tmp=(u8)((CSD_Tab[2]&0x00FF0000)>>16);	//Á¨¨9‰∏™Â≠óËäÇ
 298:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.DeviceSize|=(tmp);
 318              		.loc 1 298 0
 319 008a C2F30740 		ubfx	r0, r2, #16, #8
 320 008e 0143     		orrs	r1, r1, r0
 321 0090 1961     		str	r1, [r3, #16]
 299:drivers/bsp_f1xx_sdio.c ****         tmp=(u8)((CSD_Tab[2]&0x0000FF00)>>8); 	//Á¨¨10‰∏™Â≠óËäÇ
 322              		.loc 1 299 0
 323 0092 C2F30722 		ubfx	r2, r2, #8, #8
 324              	.LVL35:
 300:drivers/bsp_f1xx_sdio.c ****         cardinfo->CardCapacity=(long long)(cardinfo->SD_csd.DeviceSize+1)*512*1024;//ËÆ°ÁÆóÂç°ÂÆπÈá
 325              		.loc 1 300 0
 326 0096 0131     		adds	r1, r1, #1
 327 0098 480B     		lsrs	r0, r1, #13
 328 009a C904     		lsls	r1, r1, #19
 329 009c 9964     		str	r1, [r3, #72]
 330 009e D864     		str	r0, [r3, #76]
 301:drivers/bsp_f1xx_sdio.c ****         cardinfo->CardBlockSize=512; 			//ÂùóÂ§ßÂ∞èÂõ∫ÂÆö‰∏∫512Â≠óËäÇ
 331              		.loc 1 301 0
 332 00a0 4FF40071 		mov	r1, #512
 333 00a4 1965     		str	r1, [r3, #80]
 334 00a6 36E0     		b	.L18
 335              	.L16:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 12


 274:drivers/bsp_f1xx_sdio.c ****         tmp=(u8)(CSD_Tab[1]&0x000000FF); 			//Á¨¨7‰∏™Â≠óËäÇ
 336              		.loc 1 274 0
 337 00a8 8902     		lsls	r1, r1, #10
 338 00aa 01F44061 		and	r1, r1, #3072
 339              	.LVL36:
 276:drivers/bsp_f1xx_sdio.c ****         tmp=(u8)((CSD_Tab[2]&0xFF000000)>>24);		//Á¨¨8‰∏™Â≠óËäÇ
 340              		.loc 1 276 0
 341 00ae 8000     		lsls	r0, r0, #2
 342              	.LVL37:
 343 00b0 00F47F70 		and	r0, r0, #1020
 344 00b4 0143     		orrs	r1, r1, r0
 277:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.DeviceSize|=(tmp&0xC0)>>6;
 345              		.loc 1 277 0
 346 00b6 614A     		ldr	r2, .L20+8
 347 00b8 9268     		ldr	r2, [r2, #8]
 348 00ba 150E     		lsrs	r5, r2, #24
 349 00bc E8B2     		uxtb	r0, r5
 350              	.LVL38:
 278:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.MaxRdCurrentVDDMin=(tmp&0x38)>>3;
 351              		.loc 1 278 0
 352 00be 41EA9011 		orr	r1, r1, r0, lsr #6
 353 00c2 1961     		str	r1, [r3, #16]
 279:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.MaxRdCurrentVDDMax=(tmp&0x07);
 354              		.loc 1 279 0
 355 00c4 C5F3C205 		ubfx	r5, r5, #3, #3
 356 00c8 1D75     		strb	r5, [r3, #20]
 280:drivers/bsp_f1xx_sdio.c ****         tmp=(u8)((CSD_Tab[2]&0x00FF0000)>>16);		//Á¨¨9‰∏™Â≠óËäÇ
 357              		.loc 1 280 0
 358 00ca 00F00700 		and	r0, r0, #7
 359              	.LVL39:
 360 00ce 5875     		strb	r0, [r3, #21]
 281:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.MaxWrCurrentVDDMin=(tmp&0xE0)>>5;
 361              		.loc 1 281 0
 362 00d0 100C     		lsrs	r0, r2, #16
 363              	.LVL40:
 282:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.MaxWrCurrentVDDMax=(tmp&0x1C)>>2;
 364              		.loc 1 282 0
 365 00d2 C0F34215 		ubfx	r5, r0, #5, #3
 366 00d6 9D75     		strb	r5, [r3, #22]
 283:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.DeviceSizeMul=(tmp&0x03)<<1;//C_SIZE_MULT
 367              		.loc 1 283 0
 368 00d8 C0F38205 		ubfx	r5, r0, #2, #3
 369 00dc DD75     		strb	r5, [r3, #23]
 284:drivers/bsp_f1xx_sdio.c ****         tmp=(u8)((CSD_Tab[2]&0x0000FF00)>>8);	  	//Á¨¨10‰∏™Â≠óËäÇ
 370              		.loc 1 284 0
 371 00de 4000     		lsls	r0, r0, #1
 372              	.LVL41:
 373 00e0 00F00600 		and	r0, r0, #6
 285:drivers/bsp_f1xx_sdio.c ****         cardinfo->SD_csd.DeviceSizeMul|=(tmp&0x80)>>7;
 374              		.loc 1 285 0
 375 00e4 C2F30722 		ubfx	r2, r2, #8, #8
 376              	.LVL42:
 286:drivers/bsp_f1xx_sdio.c ****         cardinfo->CardCapacity=(cardinfo->SD_csd.DeviceSize+1);//ËÆ°ÁÆóÂç°ÂÆπÈáè
 377              		.loc 1 286 0
 378 00e8 40EAD210 		orr	r0, r0, r2, lsr #7
 379 00ec 1876     		strb	r0, [r3, #24]
 287:drivers/bsp_f1xx_sdio.c ****         cardinfo->CardCapacity*=(1<<(cardinfo->SD_csd.DeviceSizeMul+2));
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 13


 380              		.loc 1 287 0
 381 00ee 01F1010C 		add	ip, r1, #1
 288:drivers/bsp_f1xx_sdio.c ****         cardinfo->CardBlockSize=1<<(cardinfo->SD_csd.RdBlockLen);//ÂùóÂ§ßÂ∞è
 382              		.loc 1 288 0
 383 00f2 0230     		adds	r0, r0, #2
 384 00f4 0125     		movs	r5, #1
 385 00f6 05FA00F0 		lsl	r0, r5, r0
 386 00fa C717     		asrs	r7, r0, #31
 387 00fc ACFB0001 		umull	r0, r1, ip, r0
 388 0100 0CFB0711 		mla	r1, ip, r7, r1
 289:drivers/bsp_f1xx_sdio.c ****         cardinfo->CardCapacity*=cardinfo->CardBlockSize;
 389              		.loc 1 289 0
 390 0104 05FA04F4 		lsl	r4, r5, r4
 391 0108 1C65     		str	r4, [r3, #80]
 290:drivers/bsp_f1xx_sdio.c ****     }else if(CardType==SDIO_HIGH_CAPACITY_SD_CARD)	//È´òÂÆπÈáèÂç°
 392              		.loc 1 290 0
 393 010a A0FB0467 		umull	r6, r7, r0, r4
 394 010e 04FB0177 		mla	r7, r4, r1, r7
 395 0112 C3E91267 		strd	r6, [r3, #72]
 396              	.L18:
 302:drivers/bsp_f1xx_sdio.c ****     }
 303:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.EraseGrSize=(tmp&0x40)>>6;
 397              		.loc 1 303 0
 398 0116 C2F38011 		ubfx	r1, r2, #6, #1
 399 011a 5976     		strb	r1, [r3, #25]
 304:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.EraseGrMul=(tmp&0x3F)<<1;
 400              		.loc 1 304 0
 401 011c 5200     		lsls	r2, r2, #1
 402              	.LVL43:
 403 011e 02F07E02 		and	r2, r2, #126
 305:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)(CSD_Tab[2]&0x000000FF);			//Á¨¨11‰∏™Â≠óËäÇ
 404              		.loc 1 305 0
 405 0122 4648     		ldr	r0, .L20+8
 406 0124 017A     		ldrb	r1, [r0, #8]	@ zero_extendqisi2
 407              	.LVL44:
 306:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.EraseGrMul|=(tmp&0x80)>>7;
 408              		.loc 1 306 0
 409 0126 42EAD112 		orr	r2, r2, r1, lsr #7
 410 012a 9A76     		strb	r2, [r3, #26]
 307:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.WrProtectGrSize=(tmp&0x7F);
 411              		.loc 1 307 0
 412 012c 01F07F01 		and	r1, r1, #127
 413              	.LVL45:
 414 0130 D976     		strb	r1, [r3, #27]
 308:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CSD_Tab[3]&0xFF000000)>>24);		//Á¨¨12‰∏™Â≠óËäÇ
 415              		.loc 1 308 0
 416 0132 C168     		ldr	r1, [r0, #12]
 417 0134 0A0E     		lsrs	r2, r1, #24
 418              	.LVL46:
 309:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.WrProtectGrEnable=(tmp&0x80)>>7;
 419              		.loc 1 309 0
 420 0136 D009     		lsrs	r0, r2, #7
 421 0138 1877     		strb	r0, [r3, #28]
 310:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.ManDeflECC=(tmp&0x60)>>5;
 422              		.loc 1 310 0
 423 013a C2F34110 		ubfx	r0, r2, #5, #2
 424 013e 5877     		strb	r0, [r3, #29]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 14


 311:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.WrSpeedFact=(tmp&0x1C)>>2;
 425              		.loc 1 311 0
 426 0140 C2F38200 		ubfx	r0, r2, #2, #3
 427 0144 9877     		strb	r0, [r3, #30]
 312:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.MaxWrBlockLen=(tmp&0x03)<<2;
 428              		.loc 1 312 0
 429 0146 9200     		lsls	r2, r2, #2
 430              	.LVL47:
 431 0148 02F00C02 		and	r2, r2, #12
 313:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CSD_Tab[3]&0x00FF0000)>>16);		//Á¨¨13‰∏™Â≠óËäÇ
 432              		.loc 1 313 0
 433 014c 080C     		lsrs	r0, r1, #16
 434 014e C4B2     		uxtb	r4, r0
 435              	.LVL48:
 314:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.MaxWrBlockLen|=(tmp&0xC0)>>6;
 436              		.loc 1 314 0
 437 0150 42EA9412 		orr	r2, r2, r4, lsr #6
 438 0154 DA77     		strb	r2, [r3, #31]
 315:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.WriteBlockPaPartial=(tmp&0x20)>>5;
 439              		.loc 1 315 0
 440 0156 C0F34010 		ubfx	r0, r0, #5, #1
 441 015a 83F82000 		strb	r0, [r3, #32]
 316:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.Reserved3=0;
 442              		.loc 1 316 0
 443 015e 0020     		movs	r0, #0
 444 0160 83F82100 		strb	r0, [r3, #33]
 317:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.ContentProtectAppli=(tmp&0x01);
 445              		.loc 1 317 0
 446 0164 04F00104 		and	r4, r4, #1
 447              	.LVL49:
 448 0168 83F82240 		strb	r4, [r3, #34]
 318:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CSD_Tab[3]&0x0000FF00)>>8);		//Á¨¨14‰∏™Â≠óËäÇ
 449              		.loc 1 318 0
 450 016c 0A0A     		lsrs	r2, r1, #8
 451 016e D4B2     		uxtb	r4, r2
 452              	.LVL50:
 319:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.FileFormatGrouop=(tmp&0x80)>>7;
 453              		.loc 1 319 0
 454 0170 E509     		lsrs	r5, r4, #7
 455 0172 83F82350 		strb	r5, [r3, #35]
 320:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.CopyFlag=(tmp&0x40)>>6;
 456              		.loc 1 320 0
 457 0176 C2F38015 		ubfx	r5, r2, #6, #1
 458 017a 83F82450 		strb	r5, [r3, #36]
 321:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.PermWrProtect=(tmp&0x20)>>5;
 459              		.loc 1 321 0
 460 017e C2F34015 		ubfx	r5, r2, #5, #1
 461 0182 83F82550 		strb	r5, [r3, #37]
 322:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.TempWrProtect=(tmp&0x10)>>4;
 462              		.loc 1 322 0
 463 0186 C2F30015 		ubfx	r5, r2, #4, #1
 464 018a 83F82650 		strb	r5, [r3, #38]
 323:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.FileFormat=(tmp&0x0C)>>2;
 465              		.loc 1 323 0
 466 018e C2F38102 		ubfx	r2, r2, #2, #2
 467 0192 83F82720 		strb	r2, [r3, #39]
 324:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.ECC=(tmp&0x03);
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 15


 468              		.loc 1 324 0
 469 0196 04F00304 		and	r4, r4, #3
 470              	.LVL51:
 471 019a 83F82840 		strb	r4, [r3, #40]
 472              	.LVL52:
 325:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)(CSD_Tab[3]&0x000000FF);			//Á¨¨15‰∏™Â≠óËäÇ
 326:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.CSD_CRC=(tmp&0xFE)>>1;
 473              		.loc 1 326 0
 474 019e C1F34602 		ubfx	r2, r1, #1, #7
 475 01a2 83F82920 		strb	r2, [r3, #41]
 327:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_csd.Reserved4=1;
 476              		.loc 1 327 0
 477 01a6 0124     		movs	r4, #1
 478 01a8 83F82A40 		strb	r4, [r3, #42]
 328:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CID_Tab[0]&0xFF000000)>>24);		//Á¨¨0‰∏™Â≠óËäÇ
 479              		.loc 1 328 0
 480 01ac 244D     		ldr	r5, .L20+12
 481 01ae 2968     		ldr	r1, [r5]
 482              	.LVL53:
 483 01b0 0A0E     		lsrs	r2, r1, #24
 484              	.LVL54:
 329:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ManufacturerID=tmp;
 485              		.loc 1 329 0
 486 01b2 83F82C20 		strb	r2, [r3, #44]
 330:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CID_Tab[0]&0x00FF0000)>>16);		//Á¨¨1‰∏™Â≠óËäÇ
 487              		.loc 1 330 0
 488 01b6 C1F30746 		ubfx	r6, r1, #16, #8
 489              	.LVL55:
 331:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.OEM_AppliID=tmp<<8;
 332:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CID_Tab[0]&0x000000FF00)>>8);		//Á¨¨2‰∏™Â≠óËäÇ
 490              		.loc 1 332 0
 491 01ba C1F30722 		ubfx	r2, r1, #8, #8
 492              	.LVL56:
 333:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.OEM_AppliID|=tmp;
 493              		.loc 1 333 0
 494 01be 42EA0622 		orr	r2, r2, r6, lsl #8
 495              	.LVL57:
 496 01c2 DA85     		strh	r2, [r3, #46]	@ movhi
 497              	.LVL58:
 334:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)(CID_Tab[0]&0x000000FF);			//Á¨¨3‰∏™Â≠óËäÇ
 335:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ProdName1=tmp<<24;
 336:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CID_Tab[1]&0xFF000000)>>24); 		//Á¨¨4‰∏™Â≠óËäÇ
 498              		.loc 1 336 0
 499 01c4 6E68     		ldr	r6, [r5, #4]
 500 01c6 320E     		lsrs	r2, r6, #24
 501              	.LVL59:
 337:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ProdName1|=tmp<<16;
 502              		.loc 1 337 0
 503 01c8 1204     		lsls	r2, r2, #16
 504              	.LVL60:
 505 01ca 42EA0162 		orr	r2, r2, r1, lsl #24
 338:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CID_Tab[1]&0x00FF0000)>>16);	   	//Á¨¨5‰∏™Â≠óËäÇ
 506              		.loc 1 338 0
 507 01ce 310C     		lsrs	r1, r6, #16
 508              	.LVL61:
 339:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ProdName1|=tmp<<8;
 509              		.loc 1 339 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 16


 510 01d0 0902     		lsls	r1, r1, #8
 511              	.LVL62:
 512 01d2 89B2     		uxth	r1, r1
 513 01d4 0A43     		orrs	r2, r2, r1
 514              	.LVL63:
 340:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CID_Tab[1]&0x0000FF00)>>8);		//Á¨¨6‰∏™Â≠óËäÇ
 341:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ProdName1|=tmp;
 515              		.loc 1 341 0
 516 01d6 C6F30721 		ubfx	r1, r6, #8, #8
 517 01da 0A43     		orrs	r2, r2, r1
 518 01dc 1A63     		str	r2, [r3, #48]
 519              	.LVL64:
 342:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)(CID_Tab[1]&0x000000FF);	  		//Á¨¨7‰∏™Â≠óËäÇ
 343:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ProdName2=tmp;
 520              		.loc 1 343 0
 521 01de 83F83460 		strb	r6, [r3, #52]
 344:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CID_Tab[2]&0xFF000000)>>24); 		//Á¨¨8‰∏™Â≠óËäÇ
 522              		.loc 1 344 0
 523 01e2 A968     		ldr	r1, [r5, #8]
 524 01e4 0A0E     		lsrs	r2, r1, #24
 525              	.LVL65:
 345:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ProdRev=tmp;
 526              		.loc 1 345 0
 527 01e6 83F83520 		strb	r2, [r3, #53]
 346:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CID_Tab[2]&0x00FF0000)>>16);		//Á¨¨9‰∏™Â≠óËäÇ
 528              		.loc 1 346 0
 529 01ea 0E0C     		lsrs	r6, r1, #16
 530              	.LVL66:
 347:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ProdSN=tmp<<24;
 348:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CID_Tab[2]&0x0000FF00)>>8); 		//Á¨¨10‰∏™Â≠óËäÇ
 531              		.loc 1 348 0
 532 01ec 0A0A     		lsrs	r2, r1, #8
 533              	.LVL67:
 349:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ProdSN|=tmp<<16;
 534              		.loc 1 349 0
 535 01ee 1204     		lsls	r2, r2, #16
 536              	.LVL68:
 537 01f0 02F47F02 		and	r2, r2, #16711680
 538 01f4 42EA0662 		orr	r2, r2, r6, lsl #24
 539              	.LVL69:
 350:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)(CID_Tab[2]&0x000000FF);   			//Á¨¨11‰∏™Â≠óËäÇ
 351:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ProdSN|=tmp<<8;
 540              		.loc 1 351 0
 541 01f8 0902     		lsls	r1, r1, #8
 542              	.LVL70:
 543 01fa 89B2     		uxth	r1, r1
 544 01fc 0A43     		orrs	r2, r2, r1
 352:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CID_Tab[3]&0xFF000000)>>24); 		//Á¨¨12‰∏™Â≠óËäÇ
 545              		.loc 1 352 0
 546 01fe E968     		ldr	r1, [r5, #12]
 547              	.LVL71:
 353:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ProdSN|=tmp;
 548              		.loc 1 353 0
 549 0200 42EA1162 		orr	r2, r2, r1, lsr #24
 550 0204 9A63     		str	r2, [r3, #56]
 354:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CID_Tab[3]&0x00FF0000)>>16);	 	//Á¨¨13‰∏™Â≠óËäÇ
 551              		.loc 1 354 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 17


 552 0206 0A0C     		lsrs	r2, r1, #16
 553              	.LVL72:
 355:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.Reserved1|=(tmp&0xF0)>>4;
 554              		.loc 1 355 0
 555 0208 C2F30315 		ubfx	r5, r2, #4, #4
 556 020c 93F83C60 		ldrb	r6, [r3, #60]	@ zero_extendqisi2
 557 0210 3543     		orrs	r5, r5, r6
 558 0212 83F83C50 		strb	r5, [r3, #60]
 356:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ManufactDate=(tmp&0x0F)<<8;
 559              		.loc 1 356 0
 560 0216 1202     		lsls	r2, r2, #8
 561              	.LVL73:
 562 0218 02F47062 		and	r2, r2, #3840
 357:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)((CID_Tab[3]&0x0000FF00)>>8);		//Á¨¨14‰∏™Â≠óËäÇ
 563              		.loc 1 357 0
 564 021c C1F30725 		ubfx	r5, r1, #8, #8
 565              	.LVL74:
 358:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.ManufactDate|=tmp;
 566              		.loc 1 358 0
 567 0220 2A43     		orrs	r2, r2, r5
 568 0222 DA87     		strh	r2, [r3, #62]	@ movhi
 569              	.LVL75:
 359:drivers/bsp_f1xx_sdio.c ****     tmp=(u8)(CID_Tab[3]&0x000000FF);			//Á¨¨15‰∏™Â≠óËäÇ
 360:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.CID_CRC=(tmp&0xFE)>>1;
 570              		.loc 1 360 0
 571 0224 C1F34601 		ubfx	r1, r1, #1, #7
 572              	.LVL76:
 573 0228 83F84010 		strb	r1, [r3, #64]
 361:drivers/bsp_f1xx_sdio.c ****     cardinfo->SD_cid.Reserved2=1;
 574              		.loc 1 361 0
 575 022c 83F84140 		strb	r4, [r3, #65]
 362:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
 363:drivers/bsp_f1xx_sdio.c **** }
 576              		.loc 1 363 0
 577 0230 F0BC     		pop	{r4, r5, r6, r7}
 578              	.LCFI5:
 579              		.cfi_restore 7
 580              		.cfi_restore 6
 581              		.cfi_restore 5
 582              		.cfi_restore 4
 583              		.cfi_def_cfa_offset 0
 584 0232 7047     		bx	lr
 585              	.L21:
 586              		.align	2
 587              	.L20:
 588 0234 00000000 		.word	.LANCHOR0
 589 0238 00000000 		.word	.LANCHOR1
 590 023c 00000000 		.word	.LANCHOR2
 591 0240 00000000 		.word	.LANCHOR3
 592              		.cfi_endproc
 593              	.LFE73:
 595              		.section	.text.SD_SetDeviceMode,"ax",%progbits
 596              		.align	1
 597              		.global	SD_SetDeviceMode
 598              		.syntax unified
 599              		.thumb
 600              		.thumb_func
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 18


 601              		.fpu softvfp
 603              	SD_SetDeviceMode:
 604              	.LFB75:
 364:drivers/bsp_f1xx_sdio.c **** //ËÆæÁΩÆSDIOÊÄªÁ∫øÂÆΩÂ∫¶(MMCÂç°‰∏çÊîØÊåÅ4bitÊ®°Âºè)
 365:drivers/bsp_f1xx_sdio.c **** //wmode:‰ΩçÂÆΩÊ®°Âºè.0,1‰ΩçÊï∞ÊçÆÂÆΩÂ∫¶;1,4‰ΩçÊï∞ÊçÆÂÆΩÂ∫¶;2,8‰ΩçÊï∞ÊçÆÂÆΩÂ∫¶
 366:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:SDÂç°ÈîôËØØÁä∂ÊÄÅ
 367:drivers/bsp_f1xx_sdio.c **** SD_Error SD_EnableWideBusOperation(u32 wmode)
 368:drivers/bsp_f1xx_sdio.c **** {
 369:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
 370:drivers/bsp_f1xx_sdio.c ****     if(SDIO_MULTIMEDIA_CARD==CardType)return SD_UNSUPPORTED_FEATURE;//MMCÂç°‰∏çÊîØÊåÅ
 371:drivers/bsp_f1xx_sdio.c ****     else if((SDIO_STD_CAPACITY_SD_CARD_V1_1==CardType)||(SDIO_STD_CAPACITY_SD_CARD_V2_0==CardType)|
 372:drivers/bsp_f1xx_sdio.c ****     {
 373:drivers/bsp_f1xx_sdio.c ****         if(wmode>=2)return SD_UNSUPPORTED_FEATURE;//‰∏çÊîØÊåÅ8‰ΩçÊ®°Âºè
 374:drivers/bsp_f1xx_sdio.c ****         else
 375:drivers/bsp_f1xx_sdio.c ****         {
 376:drivers/bsp_f1xx_sdio.c ****             errorstatus=SDEnWideBus(wmode);
 377:drivers/bsp_f1xx_sdio.c ****             if(SD_OK==errorstatus)
 378:drivers/bsp_f1xx_sdio.c ****             {
 379:drivers/bsp_f1xx_sdio.c ****                 SDIO->CLKCR&=~(3<<11);		//Ê∏ÖÈô§‰πãÂâçÁöÑ‰ΩçÂÆΩËÆæÁΩÆ
 380:drivers/bsp_f1xx_sdio.c ****                 SDIO->CLKCR|=(u16)wmode<<11;//1‰Ωç/4‰ΩçÊÄªÁ∫øÂÆΩÂ∫¶
 381:drivers/bsp_f1xx_sdio.c ****                 SDIO->CLKCR|=0<<14;			//‰∏çÂºÄÂêØÁ°¨‰ª∂ÊµÅÊéßÂà∂
 382:drivers/bsp_f1xx_sdio.c ****             }
 383:drivers/bsp_f1xx_sdio.c ****         }
 384:drivers/bsp_f1xx_sdio.c ****     }
 385:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
 386:drivers/bsp_f1xx_sdio.c **** }
 387:drivers/bsp_f1xx_sdio.c **** //ËÆæÁΩÆSDÂç°Â∑•‰ΩúÊ®°Âºè
 388:drivers/bsp_f1xx_sdio.c **** //Mode:
 389:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 390:drivers/bsp_f1xx_sdio.c **** SD_Error SD_SetDeviceMode(u32 Mode)
 391:drivers/bsp_f1xx_sdio.c **** {
 605              		.loc 1 391 0
 606              		.cfi_startproc
 607              		@ args = 0, pretend = 0, frame = 0
 608              		@ frame_needed = 0, uses_anonymous_args = 0
 609              		@ link register save eliminated.
 610              	.LVL77:
 392:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus = SD_OK;
 393:drivers/bsp_f1xx_sdio.c ****     if((Mode==SD_DMA_MODE)||(Mode==SD_POLLING_MODE))DeviceMode=Mode;
 611              		.loc 1 393 0
 612 0000 0128     		cmp	r0, #1
 613 0002 03D8     		bhi	.L24
 614              		.loc 1 393 0 is_stmt 0 discriminator 1
 615 0004 024B     		ldr	r3, .L25
 616 0006 1870     		strb	r0, [r3]
 392:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus = SD_OK;
 617              		.loc 1 392 0 is_stmt 1 discriminator 1
 618 0008 0020     		movs	r0, #0
 619              	.LVL78:
 620 000a 7047     		bx	lr
 621              	.LVL79:
 622              	.L24:
 394:drivers/bsp_f1xx_sdio.c ****     else errorstatus=SD_INVALID_PARAMETER;
 623              		.loc 1 394 0
 624 000c 2620     		movs	r0, #38
 625              	.LVL80:
 395:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 19


 396:drivers/bsp_f1xx_sdio.c **** }
 626              		.loc 1 396 0
 627 000e 7047     		bx	lr
 628              	.L26:
 629              		.align	2
 630              	.L25:
 631 0010 00000000 		.word	.LANCHOR4
 632              		.cfi_endproc
 633              	.LFE75:
 635              		.section	.text.CmdError,"ax",%progbits
 636              		.align	1
 637              		.global	CmdError
 638              		.syntax unified
 639              		.thumb
 640              		.thumb_func
 641              		.fpu softvfp
 643              	CmdError:
 644              	.LFB83:
 397:drivers/bsp_f1xx_sdio.c **** //ÈÄâÂç°
 398:drivers/bsp_f1xx_sdio.c **** //ÂèëÈÄÅCMD7,ÈÄâÊã©Áõ∏ÂØπÂú∞ÂùÄ(rca)‰∏∫addrÁöÑÂç°,ÂèñÊ∂àÂÖ∂‰ªñÂç°.Â¶ÇÊûú‰∏∫0,ÂàôÈÉΩ‰∏çÈÄâÊã©.
 399:drivers/bsp_f1xx_sdio.c **** //addr:Âç°ÁöÑRCAÂú∞ÂùÄ
 400:drivers/bsp_f1xx_sdio.c **** SD_Error SD_SelectDeselect(u32 addr)
 401:drivers/bsp_f1xx_sdio.c **** {
 402:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_SEL_DESEL_CARD,1,addr);	//ÂèëÈÄÅCMD7,ÈÄâÊã©Âç°,Áü≠ÂìçÂ∫î
 403:drivers/bsp_f1xx_sdio.c ****     return CmdResp1Error(SD_CMD_SEL_DESEL_CARD);
 404:drivers/bsp_f1xx_sdio.c **** }
 405:drivers/bsp_f1xx_sdio.c **** //SDÂç°ËØªÂèñ‰∏Ä‰∏™Âùó
 406:drivers/bsp_f1xx_sdio.c **** //buf:ËØªÊï∞ÊçÆÁºìÂ≠òÂå∫(ÂøÖÈ°ª4Â≠óËäÇÂØπÈΩê!!)
 407:drivers/bsp_f1xx_sdio.c **** //addr:ËØªÂèñÂú∞ÂùÄ
 408:drivers/bsp_f1xx_sdio.c **** //blksize:ÂùóÂ§ßÂ∞è
 409:drivers/bsp_f1xx_sdio.c **** SD_Error SD_ReadBlock(u8 *buf,long long addr,u16 blksize)
 410:drivers/bsp_f1xx_sdio.c **** {
 411:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
 412:drivers/bsp_f1xx_sdio.c ****     u8 power;
 413:drivers/bsp_f1xx_sdio.c ****     u32 count=0,*tempbuff=(u32*)buf;//ËΩ¨Êç¢‰∏∫u32ÊåáÈíà
 414:drivers/bsp_f1xx_sdio.c ****     u32 timeout=SDIO_DATATIMEOUT;
 415:drivers/bsp_f1xx_sdio.c ****     if(NULL==buf)return SD_INVALID_PARAMETER;
 416:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=0x0;	//Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 417:drivers/bsp_f1xx_sdio.c ****     if(CardType==SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 418:drivers/bsp_f1xx_sdio.c ****     {
 419:drivers/bsp_f1xx_sdio.c ****         blksize=512;
 420:drivers/bsp_f1xx_sdio.c ****         addr>>=9;
 421:drivers/bsp_f1xx_sdio.c ****     }
 422:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Data_Cfg(SD_DATATIMEOUT,0,0,0);	//Ê∏ÖÈô§DPSMÁä∂ÊÄÅÊú∫ÈÖçÁΩÆ
 423:drivers/bsp_f1xx_sdio.c ****     if(SDIO->RESP1&SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 424:drivers/bsp_f1xx_sdio.c ****     if((blksize>0)&&(blksize<=2048)&&((blksize&(blksize-1))==0))
 425:drivers/bsp_f1xx_sdio.c ****     {
 426:drivers/bsp_f1xx_sdio.c ****         power=convert_from_bytes_to_power_of_two(blksize);
 427:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN,1,blksize);	//ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü
 428:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_SET_BLOCKLEN);	//Á≠âÂæÖR1ÂìçÂ∫î
 429:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 430:drivers/bsp_f1xx_sdio.c ****     }else return SD_INVALID_PARAMETER;
 431:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Data_Cfg(SD_DATATIMEOUT,blksize,power,1);	//blksize,Âç°Âà∞ÊéßÂà∂Âô®
 432:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_READ_SINGLE_BLOCK,1,addr);		//ÂèëÈÄÅCMD17+‰ªéaddrÂú∞ÂùÄÂá∫ËØªÂèñÊï∞ÊçÆ,Áü≠
 433:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_READ_SINGLE_BLOCK);//Á≠âÂæÖR1ÂìçÂ∫î
 434:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;   		//ÂìçÂ∫îÈîôËØØ
 435:drivers/bsp_f1xx_sdio.c ****     if(DeviceMode==SD_POLLING_MODE)						//Êü•ËØ¢Ê®°Âºè,ËΩÆËØ¢Êï∞ÊçÆ
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 20


 436:drivers/bsp_f1xx_sdio.c ****     {
 437:drivers/bsp_f1xx_sdio.c ****         INTX_DISABLE();//ÂÖ≥Èó≠ÊÄª‰∏≠Êñ≠(POLLINGÊ®°Âºè,‰∏•Á¶Å‰∏≠Êñ≠ÊâìÊñ≠SDIOËØªÂÜôÊìç‰Ωú!!!)
 438:drivers/bsp_f1xx_sdio.c ****         while(!(SDIO->STA&((1<<5)|(1<<1)|(1<<3)|(1<<10)|(1<<9))))//Êó†‰∏äÊ∫¢/CRC/Ë∂ÖÊó∂/ÂÆåÊàê(Ê†áÂ
 439:drivers/bsp_f1xx_sdio.c ****         {
 440:drivers/bsp_f1xx_sdio.c ****             if(SDIO->STA&(1<<15))						//Êé•Êî∂Âå∫ÂçäÊª°,Ë°®Á§∫Ëá≥Â∞ëÂ≠ò‰∫Ü8‰∏™Â≠ó
 441:drivers/bsp_f1xx_sdio.c ****             {
 442:drivers/bsp_f1xx_sdio.c ****                 for(count=0;count<8;count++)			//Âæ™ÁéØËØªÂèñÊï∞ÊçÆ
 443:drivers/bsp_f1xx_sdio.c ****                 {
 444:drivers/bsp_f1xx_sdio.c ****                     *(tempbuff+count)=SDIO->FIFO;
 445:drivers/bsp_f1xx_sdio.c ****                 }
 446:drivers/bsp_f1xx_sdio.c ****                 tempbuff+=8;
 447:drivers/bsp_f1xx_sdio.c ****                 timeout=0X7FFFFF; 	//ËØªÊï∞ÊçÆÊ∫¢Âá∫Êó∂Èó¥
 448:drivers/bsp_f1xx_sdio.c ****             }else 	//Â§ÑÁêÜË∂ÖÊó∂
 449:drivers/bsp_f1xx_sdio.c ****             {
 450:drivers/bsp_f1xx_sdio.c ****                 if(timeout==0)return SD_DATA_TIMEOUT;
 451:drivers/bsp_f1xx_sdio.c ****                 timeout--;
 452:drivers/bsp_f1xx_sdio.c ****             }
 453:drivers/bsp_f1xx_sdio.c ****         }
 454:drivers/bsp_f1xx_sdio.c ****         if(SDIO->STA&(1<<3))		//Êï∞ÊçÆË∂ÖÊó∂ÈîôËØØ
 455:drivers/bsp_f1xx_sdio.c ****         {
 456:drivers/bsp_f1xx_sdio.c ****             SDIO->ICR|=1<<3; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 457:drivers/bsp_f1xx_sdio.c ****             return SD_DATA_TIMEOUT;
 458:drivers/bsp_f1xx_sdio.c ****         }else if(SDIO->STA&(1<<1))	//Êï∞ÊçÆÂùóCRCÈîôËØØ
 459:drivers/bsp_f1xx_sdio.c ****         {
 460:drivers/bsp_f1xx_sdio.c ****             SDIO->ICR|=1<<1; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 461:drivers/bsp_f1xx_sdio.c ****             return SD_DATA_CRC_FAIL;
 462:drivers/bsp_f1xx_sdio.c ****         }else if(SDIO->STA&(1<<5)) 	//Êé•Êî∂fifo‰∏äÊ∫¢ÈîôËØØ
 463:drivers/bsp_f1xx_sdio.c ****         {
 464:drivers/bsp_f1xx_sdio.c ****             SDIO->ICR|=1<<5; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 465:drivers/bsp_f1xx_sdio.c ****             return SD_RX_OVERRUN;
 466:drivers/bsp_f1xx_sdio.c ****         }else if(SDIO->STA&(1<<9)) 	//Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 467:drivers/bsp_f1xx_sdio.c ****         {
 468:drivers/bsp_f1xx_sdio.c ****             SDIO->ICR|=1<<9; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 469:drivers/bsp_f1xx_sdio.c ****             return SD_START_BIT_ERR;
 470:drivers/bsp_f1xx_sdio.c ****         }
 471:drivers/bsp_f1xx_sdio.c ****         while(SDIO->STA&(1<<21))	//FIFOÈáåÈù¢,ËøòÂ≠òÂú®ÂèØÁî®Êï∞ÊçÆ
 472:drivers/bsp_f1xx_sdio.c ****         {
 473:drivers/bsp_f1xx_sdio.c ****             *tempbuff=SDIO->FIFO;	//Âæ™ÁéØËØªÂèñÊï∞ÊçÆ
 474:drivers/bsp_f1xx_sdio.c ****             tempbuff++;
 475:drivers/bsp_f1xx_sdio.c ****         }
 476:drivers/bsp_f1xx_sdio.c ****         INTX_ENABLE();//ÂºÄÂêØÊÄª‰∏≠Êñ≠
 477:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 478:drivers/bsp_f1xx_sdio.c ****     }else if(DeviceMode==SD_DMA_MODE)
 479:drivers/bsp_f1xx_sdio.c ****     {
 480:drivers/bsp_f1xx_sdio.c ****         SD_DMA_Config((u32*)buf,blksize,0);
 481:drivers/bsp_f1xx_sdio.c ****         TransferError=SD_OK;
 482:drivers/bsp_f1xx_sdio.c ****         StopCondition=0;			//ÂçïÂùóËØª,‰∏çÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 483:drivers/bsp_f1xx_sdio.c ****         TransferEnd=0;				//‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 484:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK|=(1<<1)|(1<<3)|(1<<8)|(1<<5)|(1<<9);	//ÈÖçÁΩÆÈúÄË¶ÅÁöÑ‰∏≠Êñ≠
 485:drivers/bsp_f1xx_sdio.c ****         SDIO->DCTRL|=1<<3;		 	//SDIO DMA‰ΩøËÉΩ
 486:drivers/bsp_f1xx_sdio.c ****         while(((DMA2->ISR&0X2000)==0)&&(TransferEnd==0)&&(TransferError==SD_OK)&&timeout)timeout--;
 487:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 488:drivers/bsp_f1xx_sdio.c ****         if(TransferError!=SD_OK)errorstatus=TransferError;
 489:drivers/bsp_f1xx_sdio.c ****     }
 490:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
 491:drivers/bsp_f1xx_sdio.c **** }
 492:drivers/bsp_f1xx_sdio.c **** //SDÂç°ËØªÂèñÂ§ö‰∏™Âùó
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 21


 493:drivers/bsp_f1xx_sdio.c **** //buf:ËØªÊï∞ÊçÆÁºìÂ≠òÂå∫
 494:drivers/bsp_f1xx_sdio.c **** //addr:ËØªÂèñÂú∞ÂùÄ
 495:drivers/bsp_f1xx_sdio.c **** //blksize:ÂùóÂ§ßÂ∞è
 496:drivers/bsp_f1xx_sdio.c **** //nblks:Ë¶ÅËØªÂèñÁöÑÂùóÊï∞
 497:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 498:drivers/bsp_f1xx_sdio.c **** __attribute__((aligned(4))) u32 *tempbuff;
 499:drivers/bsp_f1xx_sdio.c **** SD_Error SD_ReadMultiBlocks(u8 *buf,long long addr,u16 blksize,u32 nblks)
 500:drivers/bsp_f1xx_sdio.c **** {
 501:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
 502:drivers/bsp_f1xx_sdio.c ****     u8 power;
 503:drivers/bsp_f1xx_sdio.c ****     u32 count=0;
 504:drivers/bsp_f1xx_sdio.c ****     u32 timeout=SDIO_DATATIMEOUT;
 505:drivers/bsp_f1xx_sdio.c ****     tempbuff=(u32*)buf;//ËΩ¨Êç¢‰∏∫u32ÊåáÈíà
 506:drivers/bsp_f1xx_sdio.c **** 
 507:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=0x0;		//Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 508:drivers/bsp_f1xx_sdio.c ****     if(CardType==SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 509:drivers/bsp_f1xx_sdio.c ****     {
 510:drivers/bsp_f1xx_sdio.c ****         blksize=512;
 511:drivers/bsp_f1xx_sdio.c ****         addr>>=9;
 512:drivers/bsp_f1xx_sdio.c ****     }
 513:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Data_Cfg(SD_DATATIMEOUT,0,0,0);	//Ê∏ÖÈô§DPSMÁä∂ÊÄÅÊú∫ÈÖçÁΩÆ
 514:drivers/bsp_f1xx_sdio.c ****     if(SDIO->RESP1&SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 515:drivers/bsp_f1xx_sdio.c ****     if((blksize>0)&&(blksize<=2048)&&((blksize&(blksize-1))==0))
 516:drivers/bsp_f1xx_sdio.c ****     {
 517:drivers/bsp_f1xx_sdio.c ****         power=convert_from_bytes_to_power_of_two(blksize);
 518:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN,1,blksize);	//ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü
 519:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_SET_BLOCKLEN);	//Á≠âÂæÖR1ÂìçÂ∫î
 520:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 521:drivers/bsp_f1xx_sdio.c ****     }else return SD_INVALID_PARAMETER;
 522:drivers/bsp_f1xx_sdio.c ****     if(nblks>1)											//Â§öÂùóËØª
 523:drivers/bsp_f1xx_sdio.c ****     {
 524:drivers/bsp_f1xx_sdio.c ****         if(nblks*blksize>SD_MAX_DATA_LENGTH)return SD_INVALID_PARAMETER;//Âà§Êñ≠ÊòØÂê¶Ë∂ÖËøáÊúÄÂ§ßÊ
 525:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Data_Cfg(SD_DATATIMEOUT,nblks*blksize,power,1);//nblks*blksize,512ÂùóÂ§ßÂ∞è,Âç°Âà
 526:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_READ_MULT_BLOCK,1,addr);	//ÂèëÈÄÅCMD18+‰ªéaddrÂú∞ÂùÄÂá∫ËØªÂèñÊï∞ÊçÆ,Áü
 527:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_READ_MULT_BLOCK);//Á≠âÂæÖR1ÂìçÂ∫î
 528:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 529:drivers/bsp_f1xx_sdio.c ****         if(DeviceMode==SD_POLLING_MODE)
 530:drivers/bsp_f1xx_sdio.c ****         {
 531:drivers/bsp_f1xx_sdio.c ****             INTX_DISABLE();//ÂÖ≥Èó≠ÊÄª‰∏≠Êñ≠(POLLINGÊ®°Âºè,‰∏•Á¶Å‰∏≠Êñ≠ÊâìÊñ≠SDIOËØªÂÜôÊìç‰Ωú!!!)
 532:drivers/bsp_f1xx_sdio.c ****             while(!(SDIO->STA&((1<<5)|(1<<1)|(1<<3)|(1<<8)|(1<<9))))//Êó†‰∏äÊ∫¢/CRC/Ë∂ÖÊó∂/ÂÆåÊàê(Ê
 533:drivers/bsp_f1xx_sdio.c ****             {
 534:drivers/bsp_f1xx_sdio.c ****                 if(SDIO->STA&(1<<15))						//Êé•Êî∂Âå∫ÂçäÊª°,Ë°®Á§∫Ëá≥Â∞ëÂ≠ò‰∫Ü8‰∏™Â≠ó
 535:drivers/bsp_f1xx_sdio.c ****                 {
 536:drivers/bsp_f1xx_sdio.c ****                     for(count=0;count<8;count++)			//Âæ™ÁéØËØªÂèñÊï∞ÊçÆ
 537:drivers/bsp_f1xx_sdio.c ****                     {
 538:drivers/bsp_f1xx_sdio.c ****                         *(tempbuff+count)=SDIO->FIFO;
 539:drivers/bsp_f1xx_sdio.c ****                     }
 540:drivers/bsp_f1xx_sdio.c ****                     tempbuff+=8;
 541:drivers/bsp_f1xx_sdio.c ****                     timeout=0X7FFFFF; 	//ËØªÊï∞ÊçÆÊ∫¢Âá∫Êó∂Èó¥
 542:drivers/bsp_f1xx_sdio.c ****                 }else 	//Â§ÑÁêÜË∂ÖÊó∂
 543:drivers/bsp_f1xx_sdio.c ****                 {
 544:drivers/bsp_f1xx_sdio.c ****                     if(timeout==0)return SD_DATA_TIMEOUT;
 545:drivers/bsp_f1xx_sdio.c ****                     timeout--;
 546:drivers/bsp_f1xx_sdio.c ****                 }
 547:drivers/bsp_f1xx_sdio.c ****             }
 548:drivers/bsp_f1xx_sdio.c ****             if(SDIO->STA&(1<<3))		//Êï∞ÊçÆË∂ÖÊó∂ÈîôËØØ
 549:drivers/bsp_f1xx_sdio.c ****             {
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 22


 550:drivers/bsp_f1xx_sdio.c ****                 SDIO->ICR|=1<<3; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 551:drivers/bsp_f1xx_sdio.c ****                 return SD_DATA_TIMEOUT;
 552:drivers/bsp_f1xx_sdio.c ****             }else if(SDIO->STA&(1<<1))	//Êï∞ÊçÆÂùóCRCÈîôËØØ
 553:drivers/bsp_f1xx_sdio.c ****             {
 554:drivers/bsp_f1xx_sdio.c ****                 SDIO->ICR|=1<<1; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 555:drivers/bsp_f1xx_sdio.c ****                 return SD_DATA_CRC_FAIL;
 556:drivers/bsp_f1xx_sdio.c ****             }else if(SDIO->STA&(1<<5)) 	//Êé•Êî∂fifo‰∏äÊ∫¢ÈîôËØØ
 557:drivers/bsp_f1xx_sdio.c ****             {
 558:drivers/bsp_f1xx_sdio.c ****                 SDIO->ICR|=1<<5; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 559:drivers/bsp_f1xx_sdio.c ****                 return SD_RX_OVERRUN;
 560:drivers/bsp_f1xx_sdio.c ****             }else if(SDIO->STA&(1<<9)) 	//Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 561:drivers/bsp_f1xx_sdio.c ****             {
 562:drivers/bsp_f1xx_sdio.c ****                 SDIO->ICR|=1<<9; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 563:drivers/bsp_f1xx_sdio.c ****                 return SD_START_BIT_ERR;
 564:drivers/bsp_f1xx_sdio.c ****             }
 565:drivers/bsp_f1xx_sdio.c ****             while(SDIO->STA&(1<<21))	//FIFOÈáåÈù¢,ËøòÂ≠òÂú®ÂèØÁî®Êï∞ÊçÆ
 566:drivers/bsp_f1xx_sdio.c ****             {
 567:drivers/bsp_f1xx_sdio.c ****                 *tempbuff=SDIO->FIFO;	//Âæ™ÁéØËØªÂèñÊï∞ÊçÆ
 568:drivers/bsp_f1xx_sdio.c ****                 tempbuff++;
 569:drivers/bsp_f1xx_sdio.c ****             }
 570:drivers/bsp_f1xx_sdio.c ****             if(SDIO->STA&(1<<8))		//Êé•Êî∂ÁªìÊùü
 571:drivers/bsp_f1xx_sdio.c ****             {
 572:drivers/bsp_f1xx_sdio.c ****                 if((SDIO_STD_CAPACITY_SD_CARD_V1_1==CardType)||(SDIO_STD_CAPACITY_SD_CARD_V2_0==Car
 573:drivers/bsp_f1xx_sdio.c ****                 {
 574:drivers/bsp_f1xx_sdio.c ****                     SDIO_Send_Cmd(SD_CMD_STOP_TRANSMISSION,1,0);		//ÂèëÈÄÅCMD12+ÁªìÊùü‰º†Ëæì
 575:drivers/bsp_f1xx_sdio.c ****                     errorstatus=CmdResp1Error(SD_CMD_STOP_TRANSMISSION);//Á≠âÂæÖR1ÂìçÂ∫î
 576:drivers/bsp_f1xx_sdio.c ****                     if(errorstatus!=SD_OK)return errorstatus;
 577:drivers/bsp_f1xx_sdio.c ****                 }
 578:drivers/bsp_f1xx_sdio.c ****             }
 579:drivers/bsp_f1xx_sdio.c ****             INTX_ENABLE();//ÂºÄÂêØÊÄª‰∏≠Êñ≠
 580:drivers/bsp_f1xx_sdio.c ****             SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 581:drivers/bsp_f1xx_sdio.c ****         }else if(DeviceMode==SD_DMA_MODE)
 582:drivers/bsp_f1xx_sdio.c ****         {
 583:drivers/bsp_f1xx_sdio.c ****             SD_DMA_Config((u32*)buf,nblks*blksize,0);
 584:drivers/bsp_f1xx_sdio.c ****             TransferError=SD_OK;
 585:drivers/bsp_f1xx_sdio.c ****             StopCondition=1;			//Â§öÂùóËØª,ÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 586:drivers/bsp_f1xx_sdio.c ****             TransferEnd=0;				//‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 587:drivers/bsp_f1xx_sdio.c ****             SDIO->MASK|=(1<<1)|(1<<3)|(1<<8)|(1<<5)|(1<<9);	//ÈÖçÁΩÆÈúÄË¶ÅÁöÑ‰∏≠Êñ≠
 588:drivers/bsp_f1xx_sdio.c ****             SDIO->DCTRL|=1<<3;		 						//SDIO DMA‰ΩøËÉΩ
 589:drivers/bsp_f1xx_sdio.c ****             while(((DMA2->ISR&0X2000)==0)&&timeout)timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 590:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 591:drivers/bsp_f1xx_sdio.c ****             while((TransferEnd==0)&&(TransferError==SD_OK));
 592:drivers/bsp_f1xx_sdio.c ****             if(TransferError!=SD_OK)errorstatus=TransferError;
 593:drivers/bsp_f1xx_sdio.c ****         }
 594:drivers/bsp_f1xx_sdio.c ****     }
 595:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
 596:drivers/bsp_f1xx_sdio.c **** }
 597:drivers/bsp_f1xx_sdio.c **** //SDÂç°ÂÜô1‰∏™Âùó
 598:drivers/bsp_f1xx_sdio.c **** //buf:Êï∞ÊçÆÁºìÂ≠òÂå∫
 599:drivers/bsp_f1xx_sdio.c **** //addr:ÂÜôÂú∞ÂùÄ
 600:drivers/bsp_f1xx_sdio.c **** //blksize:ÂùóÂ§ßÂ∞è
 601:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 602:drivers/bsp_f1xx_sdio.c **** SD_Error SD_WriteBlock(u8 *buf,long long addr,  u16 blksize)
 603:drivers/bsp_f1xx_sdio.c **** {
 604:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus = SD_OK;
 605:drivers/bsp_f1xx_sdio.c ****     u8  power=0,cardstate=0;
 606:drivers/bsp_f1xx_sdio.c ****     u32 timeout=0,bytestransferred=0;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 23


 607:drivers/bsp_f1xx_sdio.c ****     u32 cardstatus=0,count=0,restwords=0;
 608:drivers/bsp_f1xx_sdio.c ****     u32	tlen=blksize;						//ÊÄªÈïøÂ∫¶(Â≠óËäÇ)
 609:drivers/bsp_f1xx_sdio.c ****     u32*tempbuff=(u32*)buf;
 610:drivers/bsp_f1xx_sdio.c ****     if(buf==NULL)return SD_INVALID_PARAMETER;//ÂèÇÊï∞ÈîôËØØ
 611:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=0x0;							//Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 612:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Data_Cfg(SD_DATATIMEOUT,0,0,0);	//Ê∏ÖÈô§DPSMÁä∂ÊÄÅÊú∫ÈÖçÁΩÆ
 613:drivers/bsp_f1xx_sdio.c ****     if(SDIO->RESP1&SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 614:drivers/bsp_f1xx_sdio.c ****     if(CardType==SDIO_HIGH_CAPACITY_SD_CARD)	//Â§ßÂÆπÈáèÂç°
 615:drivers/bsp_f1xx_sdio.c ****     {
 616:drivers/bsp_f1xx_sdio.c ****         blksize=512;
 617:drivers/bsp_f1xx_sdio.c ****         addr>>=9;
 618:drivers/bsp_f1xx_sdio.c ****     }
 619:drivers/bsp_f1xx_sdio.c ****     if((blksize>0)&&(blksize<=2048)&&((blksize&(blksize-1))==0))
 620:drivers/bsp_f1xx_sdio.c ****     {
 621:drivers/bsp_f1xx_sdio.c ****         power=convert_from_bytes_to_power_of_two(blksize);
 622:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN,1,blksize);	//ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü
 623:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_SET_BLOCKLEN);	//Á≠âÂæÖR1ÂìçÂ∫î
 624:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 625:drivers/bsp_f1xx_sdio.c ****     }else return SD_INVALID_PARAMETER;
 626:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_SEND_STATUS,1,(u32)RCA<<16);	//ÂèëÈÄÅCMD13,Êü•ËØ¢Âç°ÁöÑÁä∂ÊÄÅ,Áü≠ÂìçÂ∫î
 627:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_SEND_STATUS);		//Á≠âÂæÖR1ÂìçÂ∫î
 628:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;
 629:drivers/bsp_f1xx_sdio.c ****     cardstatus=SDIO->RESP1;
 630:drivers/bsp_f1xx_sdio.c ****     timeout=SD_DATATIMEOUT;
 631:drivers/bsp_f1xx_sdio.c ****     while(((cardstatus&0x00000100)==0)&&(timeout>0)) 	//Ê£ÄÊü•READY_FOR_DATA‰ΩçÊòØÂê¶ÁΩÆ‰Ωç
 632:drivers/bsp_f1xx_sdio.c ****     {
 633:drivers/bsp_f1xx_sdio.c ****         timeout--;
 634:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SEND_STATUS,1,(u32)RCA<<16);//ÂèëÈÄÅCMD13,Êü•ËØ¢Âç°ÁöÑÁä∂ÊÄÅ,Áü≠ÂìçÂ∫î
 635:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_SEND_STATUS);	//Á≠âÂæÖR1ÂìçÂ∫î
 636:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;
 637:drivers/bsp_f1xx_sdio.c ****         cardstatus=SDIO->RESP1;
 638:drivers/bsp_f1xx_sdio.c ****     }
 639:drivers/bsp_f1xx_sdio.c ****     if(timeout==0)return SD_ERROR;
 640:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_WRITE_SINGLE_BLOCK,1,addr);	//ÂèëÈÄÅCMD24,ÂÜôÂçïÂùóÊåá‰ª§,Áü≠ÂìçÂ∫î
 641:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_WRITE_SINGLE_BLOCK);//Á≠âÂæÖR1ÂìçÂ∫î
 642:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;
 643:drivers/bsp_f1xx_sdio.c ****     StopCondition=0;									//ÂçïÂùóÂÜô,‰∏çÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 644:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Data_Cfg(SD_DATATIMEOUT,blksize,power,0);	//blksize, ÊéßÂà∂Âô®Âà∞Âç°
 645:drivers/bsp_f1xx_sdio.c ****     timeout=SDIO_DATATIMEOUT;
 646:drivers/bsp_f1xx_sdio.c ****     if (DeviceMode == SD_POLLING_MODE)
 647:drivers/bsp_f1xx_sdio.c ****     {
 648:drivers/bsp_f1xx_sdio.c ****         INTX_DISABLE();//ÂÖ≥Èó≠ÊÄª‰∏≠Êñ≠(POLLINGÊ®°Âºè,‰∏•Á¶Å‰∏≠Êñ≠ÊâìÊñ≠SDIOËØªÂÜôÊìç‰Ωú!!!)
 649:drivers/bsp_f1xx_sdio.c ****         while(!(SDIO->STA&((1<<10)|(1<<4)|(1<<1)|(1<<3)|(1<<9))))//Êï∞ÊçÆÂùóÂèëÈÄÅÊàêÂäü/‰∏ãÊ∫¢/CRC
 650:drivers/bsp_f1xx_sdio.c ****         {
 651:drivers/bsp_f1xx_sdio.c ****             if(SDIO->STA&(1<<14))							//ÂèëÈÄÅÂå∫ÂçäÁ©∫,Ë°®Á§∫Ëá≥Â∞ëÂ≠ò‰∫Ü8‰∏™Â≠ó
 652:drivers/bsp_f1xx_sdio.c ****             {
 653:drivers/bsp_f1xx_sdio.c ****                 if((tlen-bytestransferred)<SD_HALFFIFOBYTES)//‰∏çÂ§ü32Â≠óËäÇ‰∫Ü
 654:drivers/bsp_f1xx_sdio.c ****                 {
 655:drivers/bsp_f1xx_sdio.c ****                     restwords=((tlen-bytestransferred)%4==0)?((tlen-bytestransferred)/4):((tlen-byt
 656:drivers/bsp_f1xx_sdio.c **** 
 657:drivers/bsp_f1xx_sdio.c ****                     for(count=0;count<restwords;count++,tempbuff++,bytestransferred+=4)
 658:drivers/bsp_f1xx_sdio.c ****                     {
 659:drivers/bsp_f1xx_sdio.c ****                         SDIO->FIFO=*tempbuff;
 660:drivers/bsp_f1xx_sdio.c ****                     }
 661:drivers/bsp_f1xx_sdio.c ****                 }else
 662:drivers/bsp_f1xx_sdio.c ****                 {
 663:drivers/bsp_f1xx_sdio.c ****                     for(count=0;count<8;count++)
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 24


 664:drivers/bsp_f1xx_sdio.c ****                     {
 665:drivers/bsp_f1xx_sdio.c ****                         SDIO->FIFO=*(tempbuff+count);
 666:drivers/bsp_f1xx_sdio.c ****                     }
 667:drivers/bsp_f1xx_sdio.c ****                     tempbuff+=8;
 668:drivers/bsp_f1xx_sdio.c ****                     bytestransferred+=32;
 669:drivers/bsp_f1xx_sdio.c ****                 }
 670:drivers/bsp_f1xx_sdio.c ****                 timeout=0X3FFFFFFF;	//ÂÜôÊï∞ÊçÆÊ∫¢Âá∫Êó∂Èó¥
 671:drivers/bsp_f1xx_sdio.c ****             }else
 672:drivers/bsp_f1xx_sdio.c ****             {
 673:drivers/bsp_f1xx_sdio.c ****                 if(timeout==0)return SD_DATA_TIMEOUT;
 674:drivers/bsp_f1xx_sdio.c ****                 timeout--;
 675:drivers/bsp_f1xx_sdio.c ****             }
 676:drivers/bsp_f1xx_sdio.c ****         }
 677:drivers/bsp_f1xx_sdio.c ****         if(SDIO->STA&(1<<3))		//Êï∞ÊçÆË∂ÖÊó∂ÈîôËØØ
 678:drivers/bsp_f1xx_sdio.c ****         {
 679:drivers/bsp_f1xx_sdio.c ****             SDIO->ICR|=1<<3; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 680:drivers/bsp_f1xx_sdio.c ****             return SD_DATA_TIMEOUT;
 681:drivers/bsp_f1xx_sdio.c ****         }else if(SDIO->STA&(1<<1))	//Êï∞ÊçÆÂùóCRCÈîôËØØ
 682:drivers/bsp_f1xx_sdio.c ****         {
 683:drivers/bsp_f1xx_sdio.c ****             SDIO->ICR|=1<<1; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 684:drivers/bsp_f1xx_sdio.c ****             return SD_DATA_CRC_FAIL;
 685:drivers/bsp_f1xx_sdio.c ****         }else if(SDIO->STA&(1<<4)) 	//Êé•Êî∂fifo‰∏ãÊ∫¢ÈîôËØØ
 686:drivers/bsp_f1xx_sdio.c ****         {
 687:drivers/bsp_f1xx_sdio.c ****             SDIO->ICR|=1<<4; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 688:drivers/bsp_f1xx_sdio.c ****             return SD_TX_UNDERRUN;
 689:drivers/bsp_f1xx_sdio.c ****         }else if(SDIO->STA&(1<<9)) 	//Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 690:drivers/bsp_f1xx_sdio.c ****         {
 691:drivers/bsp_f1xx_sdio.c ****             SDIO->ICR|=1<<9; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 692:drivers/bsp_f1xx_sdio.c ****             return SD_START_BIT_ERR;
 693:drivers/bsp_f1xx_sdio.c ****         }
 694:drivers/bsp_f1xx_sdio.c ****         INTX_ENABLE();//ÂºÄÂêØÊÄª‰∏≠Êñ≠
 695:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 696:drivers/bsp_f1xx_sdio.c ****     }else if(DeviceMode==SD_DMA_MODE)
 697:drivers/bsp_f1xx_sdio.c ****     {
 698:drivers/bsp_f1xx_sdio.c ****         SD_DMA_Config((u32*)buf,blksize,1);//SDIO DMAÈÖçÁΩÆ
 699:drivers/bsp_f1xx_sdio.c ****         TransferError=SD_OK;
 700:drivers/bsp_f1xx_sdio.c ****         StopCondition=0;			//ÂçïÂùóÂÜô,‰∏çÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 701:drivers/bsp_f1xx_sdio.c ****         TransferEnd=0;				//‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 702:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK|=(1<<1)|(1<<3)|(1<<8)|(1<<4)|(1<<9);	//ÈÖçÁΩÆ‰∫ßÁîüÊï∞ÊçÆÊé•Êî∂ÂÆåÊàê‰∏≠Êñ≠
 703:drivers/bsp_f1xx_sdio.c ****         SDIO->DCTRL|=1<<3;								//SDIO DMA‰ΩøËÉΩ.
 704:drivers/bsp_f1xx_sdio.c ****         while(((DMA2->ISR&0X2000)==0)&&timeout)timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 705:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)
 706:drivers/bsp_f1xx_sdio.c ****         {
 707:drivers/bsp_f1xx_sdio.c ****             bsp_SD_Init();	 					//ÈáçÊñ∞ÂàùÂßãÂåñSDÂç°,ÂèØ‰ª•Ëß£ÂÜ≥ÂÜôÂÖ•Ê≠ªÊú∫ÁöÑÈóÆÈ¢ò
 708:drivers/bsp_f1xx_sdio.c ****             return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 709:drivers/bsp_f1xx_sdio.c ****         }
 710:drivers/bsp_f1xx_sdio.c ****         timeout=SDIO_DATATIMEOUT;
 711:drivers/bsp_f1xx_sdio.c ****         while((TransferEnd==0)&&(TransferError==SD_OK)&&timeout)timeout--;
 712:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 713:drivers/bsp_f1xx_sdio.c ****         if(TransferError!=SD_OK)return TransferError;
 714:drivers/bsp_f1xx_sdio.c ****     }
 715:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 716:drivers/bsp_f1xx_sdio.c ****     errorstatus=IsCardProgramming(&cardstate);
 717:drivers/bsp_f1xx_sdio.c ****     while((errorstatus==SD_OK)&&((cardstate==SD_CARD_PROGRAMMING)||(cardstate==SD_CARD_RECEIVING)))
 718:drivers/bsp_f1xx_sdio.c ****     {
 719:drivers/bsp_f1xx_sdio.c ****         errorstatus=IsCardProgramming(&cardstate);
 720:drivers/bsp_f1xx_sdio.c ****     }
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 25


 721:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
 722:drivers/bsp_f1xx_sdio.c **** }
 723:drivers/bsp_f1xx_sdio.c **** //SDÂç°ÂÜôÂ§ö‰∏™Âùó
 724:drivers/bsp_f1xx_sdio.c **** //buf:Êï∞ÊçÆÁºìÂ≠òÂå∫
 725:drivers/bsp_f1xx_sdio.c **** //addr:ÂÜôÂú∞ÂùÄ
 726:drivers/bsp_f1xx_sdio.c **** //blksize:ÂùóÂ§ßÂ∞è
 727:drivers/bsp_f1xx_sdio.c **** //nblks:Ë¶ÅÂÜôÂÖ•ÁöÑÂùóÊï∞
 728:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 729:drivers/bsp_f1xx_sdio.c **** SD_Error SD_WriteMultiBlocks(u8 *buf,long long addr,u16 blksize,u32 nblks)
 730:drivers/bsp_f1xx_sdio.c **** {
 731:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus = SD_OK;
 732:drivers/bsp_f1xx_sdio.c ****     u8  power = 0, cardstate = 0;
 733:drivers/bsp_f1xx_sdio.c ****     u32 timeout=0,bytestransferred=0;
 734:drivers/bsp_f1xx_sdio.c ****     u32 count = 0, restwords = 0;
 735:drivers/bsp_f1xx_sdio.c ****     u32 tlen=nblks*blksize;				//ÊÄªÈïøÂ∫¶(Â≠óËäÇ)
 736:drivers/bsp_f1xx_sdio.c ****     u32 *tempbuff = (u32*)buf;
 737:drivers/bsp_f1xx_sdio.c ****     if(buf==NULL)return SD_INVALID_PARAMETER; //ÂèÇÊï∞ÈîôËØØ
 738:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=0x0;							//Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 739:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Data_Cfg(SD_DATATIMEOUT,0,0,0);	//Ê∏ÖÈô§DPSMÁä∂ÊÄÅÊú∫ÈÖçÁΩÆ
 740:drivers/bsp_f1xx_sdio.c ****     if(SDIO->RESP1&SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 741:drivers/bsp_f1xx_sdio.c ****     if(CardType==SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 742:drivers/bsp_f1xx_sdio.c ****     {
 743:drivers/bsp_f1xx_sdio.c ****         blksize=512;
 744:drivers/bsp_f1xx_sdio.c ****         addr>>=9;
 745:drivers/bsp_f1xx_sdio.c ****     }
 746:drivers/bsp_f1xx_sdio.c ****     if((blksize>0)&&(blksize<=2048)&&((blksize&(blksize-1))==0))
 747:drivers/bsp_f1xx_sdio.c ****     {
 748:drivers/bsp_f1xx_sdio.c ****         power=convert_from_bytes_to_power_of_two(blksize);
 749:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN,1,blksize);	//ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü
 750:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_SET_BLOCKLEN);	//Á≠âÂæÖR1ÂìçÂ∫î
 751:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 752:drivers/bsp_f1xx_sdio.c ****     }else return SD_INVALID_PARAMETER;
 753:drivers/bsp_f1xx_sdio.c ****     if(nblks>1)
 754:drivers/bsp_f1xx_sdio.c ****     {
 755:drivers/bsp_f1xx_sdio.c ****         if(nblks*blksize>SD_MAX_DATA_LENGTH)return SD_INVALID_PARAMETER;
 756:drivers/bsp_f1xx_sdio.c ****         if((SDIO_STD_CAPACITY_SD_CARD_V1_1==CardType)||(SDIO_STD_CAPACITY_SD_CARD_V2_0==CardType)||
 757:drivers/bsp_f1xx_sdio.c ****         {
 758:drivers/bsp_f1xx_sdio.c ****             //ÊèêÈ´òÊÄßËÉΩ
 759:drivers/bsp_f1xx_sdio.c ****             SDIO_Send_Cmd(SD_CMD_APP_CMD,1,(u32)RCA<<16);	//ÂèëÈÄÅACMD55,Áü≠ÂìçÂ∫î
 760:drivers/bsp_f1xx_sdio.c ****             errorstatus=CmdResp1Error(SD_CMD_APP_CMD);		//Á≠âÂæÖR1ÂìçÂ∫î
 761:drivers/bsp_f1xx_sdio.c ****             if(errorstatus!=SD_OK)return errorstatus;
 762:drivers/bsp_f1xx_sdio.c ****             SDIO_Send_Cmd(SD_CMD_SET_BLOCK_COUNT,1,nblks);	//ÂèëÈÄÅCMD23,ËÆæÁΩÆÂùóÊï∞Èáè,Áü≠ÂìçÂ∫î
 763:drivers/bsp_f1xx_sdio.c ****             errorstatus=CmdResp1Error(SD_CMD_SET_BLOCK_COUNT);//Á≠âÂæÖR1ÂìçÂ∫î
 764:drivers/bsp_f1xx_sdio.c ****             if(errorstatus!=SD_OK)return errorstatus;
 765:drivers/bsp_f1xx_sdio.c ****         }
 766:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_WRITE_MULT_BLOCK,1,addr);		//ÂèëÈÄÅCMD25,Â§öÂùóÂÜôÊåá‰ª§,Áü≠ÂìçÂ∫î
 767:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_WRITE_MULT_BLOCK);	//Á≠âÂæÖR1ÂìçÂ∫î
 768:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;
 769:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Data_Cfg(SD_DATATIMEOUT,nblks*blksize,power,0);//blksize, ÊéßÂà∂Âô®Âà∞Âç°
 770:drivers/bsp_f1xx_sdio.c ****         if(DeviceMode==SD_POLLING_MODE)
 771:drivers/bsp_f1xx_sdio.c ****         {
 772:drivers/bsp_f1xx_sdio.c ****             timeout=SDIO_DATATIMEOUT;
 773:drivers/bsp_f1xx_sdio.c ****             INTX_DISABLE();//ÂÖ≥Èó≠ÊÄª‰∏≠Êñ≠(POLLINGÊ®°Âºè,‰∏•Á¶Å‰∏≠Êñ≠ÊâìÊñ≠SDIOËØªÂÜôÊìç‰Ωú!!!)
 774:drivers/bsp_f1xx_sdio.c ****             while(!(SDIO->STA&((1<<4)|(1<<1)|(1<<8)|(1<<3)|(1<<9))))//‰∏ãÊ∫¢/CRC/Êï∞ÊçÆÁªìÊùü/Ë∂ÖÊó
 775:drivers/bsp_f1xx_sdio.c ****             {
 776:drivers/bsp_f1xx_sdio.c ****                 if(SDIO->STA&(1<<14))							//ÂèëÈÄÅÂå∫ÂçäÁ©∫,Ë°®Á§∫Ëá≥Â∞ëÂ≠ò‰∫Ü8Â≠ó(32Â≠óËäÇ)
 777:drivers/bsp_f1xx_sdio.c ****                 {
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 26


 778:drivers/bsp_f1xx_sdio.c ****                     if((tlen-bytestransferred)<SD_HALFFIFOBYTES)//‰∏çÂ§ü32Â≠óËäÇ‰∫Ü
 779:drivers/bsp_f1xx_sdio.c ****                     {
 780:drivers/bsp_f1xx_sdio.c ****                         restwords=((tlen-bytestransferred)%4==0)?((tlen-bytestransferred)/4):((tlen
 781:drivers/bsp_f1xx_sdio.c ****                         for(count=0;count<restwords;count++,tempbuff++,bytestransferred+=4)
 782:drivers/bsp_f1xx_sdio.c ****                         {
 783:drivers/bsp_f1xx_sdio.c ****                             SDIO->FIFO=*tempbuff;
 784:drivers/bsp_f1xx_sdio.c ****                         }
 785:drivers/bsp_f1xx_sdio.c ****                     }else 										//ÂèëÈÄÅÂå∫ÂçäÁ©∫,ÂèØ‰ª•ÂèëÈÄÅËá≥Â∞ë8Â≠ó(32Â≠óËäÇ)Êï∞ÊçÆ
 786:drivers/bsp_f1xx_sdio.c ****                     {
 787:drivers/bsp_f1xx_sdio.c ****                         for(count=0;count<SD_HALFFIFO;count++)
 788:drivers/bsp_f1xx_sdio.c ****                         {
 789:drivers/bsp_f1xx_sdio.c ****                             SDIO->FIFO=*(tempbuff+count);
 790:drivers/bsp_f1xx_sdio.c ****                         }
 791:drivers/bsp_f1xx_sdio.c ****                         tempbuff+=SD_HALFFIFO;
 792:drivers/bsp_f1xx_sdio.c ****                         bytestransferred+=SD_HALFFIFOBYTES;
 793:drivers/bsp_f1xx_sdio.c ****                     }
 794:drivers/bsp_f1xx_sdio.c ****                     timeout=0X3FFFFFFF;	//ÂÜôÊï∞ÊçÆÊ∫¢Âá∫Êó∂Èó¥
 795:drivers/bsp_f1xx_sdio.c ****                 }else
 796:drivers/bsp_f1xx_sdio.c ****                 {
 797:drivers/bsp_f1xx_sdio.c ****                     if(timeout==0)return SD_DATA_TIMEOUT;
 798:drivers/bsp_f1xx_sdio.c ****                     timeout--;
 799:drivers/bsp_f1xx_sdio.c ****                 }
 800:drivers/bsp_f1xx_sdio.c ****             }
 801:drivers/bsp_f1xx_sdio.c ****             if(SDIO->STA&(1<<3))		//Êï∞ÊçÆË∂ÖÊó∂ÈîôËØØ
 802:drivers/bsp_f1xx_sdio.c ****             {
 803:drivers/bsp_f1xx_sdio.c ****                 SDIO->ICR|=1<<3; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 804:drivers/bsp_f1xx_sdio.c ****                 return SD_DATA_TIMEOUT;
 805:drivers/bsp_f1xx_sdio.c ****             }else if(SDIO->STA&(1<<1))	//Êï∞ÊçÆÂùóCRCÈîôËØØ
 806:drivers/bsp_f1xx_sdio.c ****             {
 807:drivers/bsp_f1xx_sdio.c ****                 SDIO->ICR|=1<<1; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 808:drivers/bsp_f1xx_sdio.c ****                 return SD_DATA_CRC_FAIL;
 809:drivers/bsp_f1xx_sdio.c ****             }else if(SDIO->STA&(1<<4)) 	//Êé•Êî∂fifo‰∏ãÊ∫¢ÈîôËØØ
 810:drivers/bsp_f1xx_sdio.c ****             {
 811:drivers/bsp_f1xx_sdio.c ****                 SDIO->ICR|=1<<4; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 812:drivers/bsp_f1xx_sdio.c ****                 return SD_TX_UNDERRUN;
 813:drivers/bsp_f1xx_sdio.c ****             }else if(SDIO->STA&(1<<9)) 	//Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 814:drivers/bsp_f1xx_sdio.c ****             {
 815:drivers/bsp_f1xx_sdio.c ****                 SDIO->ICR|=1<<9; 		//Ê∏ÖÈîôËØØÊ†áÂøó
 816:drivers/bsp_f1xx_sdio.c ****                 return SD_START_BIT_ERR;
 817:drivers/bsp_f1xx_sdio.c ****             }
 818:drivers/bsp_f1xx_sdio.c ****             if(SDIO->STA&(1<<8))		//ÂèëÈÄÅÁªìÊùü
 819:drivers/bsp_f1xx_sdio.c ****             {
 820:drivers/bsp_f1xx_sdio.c ****                 if((SDIO_STD_CAPACITY_SD_CARD_V1_1==CardType)||(SDIO_STD_CAPACITY_SD_CARD_V2_0==Car
 821:drivers/bsp_f1xx_sdio.c ****                 {
 822:drivers/bsp_f1xx_sdio.c ****                     SDIO_Send_Cmd(SD_CMD_STOP_TRANSMISSION,1,0);		//ÂèëÈÄÅCMD12+ÁªìÊùü‰º†Ëæì
 823:drivers/bsp_f1xx_sdio.c ****                     errorstatus=CmdResp1Error(SD_CMD_STOP_TRANSMISSION);//Á≠âÂæÖR1ÂìçÂ∫î
 824:drivers/bsp_f1xx_sdio.c ****                     if(errorstatus!=SD_OK)return errorstatus;
 825:drivers/bsp_f1xx_sdio.c ****                 }
 826:drivers/bsp_f1xx_sdio.c ****             }
 827:drivers/bsp_f1xx_sdio.c ****             INTX_ENABLE();//ÂºÄÂêØÊÄª‰∏≠Êñ≠
 828:drivers/bsp_f1xx_sdio.c ****             SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 829:drivers/bsp_f1xx_sdio.c ****         }else if(DeviceMode==SD_DMA_MODE)
 830:drivers/bsp_f1xx_sdio.c ****         {
 831:drivers/bsp_f1xx_sdio.c ****             SD_DMA_Config((u32*)buf,nblks*blksize,1);//SDIO DMAÈÖçÁΩÆ
 832:drivers/bsp_f1xx_sdio.c ****             TransferError=SD_OK;
 833:drivers/bsp_f1xx_sdio.c ****             StopCondition=1;			//Â§öÂùóÂÜô,ÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 834:drivers/bsp_f1xx_sdio.c ****             TransferEnd=0;				//‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 27


 835:drivers/bsp_f1xx_sdio.c ****             SDIO->MASK|=(1<<1)|(1<<3)|(1<<8)|(1<<4)|(1<<9);	//ÈÖçÁΩÆ‰∫ßÁîüÊï∞ÊçÆÊé•Êî∂ÂÆåÊàê‰∏≠Êñ≠
 836:drivers/bsp_f1xx_sdio.c ****             SDIO->DCTRL|=1<<3;								//SDIO DMA‰ΩøËÉΩ.
 837:drivers/bsp_f1xx_sdio.c ****             timeout=SDIO_DATATIMEOUT;
 838:drivers/bsp_f1xx_sdio.c ****             while(((DMA2->ISR&0X2000)==0)&&timeout)timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 839:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)	 								//Ë∂ÖÊó∂
 840:drivers/bsp_f1xx_sdio.c ****             {
 841:drivers/bsp_f1xx_sdio.c ****                 bsp_SD_Init();	 					//ÈáçÊñ∞ÂàùÂßãÂåñSDÂç°,ÂèØ‰ª•Ëß£ÂÜ≥ÂÜôÂÖ•Ê≠ªÊú∫ÁöÑÈóÆÈ¢ò
 842:drivers/bsp_f1xx_sdio.c ****                 return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 843:drivers/bsp_f1xx_sdio.c ****             }
 844:drivers/bsp_f1xx_sdio.c ****             timeout=SDIO_DATATIMEOUT;
 845:drivers/bsp_f1xx_sdio.c ****             while((TransferEnd==0)&&(TransferError==SD_OK)&&timeout)timeout--;
 846:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 847:drivers/bsp_f1xx_sdio.c ****             if(TransferError!=SD_OK)return TransferError;
 848:drivers/bsp_f1xx_sdio.c ****         }
 849:drivers/bsp_f1xx_sdio.c ****     }
 850:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 851:drivers/bsp_f1xx_sdio.c ****     errorstatus=IsCardProgramming(&cardstate);
 852:drivers/bsp_f1xx_sdio.c ****     while((errorstatus==SD_OK)&&((cardstate==SD_CARD_PROGRAMMING)||(cardstate==SD_CARD_RECEIVING)))
 853:drivers/bsp_f1xx_sdio.c ****     {
 854:drivers/bsp_f1xx_sdio.c ****         errorstatus=IsCardProgramming(&cardstate);
 855:drivers/bsp_f1xx_sdio.c ****     }
 856:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
 857:drivers/bsp_f1xx_sdio.c **** }
 858:drivers/bsp_f1xx_sdio.c **** //SDIO‰∏≠Êñ≠ÊúçÂä°ÂáΩÊï∞
 859:drivers/bsp_f1xx_sdio.c **** void SDIO_IRQHandler(void)
 860:drivers/bsp_f1xx_sdio.c **** {
 861:drivers/bsp_f1xx_sdio.c ****     SD_ProcessIRQSrc();//Â§ÑÁêÜÊâÄÊúâSDIOÁõ∏ÂÖ≥‰∏≠Êñ≠
 862:drivers/bsp_f1xx_sdio.c **** }
 863:drivers/bsp_f1xx_sdio.c **** //SDIO‰∏≠Êñ≠Â§ÑÁêÜÂáΩÊï∞
 864:drivers/bsp_f1xx_sdio.c **** //Â§ÑÁêÜSDIO‰º†ËæìËøáÁ®ã‰∏≠ÁöÑÂêÑÁßç‰∏≠Êñ≠‰∫ãÂä°
 865:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å
 866:drivers/bsp_f1xx_sdio.c **** SD_Error SD_ProcessIRQSrc(void)
 867:drivers/bsp_f1xx_sdio.c **** {
 868:drivers/bsp_f1xx_sdio.c ****     if(SDIO->STA&(1<<8))//Êé•Êî∂ÂÆåÊàê‰∏≠Êñ≠
 869:drivers/bsp_f1xx_sdio.c ****     {
 870:drivers/bsp_f1xx_sdio.c ****         if (StopCondition==1)
 871:drivers/bsp_f1xx_sdio.c ****         {
 872:drivers/bsp_f1xx_sdio.c ****             SDIO_Send_Cmd(SD_CMD_STOP_TRANSMISSION,1,0);		//ÂèëÈÄÅCMD12,ÁªìÊùü‰º†Ëæì
 873:drivers/bsp_f1xx_sdio.c ****             TransferError=CmdResp1Error(SD_CMD_STOP_TRANSMISSION);
 874:drivers/bsp_f1xx_sdio.c ****         }else TransferError = SD_OK;
 875:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<8;//Ê∏ÖÈô§ÂÆåÊàê‰∏≠Êñ≠Ê†áËÆ∞
 876:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK&=~((1<<1)|(1<<3)|(1<<8)|(1<<14)|(1<<15)|(1<<4)|(1<<5)|(1<<9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Ê
 877:drivers/bsp_f1xx_sdio.c ****         TransferEnd = 1;
 878:drivers/bsp_f1xx_sdio.c ****         return(TransferError);
 879:drivers/bsp_f1xx_sdio.c ****     }
 880:drivers/bsp_f1xx_sdio.c ****     if(SDIO->STA&(1<<1))//Êï∞ÊçÆCRCÈîôËØØ
 881:drivers/bsp_f1xx_sdio.c ****     {
 882:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<1;//Ê∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞
 883:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK&=~((1<<1)|(1<<3)|(1<<8)|(1<<14)|(1<<15)|(1<<4)|(1<<5)|(1<<9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Ê
 884:drivers/bsp_f1xx_sdio.c ****         TransferError = SD_DATA_CRC_FAIL;
 885:drivers/bsp_f1xx_sdio.c ****         return(SD_DATA_CRC_FAIL);
 886:drivers/bsp_f1xx_sdio.c ****     }
 887:drivers/bsp_f1xx_sdio.c ****     if(SDIO->STA&(1<<3))//Êï∞ÊçÆË∂ÖÊó∂ÈîôËØØ
 888:drivers/bsp_f1xx_sdio.c ****     {
 889:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<3;//Ê∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞
 890:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK&=~((1<<1)|(1<<3)|(1<<8)|(1<<14)|(1<<15)|(1<<4)|(1<<5)|(1<<9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Ê
 891:drivers/bsp_f1xx_sdio.c ****         TransferError = SD_DATA_TIMEOUT;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 28


 892:drivers/bsp_f1xx_sdio.c ****         return(SD_DATA_TIMEOUT);
 893:drivers/bsp_f1xx_sdio.c ****     }
 894:drivers/bsp_f1xx_sdio.c ****     if(SDIO->STA&(1<<5))//FIFO‰∏äÊ∫¢ÈîôËØØ
 895:drivers/bsp_f1xx_sdio.c ****     {
 896:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<5;//Ê∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞
 897:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK&=~((1<<1)|(1<<3)|(1<<8)|(1<<14)|(1<<15)|(1<<4)|(1<<5)|(1<<9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Ê
 898:drivers/bsp_f1xx_sdio.c ****         TransferError = SD_RX_OVERRUN;
 899:drivers/bsp_f1xx_sdio.c ****         return(SD_RX_OVERRUN);
 900:drivers/bsp_f1xx_sdio.c ****     }
 901:drivers/bsp_f1xx_sdio.c ****     if(SDIO->STA&(1<<4))//FIFO‰∏ãÊ∫¢ÈîôËØØ
 902:drivers/bsp_f1xx_sdio.c ****     {
 903:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<4;//Ê∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞
 904:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK&=~((1<<1)|(1<<3)|(1<<8)|(1<<14)|(1<<15)|(1<<4)|(1<<5)|(1<<9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Ê
 905:drivers/bsp_f1xx_sdio.c ****         TransferError = SD_TX_UNDERRUN;
 906:drivers/bsp_f1xx_sdio.c ****         return(SD_TX_UNDERRUN);
 907:drivers/bsp_f1xx_sdio.c ****     }
 908:drivers/bsp_f1xx_sdio.c ****     if(SDIO->STA&(1<<9))//Ëµ∑Âßã‰ΩçÈîôËØØ
 909:drivers/bsp_f1xx_sdio.c ****     {
 910:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<9;//Ê∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞
 911:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK&=~((1<<1)|(1<<3)|(1<<8)|(1<<14)|(1<<15)|(1<<4)|(1<<5)|(1<<9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Ê
 912:drivers/bsp_f1xx_sdio.c ****         TransferError = SD_START_BIT_ERR;
 913:drivers/bsp_f1xx_sdio.c ****         return(SD_START_BIT_ERR);
 914:drivers/bsp_f1xx_sdio.c ****     }
 915:drivers/bsp_f1xx_sdio.c ****     return(SD_OK);
 916:drivers/bsp_f1xx_sdio.c **** }
 917:drivers/bsp_f1xx_sdio.c **** 
 918:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•CMD0ÁöÑÊâßË°åÁä∂ÊÄÅ
 919:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:sdÂç°ÈîôËØØÁ†Å
 920:drivers/bsp_f1xx_sdio.c **** SD_Error CmdError(void)
 921:drivers/bsp_f1xx_sdio.c **** {
 645              		.loc 1 921 0
 646              		.cfi_startproc
 647              		@ args = 0, pretend = 0, frame = 0
 648              		@ frame_needed = 0, uses_anonymous_args = 0
 649              		@ link register save eliminated.
 650              	.LVL81:
 922:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus = SD_OK;
 923:drivers/bsp_f1xx_sdio.c ****     u32 timeout=SDIO_CMD0TIMEOUT;
 651              		.loc 1 923 0
 652 0000 4FF48033 		mov	r3, #65536
 653              	.LVL82:
 654              	.L28:
 924:drivers/bsp_f1xx_sdio.c ****     while(timeout--)
 655              		.loc 1 924 0
 656 0004 5A1E     		subs	r2, r3, #1
 657              	.LVL83:
 658 0006 2BB1     		cbz	r3, .L29
 925:drivers/bsp_f1xx_sdio.c ****     {
 926:drivers/bsp_f1xx_sdio.c ****         if(SDIO->STA&(1<<7))break;	//ÂëΩ‰ª§Â∑≤ÂèëÈÄÅ(Êó†ÈúÄÂìçÂ∫î)
 659              		.loc 1 926 0
 660 0008 074B     		ldr	r3, .L33
 661 000a 596B     		ldr	r1, [r3, #52]
 924:drivers/bsp_f1xx_sdio.c ****     while(timeout--)
 662              		.loc 1 924 0
 663 000c 1346     		mov	r3, r2
 664              		.loc 1 926 0
 665 000e 11F0800F 		tst	r1, #128
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 29


 666 0012 F7D0     		beq	.L28
 667              	.L29:
 927:drivers/bsp_f1xx_sdio.c ****     }
 928:drivers/bsp_f1xx_sdio.c ****     if(timeout==0)return SD_CMD_RSP_TIMEOUT;
 668              		.loc 1 928 0
 669 0014 2AB1     		cbz	r2, .L32
 929:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0X5FF;				//Ê∏ÖÈô§Ê†áËÆ∞
 670              		.loc 1 929 0
 671 0016 044B     		ldr	r3, .L33
 672 0018 40F2FF52 		movw	r2, #1535
 673              	.LVL84:
 674 001c 9A63     		str	r2, [r3, #56]
 930:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
 675              		.loc 1 930 0
 676 001e 0020     		movs	r0, #0
 677 0020 7047     		bx	lr
 678              	.LVL85:
 679              	.L32:
 928:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0X5FF;				//Ê∏ÖÈô§Ê†áËÆ∞
 680              		.loc 1 928 0
 681 0022 0320     		movs	r0, #3
 931:drivers/bsp_f1xx_sdio.c **** }
 682              		.loc 1 931 0
 683 0024 7047     		bx	lr
 684              	.L34:
 685 0026 00BF     		.align	2
 686              	.L33:
 687 0028 00800140 		.word	1073840128
 688              		.cfi_endproc
 689              	.LFE83:
 691              		.section	.text.CmdResp7Error,"ax",%progbits
 692              		.align	1
 693              		.global	CmdResp7Error
 694              		.syntax unified
 695              		.thumb
 696              		.thumb_func
 697              		.fpu softvfp
 699              	CmdResp7Error:
 700              	.LFB84:
 932:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•R7ÂìçÂ∫îÁöÑÈîôËØØÁä∂ÊÄÅ
 933:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:sdÂç°ÈîôËØØÁ†Å
 934:drivers/bsp_f1xx_sdio.c **** SD_Error CmdResp7Error(void)
 935:drivers/bsp_f1xx_sdio.c **** {
 701              		.loc 1 935 0
 702              		.cfi_startproc
 703              		@ args = 0, pretend = 0, frame = 0
 704              		@ frame_needed = 0, uses_anonymous_args = 0
 705              		@ link register save eliminated.
 706              	.LVL86:
 936:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
 937:drivers/bsp_f1xx_sdio.c ****     u32 status;
 938:drivers/bsp_f1xx_sdio.c ****     u32 timeout=SDIO_CMD0TIMEOUT;
 707              		.loc 1 938 0
 708 0000 4FF48033 		mov	r3, #65536
 709              	.LVL87:
 710              	.L36:
 939:drivers/bsp_f1xx_sdio.c ****     while(timeout--)
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 30


 711              		.loc 1 939 0
 712 0004 591E     		subs	r1, r3, #1
 713              	.LVL88:
 714 0006 2BB1     		cbz	r3, .L37
 940:drivers/bsp_f1xx_sdio.c ****     {
 941:drivers/bsp_f1xx_sdio.c ****         status=SDIO->STA;
 715              		.loc 1 941 0
 716 0008 0E4B     		ldr	r3, .L43
 717 000a 5A6B     		ldr	r2, [r3, #52]
 718              	.LVL89:
 939:drivers/bsp_f1xx_sdio.c ****     while(timeout--)
 719              		.loc 1 939 0
 720 000c 0B46     		mov	r3, r1
 942:drivers/bsp_f1xx_sdio.c ****         if(status&((1<<0)|(1<<2)|(1<<6)))break;//CRCÈîôËØØ/ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂/Â∑≤ÁªèÊî∂Âà∞ÂìçÂ∫î(CR
 721              		.loc 1 942 0
 722 000e 12F0450F 		tst	r2, #69
 723 0012 F7D0     		beq	.L36
 724              	.L37:
 943:drivers/bsp_f1xx_sdio.c ****     }
 944:drivers/bsp_f1xx_sdio.c ****     if((timeout==0)||(status&(1<<2)))	//ÂìçÂ∫îË∂ÖÊó∂
 725              		.loc 1 944 0
 726 0014 61B1     		cbz	r1, .L39
 727              		.loc 1 944 0 is_stmt 0 discriminator 1
 728 0016 12F0040F 		tst	r2, #4
 729 001a 09D1     		bne	.L39
 945:drivers/bsp_f1xx_sdio.c ****     {
 946:drivers/bsp_f1xx_sdio.c ****         errorstatus=SD_CMD_RSP_TIMEOUT;	//ÂΩìÂâçÂç°‰∏çÊòØ2.0ÂÖºÂÆπÂç°,ÊàñËÄÖ‰∏çÊîØÊåÅËÆæÂÆöÁöÑÁîµÂé
 947:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<2;				//Ê∏ÖÈô§ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂Ê†áÂøó
 948:drivers/bsp_f1xx_sdio.c ****         return errorstatus;
 949:drivers/bsp_f1xx_sdio.c ****     }
 950:drivers/bsp_f1xx_sdio.c ****     if(status&1<<6)						//ÊàêÂäüÊé•Êî∂Âà∞ÂìçÂ∫î
 730              		.loc 1 950 0 is_stmt 1
 731 001c 12F0400F 		tst	r2, #64
 732 0020 0DD0     		beq	.L42
 951:drivers/bsp_f1xx_sdio.c ****     {
 952:drivers/bsp_f1xx_sdio.c ****         errorstatus=SD_OK;
 953:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<6;				//Ê∏ÖÈô§ÂìçÂ∫îÊ†áÂøó
 733              		.loc 1 953 0
 734 0022 084A     		ldr	r2, .L43
 735              	.LVL90:
 736 0024 936B     		ldr	r3, [r2, #56]
 737 0026 43F04003 		orr	r3, r3, #64
 738 002a 9363     		str	r3, [r2, #56]
 954:drivers/bsp_f1xx_sdio.c ****     }
 955:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
 739              		.loc 1 955 0
 740 002c 0020     		movs	r0, #0
 741 002e 7047     		bx	lr
 742              	.LVL91:
 743              	.L39:
 947:drivers/bsp_f1xx_sdio.c ****         return errorstatus;
 744              		.loc 1 947 0
 745 0030 044A     		ldr	r2, .L43
 746              	.LVL92:
 747 0032 936B     		ldr	r3, [r2, #56]
 748 0034 43F00403 		orr	r3, r3, #4
 749 0038 9363     		str	r3, [r2, #56]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 31


 948:drivers/bsp_f1xx_sdio.c ****     }
 750              		.loc 1 948 0
 751 003a 0320     		movs	r0, #3
 752 003c 7047     		bx	lr
 753              	.LVL93:
 754              	.L42:
 755              		.loc 1 955 0
 756 003e 0020     		movs	r0, #0
 956:drivers/bsp_f1xx_sdio.c **** }
 757              		.loc 1 956 0
 758 0040 7047     		bx	lr
 759              	.L44:
 760 0042 00BF     		.align	2
 761              	.L43:
 762 0044 00800140 		.word	1073840128
 763              		.cfi_endproc
 764              	.LFE84:
 766              		.section	.text.CmdResp1Error,"ax",%progbits
 767              		.align	1
 768              		.global	CmdResp1Error
 769              		.syntax unified
 770              		.thumb
 771              		.thumb_func
 772              		.fpu softvfp
 774              	CmdResp1Error:
 775              	.LFB85:
 957:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•R1ÂìçÂ∫îÁöÑÈîôËØØÁä∂ÊÄÅ
 958:drivers/bsp_f1xx_sdio.c **** //cmd:ÂΩìÂâçÂëΩ‰ª§
 959:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:sdÂç°ÈîôËØØÁ†Å
 960:drivers/bsp_f1xx_sdio.c **** SD_Error CmdResp1Error(u8 cmd)
 961:drivers/bsp_f1xx_sdio.c **** {
 776              		.loc 1 961 0
 777              		.cfi_startproc
 778              		@ args = 0, pretend = 0, frame = 0
 779              		@ frame_needed = 0, uses_anonymous_args = 0
 780              		@ link register save eliminated.
 781              	.LVL94:
 782              	.L46:
 962:drivers/bsp_f1xx_sdio.c ****     u32 status;
 963:drivers/bsp_f1xx_sdio.c ****     while(1)
 964:drivers/bsp_f1xx_sdio.c ****     {
 965:drivers/bsp_f1xx_sdio.c ****         status=SDIO->STA;
 783              		.loc 1 965 0
 784 0000 104B     		ldr	r3, .L53
 785 0002 5B6B     		ldr	r3, [r3, #52]
 786              	.LVL95:
 966:drivers/bsp_f1xx_sdio.c ****         if(status&((1<<0)|(1<<2)|(1<<6)))break;//CRCÈîôËØØ/ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂/Â∑≤ÁªèÊî∂Âà∞ÂìçÂ∫î(CR
 787              		.loc 1 966 0
 788 0004 13F0450F 		tst	r3, #69
 789 0008 FAD0     		beq	.L46
 967:drivers/bsp_f1xx_sdio.c ****     }
 968:drivers/bsp_f1xx_sdio.c ****     if(status&(1<<2))					//ÂìçÂ∫îË∂ÖÊó∂
 790              		.loc 1 968 0
 791 000a 13F0040F 		tst	r3, #4
 792 000e 0ED1     		bne	.L51
 969:drivers/bsp_f1xx_sdio.c ****     {
 970:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR=1<<2;					//Ê∏ÖÈô§ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂Ê†áÂøó
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 32


 971:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_RSP_TIMEOUT;
 972:drivers/bsp_f1xx_sdio.c ****     }
 973:drivers/bsp_f1xx_sdio.c ****     if(status&(1<<0))					//CRCÈîôËØØ
 793              		.loc 1 973 0
 794 0010 13F0010F 		tst	r3, #1
 795 0014 10D1     		bne	.L52
 974:drivers/bsp_f1xx_sdio.c ****     {
 975:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR=1<<0;					//Ê∏ÖÈô§Ê†áÂøó
 976:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_CRC_FAIL;
 977:drivers/bsp_f1xx_sdio.c ****     }
 978:drivers/bsp_f1xx_sdio.c ****     if(SDIO->RESPCMD!=cmd)return SD_ILLEGAL_CMD;//ÂëΩ‰ª§‰∏çÂåπÈÖç
 796              		.loc 1 978 0
 797 0016 0B4B     		ldr	r3, .L53
 798              	.LVL96:
 799 0018 1B69     		ldr	r3, [r3, #16]
 800 001a 8342     		cmp	r3, r0
 801 001c 10D1     		bne	.L50
 979:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0X5FF;	 				//Ê∏ÖÈô§Ê†áËÆ∞
 802              		.loc 1 979 0
 803 001e 094B     		ldr	r3, .L53
 804 0020 40F2FF52 		movw	r2, #1535
 805 0024 9A63     		str	r2, [r3, #56]
 980:drivers/bsp_f1xx_sdio.c ****     return (SD_Error)(SDIO->RESP1&SD_OCR_ERRORBITS);//ËøîÂõûÂç°ÂìçÂ∫î
 806              		.loc 1 980 0
 807 0026 5869     		ldr	r0, [r3, #20]
 808              	.LVL97:
 809 0028 00F00800 		and	r0, r0, #8
 810 002c 7047     		bx	lr
 811              	.LVL98:
 812              	.L51:
 970:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_RSP_TIMEOUT;
 813              		.loc 1 970 0
 814 002e 054B     		ldr	r3, .L53
 815              	.LVL99:
 816 0030 0422     		movs	r2, #4
 817 0032 9A63     		str	r2, [r3, #56]
 971:drivers/bsp_f1xx_sdio.c ****     }
 818              		.loc 1 971 0
 819 0034 0320     		movs	r0, #3
 820              	.LVL100:
 821 0036 7047     		bx	lr
 822              	.LVL101:
 823              	.L52:
 975:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_CRC_FAIL;
 824              		.loc 1 975 0
 825 0038 0120     		movs	r0, #1
 826              	.LVL102:
 827 003a 024B     		ldr	r3, .L53
 828              	.LVL103:
 829 003c 9863     		str	r0, [r3, #56]
 976:drivers/bsp_f1xx_sdio.c ****     }
 830              		.loc 1 976 0
 831 003e 7047     		bx	lr
 832              	.LVL104:
 833              	.L50:
 978:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0X5FF;	 				//Ê∏ÖÈô§Ê†áËÆ∞
 834              		.loc 1 978 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 33


 835 0040 1020     		movs	r0, #16
 836              	.LVL105:
 981:drivers/bsp_f1xx_sdio.c **** }
 837              		.loc 1 981 0
 838 0042 7047     		bx	lr
 839              	.L54:
 840              		.align	2
 841              	.L53:
 842 0044 00800140 		.word	1073840128
 843              		.cfi_endproc
 844              	.LFE85:
 846              		.section	.text.SD_SelectDeselect,"ax",%progbits
 847              		.align	1
 848              		.global	SD_SelectDeselect
 849              		.syntax unified
 850              		.thumb
 851              		.thumb_func
 852              		.fpu softvfp
 854              	SD_SelectDeselect:
 855              	.LFB76:
 401:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_SEL_DESEL_CARD,1,addr);	//ÂèëÈÄÅCMD7,ÈÄâÊã©Âç°,Áü≠ÂìçÂ∫î
 856              		.loc 1 401 0
 857              		.cfi_startproc
 858              		@ args = 0, pretend = 0, frame = 0
 859              		@ frame_needed = 0, uses_anonymous_args = 0
 860              	.LVL106:
 861 0000 08B5     		push	{r3, lr}
 862              	.LCFI6:
 863              		.cfi_def_cfa_offset 8
 864              		.cfi_offset 3, -8
 865              		.cfi_offset 14, -4
 402:drivers/bsp_f1xx_sdio.c ****     return CmdResp1Error(SD_CMD_SEL_DESEL_CARD);
 866              		.loc 1 402 0
 867 0002 0246     		mov	r2, r0
 868 0004 0121     		movs	r1, #1
 869 0006 0720     		movs	r0, #7
 870              	.LVL107:
 871 0008 FFF7FEFF 		bl	SDIO_Send_Cmd
 872              	.LVL108:
 403:drivers/bsp_f1xx_sdio.c **** }
 873              		.loc 1 403 0
 874 000c 0720     		movs	r0, #7
 875 000e FFF7FEFF 		bl	CmdResp1Error
 876              	.LVL109:
 404:drivers/bsp_f1xx_sdio.c **** //SDÂç°ËØªÂèñ‰∏Ä‰∏™Âùó
 877              		.loc 1 404 0
 878 0012 08BD     		pop	{r3, pc}
 879              		.cfi_endproc
 880              	.LFE76:
 882              		.section	.text.SD_ProcessIRQSrc,"ax",%progbits
 883              		.align	1
 884              		.global	SD_ProcessIRQSrc
 885              		.syntax unified
 886              		.thumb
 887              		.thumb_func
 888              		.fpu softvfp
 890              	SD_ProcessIRQSrc:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 34


 891              	.LFB82:
 867:drivers/bsp_f1xx_sdio.c ****     if(SDIO->STA&(1<<8))//Êé•Êî∂ÂÆåÊàê‰∏≠Êñ≠
 892              		.loc 1 867 0
 893              		.cfi_startproc
 894              		@ args = 0, pretend = 0, frame = 0
 895              		@ frame_needed = 0, uses_anonymous_args = 0
 896 0000 08B5     		push	{r3, lr}
 897              	.LCFI7:
 898              		.cfi_def_cfa_offset 8
 899              		.cfi_offset 3, -8
 900              		.cfi_offset 14, -4
 868:drivers/bsp_f1xx_sdio.c ****     {
 901              		.loc 1 868 0
 902 0002 474B     		ldr	r3, .L74
 903 0004 5B6B     		ldr	r3, [r3, #52]
 904 0006 13F4807F 		tst	r3, #256
 905 000a 23D0     		beq	.L58
 870:drivers/bsp_f1xx_sdio.c ****         {
 906              		.loc 1 870 0
 907 000c 454B     		ldr	r3, .L74+4
 908 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 909 0010 012B     		cmp	r3, #1
 910 0012 14D0     		beq	.L68
 874:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<8;//Ê∏ÖÈô§ÂÆåÊàê‰∏≠Êñ≠Ê†áËÆ∞
 911              		.loc 1 874 0
 912 0014 444B     		ldr	r3, .L74+8
 913 0016 0022     		movs	r2, #0
 914 0018 1A70     		strb	r2, [r3]
 915              	.L60:
 875:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK&=~((1<<1)|(1<<3)|(1<<8)|(1<<14)|(1<<15)|(1<<4)|(1<<5)|(1<<9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Ê
 916              		.loc 1 875 0
 917 001a 414A     		ldr	r2, .L74
 918 001c 936B     		ldr	r3, [r2, #56]
 919 001e 43F48073 		orr	r3, r3, #256
 920 0022 9363     		str	r3, [r2, #56]
 876:drivers/bsp_f1xx_sdio.c ****         TransferEnd = 1;
 921              		.loc 1 876 0
 922 0024 D36B     		ldr	r3, [r2, #60]
 923 0026 23F44343 		bic	r3, r3, #49920
 924 002a 23F03A03 		bic	r3, r3, #58
 925 002e D363     		str	r3, [r2, #60]
 877:drivers/bsp_f1xx_sdio.c ****         return(TransferError);
 926              		.loc 1 877 0
 927 0030 3E4B     		ldr	r3, .L74+12
 928 0032 0122     		movs	r2, #1
 929 0034 1A70     		strb	r2, [r3]
 878:drivers/bsp_f1xx_sdio.c ****     }
 930              		.loc 1 878 0
 931 0036 3C4B     		ldr	r3, .L74+8
 932 0038 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 933 003a C0B2     		uxtb	r0, r0
 934              	.L61:
 916:drivers/bsp_f1xx_sdio.c **** 
 935              		.loc 1 916 0
 936 003c 08BD     		pop	{r3, pc}
 937              	.L68:
 872:drivers/bsp_f1xx_sdio.c ****             TransferError=CmdResp1Error(SD_CMD_STOP_TRANSMISSION);
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 35


 938              		.loc 1 872 0
 939 003e 0022     		movs	r2, #0
 940 0040 0121     		movs	r1, #1
 941 0042 0C20     		movs	r0, #12
 942 0044 FFF7FEFF 		bl	SDIO_Send_Cmd
 943              	.LVL110:
 873:drivers/bsp_f1xx_sdio.c ****         }else TransferError = SD_OK;
 944              		.loc 1 873 0
 945 0048 0C20     		movs	r0, #12
 946 004a FFF7FEFF 		bl	CmdResp1Error
 947              	.LVL111:
 948 004e 364B     		ldr	r3, .L74+8
 949 0050 1870     		strb	r0, [r3]
 950 0052 E2E7     		b	.L60
 951              	.L58:
 880:drivers/bsp_f1xx_sdio.c ****     {
 952              		.loc 1 880 0
 953 0054 324B     		ldr	r3, .L74
 954 0056 5B6B     		ldr	r3, [r3, #52]
 955 0058 13F0020F 		tst	r3, #2
 956 005c 15D1     		bne	.L69
 887:drivers/bsp_f1xx_sdio.c ****     {
 957              		.loc 1 887 0
 958 005e 304B     		ldr	r3, .L74
 959 0060 5B6B     		ldr	r3, [r3, #52]
 960 0062 13F0080F 		tst	r3, #8
 961 0066 1FD1     		bne	.L70
 894:drivers/bsp_f1xx_sdio.c ****     {
 962              		.loc 1 894 0
 963 0068 2D4B     		ldr	r3, .L74
 964 006a 5B6B     		ldr	r3, [r3, #52]
 965 006c 13F0200F 		tst	r3, #32
 966 0070 29D1     		bne	.L71
 901:drivers/bsp_f1xx_sdio.c ****     {
 967              		.loc 1 901 0
 968 0072 2B4B     		ldr	r3, .L74
 969 0074 5B6B     		ldr	r3, [r3, #52]
 970 0076 13F0100F 		tst	r3, #16
 971 007a 33D1     		bne	.L72
 908:drivers/bsp_f1xx_sdio.c ****     {
 972              		.loc 1 908 0
 973 007c 284B     		ldr	r3, .L74
 974 007e 5B6B     		ldr	r3, [r3, #52]
 975 0080 13F4007F 		tst	r3, #512
 976 0084 3DD1     		bne	.L73
 915:drivers/bsp_f1xx_sdio.c **** }
 977              		.loc 1 915 0
 978 0086 0020     		movs	r0, #0
 979 0088 D8E7     		b	.L61
 980              	.L69:
 882:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK&=~((1<<1)|(1<<3)|(1<<8)|(1<<14)|(1<<15)|(1<<4)|(1<<5)|(1<<9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Ê
 981              		.loc 1 882 0
 982 008a 254A     		ldr	r2, .L74
 983 008c 936B     		ldr	r3, [r2, #56]
 984 008e 43F00203 		orr	r3, r3, #2
 985 0092 9363     		str	r3, [r2, #56]
 883:drivers/bsp_f1xx_sdio.c ****         TransferError = SD_DATA_CRC_FAIL;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 36


 986              		.loc 1 883 0
 987 0094 D36B     		ldr	r3, [r2, #60]
 988 0096 23F44343 		bic	r3, r3, #49920
 989 009a 23F03A03 		bic	r3, r3, #58
 990 009e D363     		str	r3, [r2, #60]
 884:drivers/bsp_f1xx_sdio.c ****         return(SD_DATA_CRC_FAIL);
 991              		.loc 1 884 0
 992 00a0 0220     		movs	r0, #2
 993 00a2 214B     		ldr	r3, .L74+8
 994 00a4 1870     		strb	r0, [r3]
 885:drivers/bsp_f1xx_sdio.c ****     }
 995              		.loc 1 885 0
 996 00a6 C9E7     		b	.L61
 997              	.L70:
 889:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK&=~((1<<1)|(1<<3)|(1<<8)|(1<<14)|(1<<15)|(1<<4)|(1<<5)|(1<<9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Ê
 998              		.loc 1 889 0
 999 00a8 1D4A     		ldr	r2, .L74
 1000 00aa 936B     		ldr	r3, [r2, #56]
 1001 00ac 43F00803 		orr	r3, r3, #8
 1002 00b0 9363     		str	r3, [r2, #56]
 890:drivers/bsp_f1xx_sdio.c ****         TransferError = SD_DATA_TIMEOUT;
 1003              		.loc 1 890 0
 1004 00b2 D36B     		ldr	r3, [r2, #60]
 1005 00b4 23F44343 		bic	r3, r3, #49920
 1006 00b8 23F03A03 		bic	r3, r3, #58
 1007 00bc D363     		str	r3, [r2, #60]
 891:drivers/bsp_f1xx_sdio.c ****         return(SD_DATA_TIMEOUT);
 1008              		.loc 1 891 0
 1009 00be 0420     		movs	r0, #4
 1010 00c0 194B     		ldr	r3, .L74+8
 1011 00c2 1870     		strb	r0, [r3]
 892:drivers/bsp_f1xx_sdio.c ****     }
 1012              		.loc 1 892 0
 1013 00c4 BAE7     		b	.L61
 1014              	.L71:
 896:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK&=~((1<<1)|(1<<3)|(1<<8)|(1<<14)|(1<<15)|(1<<4)|(1<<5)|(1<<9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Ê
 1015              		.loc 1 896 0
 1016 00c6 164A     		ldr	r2, .L74
 1017 00c8 936B     		ldr	r3, [r2, #56]
 1018 00ca 43F02003 		orr	r3, r3, #32
 1019 00ce 9363     		str	r3, [r2, #56]
 897:drivers/bsp_f1xx_sdio.c ****         TransferError = SD_RX_OVERRUN;
 1020              		.loc 1 897 0
 1021 00d0 D36B     		ldr	r3, [r2, #60]
 1022 00d2 23F44343 		bic	r3, r3, #49920
 1023 00d6 23F03A03 		bic	r3, r3, #58
 1024 00da D363     		str	r3, [r2, #60]
 898:drivers/bsp_f1xx_sdio.c ****         return(SD_RX_OVERRUN);
 1025              		.loc 1 898 0
 1026 00dc 0620     		movs	r0, #6
 1027 00de 124B     		ldr	r3, .L74+8
 1028 00e0 1870     		strb	r0, [r3]
 899:drivers/bsp_f1xx_sdio.c ****     }
 1029              		.loc 1 899 0
 1030 00e2 ABE7     		b	.L61
 1031              	.L72:
 903:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK&=~((1<<1)|(1<<3)|(1<<8)|(1<<14)|(1<<15)|(1<<4)|(1<<5)|(1<<9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Ê
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 37


 1032              		.loc 1 903 0
 1033 00e4 0E4A     		ldr	r2, .L74
 1034 00e6 936B     		ldr	r3, [r2, #56]
 1035 00e8 43F01003 		orr	r3, r3, #16
 1036 00ec 9363     		str	r3, [r2, #56]
 904:drivers/bsp_f1xx_sdio.c ****         TransferError = SD_TX_UNDERRUN;
 1037              		.loc 1 904 0
 1038 00ee D36B     		ldr	r3, [r2, #60]
 1039 00f0 23F44343 		bic	r3, r3, #49920
 1040 00f4 23F03A03 		bic	r3, r3, #58
 1041 00f8 D363     		str	r3, [r2, #60]
 905:drivers/bsp_f1xx_sdio.c ****         return(SD_TX_UNDERRUN);
 1042              		.loc 1 905 0
 1043 00fa 0520     		movs	r0, #5
 1044 00fc 0A4B     		ldr	r3, .L74+8
 1045 00fe 1870     		strb	r0, [r3]
 906:drivers/bsp_f1xx_sdio.c ****     }
 1046              		.loc 1 906 0
 1047 0100 9CE7     		b	.L61
 1048              	.L73:
 910:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK&=~((1<<1)|(1<<3)|(1<<8)|(1<<14)|(1<<15)|(1<<4)|(1<<5)|(1<<9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Ê
 1049              		.loc 1 910 0
 1050 0102 074A     		ldr	r2, .L74
 1051 0104 936B     		ldr	r3, [r2, #56]
 1052 0106 43F40073 		orr	r3, r3, #512
 1053 010a 9363     		str	r3, [r2, #56]
 911:drivers/bsp_f1xx_sdio.c ****         TransferError = SD_START_BIT_ERR;
 1054              		.loc 1 911 0
 1055 010c D36B     		ldr	r3, [r2, #60]
 1056 010e 23F44343 		bic	r3, r3, #49920
 1057 0112 23F03A03 		bic	r3, r3, #58
 1058 0116 D363     		str	r3, [r2, #60]
 912:drivers/bsp_f1xx_sdio.c ****         return(SD_START_BIT_ERR);
 1059              		.loc 1 912 0
 1060 0118 0720     		movs	r0, #7
 1061 011a 034B     		ldr	r3, .L74+8
 1062 011c 1870     		strb	r0, [r3]
 913:drivers/bsp_f1xx_sdio.c ****     }
 1063              		.loc 1 913 0
 1064 011e 8DE7     		b	.L61
 1065              	.L75:
 1066              		.align	2
 1067              	.L74:
 1068 0120 00800140 		.word	1073840128
 1069 0124 00000000 		.word	.LANCHOR5
 1070 0128 00000000 		.word	.LANCHOR6
 1071 012c 00000000 		.word	.LANCHOR7
 1072              		.cfi_endproc
 1073              	.LFE82:
 1075              		.section	.text.SDIO_IRQHandler,"ax",%progbits
 1076              		.align	1
 1077              		.global	SDIO_IRQHandler
 1078              		.syntax unified
 1079              		.thumb
 1080              		.thumb_func
 1081              		.fpu softvfp
 1083              	SDIO_IRQHandler:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 38


 1084              	.LFB81:
 860:drivers/bsp_f1xx_sdio.c ****     SD_ProcessIRQSrc();//Â§ÑÁêÜÊâÄÊúâSDIOÁõ∏ÂÖ≥‰∏≠Êñ≠
 1085              		.loc 1 860 0
 1086              		.cfi_startproc
 1087              		@ args = 0, pretend = 0, frame = 0
 1088              		@ frame_needed = 0, uses_anonymous_args = 0
 1089 0000 08B5     		push	{r3, lr}
 1090              	.LCFI8:
 1091              		.cfi_def_cfa_offset 8
 1092              		.cfi_offset 3, -8
 1093              		.cfi_offset 14, -4
 861:drivers/bsp_f1xx_sdio.c **** }
 1094              		.loc 1 861 0
 1095 0002 FFF7FEFF 		bl	SD_ProcessIRQSrc
 1096              	.LVL112:
 862:drivers/bsp_f1xx_sdio.c **** //SDIO‰∏≠Êñ≠Â§ÑÁêÜÂáΩÊï∞
 1097              		.loc 1 862 0
 1098 0006 08BD     		pop	{r3, pc}
 1099              		.cfi_endproc
 1100              	.LFE81:
 1102              		.section	.text.CmdResp3Error,"ax",%progbits
 1103              		.align	1
 1104              		.global	CmdResp3Error
 1105              		.syntax unified
 1106              		.thumb
 1107              		.thumb_func
 1108              		.fpu softvfp
 1110              	CmdResp3Error:
 1111              	.LFB86:
 982:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•R3ÂìçÂ∫îÁöÑÈîôËØØÁä∂ÊÄÅ
 983:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 984:drivers/bsp_f1xx_sdio.c **** SD_Error CmdResp3Error(void)
 985:drivers/bsp_f1xx_sdio.c **** {
 1112              		.loc 1 985 0
 1113              		.cfi_startproc
 1114              		@ args = 0, pretend = 0, frame = 0
 1115              		@ frame_needed = 0, uses_anonymous_args = 0
 1116              		@ link register save eliminated.
 1117              	.L79:
 986:drivers/bsp_f1xx_sdio.c ****     u32 status;
 987:drivers/bsp_f1xx_sdio.c ****     while(1)
 988:drivers/bsp_f1xx_sdio.c ****     {
 989:drivers/bsp_f1xx_sdio.c ****         status=SDIO->STA;
 1118              		.loc 1 989 0
 1119 0000 0A4B     		ldr	r3, .L83
 1120 0002 5B6B     		ldr	r3, [r3, #52]
 1121              	.LVL113:
 990:drivers/bsp_f1xx_sdio.c ****         if(status&((1<<0)|(1<<2)|(1<<6)))break;//CRCÈîôËØØ/ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂/Â∑≤ÁªèÊî∂Âà∞ÂìçÂ∫î(CR
 1122              		.loc 1 990 0
 1123 0004 13F0450F 		tst	r3, #69
 1124 0008 FAD0     		beq	.L79
 991:drivers/bsp_f1xx_sdio.c ****     }
 992:drivers/bsp_f1xx_sdio.c ****     if(status&(1<<2))					//ÂìçÂ∫îË∂ÖÊó∂
 1125              		.loc 1 992 0
 1126 000a 13F0040F 		tst	r3, #4
 1127 000e 05D1     		bne	.L82
 993:drivers/bsp_f1xx_sdio.c ****     {
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 39


 994:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<2;				//Ê∏ÖÈô§ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂Ê†áÂøó
 995:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_RSP_TIMEOUT;
 996:drivers/bsp_f1xx_sdio.c ****     }
 997:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0X5FF;	 				//Ê∏ÖÈô§Ê†áËÆ∞
 1128              		.loc 1 997 0
 1129 0010 064B     		ldr	r3, .L83
 1130              	.LVL114:
 1131 0012 40F2FF52 		movw	r2, #1535
 1132 0016 9A63     		str	r2, [r3, #56]
 998:drivers/bsp_f1xx_sdio.c ****     return SD_OK;
 1133              		.loc 1 998 0
 1134 0018 0020     		movs	r0, #0
 999:drivers/bsp_f1xx_sdio.c **** }
 1135              		.loc 1 999 0
 1136 001a 7047     		bx	lr
 1137              	.LVL115:
 1138              	.L82:
 994:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_RSP_TIMEOUT;
 1139              		.loc 1 994 0
 1140 001c 034A     		ldr	r2, .L83
 1141 001e 936B     		ldr	r3, [r2, #56]
 1142              	.LVL116:
 1143 0020 43F00403 		orr	r3, r3, #4
 1144 0024 9363     		str	r3, [r2, #56]
 995:drivers/bsp_f1xx_sdio.c ****     }
 1145              		.loc 1 995 0
 1146 0026 0320     		movs	r0, #3
 1147 0028 7047     		bx	lr
 1148              	.L84:
 1149 002a 00BF     		.align	2
 1150              	.L83:
 1151 002c 00800140 		.word	1073840128
 1152              		.cfi_endproc
 1153              	.LFE86:
 1155              		.section	.text.SD_PowerON,"ax",%progbits
 1156              		.align	1
 1157              		.global	SD_PowerON
 1158              		.syntax unified
 1159              		.thumb
 1160              		.thumb_func
 1161              		.fpu softvfp
 1163              	SD_PowerON:
 1164              	.LFB70:
 114:drivers/bsp_f1xx_sdio.c ****     u8 i=0;
 1165              		.loc 1 114 0
 1166              		.cfi_startproc
 1167              		@ args = 0, pretend = 0, frame = 0
 1168              		@ frame_needed = 0, uses_anonymous_args = 0
 1169 0000 38B5     		push	{r3, r4, r5, lr}
 1170              	.LCFI9:
 1171              		.cfi_def_cfa_offset 16
 1172              		.cfi_offset 3, -16
 1173              		.cfi_offset 4, -12
 1174              		.cfi_offset 5, -8
 1175              		.cfi_offset 14, -4
 1176              	.LVL117:
 120:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR|=0<<9;			//ÈùûÁúÅÁîµÊ®°Âºè
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 40


 1177              		.loc 1 120 0
 1178 0002 4A4D     		ldr	r5, .L103
 1179 0004 0024     		movs	r4, #0
 1180 0006 6C60     		str	r4, [r5, #4]
 121:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR|=0<<10;			//ÂÖ≥Èó≠ÊóÅË∑Ø,CKÊ†πÊçÆÂàÜÈ¢ëËÆæÁΩÆËæìÂá∫
 1181              		.loc 1 121 0
 1182 0008 6B68     		ldr	r3, [r5, #4]
 1183 000a 6B60     		str	r3, [r5, #4]
 122:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR|=0<<11;			//1‰ΩçÊï∞ÊçÆÂÆΩÂ∫¶
 1184              		.loc 1 122 0
 1185 000c 6B68     		ldr	r3, [r5, #4]
 1186 000e 6B60     		str	r3, [r5, #4]
 123:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR|=0<<13;			//SDIOCLK‰∏äÂçáÊ≤ø‰∫ßÁîüSDIOCK
 1187              		.loc 1 123 0
 1188 0010 6B68     		ldr	r3, [r5, #4]
 1189 0012 6B60     		str	r3, [r5, #4]
 124:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR|=0<<14;			//ÂÖ≥Èó≠Á°¨‰ª∂ÊµÅÊéßÂà∂
 1190              		.loc 1 124 0
 1191 0014 6B68     		ldr	r3, [r5, #4]
 1192 0016 6B60     		str	r3, [r5, #4]
 125:drivers/bsp_f1xx_sdio.c ****     SDIO_Clock_Set(SDIO_INIT_CLK_DIV);//ËÆæÁΩÆÊó∂ÈíüÈ¢ëÁéá(ÂàùÂßãÂåñÁöÑÊó∂ÂÄô,‰∏çËÉΩË∂ÖËøá400Khz)
 1193              		.loc 1 125 0
 1194 0018 6B68     		ldr	r3, [r5, #4]
 1195 001a 6B60     		str	r3, [r5, #4]
 126:drivers/bsp_f1xx_sdio.c ****     SDIO->POWER=0X03;			//‰∏äÁîµÁä∂ÊÄÅ,ÂºÄÂêØÂç°Êó∂Èíü
 1196              		.loc 1 126 0
 1197 001c B220     		movs	r0, #178
 1198 001e FFF7FEFF 		bl	SDIO_Clock_Set
 1199              	.LVL118:
 127:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR|=1<<8;			//SDIOCK‰ΩøËÉΩ
 1200              		.loc 1 127 0
 1201 0022 0323     		movs	r3, #3
 1202 0024 2B60     		str	r3, [r5]
 128:drivers/bsp_f1xx_sdio.c ****     for(i=0;i<74;i++)
 1203              		.loc 1 128 0
 1204 0026 6B68     		ldr	r3, [r5, #4]
 1205 0028 43F48073 		orr	r3, r3, #256
 1206 002c 6B60     		str	r3, [r5, #4]
 116:drivers/bsp_f1xx_sdio.c ****     u32 response=0,count=0,validvoltage=0;
 1207              		.loc 1 116 0
 1208 002e 2346     		mov	r3, r4
 1209              	.LVL119:
 1210              	.L86:
 129:drivers/bsp_f1xx_sdio.c ****     {
 1211              		.loc 1 129 0 discriminator 1
 1212 0030 492C     		cmp	r4, #73
 1213 0032 0BD8     		bhi	.L87
 131:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdError();
 1214              		.loc 1 131 0
 1215 0034 0022     		movs	r2, #0
 1216 0036 1146     		mov	r1, r2
 1217 0038 1046     		mov	r0, r2
 1218 003a FFF7FEFF 		bl	SDIO_Send_Cmd
 1219              	.LVL120:
 132:drivers/bsp_f1xx_sdio.c ****         if(errorstatus==SD_OK)break;
 1220              		.loc 1 132 0
 1221 003e FFF7FEFF 		bl	CmdError
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 41


 1222              	.LVL121:
 133:drivers/bsp_f1xx_sdio.c ****     }
 1223              		.loc 1 133 0
 1224 0042 0346     		mov	r3, r0
 1225 0044 10B1     		cbz	r0, .L87
 129:drivers/bsp_f1xx_sdio.c ****     {
 1226              		.loc 1 129 0 discriminator 2
 1227 0046 0134     		adds	r4, r4, #1
 1228              	.LVL122:
 1229 0048 E4B2     		uxtb	r4, r4
 1230              	.LVL123:
 1231 004a F1E7     		b	.L86
 1232              	.LVL124:
 1233              	.L87:
 135:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SDIO_SEND_IF_COND,1,SD_CHECK_PATTERN);//ÂèëÈÄÅCMD8,Áü≠ÂìçÂ∫î,Ê£ÄÊü•SDÂç°Êé•Âè£Áâπ
 1234              		.loc 1 135 0
 1235 004c 0BB1     		cbz	r3, .L102
 1236              	.LVL125:
 1237              	.L89:
 192:drivers/bsp_f1xx_sdio.c **** //SDÂç° Power OFF
 1238              		.loc 1 192 0
 1239 004e 1846     		mov	r0, r3
 1240 0050 38BD     		pop	{r3, r4, r5, pc}
 1241              	.LVL126:
 1242              	.L102:
 136:drivers/bsp_f1xx_sdio.c ****     //arg[11:8]:01,ÊîØÊåÅÁîµÂéãËåÉÂõ¥,2.7~3.6V
 1243              		.loc 1 136 0
 1244 0052 4FF4D572 		mov	r2, #426
 1245 0056 0121     		movs	r1, #1
 1246 0058 0820     		movs	r0, #8
 1247 005a FFF7FEFF 		bl	SDIO_Send_Cmd
 1248              	.LVL127:
 140:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK) 								//R7ÂìçÂ∫îÊ≠£Â∏∏
 1249              		.loc 1 140 0
 1250 005e FFF7FEFF 		bl	CmdResp7Error
 1251              	.LVL128:
 141:drivers/bsp_f1xx_sdio.c ****     {
 1252              		.loc 1 141 0
 1253 0062 28BB     		cbnz	r0, .L97
 143:drivers/bsp_f1xx_sdio.c ****         SDType=SD_HIGH_CAPACITY;			   			//È´òÂÆπÈáèÂç°
 1254              		.loc 1 143 0
 1255 0064 324B     		ldr	r3, .L103+4
 1256 0066 0122     		movs	r2, #1
 1257 0068 1A70     		strb	r2, [r3]
 1258              	.LVL129:
 144:drivers/bsp_f1xx_sdio.c ****     }
 1259              		.loc 1 144 0
 1260 006a 4FF08045 		mov	r5, #1073741824
 1261              	.LVL130:
 1262              	.L90:
 146:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_APP_CMD); 		 	//Á≠âÂæÖR1ÂìçÂ∫î
 1263              		.loc 1 146 0
 1264 006e 0022     		movs	r2, #0
 1265 0070 0121     		movs	r1, #1
 1266 0072 3720     		movs	r0, #55
 1267              	.LVL131:
 1268 0074 FFF7FEFF 		bl	SDIO_Send_Cmd
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 42


 1269              	.LVL132:
 147:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)//SD2.0/SD 1.1,Âê¶Âàô‰∏∫MMCÂç°
 1270              		.loc 1 147 0
 1271 0078 3720     		movs	r0, #55
 1272 007a FFF7FEFF 		bl	CmdResp1Error
 1273              	.LVL133:
 148:drivers/bsp_f1xx_sdio.c ****     {
 1274              		.loc 1 148 0
 1275 007e 0346     		mov	r3, r0
 1276 0080 C0B1     		cbz	r0, .L98
 117:drivers/bsp_f1xx_sdio.c ****     u32 SDType=SD_STD_CAPACITY;
 1277              		.loc 1 117 0
 1278 0082 0022     		movs	r2, #0
 1279 0084 1446     		mov	r4, r2
 1280              	.LVL134:
 1281              	.L92:
 175:drivers/bsp_f1xx_sdio.c ****         {
 1282              		.loc 1 175 0
 1283 0086 002A     		cmp	r2, #0
 1284 0088 44D1     		bne	.L95
 175:drivers/bsp_f1xx_sdio.c ****         {
 1285              		.loc 1 175 0 is_stmt 0 discriminator 1
 1286 008a 4FF6FE72 		movw	r2, #65534
 1287              	.LVL135:
 1288 008e 9442     		cmp	r4, r2
 1289 0090 40D8     		bhi	.L95
 177:drivers/bsp_f1xx_sdio.c ****             errorstatus=CmdResp3Error(); 					//Á≠âÂæÖR3ÂìçÂ∫î
 1290              		.loc 1 177 0 is_stmt 1
 1291 0092 284A     		ldr	r2, .L103+8
 1292 0094 0121     		movs	r1, #1
 1293 0096 0846     		mov	r0, r1
 1294 0098 FFF7FEFF 		bl	SDIO_Send_Cmd
 1295              	.LVL136:
 178:drivers/bsp_f1xx_sdio.c ****             if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 1296              		.loc 1 178 0
 1297 009c FFF7FEFF 		bl	CmdResp3Error
 1298              	.LVL137:
 179:drivers/bsp_f1xx_sdio.c ****             response=SDIO->RESP1;;			   				//ÂæóÂà∞ÂìçÂ∫î
 1299              		.loc 1 179 0
 1300 00a0 0346     		mov	r3, r0
 1301 00a2 0028     		cmp	r0, #0
 1302 00a4 D3D1     		bne	.L89
 180:drivers/bsp_f1xx_sdio.c ****             validvoltage=(((response>>31)==1)?1:0);
 1303              		.loc 1 180 0
 1304 00a6 214A     		ldr	r2, .L103
 1305 00a8 5269     		ldr	r2, [r2, #20]
 1306              	.LVL138:
 181:drivers/bsp_f1xx_sdio.c ****             count++;
 1307              		.loc 1 181 0
 1308 00aa D20F     		lsrs	r2, r2, #31
 1309              	.LVL139:
 182:drivers/bsp_f1xx_sdio.c ****         }
 1310              		.loc 1 182 0
 1311 00ac 0134     		adds	r4, r4, #1
 1312              	.LVL140:
 1313 00ae EAE7     		b	.L92
 1314              	.LVL141:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 43


 1315              	.L97:
 118:drivers/bsp_f1xx_sdio.c ****     //ÈÖçÁΩÆCLKCRÂØÑÂ≠òÂô®
 1316              		.loc 1 118 0
 1317 00b0 0025     		movs	r5, #0
 1318 00b2 DCE7     		b	.L90
 1319              	.LVL142:
 1320              	.L98:
 117:drivers/bsp_f1xx_sdio.c ****     u32 SDType=SD_STD_CAPACITY;
 1321              		.loc 1 117 0
 1322 00b4 0022     		movs	r2, #0
 1323 00b6 1446     		mov	r4, r2
 1324              	.LVL143:
 1325 00b8 1146     		mov	r1, r2
 1326              	.LVL144:
 1327              	.L91:
 151:drivers/bsp_f1xx_sdio.c ****         {
 1328              		.loc 1 151 0
 1329 00ba 02BB     		cbnz	r2, .L93
 151:drivers/bsp_f1xx_sdio.c ****         {
 1330              		.loc 1 151 0 is_stmt 0 discriminator 1
 1331 00bc 4FF6FE72 		movw	r2, #65534
 1332              	.LVL145:
 1333 00c0 9442     		cmp	r4, r2
 1334 00c2 1CD8     		bhi	.L93
 153:drivers/bsp_f1xx_sdio.c ****             errorstatus=CmdResp1Error(SD_CMD_APP_CMD); 	 	//Á≠âÂæÖR1ÂìçÂ∫î
 1335              		.loc 1 153 0 is_stmt 1
 1336 00c4 0022     		movs	r2, #0
 1337 00c6 0121     		movs	r1, #1
 1338              	.LVL146:
 1339 00c8 3720     		movs	r0, #55
 1340 00ca FFF7FEFF 		bl	SDIO_Send_Cmd
 1341              	.LVL147:
 154:drivers/bsp_f1xx_sdio.c ****             if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 1342              		.loc 1 154 0
 1343 00ce 3720     		movs	r0, #55
 1344 00d0 FFF7FEFF 		bl	CmdResp1Error
 1345              	.LVL148:
 155:drivers/bsp_f1xx_sdio.c ****             SDIO_Send_Cmd(SD_CMD_SD_APP_OP_COND,1,SD_VOLTAGE_WINDOW_SD|SDType);//ÂèëÈÄÅACMD41,Áü≠Âì
 1346              		.loc 1 155 0
 1347 00d4 0346     		mov	r3, r0
 1348 00d6 0028     		cmp	r0, #0
 1349 00d8 B9D1     		bne	.L89
 156:drivers/bsp_f1xx_sdio.c ****             errorstatus=CmdResp3Error(); 					//Á≠âÂæÖR3ÂìçÂ∫î
 1350              		.loc 1 156 0
 1351 00da 45F00042 		orr	r2, r5, #-2147483648
 1352 00de 42F48012 		orr	r2, r2, #1048576
 1353 00e2 0121     		movs	r1, #1
 1354 00e4 2920     		movs	r0, #41
 1355              	.LVL149:
 1356 00e6 FFF7FEFF 		bl	SDIO_Send_Cmd
 1357              	.LVL150:
 157:drivers/bsp_f1xx_sdio.c ****             if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 1358              		.loc 1 157 0
 1359 00ea FFF7FEFF 		bl	CmdResp3Error
 1360              	.LVL151:
 158:drivers/bsp_f1xx_sdio.c ****             response=SDIO->RESP1;;			   				//ÂæóÂà∞ÂìçÂ∫î
 1361              		.loc 1 158 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 44


 1362 00ee 0346     		mov	r3, r0
 1363 00f0 0028     		cmp	r0, #0
 1364 00f2 ACD1     		bne	.L89
 159:drivers/bsp_f1xx_sdio.c ****             validvoltage=(((response>>31)==1)?1:0);			//Âà§Êñ≠SDÂç°‰∏äÁîµÊòØÂê¶ÂÆåÊàê
 1365              		.loc 1 159 0
 1366 00f4 0D4A     		ldr	r2, .L103
 1367 00f6 5169     		ldr	r1, [r2, #20]
 1368              	.LVL152:
 160:drivers/bsp_f1xx_sdio.c ****             count++;
 1369              		.loc 1 160 0
 1370 00f8 CA0F     		lsrs	r2, r1, #31
 1371              	.LVL153:
 161:drivers/bsp_f1xx_sdio.c ****         }
 1372              		.loc 1 161 0
 1373 00fa 0134     		adds	r4, r4, #1
 1374              	.LVL154:
 1375 00fc DDE7     		b	.L91
 1376              	.LVL155:
 1377              	.L93:
 163:drivers/bsp_f1xx_sdio.c ****         {
 1378              		.loc 1 163 0
 1379 00fe 4FF6FE72 		movw	r2, #65534
 1380 0102 9442     		cmp	r4, r2
 1381 0104 0ED8     		bhi	.L99
 1382              	.LVL156:
 168:drivers/bsp_f1xx_sdio.c ****         {
 1383              		.loc 1 168 0
 1384 0106 11F0804F 		tst	r1, #1073741824
 1385 010a A0D0     		beq	.L89
 170:drivers/bsp_f1xx_sdio.c ****         }
 1386              		.loc 1 170 0
 1387 010c 084A     		ldr	r2, .L103+4
 1388 010e 0221     		movs	r1, #2
 1389              	.LVL157:
 1390 0110 1170     		strb	r1, [r2]
 1391 0112 9CE7     		b	.L89
 1392              	.L95:
 184:drivers/bsp_f1xx_sdio.c ****         {
 1393              		.loc 1 184 0
 1394 0114 4FF6FE72 		movw	r2, #65534
 1395 0118 9442     		cmp	r4, r2
 1396 011a 05D8     		bhi	.L100
 189:drivers/bsp_f1xx_sdio.c ****     }
 1397              		.loc 1 189 0
 1398 011c 044A     		ldr	r2, .L103+4
 1399 011e 0321     		movs	r1, #3
 1400 0120 1170     		strb	r1, [r2]
 1401 0122 94E7     		b	.L89
 1402              	.LVL158:
 1403              	.L99:
 166:drivers/bsp_f1xx_sdio.c ****         }
 1404              		.loc 1 166 0
 1405 0124 1B23     		movs	r3, #27
 1406              	.LVL159:
 1407 0126 92E7     		b	.L89
 1408              	.LVL160:
 1409              	.L100:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 45


 187:drivers/bsp_f1xx_sdio.c ****         }
 1410              		.loc 1 187 0
 1411 0128 1B23     		movs	r3, #27
 1412              	.LVL161:
 1413 012a 90E7     		b	.L89
 1414              	.L104:
 1415              		.align	2
 1416              	.L103:
 1417 012c 00800140 		.word	1073840128
 1418 0130 00000000 		.word	.LANCHOR0
 1419 0134 0080FF80 		.word	-2130739200
 1420              		.cfi_endproc
 1421              	.LFE70:
 1423              		.section	.text.CmdResp2Error,"ax",%progbits
 1424              		.align	1
 1425              		.global	CmdResp2Error
 1426              		.syntax unified
 1427              		.thumb
 1428              		.thumb_func
 1429              		.fpu softvfp
 1431              	CmdResp2Error:
 1432              	.LFB87:
1000:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•R2ÂìçÂ∫îÁöÑÈîôËØØÁä∂ÊÄÅ
1001:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
1002:drivers/bsp_f1xx_sdio.c **** SD_Error CmdResp2Error(void)
1003:drivers/bsp_f1xx_sdio.c **** {
 1433              		.loc 1 1003 0
 1434              		.cfi_startproc
 1435              		@ args = 0, pretend = 0, frame = 0
 1436              		@ frame_needed = 0, uses_anonymous_args = 0
 1437              		@ link register save eliminated.
 1438              	.LVL162:
1004:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
1005:drivers/bsp_f1xx_sdio.c ****     u32 status;
1006:drivers/bsp_f1xx_sdio.c ****     u32 timeout=SDIO_CMD0TIMEOUT;
 1439              		.loc 1 1006 0
 1440 0000 4FF48033 		mov	r3, #65536
 1441              	.LVL163:
 1442              	.L106:
1007:drivers/bsp_f1xx_sdio.c ****     while(timeout--)
 1443              		.loc 1 1007 0
 1444 0004 591E     		subs	r1, r3, #1
 1445              	.LVL164:
 1446 0006 2BB1     		cbz	r3, .L107
1008:drivers/bsp_f1xx_sdio.c ****     {
1009:drivers/bsp_f1xx_sdio.c ****         status=SDIO->STA;
 1447              		.loc 1 1009 0
 1448 0008 104B     		ldr	r3, .L114
 1449 000a 5A6B     		ldr	r2, [r3, #52]
 1450              	.LVL165:
1007:drivers/bsp_f1xx_sdio.c ****     while(timeout--)
 1451              		.loc 1 1007 0
 1452 000c 0B46     		mov	r3, r1
1010:drivers/bsp_f1xx_sdio.c ****         if(status&((1<<0)|(1<<2)|(1<<6)))break;//CRCÈîôËØØ/ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂/Â∑≤ÁªèÊî∂Âà∞ÂìçÂ∫î(CR
 1453              		.loc 1 1010 0
 1454 000e 12F0450F 		tst	r2, #69
 1455 0012 F7D0     		beq	.L106
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 46


 1456              	.L107:
1011:drivers/bsp_f1xx_sdio.c ****     }
1012:drivers/bsp_f1xx_sdio.c ****     if((timeout==0)||(status&(1<<2)))	//ÂìçÂ∫îË∂ÖÊó∂
 1457              		.loc 1 1012 0
 1458 0014 81B1     		cbz	r1, .L109
 1459              		.loc 1 1012 0 is_stmt 0 discriminator 1
 1460 0016 12F0040F 		tst	r2, #4
 1461 001a 0DD1     		bne	.L109
1013:drivers/bsp_f1xx_sdio.c ****     {
1014:drivers/bsp_f1xx_sdio.c ****         errorstatus=SD_CMD_RSP_TIMEOUT;
1015:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<2;				//Ê∏ÖÈô§ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂Ê†áÂøó
1016:drivers/bsp_f1xx_sdio.c ****         return errorstatus;
1017:drivers/bsp_f1xx_sdio.c ****     }
1018:drivers/bsp_f1xx_sdio.c ****     if(status&1<<0)						//CRCÈîôËØØ
 1462              		.loc 1 1018 0 is_stmt 1
 1463 001c 12F0010F 		tst	r2, #1
 1464 0020 11D0     		beq	.L113
 1465              	.LVL166:
1019:drivers/bsp_f1xx_sdio.c ****     {
1020:drivers/bsp_f1xx_sdio.c ****         errorstatus=SD_CMD_CRC_FAIL;
1021:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<0;				//Ê∏ÖÈô§ÂìçÂ∫îÊ†áÂøó
 1466              		.loc 1 1021 0
 1467 0022 0A4A     		ldr	r2, .L114
 1468              	.LVL167:
 1469 0024 936B     		ldr	r3, [r2, #56]
 1470 0026 43F00103 		orr	r3, r3, #1
 1471 002a 9363     		str	r3, [r2, #56]
1020:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<0;				//Ê∏ÖÈô§ÂìçÂ∫îÊ†áÂøó
 1472              		.loc 1 1020 0
 1473 002c 0120     		movs	r0, #1
 1474              	.LVL168:
 1475              	.L112:
1022:drivers/bsp_f1xx_sdio.c ****     }
1023:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0X5FF;	 				//Ê∏ÖÈô§Ê†áËÆ∞
 1476              		.loc 1 1023 0
 1477 002e 074B     		ldr	r3, .L114
 1478 0030 40F2FF52 		movw	r2, #1535
 1479 0034 9A63     		str	r2, [r3, #56]
1024:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
1025:drivers/bsp_f1xx_sdio.c **** }
 1480              		.loc 1 1025 0
 1481 0036 7047     		bx	lr
 1482              	.LVL169:
 1483              	.L109:
1015:drivers/bsp_f1xx_sdio.c ****         return errorstatus;
 1484              		.loc 1 1015 0
 1485 0038 044A     		ldr	r2, .L114
 1486              	.LVL170:
 1487 003a 936B     		ldr	r3, [r2, #56]
 1488 003c 43F00403 		orr	r3, r3, #4
 1489 0040 9363     		str	r3, [r2, #56]
1016:drivers/bsp_f1xx_sdio.c ****     }
 1490              		.loc 1 1016 0
 1491 0042 0320     		movs	r0, #3
 1492 0044 7047     		bx	lr
 1493              	.LVL171:
 1494              	.L113:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 47


1004:drivers/bsp_f1xx_sdio.c ****     u32 status;
 1495              		.loc 1 1004 0
 1496 0046 0020     		movs	r0, #0
 1497 0048 F1E7     		b	.L112
 1498              	.L115:
 1499 004a 00BF     		.align	2
 1500              	.L114:
 1501 004c 00800140 		.word	1073840128
 1502              		.cfi_endproc
 1503              	.LFE87:
 1505              		.section	.text.CmdResp6Error,"ax",%progbits
 1506              		.align	1
 1507              		.global	CmdResp6Error
 1508              		.syntax unified
 1509              		.thumb
 1510              		.thumb_func
 1511              		.fpu softvfp
 1513              	CmdResp6Error:
 1514              	.LFB88:
1026:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•R6ÂìçÂ∫îÁöÑÈîôËØØÁä∂ÊÄÅ
1027:drivers/bsp_f1xx_sdio.c **** //cmd:‰πãÂâçÂèëÈÄÅÁöÑÂëΩ‰ª§
1028:drivers/bsp_f1xx_sdio.c **** //prca:Âç°ËøîÂõûÁöÑRCAÂú∞ÂùÄ
1029:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
1030:drivers/bsp_f1xx_sdio.c **** SD_Error CmdResp6Error(u8 cmd,u16*prca)
1031:drivers/bsp_f1xx_sdio.c **** {
 1515              		.loc 1 1031 0
 1516              		.cfi_startproc
 1517              		@ args = 0, pretend = 0, frame = 0
 1518              		@ frame_needed = 0, uses_anonymous_args = 0
 1519              		@ link register save eliminated.
 1520              	.LVL172:
 1521              	.L117:
1032:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
1033:drivers/bsp_f1xx_sdio.c ****     u32 status;
1034:drivers/bsp_f1xx_sdio.c ****     u32 rspr1;
1035:drivers/bsp_f1xx_sdio.c ****     while(1)
1036:drivers/bsp_f1xx_sdio.c ****     {
1037:drivers/bsp_f1xx_sdio.c ****         status=SDIO->STA;
 1522              		.loc 1 1037 0
 1523 0000 1D4B     		ldr	r3, .L130
 1524 0002 5B6B     		ldr	r3, [r3, #52]
 1525              	.LVL173:
1038:drivers/bsp_f1xx_sdio.c ****         if(status&((1<<0)|(1<<2)|(1<<6)))break;//CRCÈîôËØØ/ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂/Â∑≤ÁªèÊî∂Âà∞ÂìçÂ∫î(CR
 1526              		.loc 1 1038 0
 1527 0004 13F0450F 		tst	r3, #69
 1528 0008 FAD0     		beq	.L117
1039:drivers/bsp_f1xx_sdio.c ****     }
1040:drivers/bsp_f1xx_sdio.c ****     if(status&(1<<2))					//ÂìçÂ∫îË∂ÖÊó∂
 1529              		.loc 1 1040 0
 1530 000a 13F0040F 		tst	r3, #4
 1531 000e 19D1     		bne	.L126
1041:drivers/bsp_f1xx_sdio.c ****     {
1042:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<2;				//Ê∏ÖÈô§ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂Ê†áÂøó
1043:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_RSP_TIMEOUT;
1044:drivers/bsp_f1xx_sdio.c ****     }
1045:drivers/bsp_f1xx_sdio.c ****     if(status&1<<0)						//CRCÈîôËØØ
 1532              		.loc 1 1045 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 48


 1533 0010 13F0010F 		tst	r3, #1
 1534 0014 1DD1     		bne	.L127
1046:drivers/bsp_f1xx_sdio.c ****     {
1047:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<0;				//Ê∏ÖÈô§ÂìçÂ∫îÊ†áÂøó
1048:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_CRC_FAIL;
1049:drivers/bsp_f1xx_sdio.c ****     }
1050:drivers/bsp_f1xx_sdio.c ****     if(SDIO->RESPCMD!=cmd)				//Âà§Êñ≠ÊòØÂê¶ÂìçÂ∫îcmdÂëΩ‰ª§
 1535              		.loc 1 1050 0
 1536 0016 184B     		ldr	r3, .L130
 1537              	.LVL174:
 1538 0018 1B69     		ldr	r3, [r3, #16]
 1539 001a 8342     		cmp	r3, r0
 1540 001c 26D1     		bne	.L122
1051:drivers/bsp_f1xx_sdio.c ****     {
1052:drivers/bsp_f1xx_sdio.c ****         return SD_ILLEGAL_CMD;
1053:drivers/bsp_f1xx_sdio.c ****     }
1054:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0X5FF;	 				//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 1541              		.loc 1 1054 0
 1542 001e 164B     		ldr	r3, .L130
 1543 0020 40F2FF52 		movw	r2, #1535
 1544 0024 9A63     		str	r2, [r3, #56]
1055:drivers/bsp_f1xx_sdio.c ****     rspr1=SDIO->RESP1;					//ÂæóÂà∞ÂìçÂ∫î
 1545              		.loc 1 1055 0
 1546 0026 5B69     		ldr	r3, [r3, #20]
 1547              	.LVL175:
1056:drivers/bsp_f1xx_sdio.c ****     if(SD_ALLZERO==(rspr1&(SD_R6_GENERAL_UNKNOWN_ERROR|SD_R6_ILLEGAL_CMD|SD_R6_COM_CRC_FAILED)))
 1548              		.loc 1 1056 0
 1549 0028 13F4604F 		tst	r3, #57344
 1550 002c 18D0     		beq	.L128
1057:drivers/bsp_f1xx_sdio.c ****     {
1058:drivers/bsp_f1xx_sdio.c ****         *prca=(u16)(rspr1>>16);			//Âè≥Áßª16‰ΩçÂæóÂà∞,rca
1059:drivers/bsp_f1xx_sdio.c ****         return errorstatus;
1060:drivers/bsp_f1xx_sdio.c ****     }
1061:drivers/bsp_f1xx_sdio.c ****     if(rspr1&SD_R6_GENERAL_UNKNOWN_ERROR)return SD_GENERAL_UNKNOWN_ERROR;
 1551              		.loc 1 1061 0
 1552 002e 13F4005F 		tst	r3, #8192
 1553 0032 1DD1     		bne	.L123
1062:drivers/bsp_f1xx_sdio.c ****     if(rspr1&SD_R6_ILLEGAL_CMD)return SD_ILLEGAL_CMD;
 1554              		.loc 1 1062 0
 1555 0034 13F4804F 		tst	r3, #16384
 1556 0038 1CD1     		bne	.L124
1063:drivers/bsp_f1xx_sdio.c ****     if(rspr1&SD_R6_COM_CRC_FAILED)return SD_COM_CRC_FAILED;
 1557              		.loc 1 1063 0
 1558 003a 13F4004F 		tst	r3, #32768
 1559 003e 13D1     		bne	.L129
1064:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
 1560              		.loc 1 1064 0
 1561 0040 0020     		movs	r0, #0
 1562              	.LVL176:
1065:drivers/bsp_f1xx_sdio.c **** }
 1563              		.loc 1 1065 0
 1564 0042 7047     		bx	lr
 1565              	.LVL177:
 1566              	.L126:
1042:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_RSP_TIMEOUT;
 1567              		.loc 1 1042 0
 1568 0044 0C4A     		ldr	r2, .L130
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 49


 1569 0046 936B     		ldr	r3, [r2, #56]
 1570              	.LVL178:
 1571 0048 43F00403 		orr	r3, r3, #4
 1572 004c 9363     		str	r3, [r2, #56]
1043:drivers/bsp_f1xx_sdio.c ****     }
 1573              		.loc 1 1043 0
 1574 004e 0320     		movs	r0, #3
 1575              	.LVL179:
 1576 0050 7047     		bx	lr
 1577              	.LVL180:
 1578              	.L127:
1047:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_CRC_FAIL;
 1579              		.loc 1 1047 0
 1580 0052 094A     		ldr	r2, .L130
 1581 0054 936B     		ldr	r3, [r2, #56]
 1582              	.LVL181:
 1583 0056 43F00103 		orr	r3, r3, #1
 1584 005a 9363     		str	r3, [r2, #56]
1048:drivers/bsp_f1xx_sdio.c ****     }
 1585              		.loc 1 1048 0
 1586 005c 0120     		movs	r0, #1
 1587              	.LVL182:
 1588 005e 7047     		bx	lr
 1589              	.LVL183:
 1590              	.L128:
1058:drivers/bsp_f1xx_sdio.c ****         return errorstatus;
 1591              		.loc 1 1058 0
 1592 0060 1B0C     		lsrs	r3, r3, #16
 1593              	.LVL184:
 1594 0062 0B80     		strh	r3, [r1]	@ movhi
1059:drivers/bsp_f1xx_sdio.c ****     }
 1595              		.loc 1 1059 0
 1596 0064 0020     		movs	r0, #0
 1597              	.LVL185:
 1598 0066 7047     		bx	lr
 1599              	.LVL186:
 1600              	.L129:
1063:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
 1601              		.loc 1 1063 0
 1602 0068 0F20     		movs	r0, #15
 1603              	.LVL187:
 1604 006a 7047     		bx	lr
 1605              	.LVL188:
 1606              	.L122:
1052:drivers/bsp_f1xx_sdio.c ****     }
 1607              		.loc 1 1052 0
 1608 006c 1020     		movs	r0, #16
 1609              	.LVL189:
 1610 006e 7047     		bx	lr
 1611              	.LVL190:
 1612              	.L123:
1061:drivers/bsp_f1xx_sdio.c ****     if(rspr1&SD_R6_ILLEGAL_CMD)return SD_ILLEGAL_CMD;
 1613              		.loc 1 1061 0
 1614 0070 1320     		movs	r0, #19
 1615              	.LVL191:
 1616 0072 7047     		bx	lr
 1617              	.LVL192:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 50


 1618              	.L124:
1062:drivers/bsp_f1xx_sdio.c ****     if(rspr1&SD_R6_COM_CRC_FAILED)return SD_COM_CRC_FAILED;
 1619              		.loc 1 1062 0
 1620 0074 1020     		movs	r0, #16
 1621              	.LVL193:
 1622 0076 7047     		bx	lr
 1623              	.L131:
 1624              		.align	2
 1625              	.L130:
 1626 0078 00800140 		.word	1073840128
 1627              		.cfi_endproc
 1628              	.LFE88:
 1630              		.section	.text.SD_InitializeCards,"ax",%progbits
 1631              		.align	1
 1632              		.global	SD_InitializeCards
 1633              		.syntax unified
 1634              		.thumb
 1635              		.thumb_func
 1636              		.fpu softvfp
 1638              	SD_InitializeCards:
 1639              	.LFB72:
 203:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
 1640              		.loc 1 203 0
 1641              		.cfi_startproc
 1642              		@ args = 0, pretend = 0, frame = 8
 1643              		@ frame_needed = 0, uses_anonymous_args = 0
 1644 0000 00B5     		push	{lr}
 1645              	.LCFI10:
 1646              		.cfi_def_cfa_offset 4
 1647              		.cfi_offset 14, -4
 1648 0002 83B0     		sub	sp, sp, #12
 1649              	.LCFI11:
 1650              		.cfi_def_cfa_offset 16
 1651              	.LVL194:
 205:drivers/bsp_f1xx_sdio.c ****     if((SDIO->POWER&0X03)==0)return SD_REQUEST_NOT_APPLICABLE;//Ê£ÄÊü•ÁîµÊ∫êÁä∂ÊÄÅ,Á°Æ‰øù‰∏∫‰∏äÁîµÁ
 1652              		.loc 1 205 0
 1653 0004 0123     		movs	r3, #1
 1654 0006 ADF80630 		strh	r3, [sp, #6]	@ movhi
 206:drivers/bsp_f1xx_sdio.c ****     if(SDIO_SECURE_DIGITAL_IO_CARD!=CardType)			//ÈùûSECURE_DIGITAL_IO_CARD
 1655              		.loc 1 206 0
 1656 000a 334B     		ldr	r3, .L143
 1657 000c 1B68     		ldr	r3, [r3]
 1658 000e 13F0030F 		tst	r3, #3
 1659 0012 5AD0     		beq	.L138
 207:drivers/bsp_f1xx_sdio.c ****     {
 1660              		.loc 1 207 0
 1661 0014 314B     		ldr	r3, .L143+4
 1662 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1663 0018 042B     		cmp	r3, #4
 1664 001a 35D1     		bne	.L141
 1665              	.LVL195:
 1666              	.L134:
 217:drivers/bsp_f1xx_sdio.c ****     {
 1667              		.loc 1 217 0
 1668 001c 2F4B     		ldr	r3, .L143+4
 1669 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1670 0020 012B     		cmp	r3, #1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 51


 1671 0022 03D9     		bls	.L135
 217:drivers/bsp_f1xx_sdio.c ****     {
 1672              		.loc 1 217 0 is_stmt 0 discriminator 1
 1673 0024 062B     		cmp	r3, #6
 1674 0026 01D0     		beq	.L135
 217:drivers/bsp_f1xx_sdio.c ****     {
 1675              		.loc 1 217 0 discriminator 2
 1676 0028 022B     		cmp	r3, #2
 1677 002a 0CD1     		bne	.L136
 1678              	.L135:
 219:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp6Error(SD_CMD_SET_REL_ADDR,&rca);//Á≠âÂæÖR6ÂìçÂ∫î
 1679              		.loc 1 219 0 is_stmt 1
 1680 002c 0022     		movs	r2, #0
 1681 002e 0121     		movs	r1, #1
 1682 0030 0320     		movs	r0, #3
 1683 0032 FFF7FEFF 		bl	SDIO_Send_Cmd
 1684              	.LVL196:
 220:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 1685              		.loc 1 220 0
 1686 0036 0DF10601 		add	r1, sp, #6
 1687 003a 0320     		movs	r0, #3
 1688 003c FFF7FEFF 		bl	CmdResp6Error
 1689              	.LVL197:
 221:drivers/bsp_f1xx_sdio.c ****     }
 1690              		.loc 1 221 0
 1691 0040 0346     		mov	r3, r0
 1692 0042 0028     		cmp	r0, #0
 1693 0044 42D1     		bne	.L133
 1694              	.LVL198:
 1695              	.L136:
 223:drivers/bsp_f1xx_sdio.c ****     {
 1696              		.loc 1 223 0
 1697 0046 254B     		ldr	r3, .L143+4
 1698 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1699 004a 032B     		cmp	r3, #3
 1700 004c 30D0     		beq	.L142
 1701              	.L137:
 229:drivers/bsp_f1xx_sdio.c ****     {
 1702              		.loc 1 229 0
 1703 004e 234B     		ldr	r3, .L143+4
 1704 0050 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1705 0052 042B     		cmp	r3, #4
 1706 0054 3ED0     		beq	.L139
 231:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SEND_CSD,3,(u32)(rca<<16));//ÂèëÈÄÅCMD9+Âç°RCA,ÂèñÂæóCSD,ÈïøÂìçÂ∫î
 1707              		.loc 1 231 0
 1708 0056 BDF80620 		ldrh	r2, [sp, #6]
 1709 005a 214B     		ldr	r3, .L143+8
 1710 005c 1A60     		str	r2, [r3]
 232:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp2Error(); 					//Á≠âÂæÖR2ÂìçÂ∫î
 1711              		.loc 1 232 0
 1712 005e 1204     		lsls	r2, r2, #16
 1713 0060 0321     		movs	r1, #3
 1714 0062 0920     		movs	r0, #9
 1715 0064 FFF7FEFF 		bl	SDIO_Send_Cmd
 1716              	.LVL199:
 233:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 1717              		.loc 1 233 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 52


 1718 0068 FFF7FEFF 		bl	CmdResp2Error
 1719              	.LVL200:
 234:drivers/bsp_f1xx_sdio.c ****         CSD_Tab[0]=SDIO->RESP1;
 1720              		.loc 1 234 0
 1721 006c 0346     		mov	r3, r0
 1722 006e 0028     		cmp	r0, #0
 1723 0070 2CD1     		bne	.L133
 235:drivers/bsp_f1xx_sdio.c ****         CSD_Tab[1]=SDIO->RESP2;
 1724              		.loc 1 235 0
 1725 0072 1949     		ldr	r1, .L143
 1726 0074 4869     		ldr	r0, [r1, #20]
 1727              	.LVL201:
 1728 0076 1B4A     		ldr	r2, .L143+12
 1729 0078 1060     		str	r0, [r2]
 236:drivers/bsp_f1xx_sdio.c ****         CSD_Tab[2]=SDIO->RESP3;
 1730              		.loc 1 236 0
 1731 007a 8869     		ldr	r0, [r1, #24]
 1732 007c 5060     		str	r0, [r2, #4]
 237:drivers/bsp_f1xx_sdio.c ****         CSD_Tab[3]=SDIO->RESP4;
 1733              		.loc 1 237 0
 1734 007e C869     		ldr	r0, [r1, #28]
 1735 0080 9060     		str	r0, [r2, #8]
 238:drivers/bsp_f1xx_sdio.c ****     }
 1736              		.loc 1 238 0
 1737 0082 096A     		ldr	r1, [r1, #32]
 1738 0084 D160     		str	r1, [r2, #12]
 1739 0086 21E0     		b	.L133
 1740              	.LVL202:
 1741              	.L141:
 209:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp2Error(); 					//Á≠âÂæÖR2ÂìçÂ∫î
 1742              		.loc 1 209 0
 1743 0088 0022     		movs	r2, #0
 1744 008a 0321     		movs	r1, #3
 1745 008c 0220     		movs	r0, #2
 1746 008e FFF7FEFF 		bl	SDIO_Send_Cmd
 1747              	.LVL203:
 210:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 1748              		.loc 1 210 0
 1749 0092 FFF7FEFF 		bl	CmdResp2Error
 1750              	.LVL204:
 211:drivers/bsp_f1xx_sdio.c ****         CID_Tab[0]=SDIO->RESP1;
 1751              		.loc 1 211 0
 1752 0096 0346     		mov	r3, r0
 1753 0098 C0B9     		cbnz	r0, .L133
 212:drivers/bsp_f1xx_sdio.c ****         CID_Tab[1]=SDIO->RESP2;
 1754              		.loc 1 212 0
 1755 009a 0F4A     		ldr	r2, .L143
 1756 009c 5169     		ldr	r1, [r2, #20]
 1757 009e 124B     		ldr	r3, .L143+16
 1758 00a0 1960     		str	r1, [r3]
 213:drivers/bsp_f1xx_sdio.c ****         CID_Tab[2]=SDIO->RESP3;
 1759              		.loc 1 213 0
 1760 00a2 9169     		ldr	r1, [r2, #24]
 1761 00a4 5960     		str	r1, [r3, #4]
 214:drivers/bsp_f1xx_sdio.c ****         CID_Tab[3]=SDIO->RESP4;
 1762              		.loc 1 214 0
 1763 00a6 D169     		ldr	r1, [r2, #28]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 53


 1764 00a8 9960     		str	r1, [r3, #8]
 215:drivers/bsp_f1xx_sdio.c ****     }
 1765              		.loc 1 215 0
 1766 00aa 126A     		ldr	r2, [r2, #32]
 1767 00ac DA60     		str	r2, [r3, #12]
 1768 00ae B5E7     		b	.L134
 1769              	.LVL205:
 1770              	.L142:
 225:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp2Error(); 					//Á≠âÂæÖR2ÂìçÂ∫î
 1771              		.loc 1 225 0
 1772 00b0 BDF80620 		ldrh	r2, [sp, #6]
 1773 00b4 1204     		lsls	r2, r2, #16
 1774 00b6 0121     		movs	r1, #1
 1775 00b8 0320     		movs	r0, #3
 1776 00ba FFF7FEFF 		bl	SDIO_Send_Cmd
 1777              	.LVL206:
 226:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 1778              		.loc 1 226 0
 1779 00be FFF7FEFF 		bl	CmdResp2Error
 1780              	.LVL207:
 227:drivers/bsp_f1xx_sdio.c ****     }
 1781              		.loc 1 227 0
 1782 00c2 0346     		mov	r3, r0
 1783 00c4 0028     		cmp	r0, #0
 1784 00c6 C2D0     		beq	.L137
 1785 00c8 00E0     		b	.L133
 1786              	.LVL208:
 1787              	.L138:
 206:drivers/bsp_f1xx_sdio.c ****     if(SDIO_SECURE_DIGITAL_IO_CARD!=CardType)			//ÈùûSECURE_DIGITAL_IO_CARD
 1788              		.loc 1 206 0
 1789 00ca 2523     		movs	r3, #37
 1790              	.LVL209:
 1791              	.L133:
 241:drivers/bsp_f1xx_sdio.c **** //ÂæóÂà∞Âç°‰ø°ÊÅØ
 1792              		.loc 1 241 0
 1793 00cc 1846     		mov	r0, r3
 1794 00ce 03B0     		add	sp, sp, #12
 1795              	.LCFI12:
 1796              		.cfi_remember_state
 1797              		.cfi_def_cfa_offset 4
 1798              		@ sp needed
 1799 00d0 5DF804FB 		ldr	pc, [sp], #4
 1800              	.L139:
 1801              	.LCFI13:
 1802              		.cfi_restore_state
 240:drivers/bsp_f1xx_sdio.c **** }
 1803              		.loc 1 240 0
 1804 00d4 0023     		movs	r3, #0
 1805 00d6 F9E7     		b	.L133
 1806              	.L144:
 1807              		.align	2
 1808              	.L143:
 1809 00d8 00800140 		.word	1073840128
 1810 00dc 00000000 		.word	.LANCHOR0
 1811 00e0 00000000 		.word	.LANCHOR1
 1812 00e4 00000000 		.word	.LANCHOR2
 1813 00e8 00000000 		.word	.LANCHOR3
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 54


 1814              		.cfi_endproc
 1815              	.LFE72:
 1817              		.section	.text.IsCardProgramming,"ax",%progbits
 1818              		.align	1
 1819              		.global	IsCardProgramming
 1820              		.syntax unified
 1821              		.thumb
 1822              		.thumb_func
 1823              		.fpu softvfp
 1825              	IsCardProgramming:
 1826              	.LFB90:
1066:drivers/bsp_f1xx_sdio.c **** 
1067:drivers/bsp_f1xx_sdio.c **** //SDIO‰ΩøËÉΩÂÆΩÊÄªÁ∫øÊ®°Âºè
1068:drivers/bsp_f1xx_sdio.c **** //enx:0,‰∏ç‰ΩøËÉΩ;1,‰ΩøËÉΩ;
1069:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
1070:drivers/bsp_f1xx_sdio.c **** SD_Error SDEnWideBus(u8 enx)
1071:drivers/bsp_f1xx_sdio.c **** {
1072:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus = SD_OK;
1073:drivers/bsp_f1xx_sdio.c ****     u32 scr[2]={0,0};
1074:drivers/bsp_f1xx_sdio.c ****     u8 arg=0X00;
1075:drivers/bsp_f1xx_sdio.c ****     if(enx)arg=0X02;
1076:drivers/bsp_f1xx_sdio.c ****     else arg=0X00;
1077:drivers/bsp_f1xx_sdio.c ****     if(SDIO->RESP1&SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//SDÂç°Â§Ñ‰∫éLOCKEDÁä∂ÊÄÅ
1078:drivers/bsp_f1xx_sdio.c ****     errorstatus=FindSCR(RCA,scr);						//ÂæóÂà∞SCRÂØÑÂ≠òÂô®Êï∞ÊçÆ
1079:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;
1080:drivers/bsp_f1xx_sdio.c ****     if((scr[1]&SD_WIDE_BUS_SUPPORT)!=SD_ALLZERO)		//ÊîØÊåÅÂÆΩÊÄªÁ∫ø
1081:drivers/bsp_f1xx_sdio.c ****     {
1082:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_APP_CMD,1,(u32)RCA<<16);	//ÂèëÈÄÅCMD55+RCA,Áü≠ÂìçÂ∫î
1083:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_APP_CMD);
1084:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;
1085:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_APP_SD_SET_BUSWIDTH,1,arg);//ÂèëÈÄÅACMD6,Áü≠ÂìçÂ∫î,ÂèÇÊï∞:10,4‰Ωç;00,1
1086:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_APP_SD_SET_BUSWIDTH);
1087:drivers/bsp_f1xx_sdio.c ****         return errorstatus;
1088:drivers/bsp_f1xx_sdio.c ****     }else return SD_REQUEST_NOT_APPLICABLE;				//‰∏çÊîØÊåÅÂÆΩÊÄªÁ∫øËÆæÁΩÆ
1089:drivers/bsp_f1xx_sdio.c **** }
1090:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•Âç°ÊòØÂê¶Ê≠£Âú®ÊâßË°åÂÜôÊìç‰Ωú
1091:drivers/bsp_f1xx_sdio.c **** //pstatus:ÂΩìÂâçÁä∂ÊÄÅ.
1092:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å
1093:drivers/bsp_f1xx_sdio.c **** SD_Error IsCardProgramming(u8 *pstatus)
1094:drivers/bsp_f1xx_sdio.c **** {
 1827              		.loc 1 1094 0
 1828              		.cfi_startproc
 1829              		@ args = 0, pretend = 0, frame = 8
 1830              		@ frame_needed = 0, uses_anonymous_args = 0
 1831              	.LVL210:
 1832 0000 10B5     		push	{r4, lr}
 1833              	.LCFI14:
 1834              		.cfi_def_cfa_offset 8
 1835              		.cfi_offset 4, -8
 1836              		.cfi_offset 14, -4
 1837 0002 82B0     		sub	sp, sp, #8
 1838              	.LCFI15:
 1839              		.cfi_def_cfa_offset 16
 1840 0004 0446     		mov	r4, r0
1095:drivers/bsp_f1xx_sdio.c ****     vu32 respR1 = 0, status = 0;
 1841              		.loc 1 1095 0
 1842 0006 0023     		movs	r3, #0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 55


 1843 0008 0193     		str	r3, [sp, #4]
 1844 000a 0093     		str	r3, [sp]
1096:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_SEND_STATUS,1,(u32)RCA<<16);		//ÂèëÈÄÅCMD13
 1845              		.loc 1 1096 0
 1846 000c 1D4B     		ldr	r3, .L155
 1847 000e 1A68     		ldr	r2, [r3]
 1848 0010 1204     		lsls	r2, r2, #16
 1849 0012 0121     		movs	r1, #1
 1850 0014 0D20     		movs	r0, #13
 1851              	.LVL211:
 1852 0016 FFF7FEFF 		bl	SDIO_Send_Cmd
 1853              	.LVL212:
1097:drivers/bsp_f1xx_sdio.c ****     status=SDIO->STA;
 1854              		.loc 1 1097 0
 1855 001a 1B4B     		ldr	r3, .L155+4
 1856 001c 5B6B     		ldr	r3, [r3, #52]
 1857 001e 0093     		str	r3, [sp]
1098:drivers/bsp_f1xx_sdio.c ****     while(!(status&((1<<0)|(1<<6)|(1<<2))))status=SDIO->STA;//Á≠âÂæÖÊìç‰ΩúÂÆåÊàê
 1858              		.loc 1 1098 0
 1859 0020 02E0     		b	.L146
 1860              	.L147:
 1861              		.loc 1 1098 0 is_stmt 0 discriminator 2
 1862 0022 194B     		ldr	r3, .L155+4
 1863 0024 5B6B     		ldr	r3, [r3, #52]
 1864 0026 0093     		str	r3, [sp]
 1865              	.L146:
 1866              		.loc 1 1098 0 discriminator 1
 1867 0028 009B     		ldr	r3, [sp]
 1868 002a 13F0450F 		tst	r3, #69
 1869 002e F8D0     		beq	.L147
1099:drivers/bsp_f1xx_sdio.c ****     if(status&(1<<0))			//CRCÊ£ÄÊµãÂ§±Ë¥•
 1870              		.loc 1 1099 0 is_stmt 1
 1871 0030 009B     		ldr	r3, [sp]
 1872 0032 13F0010F 		tst	r3, #1
 1873 0036 13D1     		bne	.L153
1100:drivers/bsp_f1xx_sdio.c ****     {
1101:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<0;		//Ê∏ÖÈô§ÈîôËØØÊ†áËÆ∞
1102:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_CRC_FAIL;
1103:drivers/bsp_f1xx_sdio.c ****     }
1104:drivers/bsp_f1xx_sdio.c ****     if(status&(1<<2))			//ÂëΩ‰ª§Ë∂ÖÊó∂
 1874              		.loc 1 1104 0
 1875 0038 009B     		ldr	r3, [sp]
 1876 003a 13F0040F 		tst	r3, #4
 1877 003e 17D1     		bne	.L154
1105:drivers/bsp_f1xx_sdio.c ****     {
1106:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<2;		//Ê∏ÖÈô§ÈîôËØØÊ†áËÆ∞
1107:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_RSP_TIMEOUT;
1108:drivers/bsp_f1xx_sdio.c ****     }
1109:drivers/bsp_f1xx_sdio.c ****     if(SDIO->RESPCMD!=SD_CMD_SEND_STATUS)return SD_ILLEGAL_CMD;
 1878              		.loc 1 1109 0
 1879 0040 114B     		ldr	r3, .L155+4
 1880 0042 1B69     		ldr	r3, [r3, #16]
 1881 0044 0D2B     		cmp	r3, #13
 1882 0046 1AD1     		bne	.L151
1110:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 1883              		.loc 1 1110 0
 1884 0048 0F4B     		ldr	r3, .L155+4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 56


 1885 004a 40F2FF52 		movw	r2, #1535
 1886 004e 9A63     		str	r2, [r3, #56]
1111:drivers/bsp_f1xx_sdio.c ****     respR1=SDIO->RESP1;
 1887              		.loc 1 1111 0
 1888 0050 5B69     		ldr	r3, [r3, #20]
 1889 0052 0193     		str	r3, [sp, #4]
1112:drivers/bsp_f1xx_sdio.c ****     *pstatus=(u8)((respR1>>9)&0x0000000F);
 1890              		.loc 1 1112 0
 1891 0054 019B     		ldr	r3, [sp, #4]
 1892 0056 C3F34323 		ubfx	r3, r3, #9, #4
 1893 005a 2370     		strb	r3, [r4]
1113:drivers/bsp_f1xx_sdio.c ****     return SD_OK;
 1894              		.loc 1 1113 0
 1895 005c 0020     		movs	r0, #0
 1896 005e 05E0     		b	.L149
 1897              	.L153:
1101:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_CRC_FAIL;
 1898              		.loc 1 1101 0
 1899 0060 094A     		ldr	r2, .L155+4
 1900 0062 936B     		ldr	r3, [r2, #56]
 1901 0064 43F00103 		orr	r3, r3, #1
 1902 0068 9363     		str	r3, [r2, #56]
1102:drivers/bsp_f1xx_sdio.c ****     }
 1903              		.loc 1 1102 0
 1904 006a 0120     		movs	r0, #1
 1905              	.L149:
1114:drivers/bsp_f1xx_sdio.c **** }
 1906              		.loc 1 1114 0
 1907 006c 02B0     		add	sp, sp, #8
 1908              	.LCFI16:
 1909              		.cfi_remember_state
 1910              		.cfi_def_cfa_offset 8
 1911              		@ sp needed
 1912 006e 10BD     		pop	{r4, pc}
 1913              	.LVL213:
 1914              	.L154:
 1915              	.LCFI17:
 1916              		.cfi_restore_state
1106:drivers/bsp_f1xx_sdio.c ****         return SD_CMD_RSP_TIMEOUT;
 1917              		.loc 1 1106 0
 1918 0070 054A     		ldr	r2, .L155+4
 1919 0072 936B     		ldr	r3, [r2, #56]
 1920 0074 43F00403 		orr	r3, r3, #4
 1921 0078 9363     		str	r3, [r2, #56]
1107:drivers/bsp_f1xx_sdio.c ****     }
 1922              		.loc 1 1107 0
 1923 007a 0320     		movs	r0, #3
 1924 007c F6E7     		b	.L149
 1925              	.L151:
1109:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 1926              		.loc 1 1109 0
 1927 007e 1020     		movs	r0, #16
 1928 0080 F4E7     		b	.L149
 1929              	.L156:
 1930 0082 00BF     		.align	2
 1931              	.L155:
 1932 0084 00000000 		.word	.LANCHOR1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 57


 1933 0088 00800140 		.word	1073840128
 1934              		.cfi_endproc
 1935              	.LFE90:
 1937              		.section	.text.SD_SendStatus,"ax",%progbits
 1938              		.align	1
 1939              		.global	SD_SendStatus
 1940              		.syntax unified
 1941              		.thumb
 1942              		.thumb_func
 1943              		.fpu softvfp
 1945              	SD_SendStatus:
 1946              	.LFB91:
1115:drivers/bsp_f1xx_sdio.c **** //ËØªÂèñÂΩìÂâçÂç°Áä∂ÊÄÅ
1116:drivers/bsp_f1xx_sdio.c **** //pcardstatus:Âç°Áä∂ÊÄÅ
1117:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å
1118:drivers/bsp_f1xx_sdio.c **** SD_Error SD_SendStatus(uint32_t *pcardstatus)
1119:drivers/bsp_f1xx_sdio.c **** {
 1947              		.loc 1 1119 0
 1948              		.cfi_startproc
 1949              		@ args = 0, pretend = 0, frame = 0
 1950              		@ frame_needed = 0, uses_anonymous_args = 0
 1951              	.LVL214:
1120:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus = SD_OK;
1121:drivers/bsp_f1xx_sdio.c ****     if(pcardstatus==NULL)
 1952              		.loc 1 1121 0
 1953 0000 90B1     		cbz	r0, .L159
1119:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus = SD_OK;
 1954              		.loc 1 1119 0
 1955 0002 10B5     		push	{r4, lr}
 1956              	.LCFI18:
 1957              		.cfi_def_cfa_offset 8
 1958              		.cfi_offset 4, -8
 1959              		.cfi_offset 14, -4
 1960 0004 0446     		mov	r4, r0
1122:drivers/bsp_f1xx_sdio.c ****     {
1123:drivers/bsp_f1xx_sdio.c ****         errorstatus=SD_INVALID_PARAMETER;
1124:drivers/bsp_f1xx_sdio.c ****         return errorstatus;
1125:drivers/bsp_f1xx_sdio.c ****     }
1126:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_SEND_STATUS,1,RCA<<16);	//ÂèëÈÄÅCMD13,Áü≠ÂìçÂ∫î
 1961              		.loc 1 1126 0
 1962 0006 0A4B     		ldr	r3, .L164
 1963 0008 1A68     		ldr	r2, [r3]
 1964 000a 1204     		lsls	r2, r2, #16
 1965 000c 0121     		movs	r1, #1
 1966 000e 0D20     		movs	r0, #13
 1967              	.LVL215:
 1968 0010 FFF7FEFF 		bl	SDIO_Send_Cmd
 1969              	.LVL216:
1127:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_SEND_STATUS);	//Êü•ËØ¢ÂìçÂ∫îÁä∂ÊÄÅ
 1970              		.loc 1 1127 0
 1971 0014 0D20     		movs	r0, #13
 1972 0016 FFF7FEFF 		bl	CmdResp1Error
 1973              	.LVL217:
1128:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;
 1974              		.loc 1 1128 0
 1975 001a 0346     		mov	r3, r0
 1976 001c 10B9     		cbnz	r0, .L158
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 58


1129:drivers/bsp_f1xx_sdio.c ****     *pcardstatus=SDIO->RESP1;//ËØªÂèñÂìçÂ∫îÂÄº
 1977              		.loc 1 1129 0
 1978 001e 054A     		ldr	r2, .L164+4
 1979 0020 5269     		ldr	r2, [r2, #20]
 1980 0022 2260     		str	r2, [r4]
 1981              	.L158:
1130:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
1131:drivers/bsp_f1xx_sdio.c **** }
 1982              		.loc 1 1131 0
 1983 0024 1846     		mov	r0, r3
 1984              	.LVL218:
 1985 0026 10BD     		pop	{r4, pc}
 1986              	.LVL219:
 1987              	.L159:
 1988              	.LCFI19:
 1989              		.cfi_def_cfa_offset 0
 1990              		.cfi_restore 4
 1991              		.cfi_restore 14
1124:drivers/bsp_f1xx_sdio.c ****     }
 1992              		.loc 1 1124 0
 1993 0028 2623     		movs	r3, #38
 1994              		.loc 1 1131 0
 1995 002a 1846     		mov	r0, r3
 1996              	.LVL220:
 1997 002c 7047     		bx	lr
 1998              	.L165:
 1999 002e 00BF     		.align	2
 2000              	.L164:
 2001 0030 00000000 		.word	.LANCHOR1
 2002 0034 00800140 		.word	1073840128
 2003              		.cfi_endproc
 2004              	.LFE91:
 2006              		.section	.text.SD_GetState,"ax",%progbits
 2007              		.align	1
 2008              		.global	SD_GetState
 2009              		.syntax unified
 2010              		.thumb
 2011              		.thumb_func
 2012              		.fpu softvfp
 2014              	SD_GetState:
 2015              	.LFB92:
1132:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûSDÂç°ÁöÑÁä∂ÊÄÅ
1133:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:SDÂç°Áä∂ÊÄÅ
1134:drivers/bsp_f1xx_sdio.c **** SDCardState SD_GetState(void)
1135:drivers/bsp_f1xx_sdio.c **** {
 2016              		.loc 1 1135 0
 2017              		.cfi_startproc
 2018              		@ args = 0, pretend = 0, frame = 8
 2019              		@ frame_needed = 0, uses_anonymous_args = 0
 2020 0000 00B5     		push	{lr}
 2021              	.LCFI20:
 2022              		.cfi_def_cfa_offset 4
 2023              		.cfi_offset 14, -4
 2024 0002 83B0     		sub	sp, sp, #12
 2025              	.LCFI21:
 2026              		.cfi_def_cfa_offset 16
1136:drivers/bsp_f1xx_sdio.c ****     u32 resp1=0;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 59


 2027              		.loc 1 1136 0
 2028 0004 02A8     		add	r0, sp, #8
 2029 0006 0023     		movs	r3, #0
 2030 0008 40F8043D 		str	r3, [r0, #-4]!
1137:drivers/bsp_f1xx_sdio.c ****     if(SD_SendStatus(&resp1)!=SD_OK)return SD_CARD_ERROR;
 2031              		.loc 1 1137 0
 2032 000c FFF7FEFF 		bl	SD_SendStatus
 2033              	.LVL221:
 2034 0010 28B9     		cbnz	r0, .L168
1138:drivers/bsp_f1xx_sdio.c ****     else return (SDCardState)((resp1>>9) & 0x0F);
 2035              		.loc 1 1138 0
 2036 0012 0198     		ldr	r0, [sp, #4]
 2037 0014 C0F34320 		ubfx	r0, r0, #9, #4
 2038              	.L167:
1139:drivers/bsp_f1xx_sdio.c **** }
 2039              		.loc 1 1139 0
 2040 0018 03B0     		add	sp, sp, #12
 2041              	.LCFI22:
 2042              		.cfi_remember_state
 2043              		.cfi_def_cfa_offset 4
 2044              		@ sp needed
 2045 001a 5DF804FB 		ldr	pc, [sp], #4
 2046              	.L168:
 2047              	.LCFI23:
 2048              		.cfi_restore_state
1137:drivers/bsp_f1xx_sdio.c ****     if(SD_SendStatus(&resp1)!=SD_OK)return SD_CARD_ERROR;
 2049              		.loc 1 1137 0
 2050 001e FF20     		movs	r0, #255
 2051 0020 FAE7     		b	.L167
 2052              		.cfi_endproc
 2053              	.LFE92:
 2055              		.section	.text.FindSCR,"ax",%progbits
 2056              		.align	1
 2057              		.global	FindSCR
 2058              		.syntax unified
 2059              		.thumb
 2060              		.thumb_func
 2061              		.fpu softvfp
 2063              	FindSCR:
 2064              	.LFB93:
1140:drivers/bsp_f1xx_sdio.c **** //Êü•ÊâæSDÂç°ÁöÑSCRÂØÑÂ≠òÂô®ÂÄº
1141:drivers/bsp_f1xx_sdio.c **** //rca:Âç°Áõ∏ÂØπÂú∞ÂùÄ
1142:drivers/bsp_f1xx_sdio.c **** //pscr:Êï∞ÊçÆÁºìÂ≠òÂå∫(Â≠òÂÇ®SCRÂÜÖÂÆπ)
1143:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
1144:drivers/bsp_f1xx_sdio.c **** SD_Error FindSCR(u16 rca,u32 *pscr)
1145:drivers/bsp_f1xx_sdio.c **** {
 2065              		.loc 1 1145 0
 2066              		.cfi_startproc
 2067              		@ args = 0, pretend = 0, frame = 8
 2068              		@ frame_needed = 0, uses_anonymous_args = 0
 2069              	.LVL222:
 2070 0000 30B5     		push	{r4, r5, lr}
 2071              	.LCFI24:
 2072              		.cfi_def_cfa_offset 12
 2073              		.cfi_offset 4, -12
 2074              		.cfi_offset 5, -8
 2075              		.cfi_offset 14, -4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 60


 2076 0002 83B0     		sub	sp, sp, #12
 2077              	.LCFI25:
 2078              		.cfi_def_cfa_offset 24
 2079 0004 0446     		mov	r4, r0
 2080 0006 0D46     		mov	r5, r1
 2081              	.LVL223:
1146:drivers/bsp_f1xx_sdio.c ****     u32 index = 0;
1147:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus = SD_OK;
1148:drivers/bsp_f1xx_sdio.c ****     u32 tempscr[2]={0,0};
 2082              		.loc 1 1148 0
 2083 0008 0023     		movs	r3, #0
 2084 000a 0093     		str	r3, [sp]
 2085 000c 0193     		str	r3, [sp, #4]
1149:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN,1,8);			//ÂèëÈÄÅCMD16,Áü≠ÂìçÂ∫î,ËÆæÁΩÆBlock Size‰∏∫8Â≠óËäÇ
 2086              		.loc 1 1149 0
 2087 000e 0822     		movs	r2, #8
 2088 0010 0121     		movs	r1, #1
 2089              	.LVL224:
 2090 0012 1020     		movs	r0, #16
 2091              	.LVL225:
 2092 0014 FFF7FEFF 		bl	SDIO_Send_Cmd
 2093              	.LVL226:
1150:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_SET_BLOCKLEN);
 2094              		.loc 1 1150 0
 2095 0018 1020     		movs	r0, #16
 2096 001a FFF7FEFF 		bl	CmdResp1Error
 2097              	.LVL227:
1151:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;
 2098              		.loc 1 1151 0
 2099 001e 0346     		mov	r3, r0
 2100 0020 10B1     		cbz	r0, .L181
 2101              	.LVL228:
 2102              	.L171:
1152:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_APP_CMD,1,(u32)rca<<16);	//ÂèëÈÄÅCMD55,Áü≠ÂìçÂ∫î
1153:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_APP_CMD);
1154:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;
1155:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Data_Cfg(SD_DATATIMEOUT,8,3,1);		//8‰∏™Â≠óËäÇÈïøÂ∫¶,block‰∏∫8Â≠óËäÇ,SDÂç°Âà∞SDIO.
1156:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_SD_APP_SEND_SCR,1,0);		//ÂèëÈÄÅACMD51,Áü≠ÂìçÂ∫î,ÂèÇÊï∞‰∏∫0
1157:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_SD_APP_SEND_SCR);
1158:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;
1159:drivers/bsp_f1xx_sdio.c ****     while(!(SDIO->STA&(SDIO_FLAG_RXOVERR|SDIO_FLAG_DCRCFAIL|SDIO_FLAG_DTIMEOUT|SDIO_FLAG_DBCKEND|SD
1160:drivers/bsp_f1xx_sdio.c ****     {
1161:drivers/bsp_f1xx_sdio.c ****         if(SDIO->STA&(1<<21))//Êé•Êî∂FIFOÊï∞ÊçÆÂèØÁî®
1162:drivers/bsp_f1xx_sdio.c ****         {
1163:drivers/bsp_f1xx_sdio.c ****             *(tempscr+index)=SDIO->FIFO;	//ËØªÂèñFIFOÂÜÖÂÆπ
1164:drivers/bsp_f1xx_sdio.c ****             index++;
1165:drivers/bsp_f1xx_sdio.c ****             if(index>=2)break;
1166:drivers/bsp_f1xx_sdio.c ****         }
1167:drivers/bsp_f1xx_sdio.c ****     }
1168:drivers/bsp_f1xx_sdio.c ****     if(SDIO->STA&(1<<3))		//Êé•Êî∂Êï∞ÊçÆË∂ÖÊó∂
1169:drivers/bsp_f1xx_sdio.c ****     {
1170:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<3;		//Ê∏ÖÈô§Ê†áËÆ∞
1171:drivers/bsp_f1xx_sdio.c ****         return SD_DATA_TIMEOUT;
1172:drivers/bsp_f1xx_sdio.c ****     }
1173:drivers/bsp_f1xx_sdio.c ****     else if(SDIO->STA&(1<<1))	//Â∑≤ÂèëÈÄÅ/Êé•Êî∂ÁöÑÊï∞ÊçÆÂùóCRCÊ†°È™åÈîôËØØ
1174:drivers/bsp_f1xx_sdio.c ****     {
1175:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<1;		//Ê∏ÖÈô§Ê†áËÆ∞
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 61


1176:drivers/bsp_f1xx_sdio.c ****         return SD_DATA_CRC_FAIL;
1177:drivers/bsp_f1xx_sdio.c ****     }
1178:drivers/bsp_f1xx_sdio.c ****     else if(SDIO->STA&(1<<5))	//Êé•Êî∂FIFOÊ∫¢Âá∫
1179:drivers/bsp_f1xx_sdio.c ****     {
1180:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<5;		//Ê∏ÖÈô§Ê†áËÆ∞
1181:drivers/bsp_f1xx_sdio.c ****         return SD_RX_OVERRUN;
1182:drivers/bsp_f1xx_sdio.c ****     }
1183:drivers/bsp_f1xx_sdio.c ****     else if(SDIO->STA&(1<<9))	//Ëµ∑Âßã‰ΩçÊ£ÄÊµãÈîôËØØ
1184:drivers/bsp_f1xx_sdio.c ****     {
1185:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR|=1<<9;		//Ê∏ÖÈô§Ê†áËÆ∞
1186:drivers/bsp_f1xx_sdio.c ****         return SD_START_BIT_ERR;
1187:drivers/bsp_f1xx_sdio.c ****     }
1188:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§Ê†áËÆ∞
1189:drivers/bsp_f1xx_sdio.c ****     //ÊääÊï∞ÊçÆÈ°∫Â∫èÊåâ8‰Ωç‰∏∫Âçï‰ΩçÂÄíËøáÊù•.
1190:drivers/bsp_f1xx_sdio.c ****     *(pscr+1)=((tempscr[0]&SD_0TO7BITS)<<24)|((tempscr[0]&SD_8TO15BITS)<<8)|((tempscr[0]&SD_16TO23B
1191:drivers/bsp_f1xx_sdio.c ****     *(pscr)=((tempscr[1]&SD_0TO7BITS)<<24)|((tempscr[1]&SD_8TO15BITS)<<8)|((tempscr[1]&SD_16TO23BIT
1192:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
1193:drivers/bsp_f1xx_sdio.c **** }
 2103              		.loc 1 1193 0
 2104 0022 1846     		mov	r0, r3
 2105 0024 03B0     		add	sp, sp, #12
 2106              	.LCFI26:
 2107              		.cfi_remember_state
 2108              		.cfi_def_cfa_offset 12
 2109              		@ sp needed
 2110 0026 30BD     		pop	{r4, r5, pc}
 2111              	.LVL229:
 2112              	.L181:
 2113              	.LCFI27:
 2114              		.cfi_restore_state
1152:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_APP_CMD,1,(u32)rca<<16);	//ÂèëÈÄÅCMD55,Áü≠ÂìçÂ∫î
 2115              		.loc 1 1152 0
 2116 0028 2204     		lsls	r2, r4, #16
 2117 002a 0121     		movs	r1, #1
 2118 002c 3720     		movs	r0, #55
 2119              	.LVL230:
 2120 002e FFF7FEFF 		bl	SDIO_Send_Cmd
 2121              	.LVL231:
1153:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;
 2122              		.loc 1 1153 0
 2123 0032 3720     		movs	r0, #55
 2124 0034 FFF7FEFF 		bl	CmdResp1Error
 2125              	.LVL232:
1154:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Data_Cfg(SD_DATATIMEOUT,8,3,1);		//8‰∏™Â≠óËäÇÈïøÂ∫¶,block‰∏∫8Â≠óËäÇ,SDÂç°Âà∞SDIO.
 2126              		.loc 1 1154 0
 2127 0038 0346     		mov	r3, r0
 2128 003a 0028     		cmp	r0, #0
 2129 003c F1D1     		bne	.L171
1155:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_SD_APP_SEND_SCR,1,0);		//ÂèëÈÄÅACMD51,Áü≠ÂìçÂ∫î,ÂèÇÊï∞‰∏∫0
 2130              		.loc 1 1155 0
 2131 003e 0123     		movs	r3, #1
 2132 0040 0322     		movs	r2, #3
 2133 0042 0821     		movs	r1, #8
 2134 0044 4FF0FF30 		mov	r0, #-1
 2135              	.LVL233:
 2136 0048 FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 2137              	.LVL234:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 62


1156:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_SD_APP_SEND_SCR);
 2138              		.loc 1 1156 0
 2139 004c 0022     		movs	r2, #0
 2140 004e 0121     		movs	r1, #1
 2141 0050 3320     		movs	r0, #51
 2142 0052 FFF7FEFF 		bl	SDIO_Send_Cmd
 2143              	.LVL235:
1157:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;
 2144              		.loc 1 1157 0
 2145 0056 3320     		movs	r0, #51
 2146 0058 FFF7FEFF 		bl	CmdResp1Error
 2147              	.LVL236:
1158:drivers/bsp_f1xx_sdio.c ****     while(!(SDIO->STA&(SDIO_FLAG_RXOVERR|SDIO_FLAG_DCRCFAIL|SDIO_FLAG_DTIMEOUT|SDIO_FLAG_DBCKEND|SD
 2148              		.loc 1 1158 0
 2149 005c 0346     		mov	r3, r0
 2150 005e 0028     		cmp	r0, #0
 2151 0060 DFD1     		bne	.L171
 2152              	.LVL237:
 2153              	.L173:
1159:drivers/bsp_f1xx_sdio.c ****     {
 2154              		.loc 1 1159 0
 2155 0062 314A     		ldr	r2, .L186
 2156 0064 516B     		ldr	r1, [r2, #52]
 2157 0066 40F22A62 		movw	r2, #1578
 2158 006a 1142     		tst	r1, r2
 2159 006c 0CD1     		bne	.L174
1161:drivers/bsp_f1xx_sdio.c ****         {
 2160              		.loc 1 1161 0
 2161 006e 2E4A     		ldr	r2, .L186
 2162 0070 526B     		ldr	r2, [r2, #52]
 2163 0072 12F4001F 		tst	r2, #2097152
 2164 0076 F4D0     		beq	.L173
1163:drivers/bsp_f1xx_sdio.c ****             index++;
 2165              		.loc 1 1163 0
 2166 0078 2B4A     		ldr	r2, .L186
 2167 007a D2F88020 		ldr	r2, [r2, #128]
 2168 007e 4DF82020 		str	r2, [sp, r0, lsl #2]
1164:drivers/bsp_f1xx_sdio.c ****             if(index>=2)break;
 2169              		.loc 1 1164 0
 2170 0082 0130     		adds	r0, r0, #1
 2171              	.LVL238:
1165:drivers/bsp_f1xx_sdio.c ****         }
 2172              		.loc 1 1165 0
 2173 0084 0128     		cmp	r0, #1
 2174 0086 ECD9     		bls	.L173
 2175              	.L174:
1168:drivers/bsp_f1xx_sdio.c ****     {
 2176              		.loc 1 1168 0
 2177 0088 274A     		ldr	r2, .L186
 2178 008a 526B     		ldr	r2, [r2, #52]
 2179 008c 12F0080F 		tst	r2, #8
 2180 0090 2DD1     		bne	.L182
1173:drivers/bsp_f1xx_sdio.c ****     {
 2181              		.loc 1 1173 0
 2182 0092 254A     		ldr	r2, .L186
 2183 0094 526B     		ldr	r2, [r2, #52]
 2184 0096 12F0020F 		tst	r2, #2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 63


 2185 009a 2FD1     		bne	.L183
1178:drivers/bsp_f1xx_sdio.c ****     {
 2186              		.loc 1 1178 0
 2187 009c 224A     		ldr	r2, .L186
 2188 009e 526B     		ldr	r2, [r2, #52]
 2189 00a0 12F0200F 		tst	r2, #32
 2190 00a4 31D1     		bne	.L184
1183:drivers/bsp_f1xx_sdio.c ****     {
 2191              		.loc 1 1183 0
 2192 00a6 204A     		ldr	r2, .L186
 2193 00a8 526B     		ldr	r2, [r2, #52]
 2194 00aa 12F4007F 		tst	r2, #512
 2195 00ae 33D1     		bne	.L185
1188:drivers/bsp_f1xx_sdio.c ****     //ÊääÊï∞ÊçÆÈ°∫Â∫èÊåâ8‰Ωç‰∏∫Âçï‰ΩçÂÄíËøáÊù•.
 2196              		.loc 1 1188 0
 2197 00b0 1D4A     		ldr	r2, .L186
 2198 00b2 40F2FF51 		movw	r1, #1535
 2199 00b6 9163     		str	r1, [r2, #56]
1190:drivers/bsp_f1xx_sdio.c ****     *(pscr)=((tempscr[1]&SD_0TO7BITS)<<24)|((tempscr[1]&SD_8TO15BITS)<<8)|((tempscr[1]&SD_16TO23BIT
 2200              		.loc 1 1190 0
 2201 00b8 0099     		ldr	r1, [sp]
 2202 00ba 0A02     		lsls	r2, r1, #8
 2203 00bc 02F47F02 		and	r2, r2, #16711680
 2204 00c0 42EA0162 		orr	r2, r2, r1, lsl #24
 2205 00c4 080A     		lsrs	r0, r1, #8
 2206              	.LVL239:
 2207 00c6 00F47F40 		and	r0, r0, #65280
 2208 00ca 0243     		orrs	r2, r2, r0
 2209 00cc 42EA1162 		orr	r2, r2, r1, lsr #24
 2210 00d0 6A60     		str	r2, [r5, #4]
1191:drivers/bsp_f1xx_sdio.c ****     return errorstatus;
 2211              		.loc 1 1191 0
 2212 00d2 0199     		ldr	r1, [sp, #4]
 2213 00d4 0A02     		lsls	r2, r1, #8
 2214 00d6 02F47F02 		and	r2, r2, #16711680
 2215 00da 42EA0162 		orr	r2, r2, r1, lsl #24
 2216 00de 080A     		lsrs	r0, r1, #8
 2217 00e0 00F47F40 		and	r0, r0, #65280
 2218 00e4 0243     		orrs	r2, r2, r0
 2219 00e6 42EA1162 		orr	r2, r2, r1, lsr #24
 2220 00ea 2A60     		str	r2, [r5]
1192:drivers/bsp_f1xx_sdio.c **** }
 2221              		.loc 1 1192 0
 2222 00ec 99E7     		b	.L171
 2223              	.LVL240:
 2224              	.L182:
1170:drivers/bsp_f1xx_sdio.c ****         return SD_DATA_TIMEOUT;
 2225              		.loc 1 1170 0
 2226 00ee 0E4A     		ldr	r2, .L186
 2227 00f0 936B     		ldr	r3, [r2, #56]
 2228 00f2 43F00803 		orr	r3, r3, #8
 2229 00f6 9363     		str	r3, [r2, #56]
1171:drivers/bsp_f1xx_sdio.c ****     }
 2230              		.loc 1 1171 0
 2231 00f8 0423     		movs	r3, #4
 2232 00fa 92E7     		b	.L171
 2233              	.L183:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 64


1175:drivers/bsp_f1xx_sdio.c ****         return SD_DATA_CRC_FAIL;
 2234              		.loc 1 1175 0
 2235 00fc 0A4A     		ldr	r2, .L186
 2236 00fe 936B     		ldr	r3, [r2, #56]
 2237 0100 43F00203 		orr	r3, r3, #2
 2238 0104 9363     		str	r3, [r2, #56]
1176:drivers/bsp_f1xx_sdio.c ****     }
 2239              		.loc 1 1176 0
 2240 0106 0223     		movs	r3, #2
 2241 0108 8BE7     		b	.L171
 2242              	.L184:
1180:drivers/bsp_f1xx_sdio.c ****         return SD_RX_OVERRUN;
 2243              		.loc 1 1180 0
 2244 010a 074A     		ldr	r2, .L186
 2245 010c 936B     		ldr	r3, [r2, #56]
 2246 010e 43F02003 		orr	r3, r3, #32
 2247 0112 9363     		str	r3, [r2, #56]
1181:drivers/bsp_f1xx_sdio.c ****     }
 2248              		.loc 1 1181 0
 2249 0114 0623     		movs	r3, #6
 2250 0116 84E7     		b	.L171
 2251              	.L185:
1185:drivers/bsp_f1xx_sdio.c ****         return SD_START_BIT_ERR;
 2252              		.loc 1 1185 0
 2253 0118 034A     		ldr	r2, .L186
 2254 011a 936B     		ldr	r3, [r2, #56]
 2255 011c 43F40073 		orr	r3, r3, #512
 2256 0120 9363     		str	r3, [r2, #56]
1186:drivers/bsp_f1xx_sdio.c ****     }
 2257              		.loc 1 1186 0
 2258 0122 0723     		movs	r3, #7
 2259 0124 7DE7     		b	.L171
 2260              	.L187:
 2261 0126 00BF     		.align	2
 2262              	.L186:
 2263 0128 00800140 		.word	1073840128
 2264              		.cfi_endproc
 2265              	.LFE93:
 2267              		.section	.text.SDEnWideBus,"ax",%progbits
 2268              		.align	1
 2269              		.global	SDEnWideBus
 2270              		.syntax unified
 2271              		.thumb
 2272              		.thumb_func
 2273              		.fpu softvfp
 2275              	SDEnWideBus:
 2276              	.LFB89:
1071:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus = SD_OK;
 2277              		.loc 1 1071 0
 2278              		.cfi_startproc
 2279              		@ args = 0, pretend = 0, frame = 8
 2280              		@ frame_needed = 0, uses_anonymous_args = 0
 2281              	.LVL241:
 2282 0000 10B5     		push	{r4, lr}
 2283              	.LCFI28:
 2284              		.cfi_def_cfa_offset 8
 2285              		.cfi_offset 4, -8
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 65


 2286              		.cfi_offset 14, -4
 2287 0002 82B0     		sub	sp, sp, #8
 2288              	.LCFI29:
 2289              		.cfi_def_cfa_offset 16
 2290              	.LVL242:
1073:drivers/bsp_f1xx_sdio.c ****     u8 arg=0X00;
 2291              		.loc 1 1073 0
 2292 0004 0023     		movs	r3, #0
 2293 0006 0093     		str	r3, [sp]
 2294 0008 0193     		str	r3, [sp, #4]
 2295              	.LVL243:
1075:drivers/bsp_f1xx_sdio.c ****     else arg=0X00;
 2296              		.loc 1 1075 0
 2297 000a 0446     		mov	r4, r0
 2298 000c 00B1     		cbz	r0, .L189
 2299 000e 0224     		movs	r4, #2
 2300              	.L189:
 2301              	.LVL244:
1077:drivers/bsp_f1xx_sdio.c ****     errorstatus=FindSCR(RCA,scr);						//ÂæóÂà∞SCRÂØÑÂ≠òÂô®Êï∞ÊçÆ
 2302              		.loc 1 1077 0
 2303 0010 154B     		ldr	r3, .L194
 2304 0012 5B69     		ldr	r3, [r3, #20]
 2305 0014 13F0007F 		tst	r3, #33554432
 2306 0018 20D1     		bne	.L191
1078:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;
 2307              		.loc 1 1078 0
 2308 001a 6946     		mov	r1, sp
 2309 001c 134B     		ldr	r3, .L194+4
 2310 001e 1888     		ldrh	r0, [r3]
 2311              	.LVL245:
 2312 0020 FFF7FEFF 		bl	FindSCR
 2313              	.LVL246:
1079:drivers/bsp_f1xx_sdio.c ****     if((scr[1]&SD_WIDE_BUS_SUPPORT)!=SD_ALLZERO)		//ÊîØÊåÅÂÆΩÊÄªÁ∫ø
 2314              		.loc 1 1079 0
 2315 0024 0346     		mov	r3, r0
 2316 0026 D0B9     		cbnz	r0, .L190
1080:drivers/bsp_f1xx_sdio.c ****     {
 2317              		.loc 1 1080 0
 2318 0028 019B     		ldr	r3, [sp, #4]
 2319 002a 13F4802F 		tst	r3, #262144
 2320 002e 19D0     		beq	.L192
1082:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_APP_CMD);
 2321              		.loc 1 1082 0
 2322 0030 0E4B     		ldr	r3, .L194+4
 2323 0032 1A68     		ldr	r2, [r3]
 2324 0034 1204     		lsls	r2, r2, #16
 2325 0036 0121     		movs	r1, #1
 2326 0038 3720     		movs	r0, #55
 2327              	.LVL247:
 2328 003a FFF7FEFF 		bl	SDIO_Send_Cmd
 2329              	.LVL248:
1083:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;
 2330              		.loc 1 1083 0
 2331 003e 3720     		movs	r0, #55
 2332 0040 FFF7FEFF 		bl	CmdResp1Error
 2333              	.LVL249:
1084:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_APP_SD_SET_BUSWIDTH,1,arg);//ÂèëÈÄÅACMD6,Áü≠ÂìçÂ∫î,ÂèÇÊï∞:10,4‰Ωç;00,1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 66


 2334              		.loc 1 1084 0
 2335 0044 0346     		mov	r3, r0
 2336 0046 50B9     		cbnz	r0, .L190
1085:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_APP_SD_SET_BUSWIDTH);
 2337              		.loc 1 1085 0
 2338 0048 2246     		mov	r2, r4
 2339 004a 0121     		movs	r1, #1
 2340 004c 0620     		movs	r0, #6
 2341              	.LVL250:
 2342 004e FFF7FEFF 		bl	SDIO_Send_Cmd
 2343              	.LVL251:
1086:drivers/bsp_f1xx_sdio.c ****         return errorstatus;
 2344              		.loc 1 1086 0
 2345 0052 0620     		movs	r0, #6
 2346 0054 FFF7FEFF 		bl	CmdResp1Error
 2347              	.LVL252:
 2348 0058 0346     		mov	r3, r0
 2349              	.LVL253:
1087:drivers/bsp_f1xx_sdio.c ****     }else return SD_REQUEST_NOT_APPLICABLE;				//‰∏çÊîØÊåÅÂÆΩÊÄªÁ∫øËÆæÁΩÆ
 2350              		.loc 1 1087 0
 2351 005a 00E0     		b	.L190
 2352              	.LVL254:
 2353              	.L191:
1077:drivers/bsp_f1xx_sdio.c ****     errorstatus=FindSCR(RCA,scr);						//ÂæóÂà∞SCRÂØÑÂ≠òÂô®Êï∞ÊçÆ
 2354              		.loc 1 1077 0
 2355 005c 0E23     		movs	r3, #14
 2356              	.LVL255:
 2357              	.L190:
1089:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•Âç°ÊòØÂê¶Ê≠£Âú®ÊâßË°åÂÜôÊìç‰Ωú
 2358              		.loc 1 1089 0
 2359 005e 1846     		mov	r0, r3
 2360 0060 02B0     		add	sp, sp, #8
 2361              	.LCFI30:
 2362              		.cfi_remember_state
 2363              		.cfi_def_cfa_offset 8
 2364              		@ sp needed
 2365 0062 10BD     		pop	{r4, pc}
 2366              	.LVL256:
 2367              	.L192:
 2368              	.LCFI31:
 2369              		.cfi_restore_state
1088:drivers/bsp_f1xx_sdio.c **** }
 2370              		.loc 1 1088 0
 2371 0064 2523     		movs	r3, #37
 2372 0066 FAE7     		b	.L190
 2373              	.L195:
 2374              		.align	2
 2375              	.L194:
 2376 0068 00800140 		.word	1073840128
 2377 006c 00000000 		.word	.LANCHOR1
 2378              		.cfi_endproc
 2379              	.LFE89:
 2381              		.section	.text.SD_EnableWideBusOperation,"ax",%progbits
 2382              		.align	1
 2383              		.global	SD_EnableWideBusOperation
 2384              		.syntax unified
 2385              		.thumb
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 67


 2386              		.thumb_func
 2387              		.fpu softvfp
 2389              	SD_EnableWideBusOperation:
 2390              	.LFB74:
 368:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
 2391              		.loc 1 368 0
 2392              		.cfi_startproc
 2393              		@ args = 0, pretend = 0, frame = 0
 2394              		@ frame_needed = 0, uses_anonymous_args = 0
 2395              	.LVL257:
 370:drivers/bsp_f1xx_sdio.c ****     else if((SDIO_STD_CAPACITY_SD_CARD_V1_1==CardType)||(SDIO_STD_CAPACITY_SD_CARD_V2_0==CardType)|
 2396              		.loc 1 370 0
 2397 0000 124B     		ldr	r3, .L206
 2398 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2399 0004 032B     		cmp	r3, #3
 2400 0006 1BD0     		beq	.L198
 371:drivers/bsp_f1xx_sdio.c ****     {
 2401              		.loc 1 371 0
 2402 0008 022B     		cmp	r3, #2
 2403 000a 1BD8     		bhi	.L199
 373:drivers/bsp_f1xx_sdio.c ****         else
 2404              		.loc 1 373 0
 2405 000c 0128     		cmp	r0, #1
 2406 000e 01D9     		bls	.L205
 2407 0010 2723     		movs	r3, #39
 2408 0012 18E0     		b	.L202
 2409              	.L205:
 368:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
 2410              		.loc 1 368 0
 2411 0014 10B5     		push	{r4, lr}
 2412              	.LCFI32:
 2413              		.cfi_def_cfa_offset 8
 2414              		.cfi_offset 4, -8
 2415              		.cfi_offset 14, -4
 2416 0016 0446     		mov	r4, r0
 376:drivers/bsp_f1xx_sdio.c ****             if(SD_OK==errorstatus)
 2417              		.loc 1 376 0
 2418 0018 C0B2     		uxtb	r0, r0
 2419              	.LVL258:
 2420 001a FFF7FEFF 		bl	SDEnWideBus
 2421              	.LVL259:
 377:drivers/bsp_f1xx_sdio.c ****             {
 2422              		.loc 1 377 0
 2423 001e 0346     		mov	r3, r0
 2424 0020 60B9     		cbnz	r0, .L197
 379:drivers/bsp_f1xx_sdio.c ****                 SDIO->CLKCR|=(u16)wmode<<11;//1‰Ωç/4‰ΩçÊÄªÁ∫øÂÆΩÂ∫¶
 2425              		.loc 1 379 0
 2426 0022 0B4A     		ldr	r2, .L206+4
 2427 0024 5168     		ldr	r1, [r2, #4]
 2428 0026 21F4C051 		bic	r1, r1, #6144
 2429 002a 5160     		str	r1, [r2, #4]
 380:drivers/bsp_f1xx_sdio.c ****                 SDIO->CLKCR|=0<<14;			//‰∏çÂºÄÂêØÁ°¨‰ª∂ÊµÅÊéßÂà∂
 2430              		.loc 1 380 0
 2431 002c 5068     		ldr	r0, [r2, #4]
 2432              	.LVL260:
 2433 002e 0949     		ldr	r1, .L206+8
 2434 0030 01EAC424 		and	r4, r1, r4, lsl #11
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 68


 2435              	.LVL261:
 2436 0034 2043     		orrs	r0, r0, r4
 2437 0036 5060     		str	r0, [r2, #4]
 381:drivers/bsp_f1xx_sdio.c ****             }
 2438              		.loc 1 381 0
 2439 0038 5168     		ldr	r1, [r2, #4]
 2440 003a 5160     		str	r1, [r2, #4]
 2441              	.L197:
 386:drivers/bsp_f1xx_sdio.c **** //ËÆæÁΩÆSDÂç°Â∑•‰ΩúÊ®°Âºè
 2442              		.loc 1 386 0
 2443 003c 1846     		mov	r0, r3
 2444 003e 10BD     		pop	{r4, pc}
 2445              	.LVL262:
 2446              	.L198:
 2447              	.LCFI33:
 2448              		.cfi_def_cfa_offset 0
 2449              		.cfi_restore 4
 2450              		.cfi_restore 14
 370:drivers/bsp_f1xx_sdio.c ****     else if((SDIO_STD_CAPACITY_SD_CARD_V1_1==CardType)||(SDIO_STD_CAPACITY_SD_CARD_V2_0==CardType)|
 2451              		.loc 1 370 0
 2452 0040 2723     		movs	r3, #39
 2453 0042 00E0     		b	.L202
 2454              	.L199:
 369:drivers/bsp_f1xx_sdio.c ****     if(SDIO_MULTIMEDIA_CARD==CardType)return SD_UNSUPPORTED_FEATURE;//MMCÂç°‰∏çÊîØÊåÅ
 2455              		.loc 1 369 0
 2456 0044 0023     		movs	r3, #0
 2457              	.L202:
 386:drivers/bsp_f1xx_sdio.c **** //ËÆæÁΩÆSDÂç°Â∑•‰ΩúÊ®°Âºè
 2458              		.loc 1 386 0
 2459 0046 1846     		mov	r0, r3
 2460              	.LVL263:
 2461 0048 7047     		bx	lr
 2462              	.L207:
 2463 004a 00BF     		.align	2
 2464              	.L206:
 2465 004c 00000000 		.word	.LANCHOR0
 2466 0050 00800140 		.word	1073840128
 2467 0054 00F8FF07 		.word	134215680
 2468              		.cfi_endproc
 2469              	.LFE74:
 2471              		.section	.text.bsp_SD_Init,"ax",%progbits
 2472              		.align	1
 2473              		.global	bsp_SD_Init
 2474              		.syntax unified
 2475              		.thumb
 2476              		.thumb_func
 2477              		.fpu softvfp
 2479              	bsp_SD_Init:
 2480              	.LFB66:
  23:drivers/bsp_f1xx_sdio.c ****     u8 clkdiv=0;
 2481              		.loc 1 23 0
 2482              		.cfi_startproc
 2483              		@ args = 0, pretend = 0, frame = 0
 2484              		@ frame_needed = 0, uses_anonymous_args = 0
 2485 0000 08B5     		push	{r3, lr}
 2486              	.LCFI34:
 2487              		.cfi_def_cfa_offset 8
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 69


 2488              		.cfi_offset 3, -8
 2489              		.cfi_offset 14, -4
 2490              	.LVL264:
  27:drivers/bsp_f1xx_sdio.c ****     RCC->APB2ENR|=1<<5;    	//‰ΩøËÉΩPORTDÊó∂Èíü
 2491              		.loc 1 27 0
 2492 0002 334B     		ldr	r3, .L223
 2493 0004 9A69     		ldr	r2, [r3, #24]
 2494 0006 42F01002 		orr	r2, r2, #16
 2495 000a 9A61     		str	r2, [r3, #24]
  28:drivers/bsp_f1xx_sdio.c ****     RCC->AHBENR|=1<<10;    	//‰ΩøËÉΩSDIOÊó∂Èíü
 2496              		.loc 1 28 0
 2497 000c 9A69     		ldr	r2, [r3, #24]
 2498 000e 42F02002 		orr	r2, r2, #32
 2499 0012 9A61     		str	r2, [r3, #24]
  29:drivers/bsp_f1xx_sdio.c ****     RCC->AHBENR|=1<<1;    	//‰ΩøËÉΩDMA2Êó∂Èíü
 2500              		.loc 1 29 0
 2501 0014 5A69     		ldr	r2, [r3, #20]
 2502 0016 42F48062 		orr	r2, r2, #1024
 2503 001a 5A61     		str	r2, [r3, #20]
  30:drivers/bsp_f1xx_sdio.c **** 
 2504              		.loc 1 30 0
 2505 001c 5A69     		ldr	r2, [r3, #20]
 2506 001e 42F00202 		orr	r2, r2, #2
 2507 0022 5A61     		str	r2, [r3, #20]
  32:drivers/bsp_f1xx_sdio.c ****     GPIOC->CRH|=0X000BBBBB;	//PC.8~12 Â§çÁî®ËæìÂá∫
 2508              		.loc 1 32 0
 2509 0024 2B4A     		ldr	r2, .L223+4
 2510 0026 5368     		ldr	r3, [r2, #4]
 2511 0028 1B0D     		lsrs	r3, r3, #20
 2512 002a 1B05     		lsls	r3, r3, #20
 2513 002c 5360     		str	r3, [r2, #4]
  33:drivers/bsp_f1xx_sdio.c **** 
 2514              		.loc 1 33 0
 2515 002e 5168     		ldr	r1, [r2, #4]
 2516 0030 294B     		ldr	r3, .L223+8
 2517 0032 0B43     		orrs	r3, r3, r1
 2518 0034 5360     		str	r3, [r2, #4]
  35:drivers/bsp_f1xx_sdio.c ****     GPIOD->CRL|=0X00000B00;	//PD2Â§çÁî®ËæìÂá∫,PD7 ‰∏äÊãâËæìÂÖ•
 2519              		.loc 1 35 0
 2520 0036 294B     		ldr	r3, .L223+12
 2521 0038 1A68     		ldr	r2, [r3]
 2522 003a 22F47062 		bic	r2, r2, #3840
 2523 003e 1A60     		str	r2, [r3]
  36:drivers/bsp_f1xx_sdio.c ****     //SDIOÂ§ñËÆæÂØÑÂ≠òÂô®ËÆæÁΩÆ‰∏∫ÈªòËÆ§ÂÄº
 2524              		.loc 1 36 0
 2525 0040 1A68     		ldr	r2, [r3]
 2526 0042 42F43062 		orr	r2, r2, #2816
 2527 0046 1A60     		str	r2, [r3]
  38:drivers/bsp_f1xx_sdio.c ****     SDIO->CLKCR=0x00000000;
 2528              		.loc 1 38 0
 2529 0048 03F5D843 		add	r3, r3, #27648
 2530 004c 0021     		movs	r1, #0
 2531 004e 1960     		str	r1, [r3]
  39:drivers/bsp_f1xx_sdio.c ****     SDIO->ARG=0x00000000;
 2532              		.loc 1 39 0
 2533 0050 5960     		str	r1, [r3, #4]
  40:drivers/bsp_f1xx_sdio.c ****     SDIO->CMD=0x00000000;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 70


 2534              		.loc 1 40 0
 2535 0052 9960     		str	r1, [r3, #8]
  41:drivers/bsp_f1xx_sdio.c ****     SDIO->DTIMER=0x00000000;
 2536              		.loc 1 41 0
 2537 0054 D960     		str	r1, [r3, #12]
  42:drivers/bsp_f1xx_sdio.c ****     SDIO->DLEN=0x00000000;
 2538              		.loc 1 42 0
 2539 0056 5962     		str	r1, [r3, #36]
  43:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=0x00000000;
 2540              		.loc 1 43 0
 2541 0058 9962     		str	r1, [r3, #40]
  44:drivers/bsp_f1xx_sdio.c ****     SDIO->ICR=0x00C007FF;
 2542              		.loc 1 44 0
 2543 005a D962     		str	r1, [r3, #44]
  45:drivers/bsp_f1xx_sdio.c ****     SDIO->MASK=0x00000000;
 2544              		.loc 1 45 0
 2545 005c 204A     		ldr	r2, .L223+16
 2546 005e 9A63     		str	r2, [r3, #56]
  46:drivers/bsp_f1xx_sdio.c ****     MY_NVIC_Init(1,0,SDIO_IRQn,1);		//SDIO‰∏≠Êñ≠ÈÖçÁΩÆ
 2547              		.loc 1 46 0
 2548 0060 D963     		str	r1, [r3, #60]
  47:drivers/bsp_f1xx_sdio.c ****     errorstatus=SD_PowerON();			//SDÂç°‰∏äÁîµ
 2549              		.loc 1 47 0
 2550 0062 0123     		movs	r3, #1
 2551 0064 3122     		movs	r2, #49
 2552 0066 1846     		mov	r0, r3
 2553 0068 FFF7FEFF 		bl	MY_NVIC_Init
 2554              	.LVL265:
  48:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)errorstatus=SD_InitializeCards();			//ÂàùÂßãÂåñSDÂç°
 2555              		.loc 1 48 0
 2556 006c FFF7FEFF 		bl	SD_PowerON
 2557              	.LVL266:
  49:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)errorstatus=SD_GetCardInfo(&SDCardInfo);	//Ëé∑ÂèñÂç°‰ø°ÊÅØ
 2558              		.loc 1 49 0
 2559 0070 0346     		mov	r3, r0
 2560 0072 A8B1     		cbz	r0, .L218
 2561              	.LVL267:
 2562              	.L209:
  50:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)errorstatus=SD_SelectDeselect((u32)(SDCardInfo.RCA<<16));//ÈÄâ‰∏≠SDÂç°
 2563              		.loc 1 50 0
 2564 0074 C3B1     		cbz	r3, .L219
 2565              	.L210:
  51:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)errorstatus=SD_EnableWideBusOperation(1);	//4‰ΩçÂÆΩÂ∫¶,Â¶ÇÊûúÊòØMMCÂç°,Âà
 2566              		.loc 1 51 0
 2567 0076 E3B1     		cbz	r3, .L220
 2568              	.L211:
  52:drivers/bsp_f1xx_sdio.c ****     if((errorstatus==SD_OK)||(SDIO_MULTIMEDIA_CARD==CardType))
 2569              		.loc 1 52 0
 2570 0078 1BB3     		cbz	r3, .L221
 2571              	.L212:
  53:drivers/bsp_f1xx_sdio.c ****     {
 2572              		.loc 1 53 0
 2573 007a 1BB1     		cbz	r3, .L213
  53:drivers/bsp_f1xx_sdio.c ****     {
 2574              		.loc 1 53 0 is_stmt 0 discriminator 1
 2575 007c 194A     		ldr	r2, .L223+20
 2576 007e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 71


 2577 0080 032A     		cmp	r2, #3
 2578 0082 0BD1     		bne	.L214
 2579              	.L213:
  55:drivers/bsp_f1xx_sdio.c ****         {
 2580              		.loc 1 55 0 is_stmt 1
 2581 0084 184B     		ldr	r3, .L223+24
 2582              	.LVL268:
 2583 0086 93F85630 		ldrb	r3, [r3, #86]	@ zero_extendqisi2
 2584 008a 012B     		cmp	r3, #1
 2585 008c 1ED9     		bls	.L222
  58:drivers/bsp_f1xx_sdio.c ****         SDIO_Clock_Set(clkdiv);				//ËÆæÁΩÆÊó∂ÈíüÈ¢ëÁéá,SDIOÊó∂ÈíüËÆ°ÁÆóÂÖ¨Âºè:SDIO_CKÊó∂Èíü=SDIOCL
 2586              		.loc 1 58 0
 2587 008e 0220     		movs	r0, #2
 2588              	.L215:
 2589              	.LVL269:
  59:drivers/bsp_f1xx_sdio.c ****         errorstatus=SD_SetDeviceMode(SD_DMA_MODE);	//ËÆæÁΩÆ‰∏∫DMAÊ®°Âºè
 2590              		.loc 1 59 0
 2591 0090 FFF7FEFF 		bl	SDIO_Clock_Set
 2592              	.LVL270:
  60:drivers/bsp_f1xx_sdio.c ****         //errorstatus=SD_SetDeviceMode(SD_POLLING_MODE);	//ËÆæÁΩÆ‰∏∫Êü•ËØ¢Ê®°Âºè
 2593              		.loc 1 60 0
 2594 0094 0120     		movs	r0, #1
 2595 0096 FFF7FEFF 		bl	SD_SetDeviceMode
 2596              	.LVL271:
 2597 009a 0346     		mov	r3, r0
 2598              	.LVL272:
 2599              	.L214:
  64:drivers/bsp_f1xx_sdio.c **** //SDIOÊó∂ÈíüÂàùÂßãÂåñËÆæÁΩÆ
 2600              		.loc 1 64 0
 2601 009c 1846     		mov	r0, r3
 2602 009e 08BD     		pop	{r3, pc}
 2603              	.LVL273:
 2604              	.L218:
  49:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)errorstatus=SD_GetCardInfo(&SDCardInfo);	//Ëé∑ÂèñÂç°‰ø°ÊÅØ
 2605              		.loc 1 49 0 discriminator 1
 2606 00a0 FFF7FEFF 		bl	SD_InitializeCards
 2607              	.LVL274:
 2608 00a4 0346     		mov	r3, r0
 2609              	.LVL275:
 2610 00a6 E5E7     		b	.L209
 2611              	.L219:
  50:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)errorstatus=SD_SelectDeselect((u32)(SDCardInfo.RCA<<16));//ÈÄâ‰∏≠SDÂç°
 2612              		.loc 1 50 0 discriminator 1
 2613 00a8 0F48     		ldr	r0, .L223+24
 2614 00aa FFF7FEFF 		bl	SD_GetCardInfo
 2615              	.LVL276:
 2616 00ae 0346     		mov	r3, r0
 2617              	.LVL277:
 2618 00b0 E1E7     		b	.L210
 2619              	.L220:
  51:drivers/bsp_f1xx_sdio.c ****     if(errorstatus==SD_OK)errorstatus=SD_EnableWideBusOperation(1);	//4‰ΩçÂÆΩÂ∫¶,Â¶ÇÊûúÊòØMMCÂç°,Âà
 2620              		.loc 1 51 0 discriminator 1
 2621 00b2 0D4B     		ldr	r3, .L223+24
 2622              	.LVL278:
 2623 00b4 B3F85400 		ldrh	r0, [r3, #84]
 2624 00b8 0004     		lsls	r0, r0, #16
 2625 00ba FFF7FEFF 		bl	SD_SelectDeselect
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 72


 2626              	.LVL279:
 2627 00be 0346     		mov	r3, r0
 2628              	.LVL280:
 2629 00c0 DAE7     		b	.L211
 2630              	.L221:
  52:drivers/bsp_f1xx_sdio.c ****     if((errorstatus==SD_OK)||(SDIO_MULTIMEDIA_CARD==CardType))
 2631              		.loc 1 52 0 discriminator 1
 2632 00c2 0120     		movs	r0, #1
 2633 00c4 FFF7FEFF 		bl	SD_EnableWideBusOperation
 2634              	.LVL281:
 2635 00c8 0346     		mov	r3, r0
 2636              	.LVL282:
 2637 00ca D6E7     		b	.L212
 2638              	.LVL283:
 2639              	.L222:
  57:drivers/bsp_f1xx_sdio.c ****         }else clkdiv=SDIO_TRANSFER_CLK_DIV;	//SDHCÁ≠âÂÖ∂‰ªñÂç°ÔºåËÆæÁΩÆÊúÄÈ´ò72/6=12Mhz
 2640              		.loc 1 57 0
 2641 00cc 0820     		movs	r0, #8
 2642 00ce DFE7     		b	.L215
 2643              	.L224:
 2644              		.align	2
 2645              	.L223:
 2646 00d0 00100240 		.word	1073876992
 2647 00d4 00100140 		.word	1073811456
 2648 00d8 BBBB0B00 		.word	768955
 2649 00dc 00140140 		.word	1073812480
 2650 00e0 FF07C000 		.word	12584959
 2651 00e4 00000000 		.word	.LANCHOR0
 2652 00e8 00000000 		.word	SDCardInfo
 2653              		.cfi_endproc
 2654              	.LFE66:
 2656              		.section	.text.convert_from_bytes_to_power_of_two,"ax",%progbits
 2657              		.align	1
 2658              		.global	convert_from_bytes_to_power_of_two
 2659              		.syntax unified
 2660              		.thumb
 2661              		.thumb_func
 2662              		.fpu softvfp
 2664              	convert_from_bytes_to_power_of_two:
 2665              	.LFB94:
1194:drivers/bsp_f1xx_sdio.c **** //ÂæóÂà∞NumberOfBytes‰ª•2‰∏∫Â∫ïÁöÑÊåáÊï∞.
1195:drivers/bsp_f1xx_sdio.c **** //NumberOfBytes:Â≠óËäÇÊï∞.
1196:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:‰ª•2‰∏∫Â∫ïÁöÑÊåáÊï∞ÂÄº
1197:drivers/bsp_f1xx_sdio.c **** u8 convert_from_bytes_to_power_of_two(u16 NumberOfBytes)
1198:drivers/bsp_f1xx_sdio.c **** {
 2666              		.loc 1 1198 0
 2667              		.cfi_startproc
 2668              		@ args = 0, pretend = 0, frame = 0
 2669              		@ frame_needed = 0, uses_anonymous_args = 0
 2670              		@ link register save eliminated.
 2671              	.LVL284:
1199:drivers/bsp_f1xx_sdio.c ****     u8 count=0;
 2672              		.loc 1 1199 0
 2673 0000 0023     		movs	r3, #0
1200:drivers/bsp_f1xx_sdio.c ****     while(NumberOfBytes!=1)
 2674              		.loc 1 1200 0
 2675 0002 02E0     		b	.L226
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 73


 2676              	.LVL285:
 2677              	.L227:
1201:drivers/bsp_f1xx_sdio.c ****     {
1202:drivers/bsp_f1xx_sdio.c ****         NumberOfBytes>>=1;
 2678              		.loc 1 1202 0
 2679 0004 4008     		lsrs	r0, r0, #1
 2680              	.LVL286:
1203:drivers/bsp_f1xx_sdio.c ****         count++;
 2681              		.loc 1 1203 0
 2682 0006 0133     		adds	r3, r3, #1
 2683              	.LVL287:
 2684 0008 DBB2     		uxtb	r3, r3
 2685              	.LVL288:
 2686              	.L226:
1200:drivers/bsp_f1xx_sdio.c ****     while(NumberOfBytes!=1)
 2687              		.loc 1 1200 0
 2688 000a 0128     		cmp	r0, #1
 2689 000c FAD1     		bne	.L227
1204:drivers/bsp_f1xx_sdio.c ****     }
1205:drivers/bsp_f1xx_sdio.c ****     return count;
1206:drivers/bsp_f1xx_sdio.c **** }
 2690              		.loc 1 1206 0
 2691 000e 1846     		mov	r0, r3
 2692              	.LVL289:
 2693 0010 7047     		bx	lr
 2694              		.cfi_endproc
 2695              	.LFE94:
 2697              		.section	.text.SD_DMA_Config,"ax",%progbits
 2698              		.align	1
 2699              		.global	SD_DMA_Config
 2700              		.syntax unified
 2701              		.thumb
 2702              		.thumb_func
 2703              		.fpu softvfp
 2705              	SD_DMA_Config:
 2706              	.LFB95:
1207:drivers/bsp_f1xx_sdio.c **** //ÈÖçÁΩÆSDIO DMA
1208:drivers/bsp_f1xx_sdio.c **** //mbuf:Â≠òÂÇ®Âô®Âú∞ÂùÄ
1209:drivers/bsp_f1xx_sdio.c **** //bufsize:‰º†ËæìÊï∞ÊçÆÈáè
1210:drivers/bsp_f1xx_sdio.c **** //dir:ÊñπÂêë;1,Â≠òÂÇ®Âô®-->SDIO(ÂÜôÊï∞ÊçÆ);0,SDIO-->Â≠òÂÇ®Âô®(ËØªÊï∞ÊçÆ);
1211:drivers/bsp_f1xx_sdio.c **** void SD_DMA_Config(u32*mbuf,u32 bufsize,u8 dir)
1212:drivers/bsp_f1xx_sdio.c **** {
 2707              		.loc 1 1212 0
 2708              		.cfi_startproc
 2709              		@ args = 0, pretend = 0, frame = 0
 2710              		@ frame_needed = 0, uses_anonymous_args = 0
 2711              		@ link register save eliminated.
 2712              	.LVL290:
 2713 0000 10B4     		push	{r4}
 2714              	.LCFI35:
 2715              		.cfi_def_cfa_offset 4
 2716              		.cfi_offset 4, -4
1213:drivers/bsp_f1xx_sdio.c ****     DMA2->IFCR|=(0XF<<12);				//Ê∏ÖÈô§DMA2ÈÄöÈÅì4ÁöÑÂêÑÁßçÊ†áËÆ∞
 2717              		.loc 1 1213 0
 2718 0002 194C     		ldr	r4, .L230
 2719 0004 6368     		ldr	r3, [r4, #4]
 2720 0006 43F47043 		orr	r3, r3, #61440
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 74


 2721 000a 6360     		str	r3, [r4, #4]
1214:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CCR&=~(1<<0);		//ÂÖ≥Èó≠DMA ÈÄöÈÅì4
 2722              		.loc 1 1214 0
 2723 000c 174B     		ldr	r3, .L230+4
 2724 000e 1C68     		ldr	r4, [r3]
 2725 0010 24F00104 		bic	r4, r4, #1
 2726 0014 1C60     		str	r4, [r3]
1215:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CCR&=~(0X7FF<<4);	//Ê∏ÖÈô§‰πãÂâçÁöÑËÆæÁΩÆ,DIR,CIRC,PINC,MINC,PSIZE,MSIZE,PL,MEM2
 2727              		.loc 1 1215 0
 2728 0016 1C68     		ldr	r4, [r3]
 2729 0018 24F4FF44 		bic	r4, r4, #32640
 2730 001c 24F07004 		bic	r4, r4, #112
 2731 0020 1C60     		str	r4, [r3]
1216:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CCR|=dir<<4;  		//‰ªéÂ≠òÂÇ®Âô®ËØª
 2732              		.loc 1 1216 0
 2733 0022 1C68     		ldr	r4, [r3]
 2734 0024 44EA0212 		orr	r2, r4, r2, lsl #4
 2735              	.LVL291:
 2736 0028 1A60     		str	r2, [r3]
1217:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CCR|=0<<5;  			//ÊôÆÈÄöÊ®°Âºè
 2737              		.loc 1 1217 0
 2738 002a 1A68     		ldr	r2, [r3]
 2739 002c 1A60     		str	r2, [r3]
1218:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CCR|=0<<6; 			//Â§ñËÆæÂú∞ÂùÄÈùûÂ¢ûÈáèÊ®°Âºè
 2740              		.loc 1 1218 0
 2741 002e 1A68     		ldr	r2, [r3]
 2742 0030 1A60     		str	r2, [r3]
1219:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CCR|=1<<7;  			//Â≠òÂÇ®Âô®Â¢ûÈáèÊ®°Âºè
 2743              		.loc 1 1219 0
 2744 0032 1A68     		ldr	r2, [r3]
 2745 0034 42F08002 		orr	r2, r2, #128
 2746 0038 1A60     		str	r2, [r3]
1220:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CCR|=2<<8;  			//Â§ñËÆæÊï∞ÊçÆÂÆΩÂ∫¶‰∏∫32‰Ωç
 2747              		.loc 1 1220 0
 2748 003a 1A68     		ldr	r2, [r3]
 2749 003c 42F40072 		orr	r2, r2, #512
 2750 0040 1A60     		str	r2, [r3]
1221:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CCR|=2<<10; 			//Â≠òÂÇ®Âô®Êï∞ÊçÆÂÆΩÂ∫¶32‰Ωç
 2751              		.loc 1 1221 0
 2752 0042 1A68     		ldr	r2, [r3]
 2753 0044 42F40062 		orr	r2, r2, #2048
 2754 0048 1A60     		str	r2, [r3]
1222:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CCR|=2<<12; 			//È´ò‰ºòÂÖàÁ∫ß
 2755              		.loc 1 1222 0
 2756 004a 1A68     		ldr	r2, [r3]
 2757 004c 42F40052 		orr	r2, r2, #8192
 2758 0050 1A60     		str	r2, [r3]
1223:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CNDTR=bufsize/4;   	//DMA2,‰º†ËæìÊï∞ÊçÆÈáè
 2759              		.loc 1 1223 0
 2760 0052 8908     		lsrs	r1, r1, #2
 2761              	.LVL292:
 2762 0054 5960     		str	r1, [r3, #4]
1224:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CPAR=(u32)&SDIO->FIFO;//DMA2 Â§ñËÆæÂú∞ÂùÄ
 2763              		.loc 1 1224 0
 2764 0056 064A     		ldr	r2, .L230+8
 2765 0058 9A60     		str	r2, [r3, #8]
1225:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CMAR=(u32)mbuf; 		//DMA2,Â≠òÂÇ®Âô®Âú∞ÂùÄ
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 75


 2766              		.loc 1 1225 0
 2767 005a D860     		str	r0, [r3, #12]
1226:drivers/bsp_f1xx_sdio.c ****     DMA2_Channel4->CCR|=1<<0; 			//ÂºÄÂêØDMAÈÄöÈÅì
 2768              		.loc 1 1226 0
 2769 005c 1A68     		ldr	r2, [r3]
 2770 005e 42F00102 		orr	r2, r2, #1
 2771 0062 1A60     		str	r2, [r3]
1227:drivers/bsp_f1xx_sdio.c **** }
 2772              		.loc 1 1227 0
 2773 0064 10BC     		pop	{r4}
 2774              	.LCFI36:
 2775              		.cfi_restore 4
 2776              		.cfi_def_cfa_offset 0
 2777 0066 7047     		bx	lr
 2778              	.L231:
 2779              		.align	2
 2780              	.L230:
 2781 0068 00040240 		.word	1073873920
 2782 006c 44040240 		.word	1073873988
 2783 0070 80800140 		.word	1073840256
 2784              		.cfi_endproc
 2785              	.LFE95:
 2787              		.section	.text.SD_ReadBlock,"ax",%progbits
 2788              		.align	1
 2789              		.global	SD_ReadBlock
 2790              		.syntax unified
 2791              		.thumb
 2792              		.thumb_func
 2793              		.fpu softvfp
 2795              	SD_ReadBlock:
 2796              	.LFB77:
 410:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
 2797              		.loc 1 410 0
 2798              		.cfi_startproc
 2799              		@ args = 4, pretend = 0, frame = 0
 2800              		@ frame_needed = 0, uses_anonymous_args = 0
 2801              	.LVL293:
 2802 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 2803              	.LCFI37:
 2804              		.cfi_def_cfa_offset 32
 2805              		.cfi_offset 3, -32
 2806              		.cfi_offset 4, -28
 2807              		.cfi_offset 5, -24
 2808              		.cfi_offset 6, -20
 2809              		.cfi_offset 7, -16
 2810              		.cfi_offset 8, -12
 2811              		.cfi_offset 9, -8
 2812              		.cfi_offset 14, -4
 2813 0004 BDF82040 		ldrh	r4, [sp, #32]
 2814              	.LVL294:
 415:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=0x0;	//Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 2815              		.loc 1 415 0
 2816 0008 0028     		cmp	r0, #0
 2817 000a 00F0E080 		beq	.L250
 2818 000e 1646     		mov	r6, r2
 2819 0010 0746     		mov	r7, r0
 416:drivers/bsp_f1xx_sdio.c ****     if(CardType==SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 76


 2820              		.loc 1 416 0
 2821 0012 764A     		ldr	r2, .L266
 2822              	.LVL295:
 2823 0014 0021     		movs	r1, #0
 2824 0016 D162     		str	r1, [r2, #44]
 2825              	.LVL296:
 417:drivers/bsp_f1xx_sdio.c ****     {
 2826              		.loc 1 417 0
 2827 0018 754A     		ldr	r2, .L266+4
 2828 001a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 2829 001c 022A     		cmp	r2, #2
 2830 001e 59D0     		beq	.L259
 2831              	.LVL297:
 2832              	.L234:
 422:drivers/bsp_f1xx_sdio.c ****     if(SDIO->RESP1&SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 2833              		.loc 1 422 0
 2834 0020 0023     		movs	r3, #0
 2835 0022 1A46     		mov	r2, r3
 2836 0024 1946     		mov	r1, r3
 2837 0026 4FF0FF30 		mov	r0, #-1
 2838              	.LVL298:
 2839 002a FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 2840              	.LVL299:
 423:drivers/bsp_f1xx_sdio.c ****     if((blksize>0)&&(blksize<=2048)&&((blksize&(blksize-1))==0))
 2841              		.loc 1 423 0
 2842 002e 6F4B     		ldr	r3, .L266
 2843 0030 5B69     		ldr	r3, [r3, #20]
 2844 0032 13F0007F 		tst	r3, #33554432
 2845 0036 40F0CC80 		bne	.L251
 424:drivers/bsp_f1xx_sdio.c ****     {
 2846              		.loc 1 424 0
 2847 003a 631E     		subs	r3, r4, #1
 2848 003c 9BB2     		uxth	r3, r3
 2849 003e B3F5006F 		cmp	r3, #2048
 2850 0042 80F0CA80 		bcs	.L252
 424:drivers/bsp_f1xx_sdio.c ****     {
 2851              		.loc 1 424 0 is_stmt 0 discriminator 1
 2852 0046 631E     		subs	r3, r4, #1
 2853 0048 1C42     		tst	r4, r3
 2854 004a 40F0C880 		bne	.L253
 426:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN,1,blksize);	//ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü
 2855              		.loc 1 426 0 is_stmt 1
 2856 004e 2046     		mov	r0, r4
 2857 0050 FFF7FEFF 		bl	convert_from_bytes_to_power_of_two
 2858              	.LVL300:
 2859 0054 8046     		mov	r8, r0
 2860              	.LVL301:
 427:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_SET_BLOCKLEN);	//Á≠âÂæÖR1ÂìçÂ∫î
 2861              		.loc 1 427 0
 2862 0056 2246     		mov	r2, r4
 2863 0058 0121     		movs	r1, #1
 2864 005a 1020     		movs	r0, #16
 2865 005c FFF7FEFF 		bl	SDIO_Send_Cmd
 2866              	.LVL302:
 428:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 2867              		.loc 1 428 0
 2868 0060 1020     		movs	r0, #16
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 77


 2869 0062 FFF7FEFF 		bl	CmdResp1Error
 2870              	.LVL303:
 429:drivers/bsp_f1xx_sdio.c ****     }else return SD_INVALID_PARAMETER;
 2871              		.loc 1 429 0
 2872 0066 0546     		mov	r5, r0
 2873 0068 0028     		cmp	r0, #0
 2874 006a 40F0B380 		bne	.L233
 431:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_READ_SINGLE_BLOCK,1,addr);		//ÂèëÈÄÅCMD17+‰ªéaddrÂú∞ÂùÄÂá∫ËØªÂèñÊï∞ÊçÆ,Áü≠
 2875              		.loc 1 431 0
 2876 006e 0123     		movs	r3, #1
 2877 0070 4246     		mov	r2, r8
 2878 0072 2146     		mov	r1, r4
 2879 0074 4FF0FF30 		mov	r0, #-1
 2880              	.LVL304:
 2881 0078 FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 2882              	.LVL305:
 432:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_READ_SINGLE_BLOCK);//Á≠âÂæÖR1ÂìçÂ∫î
 2883              		.loc 1 432 0
 2884 007c 3246     		mov	r2, r6
 2885 007e 0121     		movs	r1, #1
 2886 0080 1120     		movs	r0, #17
 2887 0082 FFF7FEFF 		bl	SDIO_Send_Cmd
 2888              	.LVL306:
 433:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;   		//ÂìçÂ∫îÈîôËØØ
 2889              		.loc 1 433 0
 2890 0086 1120     		movs	r0, #17
 2891 0088 FFF7FEFF 		bl	CmdResp1Error
 2892              	.LVL307:
 434:drivers/bsp_f1xx_sdio.c ****     if(DeviceMode==SD_POLLING_MODE)						//Êü•ËØ¢Ê®°Âºè,ËΩÆËØ¢Êï∞ÊçÆ
 2893              		.loc 1 434 0
 2894 008c 0546     		mov	r5, r0
 2895 008e 0028     		cmp	r0, #0
 2896 0090 40F0A080 		bne	.L233
 435:drivers/bsp_f1xx_sdio.c ****     {
 2897              		.loc 1 435 0
 2898 0094 574B     		ldr	r3, .L266+8
 2899 0096 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2900 0098 13B3     		cbz	r3, .L260
 478:drivers/bsp_f1xx_sdio.c ****     {
 2901              		.loc 1 478 0
 2902 009a 012B     		cmp	r3, #1
 2903 009c 40F09A80 		bne	.L233
 480:drivers/bsp_f1xx_sdio.c ****         TransferError=SD_OK;
 2904              		.loc 1 480 0
 2905 00a0 0022     		movs	r2, #0
 2906 00a2 2146     		mov	r1, r4
 2907 00a4 3846     		mov	r0, r7
 2908              	.LVL308:
 2909 00a6 FFF7FEFF 		bl	SD_DMA_Config
 2910              	.LVL309:
 481:drivers/bsp_f1xx_sdio.c ****         StopCondition=0;			//ÂçïÂùóËØª,‰∏çÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 2911              		.loc 1 481 0
 2912 00aa 0023     		movs	r3, #0
 2913 00ac 524A     		ldr	r2, .L266+12
 2914 00ae 1370     		strb	r3, [r2]
 482:drivers/bsp_f1xx_sdio.c ****         TransferEnd=0;				//‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 2915              		.loc 1 482 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 78


 2916 00b0 524A     		ldr	r2, .L266+16
 2917 00b2 1370     		strb	r3, [r2]
 483:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK|=(1<<1)|(1<<3)|(1<<8)|(1<<5)|(1<<9);	//ÈÖçÁΩÆÈúÄË¶ÅÁöÑ‰∏≠Êñ≠
 2918              		.loc 1 483 0
 2919 00b4 524A     		ldr	r2, .L266+20
 2920 00b6 1370     		strb	r3, [r2]
 484:drivers/bsp_f1xx_sdio.c ****         SDIO->DCTRL|=1<<3;		 	//SDIO DMA‰ΩøËÉΩ
 2921              		.loc 1 484 0
 2922 00b8 4C4A     		ldr	r2, .L266
 2923 00ba D36B     		ldr	r3, [r2, #60]
 2924 00bc 43F44A73 		orr	r3, r3, #808
 2925 00c0 43F00203 		orr	r3, r3, #2
 2926 00c4 D363     		str	r3, [r2, #60]
 485:drivers/bsp_f1xx_sdio.c ****         while(((DMA2->ISR&0X2000)==0)&&(TransferEnd==0)&&(TransferError==SD_OK)&&timeout)timeout--;
 2927              		.loc 1 485 0
 2928 00c6 D36A     		ldr	r3, [r2, #44]
 2929 00c8 43F00803 		orr	r3, r3, #8
 2930 00cc D362     		str	r3, [r2, #44]
 414:drivers/bsp_f1xx_sdio.c ****     if(NULL==buf)return SD_INVALID_PARAMETER;
 2931              		.loc 1 414 0
 2932 00ce 4FF0FF33 		mov	r3, #-1
 486:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 2933              		.loc 1 486 0
 2934 00d2 67E0     		b	.L247
 2935              	.LVL310:
 2936              	.L259:
 420:drivers/bsp_f1xx_sdio.c ****     }
 2937              		.loc 1 420 0
 2938 00d4 720A     		lsrs	r2, r6, #9
 2939 00d6 42EAC356 		orr	r6, r2, r3, lsl #23
 2940              	.LVL311:
 419:drivers/bsp_f1xx_sdio.c ****         addr>>=9;
 2941              		.loc 1 419 0
 2942 00da 4FF40074 		mov	r4, #512
 2943 00de 9FE7     		b	.L234
 2944              	.LVL312:
 2945              	.L260:
 437:drivers/bsp_f1xx_sdio.c ****         while(!(SDIO->STA&((1<<5)|(1<<1)|(1<<3)|(1<<10)|(1<<9))))//Êó†‰∏äÊ∫¢/CRC/Ë∂ÖÊó∂/ÂÆåÊàê(Ê†áÂ
 2946              		.loc 1 437 0
 2947 00e0 FFF7FEFF 		bl	INTX_DISABLE
 2948              	.LVL313:
 414:drivers/bsp_f1xx_sdio.c ****     if(NULL==buf)return SD_INVALID_PARAMETER;
 2949              		.loc 1 414 0
 2950 00e4 4FF0FF33 		mov	r3, #-1
 438:drivers/bsp_f1xx_sdio.c ****         {
 2951              		.loc 1 438 0
 2952 00e8 09E0     		b	.L236
 2953              	.LVL314:
 2954              	.L239:
 444:drivers/bsp_f1xx_sdio.c ****                 }
 2955              		.loc 1 444 0 discriminator 3
 2956 00ea 404A     		ldr	r2, .L266
 2957 00ec D2F88020 		ldr	r2, [r2, #128]
 2958 00f0 47F82320 		str	r2, [r7, r3, lsl #2]
 442:drivers/bsp_f1xx_sdio.c ****                 {
 2959              		.loc 1 442 0 discriminator 3
 2960 00f4 0133     		adds	r3, r3, #1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 79


 2961              	.LVL315:
 2962              	.L237:
 442:drivers/bsp_f1xx_sdio.c ****                 {
 2963              		.loc 1 442 0 is_stmt 0 discriminator 1
 2964 00f6 072B     		cmp	r3, #7
 2965 00f8 F7D9     		bls	.L239
 446:drivers/bsp_f1xx_sdio.c ****                 timeout=0X7FFFFF; 	//ËØªÊï∞ÊçÆÊ∫¢Âá∫Êó∂Èó¥
 2966              		.loc 1 446 0 is_stmt 1
 2967 00fa 2037     		adds	r7, r7, #32
 2968              	.LVL316:
 447:drivers/bsp_f1xx_sdio.c ****             }else 	//Â§ÑÁêÜË∂ÖÊó∂
 2969              		.loc 1 447 0
 2970 00fc 414B     		ldr	r3, .L266+24
 2971              	.LVL317:
 2972              	.L236:
 438:drivers/bsp_f1xx_sdio.c ****         {
 2973              		.loc 1 438 0
 2974 00fe 3B4A     		ldr	r2, .L266
 2975 0100 516B     		ldr	r1, [r2, #52]
 2976 0102 40F22A62 		movw	r2, #1578
 2977 0106 1142     		tst	r1, r2
 2978 0108 0AD1     		bne	.L261
 440:drivers/bsp_f1xx_sdio.c ****             {
 2979              		.loc 1 440 0
 2980 010a 384A     		ldr	r2, .L266
 2981 010c 526B     		ldr	r2, [r2, #52]
 2982 010e 12F4004F 		tst	r2, #32768
 2983 0112 03D1     		bne	.L262
 450:drivers/bsp_f1xx_sdio.c ****                 timeout--;
 2984              		.loc 1 450 0
 2985 0114 002B     		cmp	r3, #0
 2986 0116 64D0     		beq	.L255
 451:drivers/bsp_f1xx_sdio.c ****             }
 2987              		.loc 1 451 0
 2988 0118 013B     		subs	r3, r3, #1
 2989              	.LVL318:
 2990 011a F0E7     		b	.L236
 2991              	.L262:
 442:drivers/bsp_f1xx_sdio.c ****                 {
 2992              		.loc 1 442 0
 2993 011c 0023     		movs	r3, #0
 2994              	.LVL319:
 2995 011e EAE7     		b	.L237
 2996              	.LVL320:
 2997              	.L261:
 454:drivers/bsp_f1xx_sdio.c ****         {
 2998              		.loc 1 454 0
 2999 0120 324B     		ldr	r3, .L266
 3000              	.LVL321:
 3001 0122 5B6B     		ldr	r3, [r3, #52]
 3002 0124 13F0080F 		tst	r3, #8
 3003 0128 15D1     		bne	.L263
 458:drivers/bsp_f1xx_sdio.c ****         {
 3004              		.loc 1 458 0
 3005 012a 304B     		ldr	r3, .L266
 3006 012c 5B6B     		ldr	r3, [r3, #52]
 3007 012e 13F0020F 		tst	r3, #2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 80


 3008 0132 17D1     		bne	.L264
 462:drivers/bsp_f1xx_sdio.c ****         {
 3009              		.loc 1 462 0
 3010 0134 2D4B     		ldr	r3, .L266
 3011 0136 5B6B     		ldr	r3, [r3, #52]
 3012 0138 13F0200F 		tst	r3, #32
 3013 013c 19D1     		bne	.L265
 466:drivers/bsp_f1xx_sdio.c ****         {
 3014              		.loc 1 466 0
 3015 013e 2B4B     		ldr	r3, .L266
 3016 0140 5B6B     		ldr	r3, [r3, #52]
 3017 0142 13F4007F 		tst	r3, #512
 3018 0146 20D0     		beq	.L245
 468:drivers/bsp_f1xx_sdio.c ****             return SD_START_BIT_ERR;
 3019              		.loc 1 468 0
 3020 0148 284A     		ldr	r2, .L266
 3021 014a 936B     		ldr	r3, [r2, #56]
 3022 014c 43F40073 		orr	r3, r3, #512
 3023 0150 9363     		str	r3, [r2, #56]
 469:drivers/bsp_f1xx_sdio.c ****         }
 3024              		.loc 1 469 0
 3025 0152 0725     		movs	r5, #7
 3026 0154 3EE0     		b	.L233
 3027              	.L263:
 456:drivers/bsp_f1xx_sdio.c ****             return SD_DATA_TIMEOUT;
 3028              		.loc 1 456 0
 3029 0156 254A     		ldr	r2, .L266
 3030 0158 936B     		ldr	r3, [r2, #56]
 3031 015a 43F00803 		orr	r3, r3, #8
 3032 015e 9363     		str	r3, [r2, #56]
 457:drivers/bsp_f1xx_sdio.c ****         }else if(SDIO->STA&(1<<1))	//Êï∞ÊçÆÂùóCRCÈîôËØØ
 3033              		.loc 1 457 0
 3034 0160 0425     		movs	r5, #4
 3035 0162 37E0     		b	.L233
 3036              	.L264:
 460:drivers/bsp_f1xx_sdio.c ****             return SD_DATA_CRC_FAIL;
 3037              		.loc 1 460 0
 3038 0164 214A     		ldr	r2, .L266
 3039 0166 936B     		ldr	r3, [r2, #56]
 3040 0168 43F00203 		orr	r3, r3, #2
 3041 016c 9363     		str	r3, [r2, #56]
 461:drivers/bsp_f1xx_sdio.c ****         }else if(SDIO->STA&(1<<5)) 	//Êé•Êî∂fifo‰∏äÊ∫¢ÈîôËØØ
 3042              		.loc 1 461 0
 3043 016e 0225     		movs	r5, #2
 3044 0170 30E0     		b	.L233
 3045              	.L265:
 464:drivers/bsp_f1xx_sdio.c ****             return SD_RX_OVERRUN;
 3046              		.loc 1 464 0
 3047 0172 1E4A     		ldr	r2, .L266
 3048 0174 936B     		ldr	r3, [r2, #56]
 3049 0176 43F02003 		orr	r3, r3, #32
 3050 017a 9363     		str	r3, [r2, #56]
 465:drivers/bsp_f1xx_sdio.c ****         }else if(SDIO->STA&(1<<9)) 	//Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 3051              		.loc 1 465 0
 3052 017c 0625     		movs	r5, #6
 3053 017e 29E0     		b	.L233
 3054              	.L246:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 81


 473:drivers/bsp_f1xx_sdio.c ****             tempbuff++;
 3055              		.loc 1 473 0
 3056 0180 1A4B     		ldr	r3, .L266
 3057 0182 D3F88030 		ldr	r3, [r3, #128]
 3058 0186 47F8043B 		str	r3, [r7], #4
 3059              	.LVL322:
 3060              	.L245:
 471:drivers/bsp_f1xx_sdio.c ****         {
 3061              		.loc 1 471 0
 3062 018a 184B     		ldr	r3, .L266
 3063 018c 5B6B     		ldr	r3, [r3, #52]
 3064 018e 13F4001F 		tst	r3, #2097152
 3065 0192 F5D1     		bne	.L246
 476:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 3066              		.loc 1 476 0
 3067 0194 FFF7FEFF 		bl	INTX_ENABLE
 3068              	.LVL323:
 477:drivers/bsp_f1xx_sdio.c ****     }else if(DeviceMode==SD_DMA_MODE)
 3069              		.loc 1 477 0
 3070 0198 144B     		ldr	r3, .L266
 3071 019a 40F2FF52 		movw	r2, #1535
 3072 019e 9A63     		str	r2, [r3, #56]
 3073 01a0 18E0     		b	.L233
 3074              	.LVL324:
 3075              	.L249:
 486:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3076              		.loc 1 486 0 discriminator 5
 3077 01a2 013B     		subs	r3, r3, #1
 3078              	.LVL325:
 3079              	.L247:
 486:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3080              		.loc 1 486 0 is_stmt 0 discriminator 1
 3081 01a4 184A     		ldr	r2, .L266+28
 3082 01a6 1268     		ldr	r2, [r2]
 3083 01a8 12F4005F 		tst	r2, #8192
 3084 01ac 07D1     		bne	.L248
 486:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3085              		.loc 1 486 0 discriminator 2
 3086 01ae 144A     		ldr	r2, .L266+20
 3087 01b0 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3088 01b2 22B9     		cbnz	r2, .L248
 486:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3089              		.loc 1 486 0 discriminator 3
 3090 01b4 104A     		ldr	r2, .L266+12
 3091 01b6 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3092 01b8 0AB9     		cbnz	r2, .L248
 486:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3093              		.loc 1 486 0 discriminator 4
 3094 01ba 002B     		cmp	r3, #0
 3095 01bc F1D1     		bne	.L249
 3096              	.L248:
 487:drivers/bsp_f1xx_sdio.c ****         if(TransferError!=SD_OK)errorstatus=TransferError;
 3097              		.loc 1 487 0 is_stmt 1
 3098 01be 93B1     		cbz	r3, .L256
 488:drivers/bsp_f1xx_sdio.c ****     }
 3099              		.loc 1 488 0
 3100 01c0 0D4B     		ldr	r3, .L266+12
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 82


 3101              	.LVL326:
 3102 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3103 01c4 33B1     		cbz	r3, .L233
 488:drivers/bsp_f1xx_sdio.c ****     }
 3104              		.loc 1 488 0 is_stmt 0 discriminator 1
 3105 01c6 0C4B     		ldr	r3, .L266+12
 3106 01c8 1D78     		ldrb	r5, [r3]	@ zero_extendqisi2
 3107 01ca EDB2     		uxtb	r5, r5
 3108              	.LVL327:
 3109 01cc 02E0     		b	.L233
 3110              	.LVL328:
 3111              	.L250:
 415:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=0x0;	//Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 3112              		.loc 1 415 0 is_stmt 1
 3113 01ce 2625     		movs	r5, #38
 3114 01d0 00E0     		b	.L233
 3115              	.LVL329:
 3116              	.L251:
 423:drivers/bsp_f1xx_sdio.c ****     if((blksize>0)&&(blksize<=2048)&&((blksize&(blksize-1))==0))
 3117              		.loc 1 423 0
 3118 01d2 0E25     		movs	r5, #14
 3119              	.LVL330:
 3120              	.L233:
 491:drivers/bsp_f1xx_sdio.c **** //SDÂç°ËØªÂèñÂ§ö‰∏™Âùó
 3121              		.loc 1 491 0
 3122 01d4 2846     		mov	r0, r5
 3123 01d6 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3124              	.LVL331:
 3125              	.L252:
 430:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Data_Cfg(SD_DATATIMEOUT,blksize,power,1);	//blksize,Âç°Âà∞ÊéßÂà∂Âô®
 3126              		.loc 1 430 0
 3127 01da 2625     		movs	r5, #38
 3128 01dc FAE7     		b	.L233
 3129              	.L253:
 3130 01de 2625     		movs	r5, #38
 3131 01e0 F8E7     		b	.L233
 3132              	.LVL332:
 3133              	.L255:
 450:drivers/bsp_f1xx_sdio.c ****                 timeout--;
 3134              		.loc 1 450 0
 3135 01e2 0425     		movs	r5, #4
 3136 01e4 F6E7     		b	.L233
 3137              	.LVL333:
 3138              	.L256:
 487:drivers/bsp_f1xx_sdio.c ****         if(TransferError!=SD_OK)errorstatus=TransferError;
 3139              		.loc 1 487 0
 3140 01e6 0425     		movs	r5, #4
 3141 01e8 F4E7     		b	.L233
 3142              	.L267:
 3143 01ea 00BF     		.align	2
 3144              	.L266:
 3145 01ec 00800140 		.word	1073840128
 3146 01f0 00000000 		.word	.LANCHOR0
 3147 01f4 00000000 		.word	.LANCHOR4
 3148 01f8 00000000 		.word	.LANCHOR6
 3149 01fc 00000000 		.word	.LANCHOR5
 3150 0200 00000000 		.word	.LANCHOR7
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 83


 3151 0204 FFFF7F00 		.word	8388607
 3152 0208 00040240 		.word	1073873920
 3153              		.cfi_endproc
 3154              	.LFE77:
 3156              		.section	.text.SD_ReadMultiBlocks,"ax",%progbits
 3157              		.align	1
 3158              		.global	SD_ReadMultiBlocks
 3159              		.syntax unified
 3160              		.thumb
 3161              		.thumb_func
 3162              		.fpu softvfp
 3164              	SD_ReadMultiBlocks:
 3165              	.LFB78:
 500:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus=SD_OK;
 3166              		.loc 1 500 0
 3167              		.cfi_startproc
 3168              		@ args = 8, pretend = 0, frame = 0
 3169              		@ frame_needed = 0, uses_anonymous_args = 0
 3170              	.LVL334:
 3171 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3172              	.LCFI38:
 3173              		.cfi_def_cfa_offset 24
 3174              		.cfi_offset 4, -24
 3175              		.cfi_offset 5, -20
 3176              		.cfi_offset 6, -16
 3177              		.cfi_offset 7, -12
 3178              		.cfi_offset 8, -8
 3179              		.cfi_offset 14, -4
 3180 0004 0646     		mov	r6, r0
 3181 0006 1546     		mov	r5, r2
 3182 0008 BDF81840 		ldrh	r4, [sp, #24]
 3183              	.LVL335:
 505:drivers/bsp_f1xx_sdio.c **** 
 3184              		.loc 1 505 0
 3185 000c 8B4A     		ldr	r2, .L306
 3186              	.LVL336:
 3187 000e 1060     		str	r0, [r2]
 507:drivers/bsp_f1xx_sdio.c ****     if(CardType==SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 3188              		.loc 1 507 0
 3189 0010 8B4A     		ldr	r2, .L306+4
 3190 0012 0021     		movs	r1, #0
 3191 0014 D162     		str	r1, [r2, #44]
 3192              	.LVL337:
 508:drivers/bsp_f1xx_sdio.c ****     {
 3193              		.loc 1 508 0
 3194 0016 8B4A     		ldr	r2, .L306+8
 3195 0018 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3196 001a 022A     		cmp	r2, #2
 3197 001c 65D0     		beq	.L298
 3198              	.LVL338:
 3199              	.L269:
 513:drivers/bsp_f1xx_sdio.c ****     if(SDIO->RESP1&SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 3200              		.loc 1 513 0
 3201 001e 0023     		movs	r3, #0
 3202 0020 1A46     		mov	r2, r3
 3203 0022 1946     		mov	r1, r3
 3204 0024 4FF0FF30 		mov	r0, #-1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 84


 3205              	.LVL339:
 3206 0028 FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 3207              	.LVL340:
 514:drivers/bsp_f1xx_sdio.c ****     if((blksize>0)&&(blksize<=2048)&&((blksize&(blksize-1))==0))
 3208              		.loc 1 514 0
 3209 002c 844B     		ldr	r3, .L306+4
 3210 002e 5B69     		ldr	r3, [r3, #20]
 3211 0030 13F0007F 		tst	r3, #33554432
 3212 0034 40F0F480 		bne	.L289
 515:drivers/bsp_f1xx_sdio.c ****     {
 3213              		.loc 1 515 0
 3214 0038 631E     		subs	r3, r4, #1
 3215 003a 9BB2     		uxth	r3, r3
 3216 003c B3F5006F 		cmp	r3, #2048
 3217 0040 80F0F280 		bcs	.L290
 515:drivers/bsp_f1xx_sdio.c ****     {
 3218              		.loc 1 515 0 is_stmt 0 discriminator 1
 3219 0044 631E     		subs	r3, r4, #1
 3220 0046 1C42     		tst	r4, r3
 3221 0048 40F0F080 		bne	.L291
 517:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN,1,blksize);	//ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü
 3222              		.loc 1 517 0 is_stmt 1
 3223 004c 2046     		mov	r0, r4
 3224 004e FFF7FEFF 		bl	convert_from_bytes_to_power_of_two
 3225              	.LVL341:
 3226 0052 8046     		mov	r8, r0
 3227              	.LVL342:
 518:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_SET_BLOCKLEN);	//Á≠âÂæÖR1ÂìçÂ∫î
 3228              		.loc 1 518 0
 3229 0054 2746     		mov	r7, r4
 3230 0056 2246     		mov	r2, r4
 3231 0058 0121     		movs	r1, #1
 3232 005a 1020     		movs	r0, #16
 3233 005c FFF7FEFF 		bl	SDIO_Send_Cmd
 3234              	.LVL343:
 519:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 3235              		.loc 1 519 0
 3236 0060 1020     		movs	r0, #16
 3237 0062 FFF7FEFF 		bl	CmdResp1Error
 3238              	.LVL344:
 520:drivers/bsp_f1xx_sdio.c ****     }else return SD_INVALID_PARAMETER;
 3239              		.loc 1 520 0
 3240 0066 0446     		mov	r4, r0
 3241              	.LVL345:
 3242 0068 0028     		cmp	r0, #0
 3243 006a 40F0DA80 		bne	.L270
 522:drivers/bsp_f1xx_sdio.c ****     {
 3244              		.loc 1 522 0
 3245 006e 079B     		ldr	r3, [sp, #28]
 3246 0070 012B     		cmp	r3, #1
 3247 0072 40F2D680 		bls	.L270
 524:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Data_Cfg(SD_DATATIMEOUT,nblks*blksize,power,1);//nblks*blksize,512ÂùóÂ§ßÂ∞è,Âç°Âà
 3248              		.loc 1 524 0
 3249 0076 03FB07F7 		mul	r7, r3, r7
 3250 007a B7F1007F 		cmp	r7, #33554432
 3251 007e 80F0D780 		bcs	.L292
 525:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_READ_MULT_BLOCK,1,addr);	//ÂèëÈÄÅCMD18+‰ªéaddrÂú∞ÂùÄÂá∫ËØªÂèñÊï∞ÊçÆ,Áü
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 85


 3252              		.loc 1 525 0
 3253 0082 0123     		movs	r3, #1
 3254 0084 4246     		mov	r2, r8
 3255 0086 3946     		mov	r1, r7
 3256 0088 4FF0FF30 		mov	r0, #-1
 3257              	.LVL346:
 3258 008c FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 3259              	.LVL347:
 526:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_READ_MULT_BLOCK);//Á≠âÂæÖR1ÂìçÂ∫î
 3260              		.loc 1 526 0
 3261 0090 2A46     		mov	r2, r5
 3262 0092 0121     		movs	r1, #1
 3263 0094 1220     		movs	r0, #18
 3264 0096 FFF7FEFF 		bl	SDIO_Send_Cmd
 3265              	.LVL348:
 527:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 3266              		.loc 1 527 0
 3267 009a 1220     		movs	r0, #18
 3268 009c FFF7FEFF 		bl	CmdResp1Error
 3269              	.LVL349:
 528:drivers/bsp_f1xx_sdio.c ****         if(DeviceMode==SD_POLLING_MODE)
 3270              		.loc 1 528 0
 3271 00a0 0446     		mov	r4, r0
 3272 00a2 0028     		cmp	r0, #0
 3273 00a4 40F0BD80 		bne	.L270
 529:drivers/bsp_f1xx_sdio.c ****         {
 3274              		.loc 1 529 0
 3275 00a8 674B     		ldr	r3, .L306+12
 3276 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3277 00ac 1BB3     		cbz	r3, .L299
 581:drivers/bsp_f1xx_sdio.c ****         {
 3278              		.loc 1 581 0
 3279 00ae 012B     		cmp	r3, #1
 3280 00b0 40F0B780 		bne	.L270
 583:drivers/bsp_f1xx_sdio.c ****             TransferError=SD_OK;
 3281              		.loc 1 583 0
 3282 00b4 0022     		movs	r2, #0
 3283 00b6 3946     		mov	r1, r7
 3284 00b8 3046     		mov	r0, r6
 3285              	.LVL350:
 3286 00ba FFF7FEFF 		bl	SD_DMA_Config
 3287              	.LVL351:
 584:drivers/bsp_f1xx_sdio.c ****             StopCondition=1;			//Â§öÂùóËØª,ÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 3288              		.loc 1 584 0
 3289 00be 0023     		movs	r3, #0
 3290 00c0 624A     		ldr	r2, .L306+16
 3291 00c2 1370     		strb	r3, [r2]
 585:drivers/bsp_f1xx_sdio.c ****             TransferEnd=0;				//‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 3292              		.loc 1 585 0
 3293 00c4 624A     		ldr	r2, .L306+20
 3294 00c6 0121     		movs	r1, #1
 3295 00c8 1170     		strb	r1, [r2]
 586:drivers/bsp_f1xx_sdio.c ****             SDIO->MASK|=(1<<1)|(1<<3)|(1<<8)|(1<<5)|(1<<9);	//ÈÖçÁΩÆÈúÄË¶ÅÁöÑ‰∏≠Êñ≠
 3296              		.loc 1 586 0
 3297 00ca 624A     		ldr	r2, .L306+24
 3298 00cc 1370     		strb	r3, [r2]
 587:drivers/bsp_f1xx_sdio.c ****             SDIO->DCTRL|=1<<3;		 						//SDIO DMA‰ΩøËÉΩ
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 86


 3299              		.loc 1 587 0
 3300 00ce 5C4A     		ldr	r2, .L306+4
 3301 00d0 D36B     		ldr	r3, [r2, #60]
 3302 00d2 43F44A73 		orr	r3, r3, #808
 3303 00d6 43F00203 		orr	r3, r3, #2
 3304 00da D363     		str	r3, [r2, #60]
 588:drivers/bsp_f1xx_sdio.c ****             while(((DMA2->ISR&0X2000)==0)&&timeout)timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 3305              		.loc 1 588 0
 3306 00dc D36A     		ldr	r3, [r2, #44]
 3307 00de 43F00803 		orr	r3, r3, #8
 3308 00e2 D362     		str	r3, [r2, #44]
 504:drivers/bsp_f1xx_sdio.c ****     tempbuff=(u32*)buf;//ËΩ¨Êç¢‰∏∫u32ÊåáÈíà
 3309              		.loc 1 504 0
 3310 00e4 4FF0FF33 		mov	r3, #-1
 589:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3311              		.loc 1 589 0
 3312 00e8 84E0     		b	.L284
 3313              	.LVL352:
 3314              	.L298:
 511:drivers/bsp_f1xx_sdio.c ****     }
 3315              		.loc 1 511 0
 3316 00ea 6A0A     		lsrs	r2, r5, #9
 3317 00ec 42EAC355 		orr	r5, r2, r3, lsl #23
 3318              	.LVL353:
 510:drivers/bsp_f1xx_sdio.c ****         addr>>=9;
 3319              		.loc 1 510 0
 3320 00f0 4FF40074 		mov	r4, #512
 3321 00f4 93E7     		b	.L269
 3322              	.LVL354:
 3323              	.L299:
 531:drivers/bsp_f1xx_sdio.c ****             while(!(SDIO->STA&((1<<5)|(1<<1)|(1<<3)|(1<<8)|(1<<9))))//Êó†‰∏äÊ∫¢/CRC/Ë∂ÖÊó∂/ÂÆåÊàê(Ê
 3324              		.loc 1 531 0
 3325 00f6 FFF7FEFF 		bl	INTX_DISABLE
 3326              	.LVL355:
 504:drivers/bsp_f1xx_sdio.c ****     tempbuff=(u32*)buf;//ËΩ¨Êç¢‰∏∫u32ÊåáÈíà
 3327              		.loc 1 504 0
 3328 00fa 4FF0FF33 		mov	r3, #-1
 532:drivers/bsp_f1xx_sdio.c ****             {
 3329              		.loc 1 532 0
 3330 00fe 0EE0     		b	.L272
 3331              	.LVL356:
 3332              	.L275:
 538:drivers/bsp_f1xx_sdio.c ****                     }
 3333              		.loc 1 538 0 discriminator 3
 3334 0100 4E4A     		ldr	r2, .L306
 3335 0102 1268     		ldr	r2, [r2]
 3336 0104 4E49     		ldr	r1, .L306+4
 3337 0106 D1F88010 		ldr	r1, [r1, #128]
 3338 010a 42F82310 		str	r1, [r2, r3, lsl #2]
 536:drivers/bsp_f1xx_sdio.c ****                     {
 3339              		.loc 1 536 0 discriminator 3
 3340 010e 0133     		adds	r3, r3, #1
 3341              	.LVL357:
 3342              	.L273:
 536:drivers/bsp_f1xx_sdio.c ****                     {
 3343              		.loc 1 536 0 is_stmt 0 discriminator 1
 3344 0110 072B     		cmp	r3, #7
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 87


 3345 0112 F5D9     		bls	.L275
 540:drivers/bsp_f1xx_sdio.c ****                     timeout=0X7FFFFF; 	//ËØªÊï∞ÊçÆÊ∫¢Âá∫Êó∂Èó¥
 3346              		.loc 1 540 0 is_stmt 1
 3347 0114 494A     		ldr	r2, .L306
 3348 0116 1368     		ldr	r3, [r2]
 3349              	.LVL358:
 3350 0118 2033     		adds	r3, r3, #32
 3351 011a 1360     		str	r3, [r2]
 3352              	.LVL359:
 541:drivers/bsp_f1xx_sdio.c ****                 }else 	//Â§ÑÁêÜË∂ÖÊó∂
 3353              		.loc 1 541 0
 3354 011c 4E4B     		ldr	r3, .L306+28
 3355              	.LVL360:
 3356              	.L272:
 532:drivers/bsp_f1xx_sdio.c ****             {
 3357              		.loc 1 532 0
 3358 011e 484A     		ldr	r2, .L306+4
 3359 0120 516B     		ldr	r1, [r2, #52]
 3360 0122 40F22A32 		movw	r2, #810
 3361 0126 1142     		tst	r1, r2
 3362 0128 0AD1     		bne	.L300
 534:drivers/bsp_f1xx_sdio.c ****                 {
 3363              		.loc 1 534 0
 3364 012a 454A     		ldr	r2, .L306+4
 3365 012c 526B     		ldr	r2, [r2, #52]
 3366 012e 12F4004F 		tst	r2, #32768
 3367 0132 03D1     		bne	.L301
 544:drivers/bsp_f1xx_sdio.c ****                     timeout--;
 3368              		.loc 1 544 0
 3369 0134 002B     		cmp	r3, #0
 3370 0136 7DD0     		beq	.L294
 545:drivers/bsp_f1xx_sdio.c ****                 }
 3371              		.loc 1 545 0
 3372 0138 013B     		subs	r3, r3, #1
 3373              	.LVL361:
 3374 013a F0E7     		b	.L272
 3375              	.L301:
 536:drivers/bsp_f1xx_sdio.c ****                     {
 3376              		.loc 1 536 0
 3377 013c 0023     		movs	r3, #0
 3378              	.LVL362:
 3379 013e E7E7     		b	.L273
 3380              	.LVL363:
 3381              	.L300:
 548:drivers/bsp_f1xx_sdio.c ****             {
 3382              		.loc 1 548 0
 3383 0140 3F4B     		ldr	r3, .L306+4
 3384              	.LVL364:
 3385 0142 5B6B     		ldr	r3, [r3, #52]
 3386 0144 13F0080F 		tst	r3, #8
 3387 0148 15D1     		bne	.L302
 552:drivers/bsp_f1xx_sdio.c ****             {
 3388              		.loc 1 552 0
 3389 014a 3D4B     		ldr	r3, .L306+4
 3390 014c 5B6B     		ldr	r3, [r3, #52]
 3391 014e 13F0020F 		tst	r3, #2
 3392 0152 17D1     		bne	.L303
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 88


 556:drivers/bsp_f1xx_sdio.c ****             {
 3393              		.loc 1 556 0
 3394 0154 3A4B     		ldr	r3, .L306+4
 3395 0156 5B6B     		ldr	r3, [r3, #52]
 3396 0158 13F0200F 		tst	r3, #32
 3397 015c 19D1     		bne	.L304
 560:drivers/bsp_f1xx_sdio.c ****             {
 3398              		.loc 1 560 0
 3399 015e 384B     		ldr	r3, .L306+4
 3400 0160 5B6B     		ldr	r3, [r3, #52]
 3401 0162 13F4007F 		tst	r3, #512
 3402 0166 24D0     		beq	.L281
 562:drivers/bsp_f1xx_sdio.c ****                 return SD_START_BIT_ERR;
 3403              		.loc 1 562 0
 3404 0168 354A     		ldr	r2, .L306+4
 3405 016a 936B     		ldr	r3, [r2, #56]
 3406 016c 43F40073 		orr	r3, r3, #512
 3407 0170 9363     		str	r3, [r2, #56]
 563:drivers/bsp_f1xx_sdio.c ****             }
 3408              		.loc 1 563 0
 3409 0172 0724     		movs	r4, #7
 3410 0174 55E0     		b	.L270
 3411              	.L302:
 550:drivers/bsp_f1xx_sdio.c ****                 return SD_DATA_TIMEOUT;
 3412              		.loc 1 550 0
 3413 0176 324A     		ldr	r2, .L306+4
 3414 0178 936B     		ldr	r3, [r2, #56]
 3415 017a 43F00803 		orr	r3, r3, #8
 3416 017e 9363     		str	r3, [r2, #56]
 551:drivers/bsp_f1xx_sdio.c ****             }else if(SDIO->STA&(1<<1))	//Êï∞ÊçÆÂùóCRCÈîôËØØ
 3417              		.loc 1 551 0
 3418 0180 0424     		movs	r4, #4
 3419 0182 4EE0     		b	.L270
 3420              	.L303:
 554:drivers/bsp_f1xx_sdio.c ****                 return SD_DATA_CRC_FAIL;
 3421              		.loc 1 554 0
 3422 0184 2E4A     		ldr	r2, .L306+4
 3423 0186 936B     		ldr	r3, [r2, #56]
 3424 0188 43F00203 		orr	r3, r3, #2
 3425 018c 9363     		str	r3, [r2, #56]
 555:drivers/bsp_f1xx_sdio.c ****             }else if(SDIO->STA&(1<<5)) 	//Êé•Êî∂fifo‰∏äÊ∫¢ÈîôËØØ
 3426              		.loc 1 555 0
 3427 018e 0224     		movs	r4, #2
 3428 0190 47E0     		b	.L270
 3429              	.L304:
 558:drivers/bsp_f1xx_sdio.c ****                 return SD_RX_OVERRUN;
 3430              		.loc 1 558 0
 3431 0192 2B4A     		ldr	r2, .L306+4
 3432 0194 936B     		ldr	r3, [r2, #56]
 3433 0196 43F02003 		orr	r3, r3, #32
 3434 019a 9363     		str	r3, [r2, #56]
 559:drivers/bsp_f1xx_sdio.c ****             }else if(SDIO->STA&(1<<9)) 	//Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 3435              		.loc 1 559 0
 3436 019c 0624     		movs	r4, #6
 3437 019e 40E0     		b	.L270
 3438              	.L282:
 567:drivers/bsp_f1xx_sdio.c ****                 tempbuff++;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 89


 3439              		.loc 1 567 0
 3440 01a0 264B     		ldr	r3, .L306
 3441 01a2 1A68     		ldr	r2, [r3]
 3442 01a4 2649     		ldr	r1, .L306+4
 3443 01a6 D1F88010 		ldr	r1, [r1, #128]
 3444 01aa 1160     		str	r1, [r2]
 568:drivers/bsp_f1xx_sdio.c ****             }
 3445              		.loc 1 568 0
 3446 01ac 1A68     		ldr	r2, [r3]
 3447 01ae 0432     		adds	r2, r2, #4
 3448 01b0 1A60     		str	r2, [r3]
 3449              	.L281:
 565:drivers/bsp_f1xx_sdio.c ****             {
 3450              		.loc 1 565 0
 3451 01b2 234B     		ldr	r3, .L306+4
 3452 01b4 5B6B     		ldr	r3, [r3, #52]
 3453 01b6 13F4001F 		tst	r3, #2097152
 3454 01ba F1D1     		bne	.L282
 570:drivers/bsp_f1xx_sdio.c ****             {
 3455              		.loc 1 570 0
 3456 01bc 204B     		ldr	r3, .L306+4
 3457 01be 5B6B     		ldr	r3, [r3, #52]
 3458 01c0 13F4807F 		tst	r3, #256
 3459 01c4 03D0     		beq	.L283
 572:drivers/bsp_f1xx_sdio.c ****                 {
 3460              		.loc 1 572 0
 3461 01c6 1F4B     		ldr	r3, .L306+8
 3462 01c8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3463 01ca 022B     		cmp	r3, #2
 3464 01cc 06D9     		bls	.L305
 3465              	.L283:
 3466              	.LVL365:
 579:drivers/bsp_f1xx_sdio.c ****             SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 3467              		.loc 1 579 0
 3468 01ce FFF7FEFF 		bl	INTX_ENABLE
 3469              	.LVL366:
 580:drivers/bsp_f1xx_sdio.c ****         }else if(DeviceMode==SD_DMA_MODE)
 3470              		.loc 1 580 0
 3471 01d2 1B4B     		ldr	r3, .L306+4
 3472 01d4 40F2FF52 		movw	r2, #1535
 3473 01d8 9A63     		str	r2, [r3, #56]
 3474 01da 22E0     		b	.L270
 3475              	.LVL367:
 3476              	.L305:
 574:drivers/bsp_f1xx_sdio.c ****                     errorstatus=CmdResp1Error(SD_CMD_STOP_TRANSMISSION);//Á≠âÂæÖR1ÂìçÂ∫î
 3477              		.loc 1 574 0
 3478 01dc 0022     		movs	r2, #0
 3479 01de 0121     		movs	r1, #1
 3480 01e0 0C20     		movs	r0, #12
 3481 01e2 FFF7FEFF 		bl	SDIO_Send_Cmd
 3482              	.LVL368:
 575:drivers/bsp_f1xx_sdio.c ****                     if(errorstatus!=SD_OK)return errorstatus;
 3483              		.loc 1 575 0
 3484 01e6 0C20     		movs	r0, #12
 3485 01e8 FFF7FEFF 		bl	CmdResp1Error
 3486              	.LVL369:
 576:drivers/bsp_f1xx_sdio.c ****                 }
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 90


 3487              		.loc 1 576 0
 3488 01ec 0446     		mov	r4, r0
 3489 01ee C0B9     		cbnz	r0, .L270
 3490 01f0 EDE7     		b	.L283
 3491              	.LVL370:
 3492              	.L286:
 589:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3493              		.loc 1 589 0 discriminator 3
 3494 01f2 013B     		subs	r3, r3, #1
 3495              	.LVL371:
 3496              	.L284:
 589:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3497              		.loc 1 589 0 is_stmt 0 discriminator 1
 3498 01f4 194A     		ldr	r2, .L306+32
 3499 01f6 1268     		ldr	r2, [r2]
 3500 01f8 12F4005F 		tst	r2, #8192
 3501 01fc 01D1     		bne	.L285
 589:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3502              		.loc 1 589 0 discriminator 2
 3503 01fe 002B     		cmp	r3, #0
 3504 0200 F7D1     		bne	.L286
 3505              	.L285:
 590:drivers/bsp_f1xx_sdio.c ****             while((TransferEnd==0)&&(TransferError==SD_OK));
 3506              		.loc 1 590 0 is_stmt 1
 3507 0202 CBB1     		cbz	r3, .L295
 3508              	.LVL372:
 3509              	.L288:
 591:drivers/bsp_f1xx_sdio.c ****             if(TransferError!=SD_OK)errorstatus=TransferError;
 3510              		.loc 1 591 0 discriminator 2
 3511 0204 134B     		ldr	r3, .L306+24
 3512 0206 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3513 0208 1BB9     		cbnz	r3, .L287
 591:drivers/bsp_f1xx_sdio.c ****             if(TransferError!=SD_OK)errorstatus=TransferError;
 3514              		.loc 1 591 0 is_stmt 0 discriminator 1
 3515 020a 104B     		ldr	r3, .L306+16
 3516 020c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3517 020e 002B     		cmp	r3, #0
 3518 0210 F8D0     		beq	.L288
 3519              	.L287:
 592:drivers/bsp_f1xx_sdio.c ****         }
 3520              		.loc 1 592 0 is_stmt 1
 3521 0212 0E4B     		ldr	r3, .L306+16
 3522 0214 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3523 0216 23B1     		cbz	r3, .L270
 592:drivers/bsp_f1xx_sdio.c ****         }
 3524              		.loc 1 592 0 is_stmt 0 discriminator 1
 3525 0218 0C4B     		ldr	r3, .L306+16
 3526 021a 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 3527 021c E4B2     		uxtb	r4, r4
 3528              	.LVL373:
 3529 021e 00E0     		b	.L270
 3530              	.LVL374:
 3531              	.L289:
 514:drivers/bsp_f1xx_sdio.c ****     if((blksize>0)&&(blksize<=2048)&&((blksize&(blksize-1))==0))
 3532              		.loc 1 514 0 is_stmt 1
 3533 0220 0E24     		movs	r4, #14
 3534              	.LVL375:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 91


 3535              	.L270:
 596:drivers/bsp_f1xx_sdio.c **** //SDÂç°ÂÜô1‰∏™Âùó
 3536              		.loc 1 596 0
 3537 0222 2046     		mov	r0, r4
 3538 0224 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3539              	.LVL376:
 3540              	.L290:
 521:drivers/bsp_f1xx_sdio.c ****     if(nblks>1)											//Â§öÂùóËØª
 3541              		.loc 1 521 0
 3542 0228 2624     		movs	r4, #38
 3543              	.LVL377:
 3544 022a FAE7     		b	.L270
 3545              	.LVL378:
 3546              	.L291:
 3547 022c 2624     		movs	r4, #38
 3548              	.LVL379:
 3549 022e F8E7     		b	.L270
 3550              	.LVL380:
 3551              	.L292:
 524:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Data_Cfg(SD_DATATIMEOUT,nblks*blksize,power,1);//nblks*blksize,512ÂùóÂ§ßÂ∞è,Âç°Âà
 3552              		.loc 1 524 0
 3553 0230 2624     		movs	r4, #38
 3554 0232 F6E7     		b	.L270
 3555              	.LVL381:
 3556              	.L294:
 544:drivers/bsp_f1xx_sdio.c ****                     timeout--;
 3557              		.loc 1 544 0
 3558 0234 0424     		movs	r4, #4
 3559 0236 F4E7     		b	.L270
 3560              	.LVL382:
 3561              	.L295:
 590:drivers/bsp_f1xx_sdio.c ****             while((TransferEnd==0)&&(TransferError==SD_OK));
 3562              		.loc 1 590 0
 3563 0238 0424     		movs	r4, #4
 3564 023a F2E7     		b	.L270
 3565              	.L307:
 3566              		.align	2
 3567              	.L306:
 3568 023c 00000000 		.word	tempbuff
 3569 0240 00800140 		.word	1073840128
 3570 0244 00000000 		.word	.LANCHOR0
 3571 0248 00000000 		.word	.LANCHOR4
 3572 024c 00000000 		.word	.LANCHOR6
 3573 0250 00000000 		.word	.LANCHOR5
 3574 0254 00000000 		.word	.LANCHOR7
 3575 0258 FFFF7F00 		.word	8388607
 3576 025c 00040240 		.word	1073873920
 3577              		.cfi_endproc
 3578              	.LFE78:
 3580              		.section	.text.SD_WriteBlock,"ax",%progbits
 3581              		.align	1
 3582              		.global	SD_WriteBlock
 3583              		.syntax unified
 3584              		.thumb
 3585              		.thumb_func
 3586              		.fpu softvfp
 3588              	SD_WriteBlock:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 92


 3589              	.LFB79:
 603:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus = SD_OK;
 3590              		.loc 1 603 0
 3591              		.cfi_startproc
 3592              		@ args = 4, pretend = 0, frame = 8
 3593              		@ frame_needed = 0, uses_anonymous_args = 0
 3594              	.LVL383:
 3595 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3596              	.LCFI39:
 3597              		.cfi_def_cfa_offset 28
 3598              		.cfi_offset 4, -28
 3599              		.cfi_offset 5, -24
 3600              		.cfi_offset 6, -20
 3601              		.cfi_offset 7, -16
 3602              		.cfi_offset 8, -12
 3603              		.cfi_offset 9, -8
 3604              		.cfi_offset 14, -4
 3605 0004 83B0     		sub	sp, sp, #12
 3606              	.LCFI40:
 3607              		.cfi_def_cfa_offset 40
 3608 0006 9946     		mov	r9, r3
 3609 0008 BDF82840 		ldrh	r4, [sp, #40]
 3610              	.LVL384:
 605:drivers/bsp_f1xx_sdio.c ****     u32 timeout=0,bytestransferred=0;
 3611              		.loc 1 605 0
 3612 000c 0023     		movs	r3, #0
 3613 000e 8DF80730 		strb	r3, [sp, #7]
 3614              	.LVL385:
 610:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=0x0;							//Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 3615              		.loc 1 610 0
 3616 0012 0028     		cmp	r0, #0
 3617 0014 00F04181 		beq	.L338
 3618 0018 1646     		mov	r6, r2
 3619 001a A046     		mov	r8, r4
 3620 001c 0746     		mov	r7, r0
 611:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Data_Cfg(SD_DATATIMEOUT,0,0,0);	//Ê∏ÖÈô§DPSMÁä∂ÊÄÅÊú∫ÈÖçÁΩÆ
 3621              		.loc 1 611 0
 3622 001e A74D     		ldr	r5, .L358
 3623 0020 1946     		mov	r1, r3
 3624 0022 EB62     		str	r3, [r5, #44]
 3625              	.LVL386:
 612:drivers/bsp_f1xx_sdio.c ****     if(SDIO->RESP1&SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 3626              		.loc 1 612 0
 3627 0024 1A46     		mov	r2, r3
 3628              	.LVL387:
 3629 0026 4FF0FF30 		mov	r0, #-1
 3630              	.LVL388:
 3631 002a FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 3632              	.LVL389:
 613:drivers/bsp_f1xx_sdio.c ****     if(CardType==SDIO_HIGH_CAPACITY_SD_CARD)	//Â§ßÂÆπÈáèÂç°
 3633              		.loc 1 613 0
 3634 002e 6B69     		ldr	r3, [r5, #20]
 3635 0030 13F0007F 		tst	r3, #33554432
 3636 0034 40F03681 		bne	.L339
 614:drivers/bsp_f1xx_sdio.c ****     {
 3637              		.loc 1 614 0
 3638 0038 A14B     		ldr	r3, .L358+4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 93


 3639 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3640 003c 022B     		cmp	r3, #2
 3641 003e 42D0     		beq	.L348
 3642              	.LVL390:
 3643              	.L310:
 619:drivers/bsp_f1xx_sdio.c ****     {
 3644              		.loc 1 619 0
 3645 0040 631E     		subs	r3, r4, #1
 3646 0042 9BB2     		uxth	r3, r3
 3647 0044 B3F5006F 		cmp	r3, #2048
 3648 0048 80F02E81 		bcs	.L340
 619:drivers/bsp_f1xx_sdio.c ****     {
 3649              		.loc 1 619 0 is_stmt 0 discriminator 1
 3650 004c 631E     		subs	r3, r4, #1
 3651 004e 1C42     		tst	r4, r3
 3652 0050 40F02C81 		bne	.L341
 621:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN,1,blksize);	//ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü
 3653              		.loc 1 621 0 is_stmt 1
 3654 0054 2046     		mov	r0, r4
 3655 0056 FFF7FEFF 		bl	convert_from_bytes_to_power_of_two
 3656              	.LVL391:
 3657 005a 8146     		mov	r9, r0
 3658              	.LVL392:
 622:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_SET_BLOCKLEN);	//Á≠âÂæÖR1ÂìçÂ∫î
 3659              		.loc 1 622 0
 3660 005c 2546     		mov	r5, r4
 3661 005e 2246     		mov	r2, r4
 3662 0060 0121     		movs	r1, #1
 3663 0062 1020     		movs	r0, #16
 3664 0064 FFF7FEFF 		bl	SDIO_Send_Cmd
 3665              	.LVL393:
 623:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 3666              		.loc 1 623 0
 3667 0068 1020     		movs	r0, #16
 3668 006a FFF7FEFF 		bl	CmdResp1Error
 3669              	.LVL394:
 624:drivers/bsp_f1xx_sdio.c ****     }else return SD_INVALID_PARAMETER;
 3670              		.loc 1 624 0
 3671 006e 0346     		mov	r3, r0
 3672 0070 0028     		cmp	r0, #0
 3673 0072 40F01381 		bne	.L309
 626:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_SEND_STATUS);		//Á≠âÂæÖR1ÂìçÂ∫î
 3674              		.loc 1 626 0
 3675 0076 934B     		ldr	r3, .L358+8
 3676 0078 1A68     		ldr	r2, [r3]
 3677 007a 1204     		lsls	r2, r2, #16
 3678 007c 0121     		movs	r1, #1
 3679 007e 0D20     		movs	r0, #13
 3680              	.LVL395:
 3681 0080 FFF7FEFF 		bl	SDIO_Send_Cmd
 3682              	.LVL396:
 627:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;
 3683              		.loc 1 627 0
 3684 0084 0D20     		movs	r0, #13
 3685 0086 FFF7FEFF 		bl	CmdResp1Error
 3686              	.LVL397:
 628:drivers/bsp_f1xx_sdio.c ****     cardstatus=SDIO->RESP1;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 94


 3687              		.loc 1 628 0
 3688 008a 0346     		mov	r3, r0
 3689 008c 0028     		cmp	r0, #0
 3690 008e 40F00581 		bne	.L309
 629:drivers/bsp_f1xx_sdio.c ****     timeout=SD_DATATIMEOUT;
 3691              		.loc 1 629 0
 3692 0092 8A4B     		ldr	r3, .L358
 3693 0094 5B69     		ldr	r3, [r3, #20]
 3694              	.LVL398:
 630:drivers/bsp_f1xx_sdio.c ****     while(((cardstatus&0x00000100)==0)&&(timeout>0)) 	//Ê£ÄÊü•READY_FOR_DATA‰ΩçÊòØÂê¶ÁΩÆ‰Ωç
 3695              		.loc 1 630 0
 3696 0096 4FF0FF34 		mov	r4, #-1
 3697              	.LVL399:
 3698              	.L311:
 631:drivers/bsp_f1xx_sdio.c ****     {
 3699              		.loc 1 631 0
 3700 009a 13F4807F 		tst	r3, #256
 3701 009e 18D1     		bne	.L312
 631:drivers/bsp_f1xx_sdio.c ****     {
 3702              		.loc 1 631 0 is_stmt 0 discriminator 1
 3703 00a0 BCB1     		cbz	r4, .L312
 633:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SEND_STATUS,1,(u32)RCA<<16);//ÂèëÈÄÅCMD13,Êü•ËØ¢Âç°ÁöÑÁä∂ÊÄÅ,Áü≠ÂìçÂ∫î
 3704              		.loc 1 633 0 is_stmt 1
 3705 00a2 013C     		subs	r4, r4, #1
 3706              	.LVL400:
 634:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_SEND_STATUS);	//Á≠âÂæÖR1ÂìçÂ∫î
 3707              		.loc 1 634 0
 3708 00a4 874B     		ldr	r3, .L358+8
 3709              	.LVL401:
 3710 00a6 1A68     		ldr	r2, [r3]
 3711 00a8 1204     		lsls	r2, r2, #16
 3712 00aa 0121     		movs	r1, #1
 3713 00ac 0D20     		movs	r0, #13
 3714              	.LVL402:
 3715 00ae FFF7FEFF 		bl	SDIO_Send_Cmd
 3716              	.LVL403:
 635:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;
 3717              		.loc 1 635 0
 3718 00b2 0D20     		movs	r0, #13
 3719 00b4 FFF7FEFF 		bl	CmdResp1Error
 3720              	.LVL404:
 636:drivers/bsp_f1xx_sdio.c ****         cardstatus=SDIO->RESP1;
 3721              		.loc 1 636 0
 3722 00b8 0346     		mov	r3, r0
 3723 00ba 0028     		cmp	r0, #0
 3724 00bc 40F0EE80 		bne	.L309
 637:drivers/bsp_f1xx_sdio.c ****     }
 3725              		.loc 1 637 0
 3726 00c0 7E4B     		ldr	r3, .L358
 3727 00c2 5B69     		ldr	r3, [r3, #20]
 3728              	.LVL405:
 3729 00c4 E9E7     		b	.L311
 3730              	.LVL406:
 3731              	.L348:
 617:drivers/bsp_f1xx_sdio.c ****     }
 3732              		.loc 1 617 0
 3733 00c6 730A     		lsrs	r3, r6, #9
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 95


 3734 00c8 43EAC956 		orr	r6, r3, r9, lsl #23
 3735              	.LVL407:
 616:drivers/bsp_f1xx_sdio.c ****         addr>>=9;
 3736              		.loc 1 616 0
 3737 00cc 4FF40074 		mov	r4, #512
 3738              	.LVL408:
 3739 00d0 B6E7     		b	.L310
 3740              	.LVL409:
 3741              	.L312:
 639:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_WRITE_SINGLE_BLOCK,1,addr);	//ÂèëÈÄÅCMD24,ÂÜôÂçïÂùóÊåá‰ª§,Áü≠ÂìçÂ∫î
 3742              		.loc 1 639 0
 3743 00d2 002C     		cmp	r4, #0
 3744 00d4 00F0EC80 		beq	.L342
 640:drivers/bsp_f1xx_sdio.c ****     errorstatus=CmdResp1Error(SD_CMD_WRITE_SINGLE_BLOCK);//Á≠âÂæÖR1ÂìçÂ∫î
 3745              		.loc 1 640 0
 3746 00d8 3246     		mov	r2, r6
 3747 00da 0121     		movs	r1, #1
 3748 00dc 1820     		movs	r0, #24
 3749              	.LVL410:
 3750 00de FFF7FEFF 		bl	SDIO_Send_Cmd
 3751              	.LVL411:
 641:drivers/bsp_f1xx_sdio.c ****     if(errorstatus!=SD_OK)return errorstatus;
 3752              		.loc 1 641 0
 3753 00e2 1820     		movs	r0, #24
 3754 00e4 FFF7FEFF 		bl	CmdResp1Error
 3755              	.LVL412:
 642:drivers/bsp_f1xx_sdio.c ****     StopCondition=0;									//ÂçïÂùóÂÜô,‰∏çÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 3756              		.loc 1 642 0
 3757 00e8 0346     		mov	r3, r0
 3758 00ea 0028     		cmp	r0, #0
 3759 00ec 40F0D680 		bne	.L309
 643:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Data_Cfg(SD_DATATIMEOUT,blksize,power,0);	//blksize, ÊéßÂà∂Âô®Âà∞Âç°
 3760              		.loc 1 643 0
 3761 00f0 0023     		movs	r3, #0
 3762 00f2 754A     		ldr	r2, .L358+12
 3763 00f4 1370     		strb	r3, [r2]
 644:drivers/bsp_f1xx_sdio.c ****     timeout=SDIO_DATATIMEOUT;
 3764              		.loc 1 644 0
 3765 00f6 4A46     		mov	r2, r9
 3766 00f8 2946     		mov	r1, r5
 3767 00fa 4FF0FF30 		mov	r0, #-1
 3768              	.LVL413:
 3769 00fe FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 3770              	.LVL414:
 646:drivers/bsp_f1xx_sdio.c ****     {
 3771              		.loc 1 646 0
 3772 0102 724B     		ldr	r3, .L358+16
 3773 0104 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3774 0106 5BB1     		cbz	r3, .L349
 696:drivers/bsp_f1xx_sdio.c ****     {
 3775              		.loc 1 696 0
 3776 0108 012B     		cmp	r3, #1
 3777 010a 7DD0     		beq	.L350
 3778              	.LVL415:
 3779              	.L329:
 715:drivers/bsp_f1xx_sdio.c ****     errorstatus=IsCardProgramming(&cardstate);
 3780              		.loc 1 715 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 96


 3781 010c 6B4B     		ldr	r3, .L358
 3782 010e 40F2FF52 		movw	r2, #1535
 3783 0112 9A63     		str	r2, [r3, #56]
 716:drivers/bsp_f1xx_sdio.c ****     while((errorstatus==SD_OK)&&((cardstate==SD_CARD_PROGRAMMING)||(cardstate==SD_CARD_RECEIVING)))
 3784              		.loc 1 716 0
 3785 0114 0DF10700 		add	r0, sp, #7
 3786 0118 FFF7FEFF 		bl	IsCardProgramming
 3787              	.LVL416:
 3788 011c 0346     		mov	r3, r0
 3789              	.LVL417:
 717:drivers/bsp_f1xx_sdio.c ****     {
 3790              		.loc 1 717 0
 3791 011e B4E0     		b	.L336
 3792              	.LVL418:
 3793              	.L349:
 648:drivers/bsp_f1xx_sdio.c ****         while(!(SDIO->STA&((1<<10)|(1<<4)|(1<<1)|(1<<3)|(1<<9))))//Êï∞ÊçÆÂùóÂèëÈÄÅÊàêÂäü/‰∏ãÊ∫¢/CRC
 3794              		.loc 1 648 0
 3795 0120 FFF7FEFF 		bl	INTX_DISABLE
 3796              	.LVL419:
 606:drivers/bsp_f1xx_sdio.c ****     u32 cardstatus=0,count=0,restwords=0;
 3797              		.loc 1 606 0
 3798 0124 0020     		movs	r0, #0
 645:drivers/bsp_f1xx_sdio.c ****     if (DeviceMode == SD_POLLING_MODE)
 3799              		.loc 1 645 0
 3800 0126 4FF0FF31 		mov	r1, #-1
 649:drivers/bsp_f1xx_sdio.c ****         {
 3801              		.loc 1 649 0
 3802 012a 18E0     		b	.L315
 3803              	.LVL420:
 3804              	.L318:
 655:drivers/bsp_f1xx_sdio.c **** 
 3805              		.loc 1 655 0 discriminator 2
 3806 012c 9208     		lsrs	r2, r2, #2
 3807 012e 0132     		adds	r2, r2, #1
 3808 0130 28E0     		b	.L319
 3809              	.LVL421:
 3810              	.L352:
 670:drivers/bsp_f1xx_sdio.c ****             }else
 3811              		.loc 1 670 0
 3812 0132 6FF04041 		mvn	r1, #-1073741824
 3813 0136 12E0     		b	.L315
 3814              	.LVL422:
 3815              	.L323:
 665:drivers/bsp_f1xx_sdio.c ****                     }
 3816              		.loc 1 665 0 discriminator 3
 3817 0138 57F82310 		ldr	r1, [r7, r3, lsl #2]
 3818 013c 5F4A     		ldr	r2, .L358
 3819 013e C2F88010 		str	r1, [r2, #128]
 663:drivers/bsp_f1xx_sdio.c ****                     {
 3820              		.loc 1 663 0 discriminator 3
 3821 0142 0133     		adds	r3, r3, #1
 3822              	.LVL423:
 3823              	.L317:
 663:drivers/bsp_f1xx_sdio.c ****                     {
 3824              		.loc 1 663 0 is_stmt 0 discriminator 1
 3825 0144 072B     		cmp	r3, #7
 3826 0146 F7D9     		bls	.L323
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 97


 667:drivers/bsp_f1xx_sdio.c ****                     bytestransferred+=32;
 3827              		.loc 1 667 0 is_stmt 1
 3828 0148 2037     		adds	r7, r7, #32
 3829              	.LVL424:
 668:drivers/bsp_f1xx_sdio.c ****                 }
 3830              		.loc 1 668 0
 3831 014a 2030     		adds	r0, r0, #32
 3832              	.LVL425:
 670:drivers/bsp_f1xx_sdio.c ****             }else
 3833              		.loc 1 670 0
 3834 014c 6FF04041 		mvn	r1, #-1073741824
 3835 0150 05E0     		b	.L315
 3836              	.LVL426:
 3837              	.L343:
 663:drivers/bsp_f1xx_sdio.c ****                     {
 3838              		.loc 1 663 0
 3839 0152 0023     		movs	r3, #0
 3840 0154 F6E7     		b	.L317
 3841              	.L316:
 673:drivers/bsp_f1xx_sdio.c ****                 timeout--;
 3842              		.loc 1 673 0
 3843 0156 0029     		cmp	r1, #0
 3844 0158 00F0AC80 		beq	.L344
 674:drivers/bsp_f1xx_sdio.c ****             }
 3845              		.loc 1 674 0
 3846 015c 0139     		subs	r1, r1, #1
 3847              	.LVL427:
 3848              	.L315:
 649:drivers/bsp_f1xx_sdio.c ****         {
 3849              		.loc 1 649 0
 3850 015e 574B     		ldr	r3, .L358
 3851 0160 5A6B     		ldr	r2, [r3, #52]
 3852 0162 40F21A63 		movw	r3, #1562
 3853 0166 1A42     		tst	r2, r3
 3854 0168 17D1     		bne	.L351
 651:drivers/bsp_f1xx_sdio.c ****             {
 3855              		.loc 1 651 0
 3856 016a 544B     		ldr	r3, .L358
 3857 016c 5B6B     		ldr	r3, [r3, #52]
 3858 016e 13F4804F 		tst	r3, #16384
 3859 0172 F0D0     		beq	.L316
 653:drivers/bsp_f1xx_sdio.c ****                 {
 3860              		.loc 1 653 0
 3861 0174 A8EB0002 		sub	r2, r8, r0
 3862 0178 1F2A     		cmp	r2, #31
 3863 017a EAD8     		bhi	.L343
 655:drivers/bsp_f1xx_sdio.c **** 
 3864              		.loc 1 655 0
 3865 017c 12F0030F 		tst	r2, #3
 3866 0180 D4D1     		bne	.L318
 655:drivers/bsp_f1xx_sdio.c **** 
 3867              		.loc 1 655 0 is_stmt 0 discriminator 1
 3868 0182 9208     		lsrs	r2, r2, #2
 3869              	.L319:
 3870              	.LVL428:
 657:drivers/bsp_f1xx_sdio.c ****                     {
 3871              		.loc 1 657 0 is_stmt 1 discriminator 4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 98


 3872 0184 0023     		movs	r3, #0
 3873              	.LVL429:
 3874              	.L320:
 657:drivers/bsp_f1xx_sdio.c ****                     {
 3875              		.loc 1 657 0 is_stmt 0 discriminator 1
 3876 0186 9342     		cmp	r3, r2
 3877 0188 D3D2     		bcs	.L352
 659:drivers/bsp_f1xx_sdio.c ****                     }
 3878              		.loc 1 659 0 is_stmt 1 discriminator 3
 3879 018a 57F8044B 		ldr	r4, [r7], #4
 3880              	.LVL430:
 3881 018e 4B49     		ldr	r1, .L358
 3882 0190 C1F88040 		str	r4, [r1, #128]
 657:drivers/bsp_f1xx_sdio.c ****                     {
 3883              		.loc 1 657 0 discriminator 3
 3884 0194 0133     		adds	r3, r3, #1
 3885              	.LVL431:
 3886 0196 0430     		adds	r0, r0, #4
 3887              	.LVL432:
 3888 0198 F5E7     		b	.L320
 3889              	.LVL433:
 3890              	.L351:
 677:drivers/bsp_f1xx_sdio.c ****         {
 3891              		.loc 1 677 0
 3892 019a 484B     		ldr	r3, .L358
 3893 019c 5B6B     		ldr	r3, [r3, #52]
 3894 019e 13F0080F 		tst	r3, #8
 3895 01a2 15D1     		bne	.L353
 681:drivers/bsp_f1xx_sdio.c ****         {
 3896              		.loc 1 681 0
 3897 01a4 454B     		ldr	r3, .L358
 3898 01a6 5B6B     		ldr	r3, [r3, #52]
 3899 01a8 13F0020F 		tst	r3, #2
 3900 01ac 17D1     		bne	.L354
 685:drivers/bsp_f1xx_sdio.c ****         {
 3901              		.loc 1 685 0
 3902 01ae 434B     		ldr	r3, .L358
 3903 01b0 5B6B     		ldr	r3, [r3, #52]
 3904 01b2 13F0100F 		tst	r3, #16
 3905 01b6 19D1     		bne	.L355
 689:drivers/bsp_f1xx_sdio.c ****         {
 3906              		.loc 1 689 0
 3907 01b8 404B     		ldr	r3, .L358
 3908 01ba 5B6B     		ldr	r3, [r3, #52]
 3909 01bc 13F4007F 		tst	r3, #512
 3910 01c0 1BD1     		bne	.L356
 694:drivers/bsp_f1xx_sdio.c ****         SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 3911              		.loc 1 694 0
 3912 01c2 FFF7FEFF 		bl	INTX_ENABLE
 3913              	.LVL434:
 695:drivers/bsp_f1xx_sdio.c ****     }else if(DeviceMode==SD_DMA_MODE)
 3914              		.loc 1 695 0
 3915 01c6 3D4B     		ldr	r3, .L358
 3916 01c8 40F2FF52 		movw	r2, #1535
 3917 01cc 9A63     		str	r2, [r3, #56]
 3918 01ce 9DE7     		b	.L329
 3919              	.LVL435:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 99


 3920              	.L353:
 679:drivers/bsp_f1xx_sdio.c ****             return SD_DATA_TIMEOUT;
 3921              		.loc 1 679 0
 3922 01d0 3A4A     		ldr	r2, .L358
 3923 01d2 936B     		ldr	r3, [r2, #56]
 3924 01d4 43F00803 		orr	r3, r3, #8
 3925 01d8 9363     		str	r3, [r2, #56]
 680:drivers/bsp_f1xx_sdio.c ****         }else if(SDIO->STA&(1<<1))	//Êï∞ÊçÆÂùóCRCÈîôËØØ
 3926              		.loc 1 680 0
 3927 01da 0423     		movs	r3, #4
 3928 01dc 5EE0     		b	.L309
 3929              	.L354:
 683:drivers/bsp_f1xx_sdio.c ****             return SD_DATA_CRC_FAIL;
 3930              		.loc 1 683 0
 3931 01de 374A     		ldr	r2, .L358
 3932 01e0 936B     		ldr	r3, [r2, #56]
 3933 01e2 43F00203 		orr	r3, r3, #2
 3934 01e6 9363     		str	r3, [r2, #56]
 684:drivers/bsp_f1xx_sdio.c ****         }else if(SDIO->STA&(1<<4)) 	//Êé•Êî∂fifo‰∏ãÊ∫¢ÈîôËØØ
 3935              		.loc 1 684 0
 3936 01e8 0223     		movs	r3, #2
 3937 01ea 57E0     		b	.L309
 3938              	.L355:
 687:drivers/bsp_f1xx_sdio.c ****             return SD_TX_UNDERRUN;
 3939              		.loc 1 687 0
 3940 01ec 334A     		ldr	r2, .L358
 3941 01ee 936B     		ldr	r3, [r2, #56]
 3942 01f0 43F01003 		orr	r3, r3, #16
 3943 01f4 9363     		str	r3, [r2, #56]
 688:drivers/bsp_f1xx_sdio.c ****         }else if(SDIO->STA&(1<<9)) 	//Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 3944              		.loc 1 688 0
 3945 01f6 0523     		movs	r3, #5
 3946 01f8 50E0     		b	.L309
 3947              	.L356:
 691:drivers/bsp_f1xx_sdio.c ****             return SD_START_BIT_ERR;
 3948              		.loc 1 691 0
 3949 01fa 304A     		ldr	r2, .L358
 3950 01fc 936B     		ldr	r3, [r2, #56]
 3951 01fe 43F40073 		orr	r3, r3, #512
 3952 0202 9363     		str	r3, [r2, #56]
 692:drivers/bsp_f1xx_sdio.c ****         }
 3953              		.loc 1 692 0
 3954 0204 0723     		movs	r3, #7
 3955 0206 49E0     		b	.L309
 3956              	.LVL436:
 3957              	.L350:
 698:drivers/bsp_f1xx_sdio.c ****         TransferError=SD_OK;
 3958              		.loc 1 698 0
 3959 0208 0122     		movs	r2, #1
 3960 020a 2946     		mov	r1, r5
 3961 020c 3846     		mov	r0, r7
 3962 020e FFF7FEFF 		bl	SD_DMA_Config
 3963              	.LVL437:
 699:drivers/bsp_f1xx_sdio.c ****         StopCondition=0;			//ÂçïÂùóÂÜô,‰∏çÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 3964              		.loc 1 699 0
 3965 0212 0023     		movs	r3, #0
 3966 0214 2E4A     		ldr	r2, .L358+20
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 100


 3967 0216 1370     		strb	r3, [r2]
 700:drivers/bsp_f1xx_sdio.c ****         TransferEnd=0;				//‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 3968              		.loc 1 700 0
 3969 0218 2B4A     		ldr	r2, .L358+12
 3970 021a 1370     		strb	r3, [r2]
 701:drivers/bsp_f1xx_sdio.c ****         SDIO->MASK|=(1<<1)|(1<<3)|(1<<8)|(1<<4)|(1<<9);	//ÈÖçÁΩÆ‰∫ßÁîüÊï∞ÊçÆÊé•Êî∂ÂÆåÊàê‰∏≠Êñ≠
 3971              		.loc 1 701 0
 3972 021c 2D4A     		ldr	r2, .L358+24
 3973 021e 1370     		strb	r3, [r2]
 702:drivers/bsp_f1xx_sdio.c ****         SDIO->DCTRL|=1<<3;								//SDIO DMA‰ΩøËÉΩ.
 3974              		.loc 1 702 0
 3975 0220 264A     		ldr	r2, .L358
 3976 0222 D36B     		ldr	r3, [r2, #60]
 3977 0224 43F44673 		orr	r3, r3, #792
 3978 0228 43F00203 		orr	r3, r3, #2
 3979 022c D363     		str	r3, [r2, #60]
 703:drivers/bsp_f1xx_sdio.c ****         while(((DMA2->ISR&0X2000)==0)&&timeout)timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 3980              		.loc 1 703 0
 3981 022e D36A     		ldr	r3, [r2, #44]
 3982 0230 43F00803 		orr	r3, r3, #8
 3983 0234 D362     		str	r3, [r2, #44]
 645:drivers/bsp_f1xx_sdio.c ****     if (DeviceMode == SD_POLLING_MODE)
 3984              		.loc 1 645 0
 3985 0236 4FF0FF33 		mov	r3, #-1
 704:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)
 3986              		.loc 1 704 0
 3987 023a 00E0     		b	.L330
 3988              	.LVL438:
 3989              	.L332:
 704:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)
 3990              		.loc 1 704 0 is_stmt 0 discriminator 3
 3991 023c 013B     		subs	r3, r3, #1
 3992              	.LVL439:
 3993              	.L330:
 704:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)
 3994              		.loc 1 704 0 discriminator 1
 3995 023e 264A     		ldr	r2, .L358+28
 3996 0240 1268     		ldr	r2, [r2]
 3997 0242 12F4005F 		tst	r2, #8192
 3998 0246 01D1     		bne	.L331
 704:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)
 3999              		.loc 1 704 0 discriminator 2
 4000 0248 002B     		cmp	r3, #0
 4001 024a F7D1     		bne	.L332
 4002              	.L331:
 705:drivers/bsp_f1xx_sdio.c ****         {
 4003              		.loc 1 705 0 is_stmt 1
 4004 024c 53B1     		cbz	r3, .L357
 710:drivers/bsp_f1xx_sdio.c ****         while((TransferEnd==0)&&(TransferError==SD_OK)&&timeout)timeout--;
 4005              		.loc 1 710 0
 4006 024e 4FF0FF33 		mov	r3, #-1
 4007              	.LVL440:
 4008              	.L333:
 711:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 4009              		.loc 1 711 0 discriminator 1
 4010 0252 204A     		ldr	r2, .L358+24
 4011 0254 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 101


 4012 0256 4AB9     		cbnz	r2, .L334
 711:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 4013              		.loc 1 711 0 is_stmt 0 discriminator 2
 4014 0258 1D4A     		ldr	r2, .L358+20
 4015 025a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4016 025c 32B9     		cbnz	r2, .L334
 711:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 4017              		.loc 1 711 0 discriminator 3
 4018 025e 2BB1     		cbz	r3, .L334
 711:drivers/bsp_f1xx_sdio.c ****         if(timeout==0)return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 4019              		.loc 1 711 0 discriminator 4
 4020 0260 013B     		subs	r3, r3, #1
 4021              	.LVL441:
 4022 0262 F6E7     		b	.L333
 4023              	.L357:
 707:drivers/bsp_f1xx_sdio.c ****             return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 4024              		.loc 1 707 0 is_stmt 1
 4025 0264 FFF7FEFF 		bl	bsp_SD_Init
 4026              	.LVL442:
 708:drivers/bsp_f1xx_sdio.c ****         }
 4027              		.loc 1 708 0
 4028 0268 0423     		movs	r3, #4
 4029 026a 17E0     		b	.L309
 4030              	.LVL443:
 4031              	.L334:
 712:drivers/bsp_f1xx_sdio.c ****         if(TransferError!=SD_OK)return TransferError;
 4032              		.loc 1 712 0
 4033 026c 23B3     		cbz	r3, .L346
 713:drivers/bsp_f1xx_sdio.c ****     }
 4034              		.loc 1 713 0
 4035 026e 184B     		ldr	r3, .L358+20
 4036              	.LVL444:
 4037 0270 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4038 0272 002B     		cmp	r3, #0
 4039 0274 3FF44AAF 		beq	.L329
 713:drivers/bsp_f1xx_sdio.c ****     }
 4040              		.loc 1 713 0 is_stmt 0 discriminator 1
 4041 0278 154B     		ldr	r3, .L358+20
 4042 027a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4043 027c DBB2     		uxtb	r3, r3
 4044 027e 0DE0     		b	.L309
 4045              	.LVL445:
 4046              	.L337:
 719:drivers/bsp_f1xx_sdio.c ****     }
 4047              		.loc 1 719 0 is_stmt 1
 4048 0280 0DF10700 		add	r0, sp, #7
 4049 0284 FFF7FEFF 		bl	IsCardProgramming
 4050              	.LVL446:
 4051 0288 0346     		mov	r3, r0
 4052              	.LVL447:
 4053              	.L336:
 717:drivers/bsp_f1xx_sdio.c ****     {
 4054              		.loc 1 717 0
 4055 028a 3BB9     		cbnz	r3, .L309
 717:drivers/bsp_f1xx_sdio.c ****     {
 4056              		.loc 1 717 0 is_stmt 0 discriminator 1
 4057 028c 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 102


 4058 0290 063A     		subs	r2, r2, #6
 4059 0292 D2B2     		uxtb	r2, r2
 4060 0294 012A     		cmp	r2, #1
 4061 0296 F3D9     		bls	.L337
 4062 0298 00E0     		b	.L309
 4063              	.LVL448:
 4064              	.L338:
 610:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=0x0;							//Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 4065              		.loc 1 610 0 is_stmt 1
 4066 029a 2623     		movs	r3, #38
 4067              	.LVL449:
 4068              	.L309:
 722:drivers/bsp_f1xx_sdio.c **** //SDÂç°ÂÜôÂ§ö‰∏™Âùó
 4069              		.loc 1 722 0
 4070 029c 1846     		mov	r0, r3
 4071 029e 03B0     		add	sp, sp, #12
 4072              	.LCFI41:
 4073              		.cfi_remember_state
 4074              		.cfi_def_cfa_offset 28
 4075              		@ sp needed
 4076 02a0 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 4077              	.LVL450:
 4078              	.L339:
 4079              	.LCFI42:
 4080              		.cfi_restore_state
 613:drivers/bsp_f1xx_sdio.c ****     if(CardType==SDIO_HIGH_CAPACITY_SD_CARD)	//Â§ßÂÆπÈáèÂç°
 4081              		.loc 1 613 0
 4082 02a4 0E23     		movs	r3, #14
 4083 02a6 F9E7     		b	.L309
 4084              	.LVL451:
 4085              	.L340:
 625:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_SEND_STATUS,1,(u32)RCA<<16);	//ÂèëÈÄÅCMD13,Êü•ËØ¢Âç°ÁöÑÁä∂ÊÄÅ,Áü≠ÂìçÂ∫î
 4086              		.loc 1 625 0
 4087 02a8 2623     		movs	r3, #38
 4088 02aa F7E7     		b	.L309
 4089              	.L341:
 4090 02ac 2623     		movs	r3, #38
 4091 02ae F5E7     		b	.L309
 4092              	.LVL452:
 4093              	.L342:
 639:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Cmd(SD_CMD_WRITE_SINGLE_BLOCK,1,addr);	//ÂèëÈÄÅCMD24,ÂÜôÂçïÂùóÊåá‰ª§,Áü≠ÂìçÂ∫î
 4094              		.loc 1 639 0
 4095 02b0 2923     		movs	r3, #41
 4096              	.LVL453:
 4097 02b2 F3E7     		b	.L309
 4098              	.LVL454:
 4099              	.L344:
 673:drivers/bsp_f1xx_sdio.c ****                 timeout--;
 4100              		.loc 1 673 0
 4101 02b4 0423     		movs	r3, #4
 4102 02b6 F1E7     		b	.L309
 4103              	.LVL455:
 4104              	.L346:
 712:drivers/bsp_f1xx_sdio.c ****         if(TransferError!=SD_OK)return TransferError;
 4105              		.loc 1 712 0
 4106 02b8 0423     		movs	r3, #4
 4107              	.LVL456:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 103


 4108 02ba EFE7     		b	.L309
 4109              	.L359:
 4110              		.align	2
 4111              	.L358:
 4112 02bc 00800140 		.word	1073840128
 4113 02c0 00000000 		.word	.LANCHOR0
 4114 02c4 00000000 		.word	.LANCHOR1
 4115 02c8 00000000 		.word	.LANCHOR5
 4116 02cc 00000000 		.word	.LANCHOR4
 4117 02d0 00000000 		.word	.LANCHOR6
 4118 02d4 00000000 		.word	.LANCHOR7
 4119 02d8 00040240 		.word	1073873920
 4120              		.cfi_endproc
 4121              	.LFE79:
 4123              		.section	.text.SD_WriteMultiBlocks,"ax",%progbits
 4124              		.align	1
 4125              		.global	SD_WriteMultiBlocks
 4126              		.syntax unified
 4127              		.thumb
 4128              		.thumb_func
 4129              		.fpu softvfp
 4131              	SD_WriteMultiBlocks:
 4132              	.LFB80:
 730:drivers/bsp_f1xx_sdio.c ****     SD_Error errorstatus = SD_OK;
 4133              		.loc 1 730 0
 4134              		.cfi_startproc
 4135              		@ args = 8, pretend = 0, frame = 8
 4136              		@ frame_needed = 0, uses_anonymous_args = 0
 4137              	.LVL457:
 4138 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 4139              	.LCFI43:
 4140              		.cfi_def_cfa_offset 32
 4141              		.cfi_offset 4, -32
 4142              		.cfi_offset 5, -28
 4143              		.cfi_offset 6, -24
 4144              		.cfi_offset 7, -20
 4145              		.cfi_offset 8, -16
 4146              		.cfi_offset 9, -12
 4147              		.cfi_offset 10, -8
 4148              		.cfi_offset 14, -4
 4149 0004 82B0     		sub	sp, sp, #8
 4150              	.LCFI44:
 4151              		.cfi_def_cfa_offset 40
 4152 0006 9A46     		mov	r10, r3
 4153 0008 BDF82840 		ldrh	r4, [sp, #40]
 4154 000c 0B9D     		ldr	r5, [sp, #44]
 4155              	.LVL458:
 732:drivers/bsp_f1xx_sdio.c ****     u32 timeout=0,bytestransferred=0;
 4156              		.loc 1 732 0
 4157 000e 0023     		movs	r3, #0
 4158 0010 8DF80730 		strb	r3, [sp, #7]
 4159              	.LVL459:
 735:drivers/bsp_f1xx_sdio.c ****     u32 *tempbuff = (u32*)buf;
 4160              		.loc 1 735 0
 4161 0014 05FB04F9 		mul	r9, r5, r4
 4162              	.LVL460:
 737:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=0x0;							//Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 104


 4163              		.loc 1 737 0
 4164 0018 0028     		cmp	r0, #0
 4165 001a 00F05281 		beq	.L389
 4166 001e 1746     		mov	r7, r2
 4167 0020 8046     		mov	r8, r0
 738:drivers/bsp_f1xx_sdio.c ****     SDIO_Send_Data_Cfg(SD_DATATIMEOUT,0,0,0);	//Ê∏ÖÈô§DPSMÁä∂ÊÄÅÊú∫ÈÖçÁΩÆ
 4168              		.loc 1 738 0
 4169 0022 B04E     		ldr	r6, .L409
 4170 0024 1946     		mov	r1, r3
 4171 0026 F362     		str	r3, [r6, #44]
 4172              	.LVL461:
 739:drivers/bsp_f1xx_sdio.c ****     if(SDIO->RESP1&SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 4173              		.loc 1 739 0
 4174 0028 1A46     		mov	r2, r3
 4175              	.LVL462:
 4176 002a 4FF0FF30 		mov	r0, #-1
 4177              	.LVL463:
 4178 002e FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 4179              	.LVL464:
 740:drivers/bsp_f1xx_sdio.c ****     if(CardType==SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 4180              		.loc 1 740 0
 4181 0032 7369     		ldr	r3, [r6, #20]
 4182 0034 13F0007F 		tst	r3, #33554432
 4183 0038 40F04881 		bne	.L390
 741:drivers/bsp_f1xx_sdio.c ****     {
 4184              		.loc 1 741 0
 4185 003c AA4B     		ldr	r3, .L409+4
 4186 003e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4187 0040 022B     		cmp	r3, #2
 4188 0042 63D0     		beq	.L399
 4189              	.LVL465:
 4190              	.L362:
 746:drivers/bsp_f1xx_sdio.c ****     {
 4191              		.loc 1 746 0
 4192 0044 631E     		subs	r3, r4, #1
 4193 0046 9BB2     		uxth	r3, r3
 4194 0048 B3F5006F 		cmp	r3, #2048
 4195 004c 80F04081 		bcs	.L391
 746:drivers/bsp_f1xx_sdio.c ****     {
 4196              		.loc 1 746 0 is_stmt 0 discriminator 1
 4197 0050 631E     		subs	r3, r4, #1
 4198 0052 1C42     		tst	r4, r3
 4199 0054 40F03E81 		bne	.L392
 748:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN,1,blksize);	//ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü
 4200              		.loc 1 748 0 is_stmt 1
 4201 0058 2046     		mov	r0, r4
 4202 005a FFF7FEFF 		bl	convert_from_bytes_to_power_of_two
 4203              	.LVL466:
 4204 005e 8246     		mov	r10, r0
 4205              	.LVL467:
 749:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_SET_BLOCKLEN);	//Á≠âÂæÖR1ÂìçÂ∫î
 4206              		.loc 1 749 0
 4207 0060 2646     		mov	r6, r4
 4208 0062 2246     		mov	r2, r4
 4209 0064 0121     		movs	r1, #1
 4210 0066 1020     		movs	r0, #16
 4211 0068 FFF7FEFF 		bl	SDIO_Send_Cmd
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 105


 4212              	.LVL468:
 750:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;   	//ÂìçÂ∫îÈîôËØØ
 4213              		.loc 1 750 0
 4214 006c 1020     		movs	r0, #16
 4215 006e FFF7FEFF 		bl	CmdResp1Error
 4216              	.LVL469:
 751:drivers/bsp_f1xx_sdio.c ****     }else return SD_INVALID_PARAMETER;
 4217              		.loc 1 751 0
 4218 0072 0346     		mov	r3, r0
 4219 0074 0028     		cmp	r0, #0
 4220 0076 40F02581 		bne	.L361
 753:drivers/bsp_f1xx_sdio.c ****     {
 4221              		.loc 1 753 0
 4222 007a 012D     		cmp	r5, #1
 4223 007c 3CD9     		bls	.L363
 755:drivers/bsp_f1xx_sdio.c ****         if((SDIO_STD_CAPACITY_SD_CARD_V1_1==CardType)||(SDIO_STD_CAPACITY_SD_CARD_V2_0==CardType)||
 4224              		.loc 1 755 0
 4225 007e 05FB06F6 		mul	r6, r5, r6
 4226 0082 B6F1007F 		cmp	r6, #33554432
 4227 0086 80F02781 		bcs	.L393
 756:drivers/bsp_f1xx_sdio.c ****         {
 4228              		.loc 1 756 0
 4229 008a 974B     		ldr	r3, .L409+4
 4230 008c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4231 008e 022B     		cmp	r3, #2
 4232 0090 19D8     		bhi	.L364
 759:drivers/bsp_f1xx_sdio.c ****             errorstatus=CmdResp1Error(SD_CMD_APP_CMD);		//Á≠âÂæÖR1ÂìçÂ∫î
 4233              		.loc 1 759 0
 4234 0092 964B     		ldr	r3, .L409+8
 4235 0094 1A68     		ldr	r2, [r3]
 4236 0096 1204     		lsls	r2, r2, #16
 4237 0098 0121     		movs	r1, #1
 4238 009a 3720     		movs	r0, #55
 4239              	.LVL470:
 4240 009c FFF7FEFF 		bl	SDIO_Send_Cmd
 4241              	.LVL471:
 760:drivers/bsp_f1xx_sdio.c ****             if(errorstatus!=SD_OK)return errorstatus;
 4242              		.loc 1 760 0
 4243 00a0 3720     		movs	r0, #55
 4244 00a2 FFF7FEFF 		bl	CmdResp1Error
 4245              	.LVL472:
 761:drivers/bsp_f1xx_sdio.c ****             SDIO_Send_Cmd(SD_CMD_SET_BLOCK_COUNT,1,nblks);	//ÂèëÈÄÅCMD23,ËÆæÁΩÆÂùóÊï∞Èáè,Áü≠ÂìçÂ∫î
 4246              		.loc 1 761 0
 4247 00a6 0346     		mov	r3, r0
 4248 00a8 0028     		cmp	r0, #0
 4249 00aa 40F00B81 		bne	.L361
 762:drivers/bsp_f1xx_sdio.c ****             errorstatus=CmdResp1Error(SD_CMD_SET_BLOCK_COUNT);//Á≠âÂæÖR1ÂìçÂ∫î
 4250              		.loc 1 762 0
 4251 00ae 2A46     		mov	r2, r5
 4252 00b0 0121     		movs	r1, #1
 4253 00b2 1720     		movs	r0, #23
 4254              	.LVL473:
 4255 00b4 FFF7FEFF 		bl	SDIO_Send_Cmd
 4256              	.LVL474:
 763:drivers/bsp_f1xx_sdio.c ****             if(errorstatus!=SD_OK)return errorstatus;
 4257              		.loc 1 763 0
 4258 00b8 1720     		movs	r0, #23
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 106


 4259 00ba FFF7FEFF 		bl	CmdResp1Error
 4260              	.LVL475:
 764:drivers/bsp_f1xx_sdio.c ****         }
 4261              		.loc 1 764 0
 4262 00be 0346     		mov	r3, r0
 4263 00c0 0028     		cmp	r0, #0
 4264 00c2 40F0FF80 		bne	.L361
 4265              	.L364:
 766:drivers/bsp_f1xx_sdio.c ****         errorstatus=CmdResp1Error(SD_CMD_WRITE_MULT_BLOCK);	//Á≠âÂæÖR1ÂìçÂ∫î
 4266              		.loc 1 766 0
 4267 00c6 3A46     		mov	r2, r7
 4268 00c8 0121     		movs	r1, #1
 4269 00ca 1920     		movs	r0, #25
 4270              	.LVL476:
 4271 00cc FFF7FEFF 		bl	SDIO_Send_Cmd
 4272              	.LVL477:
 767:drivers/bsp_f1xx_sdio.c ****         if(errorstatus!=SD_OK)return errorstatus;
 4273              		.loc 1 767 0
 4274 00d0 1920     		movs	r0, #25
 4275 00d2 FFF7FEFF 		bl	CmdResp1Error
 4276              	.LVL478:
 768:drivers/bsp_f1xx_sdio.c ****         SDIO_Send_Data_Cfg(SD_DATATIMEOUT,nblks*blksize,power,0);//blksize, ÊéßÂà∂Âô®Âà∞Âç°
 4277              		.loc 1 768 0
 4278 00d6 0346     		mov	r3, r0
 4279 00d8 0028     		cmp	r0, #0
 4280 00da 40F0F380 		bne	.L361
 769:drivers/bsp_f1xx_sdio.c ****         if(DeviceMode==SD_POLLING_MODE)
 4281              		.loc 1 769 0
 4282 00de 0023     		movs	r3, #0
 4283 00e0 5246     		mov	r2, r10
 4284 00e2 3146     		mov	r1, r6
 4285 00e4 4FF0FF30 		mov	r0, #-1
 4286              	.LVL479:
 4287 00e8 FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 4288              	.LVL480:
 770:drivers/bsp_f1xx_sdio.c ****         {
 4289              		.loc 1 770 0
 4290 00ec 804B     		ldr	r3, .L409+12
 4291 00ee 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4292 00f0 93B1     		cbz	r3, .L400
 829:drivers/bsp_f1xx_sdio.c ****         {
 4293              		.loc 1 829 0
 4294 00f2 012B     		cmp	r3, #1
 4295 00f4 00F09A80 		beq	.L401
 4296              	.LVL481:
 4297              	.L363:
 850:drivers/bsp_f1xx_sdio.c ****     errorstatus=IsCardProgramming(&cardstate);
 4298              		.loc 1 850 0
 4299 00f8 7A4B     		ldr	r3, .L409
 4300 00fa 40F2FF52 		movw	r2, #1535
 4301 00fe 9A63     		str	r2, [r3, #56]
 851:drivers/bsp_f1xx_sdio.c ****     while((errorstatus==SD_OK)&&((cardstate==SD_CARD_PROGRAMMING)||(cardstate==SD_CARD_RECEIVING)))
 4302              		.loc 1 851 0
 4303 0100 0DF10700 		add	r0, sp, #7
 4304 0104 FFF7FEFF 		bl	IsCardProgramming
 4305              	.LVL482:
 4306 0108 0346     		mov	r3, r0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 107


 4307              	.LVL483:
 852:drivers/bsp_f1xx_sdio.c ****     {
 4308              		.loc 1 852 0
 4309 010a D2E0     		b	.L387
 4310              	.LVL484:
 4311              	.L399:
 744:drivers/bsp_f1xx_sdio.c ****     }
 4312              		.loc 1 744 0
 4313 010c 7B0A     		lsrs	r3, r7, #9
 4314 010e 43EACA57 		orr	r7, r3, r10, lsl #23
 4315              	.LVL485:
 743:drivers/bsp_f1xx_sdio.c ****         addr>>=9;
 4316              		.loc 1 743 0
 4317 0112 4FF40074 		mov	r4, #512
 4318 0116 95E7     		b	.L362
 4319              	.LVL486:
 4320              	.L400:
 773:drivers/bsp_f1xx_sdio.c ****             while(!(SDIO->STA&((1<<4)|(1<<1)|(1<<8)|(1<<3)|(1<<9))))//‰∏ãÊ∫¢/CRC/Êï∞ÊçÆÁªìÊùü/Ë∂ÖÊó
 4321              		.loc 1 773 0
 4322 0118 FFF7FEFF 		bl	INTX_DISABLE
 4323              	.LVL487:
 733:drivers/bsp_f1xx_sdio.c ****     u32 count = 0, restwords = 0;
 4324              		.loc 1 733 0
 4325 011c 0020     		movs	r0, #0
 772:drivers/bsp_f1xx_sdio.c ****             INTX_DISABLE();//ÂÖ≥Èó≠ÊÄª‰∏≠Êñ≠(POLLINGÊ®°Âºè,‰∏•Á¶Å‰∏≠Êñ≠ÊâìÊñ≠SDIOËØªÂÜôÊìç‰Ωú!!!)
 4326              		.loc 1 772 0
 4327 011e 4FF0FF31 		mov	r1, #-1
 774:drivers/bsp_f1xx_sdio.c ****             {
 4328              		.loc 1 774 0
 4329 0122 22E0     		b	.L366
 4330              	.LVL488:
 4331              	.L369:
 780:drivers/bsp_f1xx_sdio.c ****                         for(count=0;count<restwords;count++,tempbuff++,bytestransferred+=4)
 4332              		.loc 1 780 0 discriminator 2
 4333 0124 9208     		lsrs	r2, r2, #2
 4334 0126 0132     		adds	r2, r2, #1
 4335 0128 32E0     		b	.L370
 4336              	.LVL489:
 4337              	.L372:
 783:drivers/bsp_f1xx_sdio.c ****                         }
 4338              		.loc 1 783 0 discriminator 3
 4339 012a 58F8044B 		ldr	r4, [r8], #4
 4340              	.LVL490:
 4341 012e 6D49     		ldr	r1, .L409
 4342 0130 C1F88040 		str	r4, [r1, #128]
 781:drivers/bsp_f1xx_sdio.c ****                         {
 4343              		.loc 1 781 0 discriminator 3
 4344 0134 0133     		adds	r3, r3, #1
 4345              	.LVL491:
 4346 0136 0430     		adds	r0, r0, #4
 4347              	.LVL492:
 4348              	.L371:
 781:drivers/bsp_f1xx_sdio.c ****                         {
 4349              		.loc 1 781 0 is_stmt 0 discriminator 1
 4350 0138 9342     		cmp	r3, r2
 4351 013a F6D3     		bcc	.L372
 794:drivers/bsp_f1xx_sdio.c ****                 }else
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 108


 4352              		.loc 1 794 0 is_stmt 1
 4353 013c 6FF04041 		mvn	r1, #-1073741824
 4354 0140 13E0     		b	.L366
 4355              	.LVL493:
 4356              	.L374:
 789:drivers/bsp_f1xx_sdio.c ****                         }
 4357              		.loc 1 789 0 discriminator 3
 4358 0142 58F82310 		ldr	r1, [r8, r3, lsl #2]
 4359 0146 674A     		ldr	r2, .L409
 4360 0148 C2F88010 		str	r1, [r2, #128]
 787:drivers/bsp_f1xx_sdio.c ****                         {
 4361              		.loc 1 787 0 discriminator 3
 4362 014c 0133     		adds	r3, r3, #1
 4363              	.LVL494:
 4364              	.L368:
 787:drivers/bsp_f1xx_sdio.c ****                         {
 4365              		.loc 1 787 0 is_stmt 0 discriminator 1
 4366 014e 072B     		cmp	r3, #7
 4367 0150 F7D9     		bls	.L374
 791:drivers/bsp_f1xx_sdio.c ****                         bytestransferred+=SD_HALFFIFOBYTES;
 4368              		.loc 1 791 0 is_stmt 1
 4369 0152 08F12008 		add	r8, r8, #32
 4370              	.LVL495:
 792:drivers/bsp_f1xx_sdio.c ****                     }
 4371              		.loc 1 792 0
 4372 0156 2030     		adds	r0, r0, #32
 4373              	.LVL496:
 794:drivers/bsp_f1xx_sdio.c ****                 }else
 4374              		.loc 1 794 0
 4375 0158 6FF04041 		mvn	r1, #-1073741824
 4376 015c 05E0     		b	.L366
 4377              	.LVL497:
 4378              	.L394:
 787:drivers/bsp_f1xx_sdio.c ****                         {
 4379              		.loc 1 787 0
 4380 015e 0023     		movs	r3, #0
 4381 0160 F5E7     		b	.L368
 4382              	.L367:
 797:drivers/bsp_f1xx_sdio.c ****                     timeout--;
 4383              		.loc 1 797 0
 4384 0162 0029     		cmp	r1, #0
 4385 0164 00F0BA80 		beq	.L395
 798:drivers/bsp_f1xx_sdio.c ****                 }
 4386              		.loc 1 798 0
 4387 0168 0139     		subs	r1, r1, #1
 4388              	.LVL498:
 4389              	.L366:
 774:drivers/bsp_f1xx_sdio.c ****             {
 4390              		.loc 1 774 0
 4391 016a 5E4B     		ldr	r3, .L409
 4392 016c 5A6B     		ldr	r2, [r3, #52]
 4393 016e 40F21A33 		movw	r3, #794
 4394 0172 1A42     		tst	r2, r3
 4395 0174 0ED1     		bne	.L402
 776:drivers/bsp_f1xx_sdio.c ****                 {
 4396              		.loc 1 776 0
 4397 0176 5B4B     		ldr	r3, .L409
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 109


 4398 0178 5B6B     		ldr	r3, [r3, #52]
 4399 017a 13F4804F 		tst	r3, #16384
 4400 017e F0D0     		beq	.L367
 778:drivers/bsp_f1xx_sdio.c ****                     {
 4401              		.loc 1 778 0
 4402 0180 A9EB0002 		sub	r2, r9, r0
 4403 0184 1F2A     		cmp	r2, #31
 4404 0186 EAD8     		bhi	.L394
 780:drivers/bsp_f1xx_sdio.c ****                         for(count=0;count<restwords;count++,tempbuff++,bytestransferred+=4)
 4405              		.loc 1 780 0
 4406 0188 12F0030F 		tst	r2, #3
 4407 018c CAD1     		bne	.L369
 780:drivers/bsp_f1xx_sdio.c ****                         for(count=0;count<restwords;count++,tempbuff++,bytestransferred+=4)
 4408              		.loc 1 780 0 is_stmt 0 discriminator 1
 4409 018e 9208     		lsrs	r2, r2, #2
 4410              	.L370:
 4411              	.LVL499:
 781:drivers/bsp_f1xx_sdio.c ****                         {
 4412              		.loc 1 781 0 is_stmt 1 discriminator 4
 4413 0190 0023     		movs	r3, #0
 4414 0192 D1E7     		b	.L371
 4415              	.LVL500:
 4416              	.L402:
 801:drivers/bsp_f1xx_sdio.c ****             {
 4417              		.loc 1 801 0
 4418 0194 534B     		ldr	r3, .L409
 4419 0196 5B6B     		ldr	r3, [r3, #52]
 4420 0198 13F0080F 		tst	r3, #8
 4421 019c 1ED1     		bne	.L403
 805:drivers/bsp_f1xx_sdio.c ****             {
 4422              		.loc 1 805 0
 4423 019e 514B     		ldr	r3, .L409
 4424 01a0 5B6B     		ldr	r3, [r3, #52]
 4425 01a2 13F0020F 		tst	r3, #2
 4426 01a6 20D1     		bne	.L404
 809:drivers/bsp_f1xx_sdio.c ****             {
 4427              		.loc 1 809 0
 4428 01a8 4E4B     		ldr	r3, .L409
 4429 01aa 5B6B     		ldr	r3, [r3, #52]
 4430 01ac 13F0100F 		tst	r3, #16
 4431 01b0 22D1     		bne	.L405
 813:drivers/bsp_f1xx_sdio.c ****             {
 4432              		.loc 1 813 0
 4433 01b2 4C4B     		ldr	r3, .L409
 4434 01b4 5B6B     		ldr	r3, [r3, #52]
 4435 01b6 13F4007F 		tst	r3, #512
 4436 01ba 24D1     		bne	.L406
 818:drivers/bsp_f1xx_sdio.c ****             {
 4437              		.loc 1 818 0
 4438 01bc 494B     		ldr	r3, .L409
 4439 01be 5B6B     		ldr	r3, [r3, #52]
 4440 01c0 13F4807F 		tst	r3, #256
 4441 01c4 03D0     		beq	.L380
 820:drivers/bsp_f1xx_sdio.c ****                 {
 4442              		.loc 1 820 0
 4443 01c6 484B     		ldr	r3, .L409+4
 4444 01c8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 110


 4445 01ca 022B     		cmp	r3, #2
 4446 01cc 22D9     		bls	.L407
 4447              	.LVL501:
 4448              	.L380:
 827:drivers/bsp_f1xx_sdio.c ****             SDIO->ICR=0X5FF;	 		//Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 4449              		.loc 1 827 0
 4450 01ce FFF7FEFF 		bl	INTX_ENABLE
 4451              	.LVL502:
 828:drivers/bsp_f1xx_sdio.c ****         }else if(DeviceMode==SD_DMA_MODE)
 4452              		.loc 1 828 0
 4453 01d2 444B     		ldr	r3, .L409
 4454 01d4 40F2FF52 		movw	r2, #1535
 4455 01d8 9A63     		str	r2, [r3, #56]
 4456 01da 8DE7     		b	.L363
 4457              	.LVL503:
 4458              	.L403:
 803:drivers/bsp_f1xx_sdio.c ****                 return SD_DATA_TIMEOUT;
 4459              		.loc 1 803 0
 4460 01dc 414A     		ldr	r2, .L409
 4461 01de 936B     		ldr	r3, [r2, #56]
 4462 01e0 43F00803 		orr	r3, r3, #8
 4463 01e4 9363     		str	r3, [r2, #56]
 804:drivers/bsp_f1xx_sdio.c ****             }else if(SDIO->STA&(1<<1))	//Êï∞ÊçÆÂùóCRCÈîôËØØ
 4464              		.loc 1 804 0
 4465 01e6 0423     		movs	r3, #4
 4466 01e8 6CE0     		b	.L361
 4467              	.L404:
 807:drivers/bsp_f1xx_sdio.c ****                 return SD_DATA_CRC_FAIL;
 4468              		.loc 1 807 0
 4469 01ea 3E4A     		ldr	r2, .L409
 4470 01ec 936B     		ldr	r3, [r2, #56]
 4471 01ee 43F00203 		orr	r3, r3, #2
 4472 01f2 9363     		str	r3, [r2, #56]
 808:drivers/bsp_f1xx_sdio.c ****             }else if(SDIO->STA&(1<<4)) 	//Êé•Êî∂fifo‰∏ãÊ∫¢ÈîôËØØ
 4473              		.loc 1 808 0
 4474 01f4 0223     		movs	r3, #2
 4475 01f6 65E0     		b	.L361
 4476              	.L405:
 811:drivers/bsp_f1xx_sdio.c ****                 return SD_TX_UNDERRUN;
 4477              		.loc 1 811 0
 4478 01f8 3A4A     		ldr	r2, .L409
 4479 01fa 936B     		ldr	r3, [r2, #56]
 4480 01fc 43F01003 		orr	r3, r3, #16
 4481 0200 9363     		str	r3, [r2, #56]
 812:drivers/bsp_f1xx_sdio.c ****             }else if(SDIO->STA&(1<<9)) 	//Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 4482              		.loc 1 812 0
 4483 0202 0523     		movs	r3, #5
 4484 0204 5EE0     		b	.L361
 4485              	.L406:
 815:drivers/bsp_f1xx_sdio.c ****                 return SD_START_BIT_ERR;
 4486              		.loc 1 815 0
 4487 0206 374A     		ldr	r2, .L409
 4488 0208 936B     		ldr	r3, [r2, #56]
 4489 020a 43F40073 		orr	r3, r3, #512
 4490 020e 9363     		str	r3, [r2, #56]
 816:drivers/bsp_f1xx_sdio.c ****             }
 4491              		.loc 1 816 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 111


 4492 0210 0723     		movs	r3, #7
 4493 0212 57E0     		b	.L361
 4494              	.L407:
 822:drivers/bsp_f1xx_sdio.c ****                     errorstatus=CmdResp1Error(SD_CMD_STOP_TRANSMISSION);//Á≠âÂæÖR1ÂìçÂ∫î
 4495              		.loc 1 822 0
 4496 0214 0022     		movs	r2, #0
 4497 0216 0121     		movs	r1, #1
 4498              	.LVL504:
 4499 0218 0C20     		movs	r0, #12
 4500              	.LVL505:
 4501 021a FFF7FEFF 		bl	SDIO_Send_Cmd
 4502              	.LVL506:
 823:drivers/bsp_f1xx_sdio.c ****                     if(errorstatus!=SD_OK)return errorstatus;
 4503              		.loc 1 823 0
 4504 021e 0C20     		movs	r0, #12
 4505 0220 FFF7FEFF 		bl	CmdResp1Error
 4506              	.LVL507:
 824:drivers/bsp_f1xx_sdio.c ****                 }
 4507              		.loc 1 824 0
 4508 0224 0346     		mov	r3, r0
 4509 0226 0028     		cmp	r0, #0
 4510 0228 D1D0     		beq	.L380
 4511 022a 4BE0     		b	.L361
 4512              	.LVL508:
 4513              	.L401:
 831:drivers/bsp_f1xx_sdio.c ****             TransferError=SD_OK;
 4514              		.loc 1 831 0
 4515 022c 0122     		movs	r2, #1
 4516 022e 3146     		mov	r1, r6
 4517 0230 4046     		mov	r0, r8
 4518 0232 FFF7FEFF 		bl	SD_DMA_Config
 4519              	.LVL509:
 832:drivers/bsp_f1xx_sdio.c ****             StopCondition=1;			//Â§öÂùóÂÜô,ÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 4520              		.loc 1 832 0
 4521 0236 0023     		movs	r3, #0
 4522 0238 2E4A     		ldr	r2, .L409+16
 4523 023a 1370     		strb	r3, [r2]
 833:drivers/bsp_f1xx_sdio.c ****             TransferEnd=0;				//‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 4524              		.loc 1 833 0
 4525 023c 2E4A     		ldr	r2, .L409+20
 4526 023e 0121     		movs	r1, #1
 4527 0240 1170     		strb	r1, [r2]
 834:drivers/bsp_f1xx_sdio.c ****             SDIO->MASK|=(1<<1)|(1<<3)|(1<<8)|(1<<4)|(1<<9);	//ÈÖçÁΩÆ‰∫ßÁîüÊï∞ÊçÆÊé•Êî∂ÂÆåÊàê‰∏≠Êñ≠
 4528              		.loc 1 834 0
 4529 0242 2E4A     		ldr	r2, .L409+24
 4530 0244 1370     		strb	r3, [r2]
 835:drivers/bsp_f1xx_sdio.c ****             SDIO->DCTRL|=1<<3;								//SDIO DMA‰ΩøËÉΩ.
 4531              		.loc 1 835 0
 4532 0246 274A     		ldr	r2, .L409
 4533 0248 D36B     		ldr	r3, [r2, #60]
 4534 024a 43F44673 		orr	r3, r3, #792
 4535 024e 43F00203 		orr	r3, r3, #2
 4536 0252 D363     		str	r3, [r2, #60]
 836:drivers/bsp_f1xx_sdio.c ****             timeout=SDIO_DATATIMEOUT;
 4537              		.loc 1 836 0
 4538 0254 D36A     		ldr	r3, [r2, #44]
 4539 0256 43F00803 		orr	r3, r3, #8
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 112


 4540 025a D362     		str	r3, [r2, #44]
 4541              	.LVL510:
 837:drivers/bsp_f1xx_sdio.c ****             while(((DMA2->ISR&0X2000)==0)&&timeout)timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 4542              		.loc 1 837 0
 4543 025c 4FF0FF33 		mov	r3, #-1
 838:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)	 								//Ë∂ÖÊó∂
 4544              		.loc 1 838 0
 4545 0260 00E0     		b	.L381
 4546              	.LVL511:
 4547              	.L383:
 838:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)	 								//Ë∂ÖÊó∂
 4548              		.loc 1 838 0 is_stmt 0 discriminator 3
 4549 0262 013B     		subs	r3, r3, #1
 4550              	.LVL512:
 4551              	.L381:
 838:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)	 								//Ë∂ÖÊó∂
 4552              		.loc 1 838 0 discriminator 1
 4553 0264 264A     		ldr	r2, .L409+28
 4554 0266 1268     		ldr	r2, [r2]
 4555 0268 12F4005F 		tst	r2, #8192
 4556 026c 01D1     		bne	.L382
 838:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)	 								//Ë∂ÖÊó∂
 4557              		.loc 1 838 0 discriminator 2
 4558 026e 002B     		cmp	r3, #0
 4559 0270 F7D1     		bne	.L383
 4560              	.L382:
 839:drivers/bsp_f1xx_sdio.c ****             {
 4561              		.loc 1 839 0 is_stmt 1
 4562 0272 13B1     		cbz	r3, .L408
 844:drivers/bsp_f1xx_sdio.c ****             while((TransferEnd==0)&&(TransferError==SD_OK)&&timeout)timeout--;
 4563              		.loc 1 844 0
 4564 0274 4FF0FF33 		mov	r3, #-1
 4565              	.LVL513:
 4566 0278 04E0     		b	.L384
 4567              	.LVL514:
 4568              	.L408:
 841:drivers/bsp_f1xx_sdio.c ****                 return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 4569              		.loc 1 841 0
 4570 027a FFF7FEFF 		bl	bsp_SD_Init
 4571              	.LVL515:
 842:drivers/bsp_f1xx_sdio.c ****             }
 4572              		.loc 1 842 0
 4573 027e 0423     		movs	r3, #4
 4574 0280 20E0     		b	.L361
 4575              	.LVL516:
 4576              	.L386:
 845:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 4577              		.loc 1 845 0 discriminator 4
 4578 0282 013B     		subs	r3, r3, #1
 4579              	.LVL517:
 4580              	.L384:
 845:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 4581              		.loc 1 845 0 is_stmt 0 discriminator 1
 4582 0284 1D4A     		ldr	r2, .L409+24
 4583 0286 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4584 0288 22B9     		cbnz	r2, .L385
 845:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 113


 4585              		.loc 1 845 0 discriminator 2
 4586 028a 1A4A     		ldr	r2, .L409+16
 4587 028c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4588 028e 0AB9     		cbnz	r2, .L385
 845:drivers/bsp_f1xx_sdio.c ****             if(timeout==0)return SD_DATA_TIMEOUT;			//Ë∂ÖÊó∂
 4589              		.loc 1 845 0 discriminator 3
 4590 0290 002B     		cmp	r3, #0
 4591 0292 F6D1     		bne	.L386
 4592              	.L385:
 846:drivers/bsp_f1xx_sdio.c ****             if(TransferError!=SD_OK)return TransferError;
 4593              		.loc 1 846 0 is_stmt 1
 4594 0294 23B3     		cbz	r3, .L397
 847:drivers/bsp_f1xx_sdio.c ****         }
 4595              		.loc 1 847 0
 4596 0296 174B     		ldr	r3, .L409+16
 4597              	.LVL518:
 4598 0298 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4599 029a 002B     		cmp	r3, #0
 4600 029c 3FF42CAF 		beq	.L363
 847:drivers/bsp_f1xx_sdio.c ****         }
 4601              		.loc 1 847 0 is_stmt 0 discriminator 1
 4602 02a0 144B     		ldr	r3, .L409+16
 4603 02a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4604 02a4 DBB2     		uxtb	r3, r3
 4605 02a6 0DE0     		b	.L361
 4606              	.LVL519:
 4607              	.L388:
 854:drivers/bsp_f1xx_sdio.c ****     }
 4608              		.loc 1 854 0 is_stmt 1
 4609 02a8 0DF10700 		add	r0, sp, #7
 4610 02ac FFF7FEFF 		bl	IsCardProgramming
 4611              	.LVL520:
 4612 02b0 0346     		mov	r3, r0
 4613              	.LVL521:
 4614              	.L387:
 852:drivers/bsp_f1xx_sdio.c ****     {
 4615              		.loc 1 852 0
 4616 02b2 3BB9     		cbnz	r3, .L361
 852:drivers/bsp_f1xx_sdio.c ****     {
 4617              		.loc 1 852 0 is_stmt 0 discriminator 1
 4618 02b4 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 4619 02b8 063A     		subs	r2, r2, #6
 4620 02ba D2B2     		uxtb	r2, r2
 4621 02bc 012A     		cmp	r2, #1
 4622 02be F3D9     		bls	.L388
 4623 02c0 00E0     		b	.L361
 4624              	.LVL522:
 4625              	.L389:
 737:drivers/bsp_f1xx_sdio.c ****     SDIO->DCTRL=0x0;							//Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 4626              		.loc 1 737 0 is_stmt 1
 4627 02c2 2623     		movs	r3, #38
 4628              	.LVL523:
 4629              	.L361:
 857:drivers/bsp_f1xx_sdio.c **** //SDIO‰∏≠Êñ≠ÊúçÂä°ÂáΩÊï∞
 4630              		.loc 1 857 0
 4631 02c4 1846     		mov	r0, r3
 4632 02c6 02B0     		add	sp, sp, #8
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 114


 4633              	.LCFI45:
 4634              		.cfi_remember_state
 4635              		.cfi_def_cfa_offset 32
 4636              		@ sp needed
 4637 02c8 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4638              	.LVL524:
 4639              	.L390:
 4640              	.LCFI46:
 4641              		.cfi_restore_state
 740:drivers/bsp_f1xx_sdio.c ****     if(CardType==SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 4642              		.loc 1 740 0
 4643 02cc 0E23     		movs	r3, #14
 4644 02ce F9E7     		b	.L361
 4645              	.LVL525:
 4646              	.L391:
 752:drivers/bsp_f1xx_sdio.c ****     if(nblks>1)
 4647              		.loc 1 752 0
 4648 02d0 2623     		movs	r3, #38
 4649 02d2 F7E7     		b	.L361
 4650              	.L392:
 4651 02d4 2623     		movs	r3, #38
 4652 02d6 F5E7     		b	.L361
 4653              	.LVL526:
 4654              	.L393:
 755:drivers/bsp_f1xx_sdio.c ****         if((SDIO_STD_CAPACITY_SD_CARD_V1_1==CardType)||(SDIO_STD_CAPACITY_SD_CARD_V2_0==CardType)||
 4655              		.loc 1 755 0
 4656 02d8 2623     		movs	r3, #38
 4657 02da F3E7     		b	.L361
 4658              	.LVL527:
 4659              	.L395:
 797:drivers/bsp_f1xx_sdio.c ****                     timeout--;
 4660              		.loc 1 797 0
 4661 02dc 0423     		movs	r3, #4
 4662 02de F1E7     		b	.L361
 4663              	.LVL528:
 4664              	.L397:
 846:drivers/bsp_f1xx_sdio.c ****             if(TransferError!=SD_OK)return TransferError;
 4665              		.loc 1 846 0
 4666 02e0 0423     		movs	r3, #4
 4667              	.LVL529:
 4668 02e2 EFE7     		b	.L361
 4669              	.L410:
 4670              		.align	2
 4671              	.L409:
 4672 02e4 00800140 		.word	1073840128
 4673 02e8 00000000 		.word	.LANCHOR0
 4674 02ec 00000000 		.word	.LANCHOR1
 4675 02f0 00000000 		.word	.LANCHOR4
 4676 02f4 00000000 		.word	.LANCHOR6
 4677 02f8 00000000 		.word	.LANCHOR5
 4678 02fc 00000000 		.word	.LANCHOR7
 4679 0300 00040240 		.word	1073873920
 4680              		.cfi_endproc
 4681              	.LFE80:
 4683              		.section	.text.SD_ReadDisk,"ax",%progbits
 4684              		.align	1
 4685              		.global	SD_ReadDisk
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 115


 4686              		.syntax unified
 4687              		.thumb
 4688              		.thumb_func
 4689              		.fpu softvfp
 4691              	SD_ReadDisk:
 4692              	.LFB96:
1228:drivers/bsp_f1xx_sdio.c **** //ËØªSDÂç°
1229:drivers/bsp_f1xx_sdio.c **** //buf:ËØªÊï∞ÊçÆÁºìÂ≠òÂå∫
1230:drivers/bsp_f1xx_sdio.c **** //sector:ÊâáÂå∫Âú∞ÂùÄ
1231:drivers/bsp_f1xx_sdio.c **** //cnt:ÊâáÂå∫‰∏™Êï∞
1232:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ;0,Ê≠£Â∏∏;ÂÖ∂‰ªñ,ÈîôËØØ‰ª£Á†Å;
1233:drivers/bsp_f1xx_sdio.c **** u8 SD_ReadDisk(u8*buf,u32 sector,u8 cnt)
1234:drivers/bsp_f1xx_sdio.c **** {
 4693              		.loc 1 1234 0
 4694              		.cfi_startproc
 4695              		@ args = 0, pretend = 0, frame = 0
 4696              		@ frame_needed = 0, uses_anonymous_args = 0
 4697              	.LVL530:
 4698 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4699              	.LCFI47:
 4700              		.cfi_def_cfa_offset 36
 4701              		.cfi_offset 4, -36
 4702              		.cfi_offset 5, -32
 4703              		.cfi_offset 6, -28
 4704              		.cfi_offset 7, -24
 4705              		.cfi_offset 8, -20
 4706              		.cfi_offset 9, -16
 4707              		.cfi_offset 10, -12
 4708              		.cfi_offset 11, -8
 4709              		.cfi_offset 14, -4
 4710 0004 83B0     		sub	sp, sp, #12
 4711              	.LCFI48:
 4712              		.cfi_def_cfa_offset 48
 4713 0006 0546     		mov	r5, r0
 4714 0008 9146     		mov	r9, r2
 4715              	.LVL531:
1235:drivers/bsp_f1xx_sdio.c ****     u8 sta=SD_OK;
1236:drivers/bsp_f1xx_sdio.c ****     long long lsector=sector;
1237:drivers/bsp_f1xx_sdio.c ****     u8 n;
1238:drivers/bsp_f1xx_sdio.c ****     lsector<<=9;
 4716              		.loc 1 1238 0
 4717 000a CF0D     		lsrs	r7, r1, #23
 4718 000c 4E02     		lsls	r6, r1, #9
 4719              	.LVL532:
1239:drivers/bsp_f1xx_sdio.c ****     if((u32)buf%4!=0)
 4720              		.loc 1 1239 0
 4721 000e 10F0030F 		tst	r0, #3
 4722 0012 29D1     		bne	.L417
1240:drivers/bsp_f1xx_sdio.c ****     {
1241:drivers/bsp_f1xx_sdio.c ****         for(n=0;n<cnt;n++)
1242:drivers/bsp_f1xx_sdio.c ****         {
1243:drivers/bsp_f1xx_sdio.c ****             sta=SD_ReadBlock(SDIO_DATA_BUFFER,lsector+512*n,512);//Âçï‰∏™sectorÁöÑËØªÊìç‰Ωú
1244:drivers/bsp_f1xx_sdio.c ****             memcpy(buf,SDIO_DATA_BUFFER,512);
1245:drivers/bsp_f1xx_sdio.c ****             buf+=512;
1246:drivers/bsp_f1xx_sdio.c ****         }
1247:drivers/bsp_f1xx_sdio.c ****     }else
1248:drivers/bsp_f1xx_sdio.c ****     {
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 116


1249:drivers/bsp_f1xx_sdio.c ****         if(cnt==1)sta=SD_ReadBlock(buf,lsector,512);    	//Âçï‰∏™sectorÁöÑËØªÊìç‰Ωú
 4723              		.loc 1 1249 0
 4724 0014 012A     		cmp	r2, #1
 4725 0016 2AD0     		beq	.L420
1250:drivers/bsp_f1xx_sdio.c ****         else sta=SD_ReadMultiBlocks(buf,lsector,512,cnt);//Â§ö‰∏™sector
 4726              		.loc 1 1250 0
 4727 0018 0192     		str	r2, [sp, #4]
 4728 001a 4FF40073 		mov	r3, #512
 4729 001e 0093     		str	r3, [sp]
 4730 0020 3246     		mov	r2, r6
 4731              	.LVL533:
 4732 0022 3B46     		mov	r3, r7
 4733 0024 FFF7FEFF 		bl	SD_ReadMultiBlocks
 4734              	.LVL534:
 4735 0028 8246     		mov	r10, r0
 4736              	.LVL535:
 4737 002a 19E0     		b	.L415
 4738              	.LVL536:
 4739              	.L414:
1243:drivers/bsp_f1xx_sdio.c ****             memcpy(buf,SDIO_DATA_BUFFER,512);
 4740              		.loc 1 1243 0 discriminator 3
 4741 002c 6202     		lsls	r2, r4, #9
 4742 002e DFF85080 		ldr	r8, .L421
 4743 0032 4FF4007B 		mov	fp, #512
 4744 0036 CDF800B0 		str	fp, [sp]
 4745 003a B018     		adds	r0, r6, r2
 4746 003c 47EBE271 		adc	r1, r7, r2, asr #31
 4747 0040 0246     		mov	r2, r0
 4748 0042 0B46     		mov	r3, r1
 4749 0044 4046     		mov	r0, r8
 4750 0046 FFF7FEFF 		bl	SD_ReadBlock
 4751              	.LVL537:
 4752 004a 8246     		mov	r10, r0
 4753              	.LVL538:
1244:drivers/bsp_f1xx_sdio.c ****             buf+=512;
 4754              		.loc 1 1244 0 discriminator 3
 4755 004c 5A46     		mov	r2, fp
 4756 004e 4146     		mov	r1, r8
 4757 0050 2846     		mov	r0, r5
 4758 0052 FFF7FEFF 		bl	memcpy
 4759              	.LVL539:
1245:drivers/bsp_f1xx_sdio.c ****         }
 4760              		.loc 1 1245 0 discriminator 3
 4761 0056 5D44     		add	r5, r5, fp
 4762              	.LVL540:
1241:drivers/bsp_f1xx_sdio.c ****         {
 4763              		.loc 1 1241 0 discriminator 3
 4764 0058 0134     		adds	r4, r4, #1
 4765              	.LVL541:
 4766 005a E4B2     		uxtb	r4, r4
 4767              	.LVL542:
 4768              	.L412:
1241:drivers/bsp_f1xx_sdio.c ****         {
 4769              		.loc 1 1241 0 is_stmt 0 discriminator 1
 4770 005c 4C45     		cmp	r4, r9
 4771 005e E5D3     		bcc	.L414
 4772              	.LVL543:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 117


 4773              	.L415:
1251:drivers/bsp_f1xx_sdio.c ****     }
1252:drivers/bsp_f1xx_sdio.c ****     return sta;
1253:drivers/bsp_f1xx_sdio.c **** }
 4774              		.loc 1 1253 0 is_stmt 1
 4775 0060 5046     		mov	r0, r10
 4776 0062 03B0     		add	sp, sp, #12
 4777              	.LCFI49:
 4778              		.cfi_remember_state
 4779              		.cfi_def_cfa_offset 36
 4780              		@ sp needed
 4781 0064 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4782              	.LVL544:
 4783              	.L417:
 4784              	.LCFI50:
 4785              		.cfi_restore_state
1241:drivers/bsp_f1xx_sdio.c ****         {
 4786              		.loc 1 1241 0
 4787 0068 0024     		movs	r4, #0
1235:drivers/bsp_f1xx_sdio.c ****     long long lsector=sector;
 4788              		.loc 1 1235 0
 4789 006a A246     		mov	r10, r4
 4790 006c F6E7     		b	.L412
 4791              	.L420:
1249:drivers/bsp_f1xx_sdio.c ****         else sta=SD_ReadMultiBlocks(buf,lsector,512,cnt);//Â§ö‰∏™sector
 4792              		.loc 1 1249 0 discriminator 1
 4793 006e 4FF40073 		mov	r3, #512
 4794 0072 0093     		str	r3, [sp]
 4795 0074 3246     		mov	r2, r6
 4796              	.LVL545:
 4797 0076 3B46     		mov	r3, r7
 4798 0078 FFF7FEFF 		bl	SD_ReadBlock
 4799              	.LVL546:
 4800 007c 8246     		mov	r10, r0
 4801              	.LVL547:
 4802 007e EFE7     		b	.L415
 4803              	.L422:
 4804              		.align	2
 4805              	.L421:
 4806 0080 00000000 		.word	SDIO_DATA_BUFFER
 4807              		.cfi_endproc
 4808              	.LFE96:
 4810              		.section	.text.SD_WriteDisk,"ax",%progbits
 4811              		.align	1
 4812              		.global	SD_WriteDisk
 4813              		.syntax unified
 4814              		.thumb
 4815              		.thumb_func
 4816              		.fpu softvfp
 4818              	SD_WriteDisk:
 4819              	.LFB97:
1254:drivers/bsp_f1xx_sdio.c **** //ÂÜôSDÂç°
1255:drivers/bsp_f1xx_sdio.c **** //buf:ÂÜôÊï∞ÊçÆÁºìÂ≠òÂå∫
1256:drivers/bsp_f1xx_sdio.c **** //sector:ÊâáÂå∫Âú∞ÂùÄ
1257:drivers/bsp_f1xx_sdio.c **** //cnt:ÊâáÂå∫‰∏™Êï∞
1258:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ;0,Ê≠£Â∏∏;ÂÖ∂‰ªñ,ÈîôËØØ‰ª£Á†Å;
1259:drivers/bsp_f1xx_sdio.c **** u8 SD_WriteDisk(u8*buf,u32 sector,u8 cnt)
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 118


1260:drivers/bsp_f1xx_sdio.c **** {
 4820              		.loc 1 1260 0
 4821              		.cfi_startproc
 4822              		@ args = 0, pretend = 0, frame = 0
 4823              		@ frame_needed = 0, uses_anonymous_args = 0
 4824              	.LVL548:
 4825 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 4826              	.LCFI51:
 4827              		.cfi_def_cfa_offset 32
 4828              		.cfi_offset 4, -32
 4829              		.cfi_offset 5, -28
 4830              		.cfi_offset 6, -24
 4831              		.cfi_offset 7, -20
 4832              		.cfi_offset 8, -16
 4833              		.cfi_offset 9, -12
 4834              		.cfi_offset 10, -8
 4835              		.cfi_offset 14, -4
 4836 0004 82B0     		sub	sp, sp, #8
 4837              	.LCFI52:
 4838              		.cfi_def_cfa_offset 40
 4839 0006 0746     		mov	r7, r0
 4840 0008 9246     		mov	r10, r2
 4841              	.LVL549:
1261:drivers/bsp_f1xx_sdio.c ****     u8 sta=SD_OK;
1262:drivers/bsp_f1xx_sdio.c ****     u8 n;
1263:drivers/bsp_f1xx_sdio.c ****     long long lsector=sector;
1264:drivers/bsp_f1xx_sdio.c ****     lsector<<=9;
 4842              		.loc 1 1264 0
 4843 000a 4FEAD159 		lsr	r9, r1, #23
 4844 000e 4FEA4128 		lsl	r8, r1, #9
 4845              	.LVL550:
1265:drivers/bsp_f1xx_sdio.c ****     if((u32)buf%4!=0)
 4846              		.loc 1 1265 0
 4847 0012 10F0030F 		tst	r0, #3
 4848 0016 25D1     		bne	.L429
1266:drivers/bsp_f1xx_sdio.c ****     {
1267:drivers/bsp_f1xx_sdio.c ****         for(n=0;n<cnt;n++)
1268:drivers/bsp_f1xx_sdio.c ****         {
1269:drivers/bsp_f1xx_sdio.c ****             memcpy(SDIO_DATA_BUFFER,buf,512);
1270:drivers/bsp_f1xx_sdio.c ****             sta=SD_WriteBlock(SDIO_DATA_BUFFER,lsector+512*n,512);//Âçï‰∏™sectorÁöÑÂÜôÊìç‰Ωú
1271:drivers/bsp_f1xx_sdio.c ****             buf+=512;
1272:drivers/bsp_f1xx_sdio.c ****         }
1273:drivers/bsp_f1xx_sdio.c ****     }else
1274:drivers/bsp_f1xx_sdio.c ****     {
1275:drivers/bsp_f1xx_sdio.c ****         if(cnt==1)sta=SD_WriteBlock(buf,lsector,512);    	//Âçï‰∏™sectorÁöÑÂÜôÊìç‰Ωú
 4849              		.loc 1 1275 0
 4850 0018 012A     		cmp	r2, #1
 4851 001a 26D0     		beq	.L432
1276:drivers/bsp_f1xx_sdio.c ****         else sta=SD_WriteMultiBlocks(buf,lsector,512,cnt);	//Â§ö‰∏™sector
 4852              		.loc 1 1276 0
 4853 001c 0192     		str	r2, [sp, #4]
 4854 001e 4FF40073 		mov	r3, #512
 4855 0022 0093     		str	r3, [sp]
 4856 0024 4246     		mov	r2, r8
 4857              	.LVL551:
 4858 0026 4B46     		mov	r3, r9
 4859 0028 FFF7FEFF 		bl	SD_WriteMultiBlocks
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 119


 4860              	.LVL552:
 4861 002c 17E0     		b	.L427
 4862              	.LVL553:
 4863              	.L426:
1269:drivers/bsp_f1xx_sdio.c ****             sta=SD_WriteBlock(SDIO_DATA_BUFFER,lsector+512*n,512);//Âçï‰∏™sectorÁöÑÂÜôÊìç‰Ωú
 4864              		.loc 1 1269 0 discriminator 3
 4865 002e 134D     		ldr	r5, .L433
 4866 0030 4FF40076 		mov	r6, #512
 4867 0034 3246     		mov	r2, r6
 4868 0036 3946     		mov	r1, r7
 4869 0038 2846     		mov	r0, r5
 4870              	.LVL554:
 4871 003a FFF7FEFF 		bl	memcpy
 4872              	.LVL555:
1270:drivers/bsp_f1xx_sdio.c ****             buf+=512;
 4873              		.loc 1 1270 0 discriminator 3
 4874 003e 6202     		lsls	r2, r4, #9
 4875 0040 0096     		str	r6, [sp]
 4876 0042 18EB0200 		adds	r0, r8, r2
 4877 0046 49EBE271 		adc	r1, r9, r2, asr #31
 4878 004a 0246     		mov	r2, r0
 4879 004c 0B46     		mov	r3, r1
 4880 004e 2846     		mov	r0, r5
 4881 0050 FFF7FEFF 		bl	SD_WriteBlock
 4882              	.LVL556:
1271:drivers/bsp_f1xx_sdio.c ****         }
 4883              		.loc 1 1271 0 discriminator 3
 4884 0054 3744     		add	r7, r7, r6
 4885              	.LVL557:
1267:drivers/bsp_f1xx_sdio.c ****         {
 4886              		.loc 1 1267 0 discriminator 3
 4887 0056 0134     		adds	r4, r4, #1
 4888              	.LVL558:
 4889 0058 E4B2     		uxtb	r4, r4
 4890              	.LVL559:
 4891              	.L424:
1267:drivers/bsp_f1xx_sdio.c ****         {
 4892              		.loc 1 1267 0 is_stmt 0 discriminator 1
 4893 005a 5445     		cmp	r4, r10
 4894 005c E7D3     		bcc	.L426
 4895              	.LVL560:
 4896              	.L427:
1277:drivers/bsp_f1xx_sdio.c ****     }
1278:drivers/bsp_f1xx_sdio.c ****     return sta;
1279:drivers/bsp_f1xx_sdio.c **** }
 4897              		.loc 1 1279 0 is_stmt 1
 4898 005e 02B0     		add	sp, sp, #8
 4899              	.LCFI53:
 4900              		.cfi_remember_state
 4901              		.cfi_def_cfa_offset 32
 4902              		@ sp needed
 4903 0060 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4904              	.LVL561:
 4905              	.L429:
 4906              	.LCFI54:
 4907              		.cfi_restore_state
1267:drivers/bsp_f1xx_sdio.c ****         {
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 120


 4908              		.loc 1 1267 0
 4909 0064 0024     		movs	r4, #0
1261:drivers/bsp_f1xx_sdio.c ****     u8 n;
 4910              		.loc 1 1261 0
 4911 0066 2046     		mov	r0, r4
 4912              	.LVL562:
 4913 0068 F7E7     		b	.L424
 4914              	.LVL563:
 4915              	.L432:
1275:drivers/bsp_f1xx_sdio.c ****         else sta=SD_WriteMultiBlocks(buf,lsector,512,cnt);	//Â§ö‰∏™sector
 4916              		.loc 1 1275 0 discriminator 1
 4917 006a 4FF40073 		mov	r3, #512
 4918 006e 0093     		str	r3, [sp]
 4919 0070 4246     		mov	r2, r8
 4920              	.LVL564:
 4921 0072 4B46     		mov	r3, r9
 4922 0074 FFF7FEFF 		bl	SD_WriteBlock
 4923              	.LVL565:
 4924 0078 F1E7     		b	.L427
 4925              	.L434:
 4926 007a 00BF     		.align	2
 4927              	.L433:
 4928 007c 00000000 		.word	SDIO_DATA_BUFFER
 4929              		.cfi_endproc
 4930              	.LFE97:
 4932              		.comm	tempbuff,4,4
 4933              		.comm	SDIO_DATA_BUFFER,512,4
 4934              		.comm	SDCardInfo,88,8
 4935              		.global	TransferEnd
 4936              		.global	TransferError
 4937              		.section	.bss.CID_Tab,"aw",%nobits
 4938              		.align	2
 4939              		.set	.LANCHOR3,. + 0
 4942              	CID_Tab:
 4943 0000 00000000 		.space	16
 4943      00000000 
 4943      00000000 
 4943      00000000 
 4944              		.section	.bss.CSD_Tab,"aw",%nobits
 4945              		.align	2
 4946              		.set	.LANCHOR2,. + 0
 4949              	CSD_Tab:
 4950 0000 00000000 		.space	16
 4950      00000000 
 4950      00000000 
 4950      00000000 
 4951              		.section	.bss.CardType,"aw",%nobits
 4952              		.set	.LANCHOR0,. + 0
 4955              	CardType:
 4956 0000 00       		.space	1
 4957              		.section	.bss.RCA,"aw",%nobits
 4958              		.align	2
 4959              		.set	.LANCHOR1,. + 0
 4962              	RCA:
 4963 0000 00000000 		.space	4
 4964              		.section	.bss.StopCondition,"aw",%nobits
 4965              		.set	.LANCHOR5,. + 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 121


 4968              	StopCondition:
 4969 0000 00       		.space	1
 4970              		.section	.bss.TransferEnd,"aw",%nobits
 4971              		.set	.LANCHOR7,. + 0
 4974              	TransferEnd:
 4975 0000 00       		.space	1
 4976              		.section	.bss.TransferError,"aw",%nobits
 4977              		.set	.LANCHOR6,. + 0
 4980              	TransferError:
 4981 0000 00       		.space	1
 4982              		.section	.data.DeviceMode,"aw",%progbits
 4983              		.set	.LANCHOR4,. + 0
 4986              	DeviceMode:
 4987 0000 01       		.byte	1
 4988              		.text
 4989              	.Letext0:
 4990              		.file 2 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/machine/_
 4991              		.file 3 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_stdi
 4992              		.file 4 "Inc/stm32f103xe.h"
 4993              		.file 5 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/lock.
 4994              		.file 6 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_type
 4995              		.file 7 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-7-2017-q4-major/lib/gcc/arm-none-eabi/7.2.1/inc
 4996              		.file 8 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/reent
 4997              		.file 9 "Inc/core_cm3.h"
 4998              		.file 10 "startup/inc/sys.h"
 4999              		.file 11 "tools/inc/malloc.h"
 5000              		.file 12 "tools/inc/tskmanager.h"
 5001              		.file 13 "drivers/inc/bsp_f1xx_sdio.h"
 5002              		.file 14 "<built-in>"
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 122


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bsp_f1xx_sdio.c
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:16     .text.SDIO_Clock_Set:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:23     .text.SDIO_Clock_Set:0000000000000000 SDIO_Clock_Set
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:49     .text.SDIO_Clock_Set:0000000000000010 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:54     .text.SDIO_Send_Cmd:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:61     .text.SDIO_Send_Cmd:0000000000000000 SDIO_Send_Cmd
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:106    .text.SDIO_Send_Cmd:0000000000000024 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:111    .text.SDIO_Send_Data_Cfg:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:118    .text.SDIO_Send_Data_Cfg:0000000000000000 SDIO_Send_Data_Cfg
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:166    .text.SDIO_Send_Data_Cfg:0000000000000028 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:171    .text.SD_PowerOFF:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:178    .text.SD_PowerOFF:0000000000000000 SD_PowerOFF
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:196    .text.SD_PowerOFF:0000000000000010 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:201    .text.SD_GetCardInfo:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:208    .text.SD_GetCardInfo:0000000000000000 SD_GetCardInfo
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:588    .text.SD_GetCardInfo:0000000000000234 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:596    .text.SD_SetDeviceMode:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:603    .text.SD_SetDeviceMode:0000000000000000 SD_SetDeviceMode
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:631    .text.SD_SetDeviceMode:0000000000000010 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:636    .text.CmdError:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:643    .text.CmdError:0000000000000000 CmdError
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:687    .text.CmdError:0000000000000028 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:692    .text.CmdResp7Error:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:699    .text.CmdResp7Error:0000000000000000 CmdResp7Error
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:762    .text.CmdResp7Error:0000000000000044 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:767    .text.CmdResp1Error:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:774    .text.CmdResp1Error:0000000000000000 CmdResp1Error
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:842    .text.CmdResp1Error:0000000000000044 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:847    .text.SD_SelectDeselect:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:854    .text.SD_SelectDeselect:0000000000000000 SD_SelectDeselect
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:883    .text.SD_ProcessIRQSrc:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:890    .text.SD_ProcessIRQSrc:0000000000000000 SD_ProcessIRQSrc
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1068   .text.SD_ProcessIRQSrc:0000000000000120 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1076   .text.SDIO_IRQHandler:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1083   .text.SDIO_IRQHandler:0000000000000000 SDIO_IRQHandler
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1103   .text.CmdResp3Error:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1110   .text.CmdResp3Error:0000000000000000 CmdResp3Error
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1151   .text.CmdResp3Error:000000000000002c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1156   .text.SD_PowerON:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1163   .text.SD_PowerON:0000000000000000 SD_PowerON
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1417   .text.SD_PowerON:000000000000012c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1424   .text.CmdResp2Error:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1431   .text.CmdResp2Error:0000000000000000 CmdResp2Error
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1501   .text.CmdResp2Error:000000000000004c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1506   .text.CmdResp6Error:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1513   .text.CmdResp6Error:0000000000000000 CmdResp6Error
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1626   .text.CmdResp6Error:0000000000000078 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1631   .text.SD_InitializeCards:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1638   .text.SD_InitializeCards:0000000000000000 SD_InitializeCards
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1809   .text.SD_InitializeCards:00000000000000d8 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1818   .text.IsCardProgramming:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1825   .text.IsCardProgramming:0000000000000000 IsCardProgramming
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1932   .text.IsCardProgramming:0000000000000084 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1938   .text.SD_SendStatus:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:1945   .text.SD_SendStatus:0000000000000000 SD_SendStatus
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2001   .text.SD_SendStatus:0000000000000030 $d
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 123


/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2007   .text.SD_GetState:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2014   .text.SD_GetState:0000000000000000 SD_GetState
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2056   .text.FindSCR:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2063   .text.FindSCR:0000000000000000 FindSCR
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2263   .text.FindSCR:0000000000000128 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2268   .text.SDEnWideBus:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2275   .text.SDEnWideBus:0000000000000000 SDEnWideBus
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2376   .text.SDEnWideBus:0000000000000068 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2382   .text.SD_EnableWideBusOperation:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2389   .text.SD_EnableWideBusOperation:0000000000000000 SD_EnableWideBusOperation
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2465   .text.SD_EnableWideBusOperation:000000000000004c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2472   .text.bsp_SD_Init:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2479   .text.bsp_SD_Init:0000000000000000 bsp_SD_Init
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2646   .text.bsp_SD_Init:00000000000000d0 $d
                            *COM*:0000000000000058 SDCardInfo
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2657   .text.convert_from_bytes_to_power_of_two:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2664   .text.convert_from_bytes_to_power_of_two:0000000000000000 convert_from_bytes_to_power_of_two
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2698   .text.SD_DMA_Config:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2705   .text.SD_DMA_Config:0000000000000000 SD_DMA_Config
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2781   .text.SD_DMA_Config:0000000000000068 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2788   .text.SD_ReadBlock:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:2795   .text.SD_ReadBlock:0000000000000000 SD_ReadBlock
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:3145   .text.SD_ReadBlock:00000000000001ec $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:3157   .text.SD_ReadMultiBlocks:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:3164   .text.SD_ReadMultiBlocks:0000000000000000 SD_ReadMultiBlocks
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:3568   .text.SD_ReadMultiBlocks:000000000000023c $d
                            *COM*:0000000000000004 tempbuff
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:3581   .text.SD_WriteBlock:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:3588   .text.SD_WriteBlock:0000000000000000 SD_WriteBlock
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4112   .text.SD_WriteBlock:00000000000002bc $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4124   .text.SD_WriteMultiBlocks:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4131   .text.SD_WriteMultiBlocks:0000000000000000 SD_WriteMultiBlocks
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4672   .text.SD_WriteMultiBlocks:00000000000002e4 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4684   .text.SD_ReadDisk:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4691   .text.SD_ReadDisk:0000000000000000 SD_ReadDisk
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4806   .text.SD_ReadDisk:0000000000000080 $d
                            *COM*:0000000000000200 SDIO_DATA_BUFFER
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4811   .text.SD_WriteDisk:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4818   .text.SD_WriteDisk:0000000000000000 SD_WriteDisk
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4928   .text.SD_WriteDisk:000000000000007c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4974   .bss.TransferEnd:0000000000000000 TransferEnd
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4980   .bss.TransferError:0000000000000000 TransferError
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4938   .bss.CID_Tab:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4942   .bss.CID_Tab:0000000000000000 CID_Tab
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4945   .bss.CSD_Tab:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4949   .bss.CSD_Tab:0000000000000000 CSD_Tab
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4955   .bss.CardType:0000000000000000 CardType
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4956   .bss.CardType:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4958   .bss.RCA:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4962   .bss.RCA:0000000000000000 RCA
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4968   .bss.StopCondition:0000000000000000 StopCondition
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4969   .bss.StopCondition:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4975   .bss.TransferEnd:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4981   .bss.TransferError:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s:4986   .data.DeviceMode:0000000000000000 DeviceMode

UNDEFINED SYMBOLS
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccTW8Bq2.s 			page 124


MY_NVIC_Init
INTX_DISABLE
INTX_ENABLE
memcpy

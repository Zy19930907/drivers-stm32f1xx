ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"bsp_f1xx_sdio.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.SDIO_Clock_Set,"ax",%progbits
  16              		.align	1
  17              		.global	SDIO_Clock_Set
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	SDIO_Clock_Set:
  24              	.LFB67:
  25              		.file 1 "drivers/bsp_f1xx_sdio.c"
   1:drivers/bsp_f1xx_sdio.c **** #include "bsp_f1xx_sdio.h"
   2:drivers/bsp_f1xx_sdio.c **** 
   3:drivers/bsp_f1xx_sdio.c **** static u8 CardType = SDIO_STD_CAPACITY_SD_CARD_V1_1;        //SDÂç°Á±ªÂûãÔºàÈªòËÆ§‰∏∫1.xÂç°Ôºâ
   4:drivers/bsp_f1xx_sdio.c **** static u32 CSD_Tab[4], CID_Tab[4], RCA = 0;                    //SDÂç°CSD,CID‰ª•ÂèäÁõ∏ÂØπÂú∞ÂùÄ(RCA
   5:drivers/bsp_f1xx_sdio.c **** static u8 DeviceMode = SD_DMA_MODE;                        //Â∑•‰ΩúÊ®°Âºè,Ê≥®ÊÑè,Â∑•‰ΩúÊ®°ÂºèÂøÖÈ°ª
   6:drivers/bsp_f1xx_sdio.c **** static u8 StopCondition = 0;                                //ÊòØÂê¶ÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊ†áÂøó‰Ωç,DMA
   7:drivers/bsp_f1xx_sdio.c **** volatile SD_Error TransferError = SD_OK;                    //Êï∞ÊçÆ‰º†ËæìÈîôËØØÊ†áÂøó,DMAËØªÂÜôÊó∂
   8:drivers/bsp_f1xx_sdio.c **** volatile u8 TransferEnd = 0;                                //‰º†ËæìÁªìÊùüÊ†áÂøó,DMAËØªÂÜôÊó∂‰ΩøÁî®
   9:drivers/bsp_f1xx_sdio.c **** SD_CardInfo SDCardInfo;                                    //SDÂç°‰ø°ÊÅØ
  10:drivers/bsp_f1xx_sdio.c **** 
  11:drivers/bsp_f1xx_sdio.c **** //SD_ReadDisk/SD_WriteDiskÂáΩÊï∞‰∏ìÁî®buf,ÂΩìËøô‰∏§‰∏™ÂáΩÊï∞ÁöÑÊï∞ÊçÆÁºìÂ≠òÂå∫Âú∞ÂùÄ‰∏çÊòØ4Â≠óËäÇÂØ
  12:drivers/bsp_f1xx_sdio.c **** //ÈúÄË¶ÅÁî®Âà∞ËØ•Êï∞ÁªÑ,Á°Æ‰øùÊï∞ÊçÆÁºìÂ≠òÂå∫Âú∞ÂùÄÊòØ4Â≠óËäÇÂØπÈΩêÁöÑ.
  13:drivers/bsp_f1xx_sdio.c **** __attribute__((aligned(4))) u8 SDIO_DATA_BUFFER[512];
  14:drivers/bsp_f1xx_sdio.c **** 
  15:drivers/bsp_f1xx_sdio.c **** 
  16:drivers/bsp_f1xx_sdio.c **** //ÂàùÂßãÂåñSDÂç°
  17:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å;(0,Êó†ÈîôËØØ)
  18:drivers/bsp_f1xx_sdio.c **** SD_Error bsp_SD_Init(void)
  19:drivers/bsp_f1xx_sdio.c **** {
  20:drivers/bsp_f1xx_sdio.c **** 	u8 clkdiv = 0;
  21:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
  22:drivers/bsp_f1xx_sdio.c **** 	//SDIO IOÂè£ÂàùÂßãÂåñ
  23:drivers/bsp_f1xx_sdio.c **** 	RCC->APB2ENR |= 1 << 4;        //‰ΩøËÉΩPORTCÊó∂Èíü
  24:drivers/bsp_f1xx_sdio.c **** 	RCC->APB2ENR |= 1 << 5;        //‰ΩøËÉΩPORTDÊó∂Èíü
  25:drivers/bsp_f1xx_sdio.c **** 	RCC->AHBENR |= 1 << 10;        //‰ΩøËÉΩSDIOÊó∂Èíü
  26:drivers/bsp_f1xx_sdio.c **** 	RCC->AHBENR |= 1 << 1;        //‰ΩøËÉΩDMA2Êó∂Èíü
  27:drivers/bsp_f1xx_sdio.c **** 
  28:drivers/bsp_f1xx_sdio.c **** 	GPIOC->CRH &= 0XFFF00000;
  29:drivers/bsp_f1xx_sdio.c **** 	GPIOC->CRH |= 0X000BBBBB;    //PC.8~12 Â§çÁî®ËæìÂá∫
  30:drivers/bsp_f1xx_sdio.c **** 
  31:drivers/bsp_f1xx_sdio.c **** 	GPIOD->CRL &= 0XFFFFF0FF;
  32:drivers/bsp_f1xx_sdio.c **** 	GPIOD->CRL |= 0X00000B00;    //PD2Â§çÁî®ËæìÂá∫,PD7 ‰∏äÊãâËæìÂÖ•
  33:drivers/bsp_f1xx_sdio.c **** 	//SDIOÂ§ñËÆæÂØÑÂ≠òÂô®ËÆæÁΩÆ‰∏∫ÈªòËÆ§ÂÄº
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 2


  34:drivers/bsp_f1xx_sdio.c **** 	SDIO->POWER = 0x00000000;
  35:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR = 0x00000000;
  36:drivers/bsp_f1xx_sdio.c **** 	SDIO->ARG = 0x00000000;
  37:drivers/bsp_f1xx_sdio.c **** 	SDIO->CMD = 0x00000000;
  38:drivers/bsp_f1xx_sdio.c **** 	SDIO->DTIMER = 0x00000000;
  39:drivers/bsp_f1xx_sdio.c **** 	SDIO->DLEN = 0x00000000;
  40:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = 0x00000000;
  41:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0x00C007FF;
  42:drivers/bsp_f1xx_sdio.c **** 	SDIO->MASK = 0x00000000;
  43:drivers/bsp_f1xx_sdio.c **** 	MY_NVIC_Init(1, 0, SDIO_IRQn, 1);        //SDIO‰∏≠Êñ≠ÈÖçÁΩÆ
  44:drivers/bsp_f1xx_sdio.c **** 	errorstatus = SD_PowerON();            //SDÂç°‰∏äÁîµ
  45:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)errorstatus = SD_InitializeCards();            //ÂàùÂßãÂåñSDÂç°
  46:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)errorstatus = SD_GetCardInfo(&SDCardInfo);    //Ëé∑ÂèñÂç°‰ø°ÊÅØ
  47:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)errorstatus = SD_SelectDeselect((u32) (SDCardInfo.RCA << 16));//ÈÄâ‰∏≠SDÂ
  48:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)errorstatus = SD_EnableWideBusOperation(1);    //4‰ΩçÂÆΩÂ∫¶,Â¶ÇÊûúÊòØMMCÂ
  49:drivers/bsp_f1xx_sdio.c **** 	if ((errorstatus == SD_OK) || (SDIO_MULTIMEDIA_CARD == CardType)) {
  50:drivers/bsp_f1xx_sdio.c **** 		if (SDCardInfo.CardType == SDIO_STD_CAPACITY_SD_CARD_V1_1 ||
  51:drivers/bsp_f1xx_sdio.c **** 			SDCardInfo.CardType == SDIO_STD_CAPACITY_SD_CARD_V2_0) {
  52:drivers/bsp_f1xx_sdio.c **** 			clkdiv = SDIO_TRANSFER_CLK_DIV + 6;    //V1.1/V2.0Âç°ÔºåËÆæÁΩÆÊúÄÈ´ò72/12=6Mhz
  53:drivers/bsp_f1xx_sdio.c **** 		} else clkdiv = SDIO_TRANSFER_CLK_DIV;    //SDHCÁ≠âÂÖ∂‰ªñÂç°ÔºåËÆæÁΩÆÊúÄÈ´ò72/6=12Mhz
  54:drivers/bsp_f1xx_sdio.c **** 		SDIO_Clock_Set(clkdiv);                //ËÆæÁΩÆÊó∂ÈíüÈ¢ëÁéá,SDIOÊó∂ÈíüËÆ°ÁÆóÂÖ¨Âºè:SDIO_CKÊó∂Èíü=
  55:drivers/bsp_f1xx_sdio.c **** 		errorstatus = SD_SetDeviceMode(SD_DMA_MODE);    //ËÆæÁΩÆ‰∏∫DMAÊ®°Âºè
  56:drivers/bsp_f1xx_sdio.c **** 		//errorstatus=SD_SetDeviceMode(SD_POLLING_MODE);	//ËÆæÁΩÆ‰∏∫Êü•ËØ¢Ê®°Âºè
  57:drivers/bsp_f1xx_sdio.c **** 	}
  58:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
  59:drivers/bsp_f1xx_sdio.c **** }
  60:drivers/bsp_f1xx_sdio.c **** 
  61:drivers/bsp_f1xx_sdio.c **** //SDIOÊó∂ÈíüÂàùÂßãÂåñËÆæÁΩÆ
  62:drivers/bsp_f1xx_sdio.c **** //clkdiv:Êó∂ÈíüÂàÜÈ¢ëÁ≥ªÊï∞
  63:drivers/bsp_f1xx_sdio.c **** //CKÊó∂Èíü=SDIOCLK/[clkdiv+2];(SDIOCLKÊó∂ÈíüÂõ∫ÂÆö‰∏∫48Mhz)
  64:drivers/bsp_f1xx_sdio.c **** void SDIO_Clock_Set(u8 clkdiv)
  65:drivers/bsp_f1xx_sdio.c **** {
  26              		.loc 1 65 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              		@ link register save eliminated.
  31              	.LVL0:
  66:drivers/bsp_f1xx_sdio.c **** 	u32 tmpreg = SDIO->CLKCR;
  32              		.loc 1 66 0
  33 0000 034A     		ldr	r2, .L2
  34 0002 5368     		ldr	r3, [r2, #4]
  35              	.LVL1:
  67:drivers/bsp_f1xx_sdio.c **** 	tmpreg &= 0XFFFFFF00;
  36              		.loc 1 67 0
  37 0004 23F0FF03 		bic	r3, r3, #255
  38              	.LVL2:
  68:drivers/bsp_f1xx_sdio.c **** 	tmpreg |= clkdiv;
  39              		.loc 1 68 0
  40 0008 1843     		orrs	r0, r0, r3
  41              	.LVL3:
  69:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR = tmpreg;
  42              		.loc 1 69 0
  43 000a 5060     		str	r0, [r2, #4]
  70:drivers/bsp_f1xx_sdio.c **** }
  44              		.loc 1 70 0
  45 000c 7047     		bx	lr
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 3


  46              	.L3:
  47 000e 00BF     		.align	2
  48              	.L2:
  49 0010 00800140 		.word	1073840128
  50              		.cfi_endproc
  51              	.LFE67:
  53              		.section	.text.SDIO_Send_Cmd,"ax",%progbits
  54              		.align	1
  55              		.global	SDIO_Send_Cmd
  56              		.syntax unified
  57              		.thumb
  58              		.thumb_func
  59              		.fpu softvfp
  61              	SDIO_Send_Cmd:
  62              	.LFB68:
  71:drivers/bsp_f1xx_sdio.c **** 
  72:drivers/bsp_f1xx_sdio.c **** //SDIOÂèëÈÄÅÂëΩ‰ª§ÂáΩÊï∞
  73:drivers/bsp_f1xx_sdio.c **** //cmdindex:ÂëΩ‰ª§Á¥¢Âºï,‰ΩéÂÖ≠‰ΩçÊúâÊïà
  74:drivers/bsp_f1xx_sdio.c **** //waitrsp:ÊúüÂæÖÁöÑÁõ∏Â∫î.00/10,Êó†ÂìçÂ∫î;01,Áü≠ÂìçÂ∫î;11,ÈïøÂìçÂ∫î
  75:drivers/bsp_f1xx_sdio.c **** //arg:ÂèÇÊï∞
  76:drivers/bsp_f1xx_sdio.c **** void SDIO_Send_Cmd(u8 cmdindex, u8 waitrsp, u32 arg)
  77:drivers/bsp_f1xx_sdio.c **** {
  63              		.loc 1 77 0
  64              		.cfi_startproc
  65              		@ args = 0, pretend = 0, frame = 0
  66              		@ frame_needed = 0, uses_anonymous_args = 0
  67              		@ link register save eliminated.
  68              	.LVL4:
  69 0000 10B4     		push	{r4}
  70              	.LCFI0:
  71              		.cfi_def_cfa_offset 4
  72              		.cfi_offset 4, -4
  78:drivers/bsp_f1xx_sdio.c **** 	u32 tmpreg;
  79:drivers/bsp_f1xx_sdio.c **** 	SDIO->ARG = arg;
  73              		.loc 1 79 0
  74 0002 084C     		ldr	r4, .L6
  75 0004 A260     		str	r2, [r4, #8]
  80:drivers/bsp_f1xx_sdio.c **** 	tmpreg = SDIO->CMD;
  76              		.loc 1 80 0
  77 0006 E368     		ldr	r3, [r4, #12]
  78              	.LVL5:
  81:drivers/bsp_f1xx_sdio.c **** 	tmpreg &= 0XFFFFF800;        //Ê∏ÖÈô§indexÂíåwaitrsp
  79              		.loc 1 81 0
  80 0008 23F4FF63 		bic	r3, r3, #2040
  81              	.LVL6:
  82 000c 23F00703 		bic	r3, r3, #7
  83              	.LVL7:
  82:drivers/bsp_f1xx_sdio.c **** 	tmpreg |= cmdindex & 0X3F;    //ËÆæÁΩÆÊñ∞ÁöÑindex
  84              		.loc 1 82 0
  85 0010 00F03F00 		and	r0, r0, #63
  86              	.LVL8:
  87 0014 1843     		orrs	r0, r0, r3
  88              	.LVL9:
  83:drivers/bsp_f1xx_sdio.c **** 	tmpreg |= waitrsp << 6;        //ËÆæÁΩÆÊñ∞ÁöÑwait rsp
  89              		.loc 1 83 0
  90 0016 40EA8110 		orr	r0, r0, r1, lsl #6
  91              	.LVL10:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 4


  84:drivers/bsp_f1xx_sdio.c **** 	tmpreg |= 0 << 8;            //Êó†Á≠âÂæÖ
  85:drivers/bsp_f1xx_sdio.c **** 	tmpreg |= 1 << 10;            //ÂëΩ‰ª§ÈÄöÈÅìÁä∂ÊÄÅÊú∫‰ΩøËÉΩ
  92              		.loc 1 85 0
  93 001a 40F48060 		orr	r0, r0, #1024
  94              	.LVL11:
  86:drivers/bsp_f1xx_sdio.c **** 	SDIO->CMD = tmpreg;
  95              		.loc 1 86 0
  96 001e E060     		str	r0, [r4, #12]
  87:drivers/bsp_f1xx_sdio.c **** }
  97              		.loc 1 87 0
  98 0020 10BC     		pop	{r4}
  99              	.LCFI1:
 100              		.cfi_restore 4
 101              		.cfi_def_cfa_offset 0
 102 0022 7047     		bx	lr
 103              	.L7:
 104              		.align	2
 105              	.L6:
 106 0024 00800140 		.word	1073840128
 107              		.cfi_endproc
 108              	.LFE68:
 110              		.section	.text.SDIO_Send_Data_Cfg,"ax",%progbits
 111              		.align	1
 112              		.global	SDIO_Send_Data_Cfg
 113              		.syntax unified
 114              		.thumb
 115              		.thumb_func
 116              		.fpu softvfp
 118              	SDIO_Send_Data_Cfg:
 119              	.LFB69:
  88:drivers/bsp_f1xx_sdio.c **** 
  89:drivers/bsp_f1xx_sdio.c **** //SDIOÂèëÈÄÅÊï∞ÊçÆÈÖçÁΩÆÂáΩÊï∞
  90:drivers/bsp_f1xx_sdio.c **** //datatimeout:Ë∂ÖÊó∂Êó∂Èó¥ËÆæÁΩÆ
  91:drivers/bsp_f1xx_sdio.c **** //datalen:‰º†ËæìÊï∞ÊçÆÈïøÂ∫¶,‰Ωé25‰ΩçÊúâÊïà,ÂøÖÈ°ª‰∏∫ÂùóÂ§ßÂ∞èÁöÑÊï¥Êï∞ÂÄç
  92:drivers/bsp_f1xx_sdio.c **** //blksize:ÂùóÂ§ßÂ∞è.ÂÆûÈôÖÂ§ßÂ∞è‰∏∫:2^blksizeÂ≠óËäÇ
  93:drivers/bsp_f1xx_sdio.c **** //dir:Êï∞ÊçÆ‰º†ËæìÊñπÂêë:0,ÊéßÂà∂Âô®Âà∞Âç°;1,Âç°Âà∞ÊéßÂà∂Âô®;
  94:drivers/bsp_f1xx_sdio.c **** void SDIO_Send_Data_Cfg(u32 datatimeout, u32 datalen, u8 blksize, u8 dir)
  95:drivers/bsp_f1xx_sdio.c **** {
 120              		.loc 1 95 0
 121              		.cfi_startproc
 122              		@ args = 0, pretend = 0, frame = 0
 123              		@ frame_needed = 0, uses_anonymous_args = 0
 124              		@ link register save eliminated.
 125              	.LVL12:
 126 0000 10B4     		push	{r4}
 127              	.LCFI2:
 128              		.cfi_def_cfa_offset 4
 129              		.cfi_offset 4, -4
  96:drivers/bsp_f1xx_sdio.c **** 	u32 tmpreg;
  97:drivers/bsp_f1xx_sdio.c **** 	SDIO->DTIMER = datatimeout;
 130              		.loc 1 97 0
 131 0002 094C     		ldr	r4, .L10
 132 0004 6062     		str	r0, [r4, #36]
  98:drivers/bsp_f1xx_sdio.c **** 	SDIO->DLEN = datalen & 0X1FFFFFF;    //‰Ωé25‰ΩçÊúâÊïà
 133              		.loc 1 98 0
 134 0006 21F07E41 		bic	r1, r1, #-33554432
 135              	.LVL13:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 5


 136 000a A162     		str	r1, [r4, #40]
  99:drivers/bsp_f1xx_sdio.c **** 	tmpreg = SDIO->DCTRL;
 137              		.loc 1 99 0
 138 000c E16A     		ldr	r1, [r4, #44]
 139              	.LVL14:
 100:drivers/bsp_f1xx_sdio.c **** 	tmpreg &= 0xFFFFFF08;        //Ê∏ÖÈô§‰πãÂâçÁöÑËÆæÁΩÆ.
 140              		.loc 1 100 0
 141 000e 21F0F701 		bic	r1, r1, #247
 142              	.LVL15:
 101:drivers/bsp_f1xx_sdio.c **** 	tmpreg |= blksize << 4;        //ËÆæÁΩÆÂùóÂ§ßÂ∞è
 143              		.loc 1 101 0
 144 0012 41EA0211 		orr	r1, r1, r2, lsl #4
 145              	.LVL16:
 102:drivers/bsp_f1xx_sdio.c **** 	tmpreg |= 0 << 2;            //ÂùóÊï∞ÊçÆ‰º†Ëæì
 103:drivers/bsp_f1xx_sdio.c **** 	tmpreg |= (dir & 0X01) << 1;    //ÊñπÂêëÊéßÂà∂
 146              		.loc 1 103 0
 147 0016 5A00     		lsls	r2, r3, #1
 148              	.LVL17:
 149 0018 02F00202 		and	r2, r2, #2
 150 001c 0A43     		orrs	r2, r2, r1
 151              	.LVL18:
 104:drivers/bsp_f1xx_sdio.c **** 	tmpreg |= 1 << 0;            //Êï∞ÊçÆ‰º†Ëæì‰ΩøËÉΩ,DPSMÁä∂ÊÄÅÊú∫
 152              		.loc 1 104 0
 153 001e 42F00102 		orr	r2, r2, #1
 154              	.LVL19:
 105:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = tmpreg;
 155              		.loc 1 105 0
 156 0022 E262     		str	r2, [r4, #44]
 106:drivers/bsp_f1xx_sdio.c **** }
 157              		.loc 1 106 0
 158 0024 10BC     		pop	{r4}
 159              	.LCFI3:
 160              		.cfi_restore 4
 161              		.cfi_def_cfa_offset 0
 162 0026 7047     		bx	lr
 163              	.L11:
 164              		.align	2
 165              	.L10:
 166 0028 00800140 		.word	1073840128
 167              		.cfi_endproc
 168              	.LFE69:
 170              		.section	.text.SD_PowerOFF,"ax",%progbits
 171              		.align	1
 172              		.global	SD_PowerOFF
 173              		.syntax unified
 174              		.thumb
 175              		.thumb_func
 176              		.fpu softvfp
 178              	SD_PowerOFF:
 179              	.LFB71:
 107:drivers/bsp_f1xx_sdio.c **** 
 108:drivers/bsp_f1xx_sdio.c **** //Âç°‰∏äÁîµ
 109:drivers/bsp_f1xx_sdio.c **** //Êü•ËØ¢ÊâÄÊúâSDIOÊé•Âè£‰∏äÁöÑÂç°ËÆæÂ§á,Âπ∂Êü•ËØ¢ÂÖ∂ÁîµÂéãÂíåÈÖçÁΩÆÊó∂Èíü
 110:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å;(0,Êó†ÈîôËØØ)
 111:drivers/bsp_f1xx_sdio.c **** SD_Error SD_PowerON(void)
 112:drivers/bsp_f1xx_sdio.c **** {
 113:drivers/bsp_f1xx_sdio.c **** 	u8 i = 0;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 6


 114:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 115:drivers/bsp_f1xx_sdio.c **** 	u32 response = 0, count = 0, validvoltage = 0;
 116:drivers/bsp_f1xx_sdio.c **** 	u32 SDType = SD_STD_CAPACITY;
 117:drivers/bsp_f1xx_sdio.c **** 	//ÈÖçÁΩÆCLKCRÂØÑÂ≠òÂô®
 118:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR = 0;                //Ê∏ÖÁ©∫CLKCR‰πãÂâçÁöÑËÆæÁΩÆ
 119:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR |= 0 << 9;            //ÈùûÁúÅÁîµÊ®°Âºè
 120:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR |= 0 << 10;            //ÂÖ≥Èó≠ÊóÅË∑Ø,CKÊ†πÊçÆÂàÜÈ¢ëËÆæÁΩÆËæìÂá∫
 121:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR |= 0 << 11;            //1‰ΩçÊï∞ÊçÆÂÆΩÂ∫¶
 122:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR |= 0 << 13;            //SDIOCLK‰∏äÂçáÊ≤ø‰∫ßÁîüSDIOCK
 123:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR |= 0 << 14;            //ÂÖ≥Èó≠Á°¨‰ª∂ÊµÅÊéßÂà∂
 124:drivers/bsp_f1xx_sdio.c **** 	SDIO_Clock_Set(SDIO_INIT_CLK_DIV);//ËÆæÁΩÆÊó∂ÈíüÈ¢ëÁéá(ÂàùÂßãÂåñÁöÑÊó∂ÂÄô,‰∏çËÉΩË∂ÖËøá400Khz)
 125:drivers/bsp_f1xx_sdio.c **** 	SDIO->POWER = 0X03;            //‰∏äÁîµÁä∂ÊÄÅ,ÂºÄÂêØÂç°Êó∂Èíü
 126:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR |= 1 << 8;            //SDIOCK‰ΩøËÉΩ
 127:drivers/bsp_f1xx_sdio.c **** 	for (i = 0; i < 74; i++) {
 128:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_GO_IDLE_STATE, 0, 0);//ÂèëÈÄÅCMD0ËøõÂÖ•IDLE STAGEÊ®°ÂºèÂëΩ‰ª§.
 129:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdError();
 130:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus == SD_OK)break;
 131:drivers/bsp_f1xx_sdio.c **** 	}
 132:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus)return errorstatus;//ËøîÂõûÈîôËØØÁä∂ÊÄÅ
 133:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SDIO_SEND_IF_COND, 1, SD_CHECK_PATTERN);//ÂèëÈÄÅCMD8,Áü≠ÂìçÂ∫î,Ê£ÄÊü•SDÂç°Êé•Âè£ÁâπÊ
 134:drivers/bsp_f1xx_sdio.c **** 	//arg[11:8]:01,ÊîØÊåÅÁîµÂéãËåÉÂõ¥,2.7~3.6V
 135:drivers/bsp_f1xx_sdio.c **** 	//arg[7:0]:ÈªòËÆ§0XAA
 136:drivers/bsp_f1xx_sdio.c **** 	//ËøîÂõûÂìçÂ∫î7
 137:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp7Error();                        //Á≠âÂæÖR7ÂìçÂ∫î
 138:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)                                //R7ÂìçÂ∫îÊ≠£Â∏∏
 139:drivers/bsp_f1xx_sdio.c **** 	{
 140:drivers/bsp_f1xx_sdio.c **** 		CardType = SDIO_STD_CAPACITY_SD_CARD_V2_0;        //SD 2.0Âç°
 141:drivers/bsp_f1xx_sdio.c **** 		SDType = SD_HIGH_CAPACITY;                        //È´òÂÆπÈáèÂç°
 142:drivers/bsp_f1xx_sdio.c **** 	}
 143:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_APP_CMD, 1, 0);                    //ÂèëÈÄÅCMD55,Áü≠ÂìçÂ∫î
 144:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_APP_CMD);            //Á≠âÂæÖR1ÂìçÂ∫î
 145:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)//SD2.0/SD 1.1,Âê¶Âàô‰∏∫MMCÂç°
 146:drivers/bsp_f1xx_sdio.c **** 	{
 147:drivers/bsp_f1xx_sdio.c **** 		//SDÂç°,ÂèëÈÄÅACMD41 SD_APP_OP_COND,ÂèÇÊï∞‰∏∫:0x80100000
 148:drivers/bsp_f1xx_sdio.c **** 		while ((!validvoltage) && (count < SD_MAX_VOLT_TRIAL)) {
 149:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_APP_CMD, 1, 0);                //ÂèëÈÄÅCMD55,Áü≠ÂìçÂ∫î
 150:drivers/bsp_f1xx_sdio.c **** 			errorstatus = CmdResp1Error(SD_CMD_APP_CMD);        //Á≠âÂæÖR1ÂìçÂ∫î
 151:drivers/bsp_f1xx_sdio.c **** 			if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 152:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_SD_APP_OP_COND, 1, SD_VOLTAGE_WINDOW_SD | SDType);//ÂèëÈÄÅACMD41,Áü≠ÂìçÂ∫î
 153:drivers/bsp_f1xx_sdio.c **** 			errorstatus = CmdResp3Error();                    //Á≠âÂæÖR3ÂìçÂ∫î
 154:drivers/bsp_f1xx_sdio.c **** 			if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 155:drivers/bsp_f1xx_sdio.c **** 			response = SDIO->RESP1;;                            //ÂæóÂà∞ÂìçÂ∫î
 156:drivers/bsp_f1xx_sdio.c **** 			validvoltage = (((response >> 31) == 1) ? 1 : 0);            //Âà§Êñ≠SDÂç°‰∏äÁîµÊòØÂê¶ÂÆåÊàê
 157:drivers/bsp_f1xx_sdio.c **** 			count++;
 158:drivers/bsp_f1xx_sdio.c **** 		}
 159:drivers/bsp_f1xx_sdio.c **** 		if (count >= SD_MAX_VOLT_TRIAL) {
 160:drivers/bsp_f1xx_sdio.c **** 			errorstatus = SD_INVALID_VOLTRANGE;
 161:drivers/bsp_f1xx_sdio.c **** 			return errorstatus;
 162:drivers/bsp_f1xx_sdio.c **** 		}
 163:drivers/bsp_f1xx_sdio.c **** 		if (response &= SD_HIGH_CAPACITY) {
 164:drivers/bsp_f1xx_sdio.c **** 			CardType = SDIO_HIGH_CAPACITY_SD_CARD;
 165:drivers/bsp_f1xx_sdio.c **** 		}
 166:drivers/bsp_f1xx_sdio.c **** 	} else//MMCÂç°
 167:drivers/bsp_f1xx_sdio.c **** 	{
 168:drivers/bsp_f1xx_sdio.c **** 		//MMCÂç°,ÂèëÈÄÅCMD1 SDIO_SEND_OP_COND,ÂèÇÊï∞‰∏∫:0x80FF8000
 169:drivers/bsp_f1xx_sdio.c **** 		while ((!validvoltage) && (count < SD_MAX_VOLT_TRIAL)) {
 170:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_SEND_OP_COND, 1, SD_VOLTAGE_WINDOW_MMC);//ÂèëÈÄÅCMD1,Áü≠ÂìçÂ∫î
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 7


 171:drivers/bsp_f1xx_sdio.c **** 			errorstatus = CmdResp3Error();                    //Á≠âÂæÖR3ÂìçÂ∫î
 172:drivers/bsp_f1xx_sdio.c **** 			if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 173:drivers/bsp_f1xx_sdio.c **** 			response = SDIO->RESP1;;                            //ÂæóÂà∞ÂìçÂ∫î
 174:drivers/bsp_f1xx_sdio.c **** 			validvoltage = (((response >> 31) == 1) ? 1 : 0);
 175:drivers/bsp_f1xx_sdio.c **** 			count++;
 176:drivers/bsp_f1xx_sdio.c **** 		}
 177:drivers/bsp_f1xx_sdio.c **** 		if (count >= SD_MAX_VOLT_TRIAL) {
 178:drivers/bsp_f1xx_sdio.c **** 			errorstatus = SD_INVALID_VOLTRANGE;
 179:drivers/bsp_f1xx_sdio.c **** 			return errorstatus;
 180:drivers/bsp_f1xx_sdio.c **** 		}
 181:drivers/bsp_f1xx_sdio.c **** 		CardType = SDIO_MULTIMEDIA_CARD;
 182:drivers/bsp_f1xx_sdio.c **** 	}
 183:drivers/bsp_f1xx_sdio.c **** 	return (errorstatus);
 184:drivers/bsp_f1xx_sdio.c **** }
 185:drivers/bsp_f1xx_sdio.c **** 
 186:drivers/bsp_f1xx_sdio.c **** //SDÂç° Power OFF
 187:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å;(0,Êó†ÈîôËØØ)
 188:drivers/bsp_f1xx_sdio.c **** SD_Error SD_PowerOFF(void)
 189:drivers/bsp_f1xx_sdio.c **** {
 180              		.loc 1 189 0
 181              		.cfi_startproc
 182              		@ args = 0, pretend = 0, frame = 0
 183              		@ frame_needed = 0, uses_anonymous_args = 0
 184              		@ link register save eliminated.
 190:drivers/bsp_f1xx_sdio.c **** 	SDIO->POWER &= ~(3 << 0);//SDIOÁîµÊ∫êÂÖ≥Èó≠,Êó∂ÈíüÂÅúÊ≠¢
 185              		.loc 1 190 0
 186 0000 034A     		ldr	r2, .L13
 187 0002 1368     		ldr	r3, [r2]
 188 0004 23F00303 		bic	r3, r3, #3
 189 0008 1360     		str	r3, [r2]
 191:drivers/bsp_f1xx_sdio.c **** 	return SD_OK;
 192:drivers/bsp_f1xx_sdio.c **** }
 190              		.loc 1 192 0
 191 000a 0020     		movs	r0, #0
 192 000c 7047     		bx	lr
 193              	.L14:
 194 000e 00BF     		.align	2
 195              	.L13:
 196 0010 00800140 		.word	1073840128
 197              		.cfi_endproc
 198              	.LFE71:
 200              		.section	.text.SD_GetCardInfo,"ax",%progbits
 201              		.align	1
 202              		.global	SD_GetCardInfo
 203              		.syntax unified
 204              		.thumb
 205              		.thumb_func
 206              		.fpu softvfp
 208              	SD_GetCardInfo:
 209              	.LFB73:
 193:drivers/bsp_f1xx_sdio.c **** 
 194:drivers/bsp_f1xx_sdio.c **** //ÂàùÂßãÂåñÊâÄÊúâÁöÑÂç°,Âπ∂ËÆ©Âç°ËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅ
 195:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å
 196:drivers/bsp_f1xx_sdio.c **** SD_Error SD_InitializeCards(void)
 197:drivers/bsp_f1xx_sdio.c **** {
 198:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 199:drivers/bsp_f1xx_sdio.c **** 	u16 rca = 0x01;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 8


 200:drivers/bsp_f1xx_sdio.c **** 	if ((SDIO->POWER & 0X03) == 0)return SD_REQUEST_NOT_APPLICABLE;//Ê£ÄÊü•ÁîµÊ∫êÁä∂ÊÄÅ,Á°Æ‰øù‰∏∫‰∏äÁî
 201:drivers/bsp_f1xx_sdio.c **** 	if (SDIO_SECURE_DIGITAL_IO_CARD != CardType)            //ÈùûSECURE_DIGITAL_IO_CARD
 202:drivers/bsp_f1xx_sdio.c **** 	{
 203:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_ALL_SEND_CID, 3, 0);            //ÂèëÈÄÅCMD2,ÂèñÂæóCID,ÈïøÂìçÂ∫î
 204:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp2Error();                    //Á≠âÂæÖR2ÂìçÂ∫î
 205:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 206:drivers/bsp_f1xx_sdio.c **** 		CID_Tab[0] = SDIO->RESP1;
 207:drivers/bsp_f1xx_sdio.c **** 		CID_Tab[1] = SDIO->RESP2;
 208:drivers/bsp_f1xx_sdio.c **** 		CID_Tab[2] = SDIO->RESP3;
 209:drivers/bsp_f1xx_sdio.c **** 		CID_Tab[3] = SDIO->RESP4;
 210:drivers/bsp_f1xx_sdio.c **** 	}
 211:drivers/bsp_f1xx_sdio.c **** 	if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType) |
 212:drivers/bsp_f1xx_sdio.c **** 		(SDIO_SECURE_DIGITAL_IO_COMBO_CARD == CardType) || (SDIO_HIGH_CAPACITY_SD_CARD == CardType))//Âà§
 213:drivers/bsp_f1xx_sdio.c **** 	{
 214:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SET_REL_ADDR, 1, 0);            //ÂèëÈÄÅCMD3,Áü≠ÂìçÂ∫î
 215:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp6Error(SD_CMD_SET_REL_ADDR, &rca);//Á≠âÂæÖR6ÂìçÂ∫î
 216:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 217:drivers/bsp_f1xx_sdio.c **** 	}
 218:drivers/bsp_f1xx_sdio.c **** 	if (SDIO_MULTIMEDIA_CARD == CardType) {
 219:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SET_REL_ADDR, 1, (u32) (rca << 16));//ÂèëÈÄÅCMD3,Áü≠ÂìçÂ∫î
 220:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp2Error();                    //Á≠âÂæÖR2ÂìçÂ∫î
 221:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 222:drivers/bsp_f1xx_sdio.c **** 	}
 223:drivers/bsp_f1xx_sdio.c **** 	if (SDIO_SECURE_DIGITAL_IO_CARD != CardType)            //ÈùûSECURE_DIGITAL_IO_CARD
 224:drivers/bsp_f1xx_sdio.c **** 	{
 225:drivers/bsp_f1xx_sdio.c **** 		RCA = rca;
 226:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SEND_CSD, 3, (u32) (rca << 16));//ÂèëÈÄÅCMD9+Âç°RCA,ÂèñÂæóCSD,ÈïøÂìçÂ∫î
 227:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp2Error();                    //Á≠âÂæÖR2ÂìçÂ∫î
 228:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 229:drivers/bsp_f1xx_sdio.c **** 		CSD_Tab[0] = SDIO->RESP1;
 230:drivers/bsp_f1xx_sdio.c **** 		CSD_Tab[1] = SDIO->RESP2;
 231:drivers/bsp_f1xx_sdio.c **** 		CSD_Tab[2] = SDIO->RESP3;
 232:drivers/bsp_f1xx_sdio.c **** 		CSD_Tab[3] = SDIO->RESP4;
 233:drivers/bsp_f1xx_sdio.c **** 	}
 234:drivers/bsp_f1xx_sdio.c **** 	return SD_OK;//Âç°ÂàùÂßãÂåñÊàêÂäü
 235:drivers/bsp_f1xx_sdio.c **** }
 236:drivers/bsp_f1xx_sdio.c **** 
 237:drivers/bsp_f1xx_sdio.c **** //ÂæóÂà∞Âç°‰ø°ÊÅØ
 238:drivers/bsp_f1xx_sdio.c **** //cardinfo:Âç°‰ø°ÊÅØÂ≠òÂÇ®Âå∫
 239:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 240:drivers/bsp_f1xx_sdio.c **** SD_Error SD_GetCardInfo(SD_CardInfo *cardinfo)
 241:drivers/bsp_f1xx_sdio.c **** {
 210              		.loc 1 241 0
 211              		.cfi_startproc
 212              		@ args = 0, pretend = 0, frame = 0
 213              		@ frame_needed = 0, uses_anonymous_args = 0
 214              		@ link register save eliminated.
 215              	.LVL20:
 216 0000 F0B4     		push	{r4, r5, r6, r7}
 217              	.LCFI4:
 218              		.cfi_def_cfa_offset 16
 219              		.cfi_offset 4, -16
 220              		.cfi_offset 5, -12
 221              		.cfi_offset 6, -8
 222              		.cfi_offset 7, -4
 223 0002 0346     		mov	r3, r0
 224              	.LVL21:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 9


 242:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 243:drivers/bsp_f1xx_sdio.c **** 	u8 tmp = 0;
 244:drivers/bsp_f1xx_sdio.c **** 	cardinfo->CardType = (u8) CardType;                //Âç°Á±ªÂûã
 225              		.loc 1 244 0
 226 0004 8B4A     		ldr	r2, .L20
 227 0006 1578     		ldrb	r5, [r2]	@ zero_extendqisi2
 228 0008 80F85650 		strb	r5, [r0, #86]
 245:drivers/bsp_f1xx_sdio.c **** 	cardinfo->RCA = (u16) RCA;                            //Âç°RCAÂÄº
 229              		.loc 1 245 0
 230 000c 8A4A     		ldr	r2, .L20+4
 231 000e 1288     		ldrh	r2, [r2]
 232 0010 A0F85420 		strh	r2, [r0, #84]	@ movhi
 246:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CSD_Tab[0] & 0xFF000000) >> 24);
 233              		.loc 1 246 0
 234 0014 894C     		ldr	r4, .L20+8
 235 0016 2268     		ldr	r2, [r4]
 236 0018 100E     		lsrs	r0, r2, #24
 237              	.LVL22:
 238 001a C1B2     		uxtb	r1, r0
 239              	.LVL23:
 247:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.CSDStruct = (tmp & 0xC0) >> 6;        //CSDÁªìÊûÑ
 240              		.loc 1 247 0
 241 001c 8E09     		lsrs	r6, r1, #6
 242 001e 1E70     		strb	r6, [r3]
 248:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.SysSpecVersion = (tmp & 0x3C) >> 2;    //2.0ÂçèËÆÆËøòÊ≤°ÂÆö‰πâËøôÈÉ®ÂàÜ(‰∏∫‰øùÁïô
 243              		.loc 1 248 0
 244 0020 C0F38300 		ubfx	r0, r0, #2, #4
 245 0024 5870     		strb	r0, [r3, #1]
 249:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.Reserved1 = tmp & 0x03;            //2‰∏™‰øùÁïô‰Ωç
 246              		.loc 1 249 0
 247 0026 01F00301 		and	r1, r1, #3
 248              	.LVL24:
 249 002a 9970     		strb	r1, [r3, #2]
 250:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CSD_Tab[0] & 0x00FF0000) >> 16);            //Á¨¨1‰∏™Â≠óËäÇ
 250              		.loc 1 250 0
 251 002c C2F30741 		ubfx	r1, r2, #16, #8
 252              	.LVL25:
 251:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.TAAC = tmp;                        //Êï∞ÊçÆËØªÊó∂Èó¥1
 253              		.loc 1 251 0
 254 0030 D970     		strb	r1, [r3, #3]
 252:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CSD_Tab[0] & 0x0000FF00) >> 8);            //Á¨¨2‰∏™Â≠óËäÇ
 255              		.loc 1 252 0
 256 0032 C2F30721 		ubfx	r1, r2, #8, #8
 257              	.LVL26:
 253:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.NSAC = tmp;                        //Êï∞ÊçÆËØªÊó∂Èó¥2
 258              		.loc 1 253 0
 259 0036 1971     		strb	r1, [r3, #4]
 260              	.LVL27:
 254:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) (CSD_Tab[0] & 0x000000FF);                //Á¨¨3‰∏™Â≠óËäÇ
 255:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.MaxBusClkFrec = tmp;                //‰º†ËæìÈÄüÂ∫¶
 261              		.loc 1 255 0
 262 0038 5A71     		strb	r2, [r3, #5]
 256:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CSD_Tab[1] & 0xFF000000) >> 24);            //Á¨¨4‰∏™Â≠óËäÇ
 263              		.loc 1 256 0
 264 003a 6068     		ldr	r0, [r4, #4]
 265 003c 010E     		lsrs	r1, r0, #24
 266              	.LVL28:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 10


 257:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.CardComdClasses = tmp << 4;        //Âç°Êåá‰ª§Á±ªÈ´òÂõõ‰Ωç
 258:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CSD_Tab[1] & 0x00FF0000) >> 16);            //Á¨¨5‰∏™Â≠óËäÇ
 267              		.loc 1 258 0
 268 003e C0F30744 		ubfx	r4, r0, #16, #8
 269              	.LVL29:
 259:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.CardComdClasses |= (tmp & 0xF0) >> 4;//Âç°Êåá‰ª§Á±ª‰ΩéÂõõ‰Ωç
 270              		.loc 1 259 0
 271 0042 2209     		lsrs	r2, r4, #4
 272 0044 42EA0112 		orr	r2, r2, r1, lsl #4
 273 0048 DA80     		strh	r2, [r3, #6]	@ movhi
 260:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.RdBlockLen = tmp & 0x0F;            //ÊúÄÂ§ßËØªÂèñÊï∞ÊçÆÈïøÂ∫¶
 274              		.loc 1 260 0
 275 004a 04F00F04 		and	r4, r4, #15
 276              	.LVL30:
 277 004e 1C72     		strb	r4, [r3, #8]
 261:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CSD_Tab[1] & 0x0000FF00) >> 8);            //Á¨¨6‰∏™Â≠óËäÇ
 278              		.loc 1 261 0
 279 0050 010A     		lsrs	r1, r0, #8
 280 0052 CAB2     		uxtb	r2, r1
 281              	.LVL31:
 262:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.PartBlockRead = (tmp & 0x80) >> 7;    //ÂÖÅËÆ∏ÂàÜÂùóËØª
 282              		.loc 1 262 0
 283 0054 D609     		lsrs	r6, r2, #7
 284 0056 5E72     		strb	r6, [r3, #9]
 263:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.WrBlockMisalign = (tmp & 0x40) >> 6;    //ÂÜôÂùóÈîô‰Ωç
 285              		.loc 1 263 0
 286 0058 C1F38016 		ubfx	r6, r1, #6, #1
 287 005c 9E72     		strb	r6, [r3, #10]
 264:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.RdBlockMisalign = (tmp & 0x20) >> 5;    //ËØªÂùóÈîô‰Ωç
 288              		.loc 1 264 0
 289 005e C1F34016 		ubfx	r6, r1, #5, #1
 290 0062 DE72     		strb	r6, [r3, #11]
 265:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.DSRImpl = (tmp & 0x10) >> 4;
 291              		.loc 1 265 0
 292 0064 C1F30016 		ubfx	r6, r1, #4, #1
 293 0068 1E73     		strb	r6, [r3, #12]
 266:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.Reserved2 = 0;                    //‰øùÁïô
 294              		.loc 1 266 0
 295 006a 0026     		movs	r6, #0
 296 006c 5E73     		strb	r6, [r3, #13]
 267:drivers/bsp_f1xx_sdio.c **** 	if ((CardType == SDIO_STD_CAPACITY_SD_CARD_V1_1) || (CardType == SDIO_STD_CAPACITY_SD_CARD_V2_0) |
 297              		.loc 1 267 0
 298 006e 012D     		cmp	r5, #1
 299 0070 1AD9     		bls	.L16
 300              		.loc 1 267 0 is_stmt 0 discriminator 1
 301 0072 032D     		cmp	r5, #3
 302 0074 18D0     		beq	.L16
 268:drivers/bsp_f1xx_sdio.c **** 		(SDIO_MULTIMEDIA_CARD == CardType))//Ê†áÂáÜ1.1/2.0Âç°/MMCÂç°
 269:drivers/bsp_f1xx_sdio.c **** 	{
 270:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.DeviceSize = (tmp & 0x03) << 10;    //C_SIZE(12‰Ωç)
 271:drivers/bsp_f1xx_sdio.c **** 		tmp = (u8) (CSD_Tab[1] & 0x000000FF);            //Á¨¨7‰∏™Â≠óËäÇ
 272:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.DeviceSize |= (tmp) << 2;
 273:drivers/bsp_f1xx_sdio.c **** 		tmp = (u8) ((CSD_Tab[2] & 0xFF000000) >> 24);        //Á¨¨8‰∏™Â≠óËäÇ
 274:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.DeviceSize |= (tmp & 0xC0) >> 6;
 275:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.MaxRdCurrentVDDMin = (tmp & 0x38) >> 3;
 276:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.MaxRdCurrentVDDMax = (tmp & 0x07);
 277:drivers/bsp_f1xx_sdio.c **** 		tmp = (u8) ((CSD_Tab[2] & 0x00FF0000) >> 16);        //Á¨¨9‰∏™Â≠óËäÇ
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 11


 278:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.MaxWrCurrentVDDMin = (tmp & 0xE0) >> 5;
 279:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.MaxWrCurrentVDDMax = (tmp & 0x1C) >> 2;
 280:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.DeviceSizeMul = (tmp & 0x03) << 1;//C_SIZE_MULT
 281:drivers/bsp_f1xx_sdio.c **** 		tmp = (u8) ((CSD_Tab[2] & 0x0000FF00) >> 8);        //Á¨¨10‰∏™Â≠óËäÇ
 282:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.DeviceSizeMul |= (tmp & 0x80) >> 7;
 283:drivers/bsp_f1xx_sdio.c **** 		cardinfo->CardCapacity = (cardinfo->SD_csd.DeviceSize + 1);//ËÆ°ÁÆóÂç°ÂÆπÈáè
 284:drivers/bsp_f1xx_sdio.c **** 		cardinfo->CardCapacity *= (1 << (cardinfo->SD_csd.DeviceSizeMul + 2));
 285:drivers/bsp_f1xx_sdio.c **** 		cardinfo->CardBlockSize = 1 << (cardinfo->SD_csd.RdBlockLen);//ÂùóÂ§ßÂ∞è
 286:drivers/bsp_f1xx_sdio.c **** 		cardinfo->CardCapacity *= cardinfo->CardBlockSize;
 287:drivers/bsp_f1xx_sdio.c **** 	} else if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)    //È´òÂÆπÈáèÂç°
 303              		.loc 1 287 0 is_stmt 1
 304 0076 022D     		cmp	r5, #2
 305 0078 4DD1     		bne	.L18
 306              	.LVL32:
 288:drivers/bsp_f1xx_sdio.c **** 	{
 289:drivers/bsp_f1xx_sdio.c **** 		tmp = (u8) (CSD_Tab[1] & 0x000000FF);        //Á¨¨7‰∏™Â≠óËäÇ
 290:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.DeviceSize = (tmp & 0x3F) << 16;//C_SIZE
 307              		.loc 1 290 0
 308 007a 0104     		lsls	r1, r0, #16
 309 007c 01F47C11 		and	r1, r1, #4128768
 291:drivers/bsp_f1xx_sdio.c **** 		tmp = (u8) ((CSD_Tab[2] & 0xFF000000) >> 24);    //Á¨¨8‰∏™Â≠óËäÇ
 310              		.loc 1 291 0
 311 0080 6E4A     		ldr	r2, .L20+8
 312 0082 9268     		ldr	r2, [r2, #8]
 313 0084 100E     		lsrs	r0, r2, #24
 314              	.LVL33:
 292:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.DeviceSize |= (tmp << 8);
 315              		.loc 1 292 0
 316 0086 41EA0021 		orr	r1, r1, r0, lsl #8
 317              	.LVL34:
 293:drivers/bsp_f1xx_sdio.c **** 		tmp = (u8) ((CSD_Tab[2] & 0x00FF0000) >> 16);    //Á¨¨9‰∏™Â≠óËäÇ
 294:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.DeviceSize |= (tmp);
 318              		.loc 1 294 0
 319 008a C2F30740 		ubfx	r0, r2, #16, #8
 320 008e 0143     		orrs	r1, r1, r0
 321 0090 1961     		str	r1, [r3, #16]
 295:drivers/bsp_f1xx_sdio.c **** 		tmp = (u8) ((CSD_Tab[2] & 0x0000FF00) >> 8);    //Á¨¨10‰∏™Â≠óËäÇ
 322              		.loc 1 295 0
 323 0092 C2F30722 		ubfx	r2, r2, #8, #8
 324              	.LVL35:
 296:drivers/bsp_f1xx_sdio.c **** 		cardinfo->CardCapacity = (long long) (cardinfo->SD_csd.DeviceSize + 1) * 512 * 1024;//ËÆ°ÁÆóÂç°ÂÆ
 325              		.loc 1 296 0
 326 0096 0131     		adds	r1, r1, #1
 327 0098 480B     		lsrs	r0, r1, #13
 328 009a C904     		lsls	r1, r1, #19
 329 009c 9964     		str	r1, [r3, #72]
 330 009e D864     		str	r0, [r3, #76]
 297:drivers/bsp_f1xx_sdio.c **** 		cardinfo->CardBlockSize = 512;            //ÂùóÂ§ßÂ∞èÂõ∫ÂÆö‰∏∫512Â≠óËäÇ
 331              		.loc 1 297 0
 332 00a0 4FF40071 		mov	r1, #512
 333 00a4 1965     		str	r1, [r3, #80]
 334 00a6 36E0     		b	.L18
 335              	.L16:
 270:drivers/bsp_f1xx_sdio.c **** 		tmp = (u8) (CSD_Tab[1] & 0x000000FF);            //Á¨¨7‰∏™Â≠óËäÇ
 336              		.loc 1 270 0
 337 00a8 8902     		lsls	r1, r1, #10
 338 00aa 01F44061 		and	r1, r1, #3072
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 12


 339              	.LVL36:
 272:drivers/bsp_f1xx_sdio.c **** 		tmp = (u8) ((CSD_Tab[2] & 0xFF000000) >> 24);        //Á¨¨8‰∏™Â≠óËäÇ
 340              		.loc 1 272 0
 341 00ae 8000     		lsls	r0, r0, #2
 342              	.LVL37:
 343 00b0 00F47F70 		and	r0, r0, #1020
 344 00b4 0143     		orrs	r1, r1, r0
 273:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.DeviceSize |= (tmp & 0xC0) >> 6;
 345              		.loc 1 273 0
 346 00b6 614A     		ldr	r2, .L20+8
 347 00b8 9268     		ldr	r2, [r2, #8]
 348 00ba 150E     		lsrs	r5, r2, #24
 349 00bc E8B2     		uxtb	r0, r5
 350              	.LVL38:
 274:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.MaxRdCurrentVDDMin = (tmp & 0x38) >> 3;
 351              		.loc 1 274 0
 352 00be 41EA9011 		orr	r1, r1, r0, lsr #6
 353 00c2 1961     		str	r1, [r3, #16]
 275:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.MaxRdCurrentVDDMax = (tmp & 0x07);
 354              		.loc 1 275 0
 355 00c4 C5F3C205 		ubfx	r5, r5, #3, #3
 356 00c8 1D75     		strb	r5, [r3, #20]
 276:drivers/bsp_f1xx_sdio.c **** 		tmp = (u8) ((CSD_Tab[2] & 0x00FF0000) >> 16);        //Á¨¨9‰∏™Â≠óËäÇ
 357              		.loc 1 276 0
 358 00ca 00F00700 		and	r0, r0, #7
 359              	.LVL39:
 360 00ce 5875     		strb	r0, [r3, #21]
 277:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.MaxWrCurrentVDDMin = (tmp & 0xE0) >> 5;
 361              		.loc 1 277 0
 362 00d0 100C     		lsrs	r0, r2, #16
 363              	.LVL40:
 278:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.MaxWrCurrentVDDMax = (tmp & 0x1C) >> 2;
 364              		.loc 1 278 0
 365 00d2 C0F34215 		ubfx	r5, r0, #5, #3
 366 00d6 9D75     		strb	r5, [r3, #22]
 279:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.DeviceSizeMul = (tmp & 0x03) << 1;//C_SIZE_MULT
 367              		.loc 1 279 0
 368 00d8 C0F38205 		ubfx	r5, r0, #2, #3
 369 00dc DD75     		strb	r5, [r3, #23]
 280:drivers/bsp_f1xx_sdio.c **** 		tmp = (u8) ((CSD_Tab[2] & 0x0000FF00) >> 8);        //Á¨¨10‰∏™Â≠óËäÇ
 370              		.loc 1 280 0
 371 00de 4000     		lsls	r0, r0, #1
 372              	.LVL41:
 373 00e0 00F00600 		and	r0, r0, #6
 281:drivers/bsp_f1xx_sdio.c **** 		cardinfo->SD_csd.DeviceSizeMul |= (tmp & 0x80) >> 7;
 374              		.loc 1 281 0
 375 00e4 C2F30722 		ubfx	r2, r2, #8, #8
 376              	.LVL42:
 282:drivers/bsp_f1xx_sdio.c **** 		cardinfo->CardCapacity = (cardinfo->SD_csd.DeviceSize + 1);//ËÆ°ÁÆóÂç°ÂÆπÈáè
 377              		.loc 1 282 0
 378 00e8 40EAD210 		orr	r0, r0, r2, lsr #7
 379 00ec 1876     		strb	r0, [r3, #24]
 283:drivers/bsp_f1xx_sdio.c **** 		cardinfo->CardCapacity *= (1 << (cardinfo->SD_csd.DeviceSizeMul + 2));
 380              		.loc 1 283 0
 381 00ee 01F1010C 		add	ip, r1, #1
 284:drivers/bsp_f1xx_sdio.c **** 		cardinfo->CardBlockSize = 1 << (cardinfo->SD_csd.RdBlockLen);//ÂùóÂ§ßÂ∞è
 382              		.loc 1 284 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 13


 383 00f2 0230     		adds	r0, r0, #2
 384 00f4 0125     		movs	r5, #1
 385 00f6 05FA00F0 		lsl	r0, r5, r0
 386 00fa C717     		asrs	r7, r0, #31
 387 00fc ACFB0001 		umull	r0, r1, ip, r0
 388 0100 0CFB0711 		mla	r1, ip, r7, r1
 285:drivers/bsp_f1xx_sdio.c **** 		cardinfo->CardCapacity *= cardinfo->CardBlockSize;
 389              		.loc 1 285 0
 390 0104 05FA04F4 		lsl	r4, r5, r4
 391 0108 1C65     		str	r4, [r3, #80]
 286:drivers/bsp_f1xx_sdio.c **** 	} else if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)    //È´òÂÆπÈáèÂç°
 392              		.loc 1 286 0
 393 010a A0FB0467 		umull	r6, r7, r0, r4
 394 010e 04FB0177 		mla	r7, r4, r1, r7
 395 0112 C3E91267 		strd	r6, [r3, #72]
 396              	.L18:
 298:drivers/bsp_f1xx_sdio.c **** 	}
 299:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.EraseGrSize = (tmp & 0x40) >> 6;
 397              		.loc 1 299 0
 398 0116 C2F38011 		ubfx	r1, r2, #6, #1
 399 011a 5976     		strb	r1, [r3, #25]
 300:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.EraseGrMul = (tmp & 0x3F) << 1;
 400              		.loc 1 300 0
 401 011c 5200     		lsls	r2, r2, #1
 402              	.LVL43:
 403 011e 02F07E02 		and	r2, r2, #126
 301:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) (CSD_Tab[2] & 0x000000FF);            //Á¨¨11‰∏™Â≠óËäÇ
 404              		.loc 1 301 0
 405 0122 4648     		ldr	r0, .L20+8
 406 0124 017A     		ldrb	r1, [r0, #8]	@ zero_extendqisi2
 407              	.LVL44:
 302:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.EraseGrMul |= (tmp & 0x80) >> 7;
 408              		.loc 1 302 0
 409 0126 42EAD112 		orr	r2, r2, r1, lsr #7
 410 012a 9A76     		strb	r2, [r3, #26]
 303:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.WrProtectGrSize = (tmp & 0x7F);
 411              		.loc 1 303 0
 412 012c 01F07F01 		and	r1, r1, #127
 413              	.LVL45:
 414 0130 D976     		strb	r1, [r3, #27]
 304:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CSD_Tab[3] & 0xFF000000) >> 24);        //Á¨¨12‰∏™Â≠óËäÇ
 415              		.loc 1 304 0
 416 0132 C168     		ldr	r1, [r0, #12]
 417 0134 0A0E     		lsrs	r2, r1, #24
 418              	.LVL46:
 305:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.WrProtectGrEnable = (tmp & 0x80) >> 7;
 419              		.loc 1 305 0
 420 0136 D009     		lsrs	r0, r2, #7
 421 0138 1877     		strb	r0, [r3, #28]
 306:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.ManDeflECC = (tmp & 0x60) >> 5;
 422              		.loc 1 306 0
 423 013a C2F34110 		ubfx	r0, r2, #5, #2
 424 013e 5877     		strb	r0, [r3, #29]
 307:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.WrSpeedFact = (tmp & 0x1C) >> 2;
 425              		.loc 1 307 0
 426 0140 C2F38200 		ubfx	r0, r2, #2, #3
 427 0144 9877     		strb	r0, [r3, #30]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 14


 308:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.MaxWrBlockLen = (tmp & 0x03) << 2;
 428              		.loc 1 308 0
 429 0146 9200     		lsls	r2, r2, #2
 430              	.LVL47:
 431 0148 02F00C02 		and	r2, r2, #12
 309:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CSD_Tab[3] & 0x00FF0000) >> 16);        //Á¨¨13‰∏™Â≠óËäÇ
 432              		.loc 1 309 0
 433 014c 080C     		lsrs	r0, r1, #16
 434 014e C4B2     		uxtb	r4, r0
 435              	.LVL48:
 310:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.MaxWrBlockLen |= (tmp & 0xC0) >> 6;
 436              		.loc 1 310 0
 437 0150 42EA9412 		orr	r2, r2, r4, lsr #6
 438 0154 DA77     		strb	r2, [r3, #31]
 311:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.WriteBlockPaPartial = (tmp & 0x20) >> 5;
 439              		.loc 1 311 0
 440 0156 C0F34010 		ubfx	r0, r0, #5, #1
 441 015a 83F82000 		strb	r0, [r3, #32]
 312:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.Reserved3 = 0;
 442              		.loc 1 312 0
 443 015e 0020     		movs	r0, #0
 444 0160 83F82100 		strb	r0, [r3, #33]
 313:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.ContentProtectAppli = (tmp & 0x01);
 445              		.loc 1 313 0
 446 0164 04F00104 		and	r4, r4, #1
 447              	.LVL49:
 448 0168 83F82240 		strb	r4, [r3, #34]
 314:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CSD_Tab[3] & 0x0000FF00) >> 8);        //Á¨¨14‰∏™Â≠óËäÇ
 449              		.loc 1 314 0
 450 016c 0A0A     		lsrs	r2, r1, #8
 451 016e D4B2     		uxtb	r4, r2
 452              	.LVL50:
 315:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.FileFormatGrouop = (tmp & 0x80) >> 7;
 453              		.loc 1 315 0
 454 0170 E509     		lsrs	r5, r4, #7
 455 0172 83F82350 		strb	r5, [r3, #35]
 316:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.CopyFlag = (tmp & 0x40) >> 6;
 456              		.loc 1 316 0
 457 0176 C2F38015 		ubfx	r5, r2, #6, #1
 458 017a 83F82450 		strb	r5, [r3, #36]
 317:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.PermWrProtect = (tmp & 0x20) >> 5;
 459              		.loc 1 317 0
 460 017e C2F34015 		ubfx	r5, r2, #5, #1
 461 0182 83F82550 		strb	r5, [r3, #37]
 318:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.TempWrProtect = (tmp & 0x10) >> 4;
 462              		.loc 1 318 0
 463 0186 C2F30015 		ubfx	r5, r2, #4, #1
 464 018a 83F82650 		strb	r5, [r3, #38]
 319:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.FileFormat = (tmp & 0x0C) >> 2;
 465              		.loc 1 319 0
 466 018e C2F38102 		ubfx	r2, r2, #2, #2
 467 0192 83F82720 		strb	r2, [r3, #39]
 320:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.ECC = (tmp & 0x03);
 468              		.loc 1 320 0
 469 0196 04F00304 		and	r4, r4, #3
 470              	.LVL51:
 471 019a 83F82840 		strb	r4, [r3, #40]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 15


 472              	.LVL52:
 321:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) (CSD_Tab[3] & 0x000000FF);            //Á¨¨15‰∏™Â≠óËäÇ
 322:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.CSD_CRC = (tmp & 0xFE) >> 1;
 473              		.loc 1 322 0
 474 019e C1F34602 		ubfx	r2, r1, #1, #7
 475 01a2 83F82920 		strb	r2, [r3, #41]
 323:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_csd.Reserved4 = 1;
 476              		.loc 1 323 0
 477 01a6 0124     		movs	r4, #1
 478 01a8 83F82A40 		strb	r4, [r3, #42]
 324:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CID_Tab[0] & 0xFF000000) >> 24);        //Á¨¨0‰∏™Â≠óËäÇ
 479              		.loc 1 324 0
 480 01ac 244D     		ldr	r5, .L20+12
 481 01ae 2968     		ldr	r1, [r5]
 482              	.LVL53:
 483 01b0 0A0E     		lsrs	r2, r1, #24
 484              	.LVL54:
 325:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ManufacturerID = tmp;
 485              		.loc 1 325 0
 486 01b2 83F82C20 		strb	r2, [r3, #44]
 326:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CID_Tab[0] & 0x00FF0000) >> 16);        //Á¨¨1‰∏™Â≠óËäÇ
 487              		.loc 1 326 0
 488 01b6 C1F30746 		ubfx	r6, r1, #16, #8
 489              	.LVL55:
 327:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.OEM_AppliID = tmp << 8;
 328:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CID_Tab[0] & 0x000000FF00) >> 8);        //Á¨¨2‰∏™Â≠óËäÇ
 490              		.loc 1 328 0
 491 01ba C1F30722 		ubfx	r2, r1, #8, #8
 492              	.LVL56:
 329:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.OEM_AppliID |= tmp;
 493              		.loc 1 329 0
 494 01be 42EA0622 		orr	r2, r2, r6, lsl #8
 495              	.LVL57:
 496 01c2 DA85     		strh	r2, [r3, #46]	@ movhi
 497              	.LVL58:
 330:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) (CID_Tab[0] & 0x000000FF);            //Á¨¨3‰∏™Â≠óËäÇ
 331:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ProdName1 = tmp << 24;
 332:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CID_Tab[1] & 0xFF000000) >> 24);        //Á¨¨4‰∏™Â≠óËäÇ
 498              		.loc 1 332 0
 499 01c4 6E68     		ldr	r6, [r5, #4]
 500 01c6 320E     		lsrs	r2, r6, #24
 501              	.LVL59:
 333:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ProdName1 |= tmp << 16;
 502              		.loc 1 333 0
 503 01c8 1204     		lsls	r2, r2, #16
 504              	.LVL60:
 505 01ca 42EA0162 		orr	r2, r2, r1, lsl #24
 334:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CID_Tab[1] & 0x00FF0000) >> 16);        //Á¨¨5‰∏™Â≠óËäÇ
 506              		.loc 1 334 0
 507 01ce 310C     		lsrs	r1, r6, #16
 508              	.LVL61:
 335:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ProdName1 |= tmp << 8;
 509              		.loc 1 335 0
 510 01d0 0902     		lsls	r1, r1, #8
 511              	.LVL62:
 512 01d2 89B2     		uxth	r1, r1
 513 01d4 0A43     		orrs	r2, r2, r1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 16


 514              	.LVL63:
 336:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CID_Tab[1] & 0x0000FF00) >> 8);        //Á¨¨6‰∏™Â≠óËäÇ
 337:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ProdName1 |= tmp;
 515              		.loc 1 337 0
 516 01d6 C6F30721 		ubfx	r1, r6, #8, #8
 517 01da 0A43     		orrs	r2, r2, r1
 518 01dc 1A63     		str	r2, [r3, #48]
 519              	.LVL64:
 338:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) (CID_Tab[1] & 0x000000FF);            //Á¨¨7‰∏™Â≠óËäÇ
 339:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ProdName2 = tmp;
 520              		.loc 1 339 0
 521 01de 83F83460 		strb	r6, [r3, #52]
 340:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CID_Tab[2] & 0xFF000000) >> 24);        //Á¨¨8‰∏™Â≠óËäÇ
 522              		.loc 1 340 0
 523 01e2 A968     		ldr	r1, [r5, #8]
 524 01e4 0A0E     		lsrs	r2, r1, #24
 525              	.LVL65:
 341:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ProdRev = tmp;
 526              		.loc 1 341 0
 527 01e6 83F83520 		strb	r2, [r3, #53]
 342:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CID_Tab[2] & 0x00FF0000) >> 16);        //Á¨¨9‰∏™Â≠óËäÇ
 528              		.loc 1 342 0
 529 01ea 0E0C     		lsrs	r6, r1, #16
 530              	.LVL66:
 343:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ProdSN = tmp << 24;
 344:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CID_Tab[2] & 0x0000FF00) >> 8);        //Á¨¨10‰∏™Â≠óËäÇ
 531              		.loc 1 344 0
 532 01ec 0A0A     		lsrs	r2, r1, #8
 533              	.LVL67:
 345:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ProdSN |= tmp << 16;
 534              		.loc 1 345 0
 535 01ee 1204     		lsls	r2, r2, #16
 536              	.LVL68:
 537 01f0 02F47F02 		and	r2, r2, #16711680
 538 01f4 42EA0662 		orr	r2, r2, r6, lsl #24
 539              	.LVL69:
 346:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) (CID_Tab[2] & 0x000000FF);            //Á¨¨11‰∏™Â≠óËäÇ
 347:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ProdSN |= tmp << 8;
 540              		.loc 1 347 0
 541 01f8 0902     		lsls	r1, r1, #8
 542              	.LVL70:
 543 01fa 89B2     		uxth	r1, r1
 544 01fc 0A43     		orrs	r2, r2, r1
 348:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CID_Tab[3] & 0xFF000000) >> 24);        //Á¨¨12‰∏™Â≠óËäÇ
 545              		.loc 1 348 0
 546 01fe E968     		ldr	r1, [r5, #12]
 547              	.LVL71:
 349:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ProdSN |= tmp;
 548              		.loc 1 349 0
 549 0200 42EA1162 		orr	r2, r2, r1, lsr #24
 550 0204 9A63     		str	r2, [r3, #56]
 350:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CID_Tab[3] & 0x00FF0000) >> 16);        //Á¨¨13‰∏™Â≠óËäÇ
 551              		.loc 1 350 0
 552 0206 0A0C     		lsrs	r2, r1, #16
 553              	.LVL72:
 351:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.Reserved1 |= (tmp & 0xF0) >> 4;
 554              		.loc 1 351 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 17


 555 0208 C2F30315 		ubfx	r5, r2, #4, #4
 556 020c 93F83C60 		ldrb	r6, [r3, #60]	@ zero_extendqisi2
 557 0210 3543     		orrs	r5, r5, r6
 558 0212 83F83C50 		strb	r5, [r3, #60]
 352:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ManufactDate = (tmp & 0x0F) << 8;
 559              		.loc 1 352 0
 560 0216 1202     		lsls	r2, r2, #8
 561              	.LVL73:
 562 0218 02F47062 		and	r2, r2, #3840
 353:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) ((CID_Tab[3] & 0x0000FF00) >> 8);        //Á¨¨14‰∏™Â≠óËäÇ
 563              		.loc 1 353 0
 564 021c C1F30725 		ubfx	r5, r1, #8, #8
 565              	.LVL74:
 354:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.ManufactDate |= tmp;
 566              		.loc 1 354 0
 567 0220 2A43     		orrs	r2, r2, r5
 568 0222 DA87     		strh	r2, [r3, #62]	@ movhi
 569              	.LVL75:
 355:drivers/bsp_f1xx_sdio.c **** 	tmp = (u8) (CID_Tab[3] & 0x000000FF);            //Á¨¨15‰∏™Â≠óËäÇ
 356:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.CID_CRC = (tmp & 0xFE) >> 1;
 570              		.loc 1 356 0
 571 0224 C1F34601 		ubfx	r1, r1, #1, #7
 572              	.LVL76:
 573 0228 83F84010 		strb	r1, [r3, #64]
 357:drivers/bsp_f1xx_sdio.c **** 	cardinfo->SD_cid.Reserved2 = 1;
 574              		.loc 1 357 0
 575 022c 83F84140 		strb	r4, [r3, #65]
 358:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 359:drivers/bsp_f1xx_sdio.c **** }
 576              		.loc 1 359 0
 577 0230 F0BC     		pop	{r4, r5, r6, r7}
 578              	.LCFI5:
 579              		.cfi_restore 7
 580              		.cfi_restore 6
 581              		.cfi_restore 5
 582              		.cfi_restore 4
 583              		.cfi_def_cfa_offset 0
 584 0232 7047     		bx	lr
 585              	.L21:
 586              		.align	2
 587              	.L20:
 588 0234 00000000 		.word	.LANCHOR0
 589 0238 00000000 		.word	.LANCHOR1
 590 023c 00000000 		.word	.LANCHOR2
 591 0240 00000000 		.word	.LANCHOR3
 592              		.cfi_endproc
 593              	.LFE73:
 595              		.section	.text.SD_SetDeviceMode,"ax",%progbits
 596              		.align	1
 597              		.global	SD_SetDeviceMode
 598              		.syntax unified
 599              		.thumb
 600              		.thumb_func
 601              		.fpu softvfp
 603              	SD_SetDeviceMode:
 604              	.LFB75:
 360:drivers/bsp_f1xx_sdio.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 18


 361:drivers/bsp_f1xx_sdio.c **** //ËÆæÁΩÆSDIOÊÄªÁ∫øÂÆΩÂ∫¶(MMCÂç°‰∏çÊîØÊåÅ4bitÊ®°Âºè)
 362:drivers/bsp_f1xx_sdio.c **** //wmode:‰ΩçÂÆΩÊ®°Âºè.0,1‰ΩçÊï∞ÊçÆÂÆΩÂ∫¶;1,4‰ΩçÊï∞ÊçÆÂÆΩÂ∫¶;2,8‰ΩçÊï∞ÊçÆÂÆΩÂ∫¶
 363:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:SDÂç°ÈîôËØØÁä∂ÊÄÅ
 364:drivers/bsp_f1xx_sdio.c **** SD_Error SD_EnableWideBusOperation(u32 wmode)
 365:drivers/bsp_f1xx_sdio.c **** {
 366:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 367:drivers/bsp_f1xx_sdio.c **** 	if (SDIO_MULTIMEDIA_CARD == CardType)return SD_UNSUPPORTED_FEATURE;//MMCÂç°‰∏çÊîØÊåÅ
 368:drivers/bsp_f1xx_sdio.c **** 	else if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardTy
 369:drivers/bsp_f1xx_sdio.c **** 			 (SDIO_HIGH_CAPACITY_SD_CARD == CardType)) {
 370:drivers/bsp_f1xx_sdio.c **** 		if (wmode >= 2)return SD_UNSUPPORTED_FEATURE;//‰∏çÊîØÊåÅ8‰ΩçÊ®°Âºè
 371:drivers/bsp_f1xx_sdio.c **** 		else {
 372:drivers/bsp_f1xx_sdio.c **** 			errorstatus = SDEnWideBus(wmode);
 373:drivers/bsp_f1xx_sdio.c **** 			if (SD_OK == errorstatus) {
 374:drivers/bsp_f1xx_sdio.c **** 				SDIO->CLKCR &= ~(3 << 11);        //Ê∏ÖÈô§‰πãÂâçÁöÑ‰ΩçÂÆΩËÆæÁΩÆ
 375:drivers/bsp_f1xx_sdio.c **** 				SDIO->CLKCR |= (u16) wmode << 11;//1‰Ωç/4‰ΩçÊÄªÁ∫øÂÆΩÂ∫¶
 376:drivers/bsp_f1xx_sdio.c **** 				SDIO->CLKCR |= 0 << 14;            //‰∏çÂºÄÂêØÁ°¨‰ª∂ÊµÅÊéßÂà∂
 377:drivers/bsp_f1xx_sdio.c **** 			}
 378:drivers/bsp_f1xx_sdio.c **** 		}
 379:drivers/bsp_f1xx_sdio.c **** 	}
 380:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 381:drivers/bsp_f1xx_sdio.c **** }
 382:drivers/bsp_f1xx_sdio.c **** 
 383:drivers/bsp_f1xx_sdio.c **** //ËÆæÁΩÆSDÂç°Â∑•‰ΩúÊ®°Âºè
 384:drivers/bsp_f1xx_sdio.c **** //Mode:
 385:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 386:drivers/bsp_f1xx_sdio.c **** SD_Error SD_SetDeviceMode(u32 Mode)
 387:drivers/bsp_f1xx_sdio.c **** {
 605              		.loc 1 387 0
 606              		.cfi_startproc
 607              		@ args = 0, pretend = 0, frame = 0
 608              		@ frame_needed = 0, uses_anonymous_args = 0
 609              		@ link register save eliminated.
 610              	.LVL77:
 388:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 389:drivers/bsp_f1xx_sdio.c **** 	if ((Mode == SD_DMA_MODE) || (Mode == SD_POLLING_MODE))DeviceMode = Mode;
 611              		.loc 1 389 0
 612 0000 0128     		cmp	r0, #1
 613 0002 03D8     		bhi	.L24
 614              		.loc 1 389 0 is_stmt 0 discriminator 1
 615 0004 024B     		ldr	r3, .L25
 616 0006 1870     		strb	r0, [r3]
 388:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 617              		.loc 1 388 0 is_stmt 1 discriminator 1
 618 0008 0020     		movs	r0, #0
 619              	.LVL78:
 620 000a 7047     		bx	lr
 621              	.LVL79:
 622              	.L24:
 390:drivers/bsp_f1xx_sdio.c **** 	else errorstatus = SD_INVALID_PARAMETER;
 623              		.loc 1 390 0
 624 000c 2620     		movs	r0, #38
 625              	.LVL80:
 391:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 392:drivers/bsp_f1xx_sdio.c **** }
 626              		.loc 1 392 0
 627 000e 7047     		bx	lr
 628              	.L26:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 19


 629              		.align	2
 630              	.L25:
 631 0010 00000000 		.word	.LANCHOR4
 632              		.cfi_endproc
 633              	.LFE75:
 635              		.section	.text.CmdError,"ax",%progbits
 636              		.align	1
 637              		.global	CmdError
 638              		.syntax unified
 639              		.thumb
 640              		.thumb_func
 641              		.fpu softvfp
 643              	CmdError:
 644              	.LFB83:
 393:drivers/bsp_f1xx_sdio.c **** 
 394:drivers/bsp_f1xx_sdio.c **** //ÈÄâÂç°
 395:drivers/bsp_f1xx_sdio.c **** //ÂèëÈÄÅCMD7,ÈÄâÊã©Áõ∏ÂØπÂú∞ÂùÄ(rca)‰∏∫addrÁöÑÂç°,ÂèñÊ∂àÂÖ∂‰ªñÂç°.Â¶ÇÊûú‰∏∫0,ÂàôÈÉΩ‰∏çÈÄâÊã©.
 396:drivers/bsp_f1xx_sdio.c **** //addr:Âç°ÁöÑRCAÂú∞ÂùÄ
 397:drivers/bsp_f1xx_sdio.c **** SD_Error SD_SelectDeselect(u32 addr)
 398:drivers/bsp_f1xx_sdio.c **** {
 399:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_SEL_DESEL_CARD, 1, addr);    //ÂèëÈÄÅCMD7,ÈÄâÊã©Âç°,Áü≠ÂìçÂ∫î
 400:drivers/bsp_f1xx_sdio.c **** 	return CmdResp1Error(SD_CMD_SEL_DESEL_CARD);
 401:drivers/bsp_f1xx_sdio.c **** }
 402:drivers/bsp_f1xx_sdio.c **** 
 403:drivers/bsp_f1xx_sdio.c **** //SDÂç°ËØªÂèñ‰∏Ä‰∏™Âùó
 404:drivers/bsp_f1xx_sdio.c **** //buf:ËØªÊï∞ÊçÆÁºìÂ≠òÂå∫(ÂøÖÈ°ª4Â≠óËäÇÂØπÈΩê!!)
 405:drivers/bsp_f1xx_sdio.c **** //addr:ËØªÂèñÂú∞ÂùÄ
 406:drivers/bsp_f1xx_sdio.c **** //blksize:ÂùóÂ§ßÂ∞è
 407:drivers/bsp_f1xx_sdio.c **** SD_Error SD_ReadBlock(u8 *buf, long long addr, u16 blksize)
 408:drivers/bsp_f1xx_sdio.c **** {
 409:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 410:drivers/bsp_f1xx_sdio.c **** 	u8 power;
 411:drivers/bsp_f1xx_sdio.c **** 	u32 count = 0, *tempbuff = (u32 *) buf;//ËΩ¨Êç¢‰∏∫u32ÊåáÈíà
 412:drivers/bsp_f1xx_sdio.c **** 	u32 timeout = SDIO_DATATIMEOUT;
 413:drivers/bsp_f1xx_sdio.c **** 	if (NULL == buf)return SD_INVALID_PARAMETER;
 414:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = 0x0;    //Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 415:drivers/bsp_f1xx_sdio.c **** 	if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 416:drivers/bsp_f1xx_sdio.c **** 	{
 417:drivers/bsp_f1xx_sdio.c **** 		blksize = 512;
 418:drivers/bsp_f1xx_sdio.c **** 		addr >>= 9;
 419:drivers/bsp_f1xx_sdio.c **** 	}
 420:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Data_Cfg(SD_DATATIMEOUT, 0, 0, 0);    //Ê∏ÖÈô§DPSMÁä∂ÊÄÅÊú∫ÈÖçÁΩÆ
 421:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->RESP1 & SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 422:drivers/bsp_f1xx_sdio.c **** 	if ((blksize > 0) && (blksize <= 2048) && ((blksize & (blksize - 1)) == 0)) {
 423:drivers/bsp_f1xx_sdio.c **** 		power = convert_from_bytes_to_power_of_two(blksize);
 424:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN, 1, blksize);    //ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü≠
 425:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);    //Á≠âÂæÖR1ÂìçÂ∫î
 426:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 427:drivers/bsp_f1xx_sdio.c **** 	} else return SD_INVALID_PARAMETER;
 428:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Data_Cfg(SD_DATATIMEOUT, blksize, power, 1);    //blksize,Âç°Âà∞ÊéßÂà∂Âô®
 429:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_READ_SINGLE_BLOCK, 1, addr);        //ÂèëÈÄÅCMD17+‰ªéaddrÂú∞ÂùÄÂá∫ËØªÂèñÊï∞Êç
 430:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_READ_SINGLE_BLOCK);//Á≠âÂæÖR1ÂìçÂ∫î
 431:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;        //ÂìçÂ∫îÈîôËØØ
 432:drivers/bsp_f1xx_sdio.c **** 	if (DeviceMode == SD_POLLING_MODE)                        //Êü•ËØ¢Ê®°Âºè,ËΩÆËØ¢Êï∞ÊçÆ
 433:drivers/bsp_f1xx_sdio.c **** 	{
 434:drivers/bsp_f1xx_sdio.c **** 		INTX_DISABLE();//ÂÖ≥Èó≠ÊÄª‰∏≠Êñ≠(POLLINGÊ®°Âºè,‰∏•Á¶Å‰∏≠Êñ≠ÊâìÊñ≠SDIOËØªÂÜôÊìç‰Ωú!!!)
 435:drivers/bsp_f1xx_sdio.c **** 		while (!(SDIO->STA & ((1 << 5) | (1 << 1) | (1 << 3) | (1 << 10) | (1 << 9))))//Êó†‰∏äÊ∫¢/CRC/Ë∂Ö
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 20


 436:drivers/bsp_f1xx_sdio.c **** 		{
 437:drivers/bsp_f1xx_sdio.c **** 			if (SDIO->STA & (1 << 15))                        //Êé•Êî∂Âå∫ÂçäÊª°,Ë°®Á§∫Ëá≥Â∞ëÂ≠ò‰∫Ü8‰∏™Â≠ó
 438:drivers/bsp_f1xx_sdio.c **** 			{
 439:drivers/bsp_f1xx_sdio.c **** 				for (count = 0; count < 8; count++)            //Âæ™ÁéØËØªÂèñÊï∞ÊçÆ
 440:drivers/bsp_f1xx_sdio.c **** 				{
 441:drivers/bsp_f1xx_sdio.c **** 					*(tempbuff + count) = SDIO->FIFO;
 442:drivers/bsp_f1xx_sdio.c **** 				}
 443:drivers/bsp_f1xx_sdio.c **** 				tempbuff += 8;
 444:drivers/bsp_f1xx_sdio.c **** 				timeout = 0X7FFFFF;    //ËØªÊï∞ÊçÆÊ∫¢Âá∫Êó∂Èó¥
 445:drivers/bsp_f1xx_sdio.c **** 			} else    //Â§ÑÁêÜË∂ÖÊó∂
 446:drivers/bsp_f1xx_sdio.c **** 			{
 447:drivers/bsp_f1xx_sdio.c **** 				if (timeout == 0)return SD_DATA_TIMEOUT;
 448:drivers/bsp_f1xx_sdio.c **** 				timeout--;
 449:drivers/bsp_f1xx_sdio.c **** 			}
 450:drivers/bsp_f1xx_sdio.c **** 		}
 451:drivers/bsp_f1xx_sdio.c **** 		if (SDIO->STA & (1 << 3))        //Êï∞ÊçÆË∂ÖÊó∂ÈîôËØØ
 452:drivers/bsp_f1xx_sdio.c **** 		{
 453:drivers/bsp_f1xx_sdio.c **** 			SDIO->ICR |= 1 << 3;        //Ê∏ÖÈîôËØØÊ†áÂøó
 454:drivers/bsp_f1xx_sdio.c **** 			return SD_DATA_TIMEOUT;
 455:drivers/bsp_f1xx_sdio.c **** 		} else if (SDIO->STA & (1 << 1))    //Êï∞ÊçÆÂùóCRCÈîôËØØ
 456:drivers/bsp_f1xx_sdio.c **** 		{
 457:drivers/bsp_f1xx_sdio.c **** 			SDIO->ICR |= 1 << 1;        //Ê∏ÖÈîôËØØÊ†áÂøó
 458:drivers/bsp_f1xx_sdio.c **** 			return SD_DATA_CRC_FAIL;
 459:drivers/bsp_f1xx_sdio.c **** 		} else if (SDIO->STA & (1 << 5))    //Êé•Êî∂fifo‰∏äÊ∫¢ÈîôËØØ
 460:drivers/bsp_f1xx_sdio.c **** 		{
 461:drivers/bsp_f1xx_sdio.c **** 			SDIO->ICR |= 1 << 5;        //Ê∏ÖÈîôËØØÊ†áÂøó
 462:drivers/bsp_f1xx_sdio.c **** 			return SD_RX_OVERRUN;
 463:drivers/bsp_f1xx_sdio.c **** 		} else if (SDIO->STA & (1 << 9))    //Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 464:drivers/bsp_f1xx_sdio.c **** 		{
 465:drivers/bsp_f1xx_sdio.c **** 			SDIO->ICR |= 1 << 9;        //Ê∏ÖÈîôËØØÊ†áÂøó
 466:drivers/bsp_f1xx_sdio.c **** 			return SD_START_BIT_ERR;
 467:drivers/bsp_f1xx_sdio.c **** 		}
 468:drivers/bsp_f1xx_sdio.c **** 		while (SDIO->STA & (1 << 21))    //FIFOÈáåÈù¢,ËøòÂ≠òÂú®ÂèØÁî®Êï∞ÊçÆ
 469:drivers/bsp_f1xx_sdio.c **** 		{
 470:drivers/bsp_f1xx_sdio.c **** 			*tempbuff = SDIO->FIFO;    //Âæ™ÁéØËØªÂèñÊï∞ÊçÆ
 471:drivers/bsp_f1xx_sdio.c **** 			tempbuff++;
 472:drivers/bsp_f1xx_sdio.c **** 		}
 473:drivers/bsp_f1xx_sdio.c **** 		INTX_ENABLE();//ÂºÄÂêØÊÄª‰∏≠Êñ≠
 474:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 475:drivers/bsp_f1xx_sdio.c **** 	} else if (DeviceMode == SD_DMA_MODE) {
 476:drivers/bsp_f1xx_sdio.c **** 		SD_DMA_Config((u32 *) buf, blksize, 0);
 477:drivers/bsp_f1xx_sdio.c **** 		TransferError = SD_OK;
 478:drivers/bsp_f1xx_sdio.c **** 		StopCondition = 0;            //ÂçïÂùóËØª,‰∏çÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 479:drivers/bsp_f1xx_sdio.c **** 		TransferEnd = 0;                //‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 480:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK |= (1 << 1) | (1 << 3) | (1 << 8) | (1 << 5) | (1 << 9);    //ÈÖçÁΩÆÈúÄË¶ÅÁöÑ‰∏≠Êñ≠
 481:drivers/bsp_f1xx_sdio.c **** 		SDIO->DCTRL |= 1 << 3;            //SDIO DMA‰ΩøËÉΩ
 482:drivers/bsp_f1xx_sdio.c **** 		while (((DMA2->ISR & 0X2000) == 0) && (TransferEnd == 0) && (TransferError == SD_OK) && timeout)
 483:drivers/bsp_f1xx_sdio.c **** 			timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 484:drivers/bsp_f1xx_sdio.c **** 		if (timeout == 0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 485:drivers/bsp_f1xx_sdio.c **** 		if (TransferError != SD_OK)errorstatus = TransferError;
 486:drivers/bsp_f1xx_sdio.c **** 	}
 487:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 488:drivers/bsp_f1xx_sdio.c **** }
 489:drivers/bsp_f1xx_sdio.c **** 
 490:drivers/bsp_f1xx_sdio.c **** //SDÂç°ËØªÂèñÂ§ö‰∏™Âùó
 491:drivers/bsp_f1xx_sdio.c **** //buf:ËØªÊï∞ÊçÆÁºìÂ≠òÂå∫
 492:drivers/bsp_f1xx_sdio.c **** //addr:ËØªÂèñÂú∞ÂùÄ
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 21


 493:drivers/bsp_f1xx_sdio.c **** //blksize:ÂùóÂ§ßÂ∞è
 494:drivers/bsp_f1xx_sdio.c **** //nblks:Ë¶ÅËØªÂèñÁöÑÂùóÊï∞
 495:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 496:drivers/bsp_f1xx_sdio.c **** __attribute__((aligned(4))) u32 *tempbuff;
 497:drivers/bsp_f1xx_sdio.c **** 
 498:drivers/bsp_f1xx_sdio.c **** SD_Error SD_ReadMultiBlocks(u8 *buf, long long addr, u16 blksize, u32 nblks)
 499:drivers/bsp_f1xx_sdio.c **** {
 500:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 501:drivers/bsp_f1xx_sdio.c **** 	u8 power;
 502:drivers/bsp_f1xx_sdio.c **** 	u32 count = 0;
 503:drivers/bsp_f1xx_sdio.c **** 	u32 timeout = SDIO_DATATIMEOUT;
 504:drivers/bsp_f1xx_sdio.c **** 	tempbuff = (u32 *) buf;//ËΩ¨Êç¢‰∏∫u32ÊåáÈíà
 505:drivers/bsp_f1xx_sdio.c **** 
 506:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = 0x0;        //Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 507:drivers/bsp_f1xx_sdio.c **** 	if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 508:drivers/bsp_f1xx_sdio.c **** 	{
 509:drivers/bsp_f1xx_sdio.c **** 		blksize = 512;
 510:drivers/bsp_f1xx_sdio.c **** 		addr >>= 9;
 511:drivers/bsp_f1xx_sdio.c **** 	}
 512:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Data_Cfg(SD_DATATIMEOUT, 0, 0, 0);    //Ê∏ÖÈô§DPSMÁä∂ÊÄÅÊú∫ÈÖçÁΩÆ
 513:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->RESP1 & SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 514:drivers/bsp_f1xx_sdio.c **** 	if ((blksize > 0) && (blksize <= 2048) && ((blksize & (blksize - 1)) == 0)) {
 515:drivers/bsp_f1xx_sdio.c **** 		power = convert_from_bytes_to_power_of_two(blksize);
 516:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN, 1, blksize);    //ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü≠
 517:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);    //Á≠âÂæÖR1ÂìçÂ∫î
 518:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 519:drivers/bsp_f1xx_sdio.c **** 	} else return SD_INVALID_PARAMETER;
 520:drivers/bsp_f1xx_sdio.c **** 	if (nblks > 1)                                            //Â§öÂùóËØª
 521:drivers/bsp_f1xx_sdio.c **** 	{
 522:drivers/bsp_f1xx_sdio.c **** 		if (nblks * blksize > SD_MAX_DATA_LENGTH)return SD_INVALID_PARAMETER;//Âà§Êñ≠ÊòØÂê¶Ë∂ÖËøáÊúÄÂ§ßÊé
 523:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Data_Cfg(SD_DATATIMEOUT, nblks * blksize, power, 1);//nblks*blksize,512ÂùóÂ§ßÂ∞è,Âç°Âà∞
 524:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_READ_MULT_BLOCK, 1, addr);    //ÂèëÈÄÅCMD18+‰ªéaddrÂú∞ÂùÄÂá∫ËØªÂèñÊï∞ÊçÆ,Áü≠
 525:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_READ_MULT_BLOCK);//Á≠âÂæÖR1ÂìçÂ∫î
 526:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 527:drivers/bsp_f1xx_sdio.c **** 		if (DeviceMode == SD_POLLING_MODE) {
 528:drivers/bsp_f1xx_sdio.c **** 			INTX_DISABLE();//ÂÖ≥Èó≠ÊÄª‰∏≠Êñ≠(POLLINGÊ®°Âºè,‰∏•Á¶Å‰∏≠Êñ≠ÊâìÊñ≠SDIOËØªÂÜôÊìç‰Ωú!!!)
 529:drivers/bsp_f1xx_sdio.c **** 			while (!(SDIO->STA & ((1 << 5) | (1 << 1) | (1 << 3) | (1 << 8) | (1 << 9))))//Êó†‰∏äÊ∫¢/CRC/Ë∂Ö
 530:drivers/bsp_f1xx_sdio.c **** 			{
 531:drivers/bsp_f1xx_sdio.c **** 				if (SDIO->STA & (1 << 15))                        //Êé•Êî∂Âå∫ÂçäÊª°,Ë°®Á§∫Ëá≥Â∞ëÂ≠ò‰∫Ü8‰∏™Â≠ó
 532:drivers/bsp_f1xx_sdio.c **** 				{
 533:drivers/bsp_f1xx_sdio.c **** 					for (count = 0; count < 8; count++)            //Âæ™ÁéØËØªÂèñÊï∞ÊçÆ
 534:drivers/bsp_f1xx_sdio.c **** 					{
 535:drivers/bsp_f1xx_sdio.c **** 						*(tempbuff + count) = SDIO->FIFO;
 536:drivers/bsp_f1xx_sdio.c **** 					}
 537:drivers/bsp_f1xx_sdio.c **** 					tempbuff += 8;
 538:drivers/bsp_f1xx_sdio.c **** 					timeout = 0X7FFFFF;    //ËØªÊï∞ÊçÆÊ∫¢Âá∫Êó∂Èó¥
 539:drivers/bsp_f1xx_sdio.c **** 				} else    //Â§ÑÁêÜË∂ÖÊó∂
 540:drivers/bsp_f1xx_sdio.c **** 				{
 541:drivers/bsp_f1xx_sdio.c **** 					if (timeout == 0)return SD_DATA_TIMEOUT;
 542:drivers/bsp_f1xx_sdio.c **** 					timeout--;
 543:drivers/bsp_f1xx_sdio.c **** 				}
 544:drivers/bsp_f1xx_sdio.c **** 			}
 545:drivers/bsp_f1xx_sdio.c **** 			if (SDIO->STA & (1 << 3))        //Êï∞ÊçÆË∂ÖÊó∂ÈîôËØØ
 546:drivers/bsp_f1xx_sdio.c **** 			{
 547:drivers/bsp_f1xx_sdio.c **** 				SDIO->ICR |= 1 << 3;        //Ê∏ÖÈîôËØØÊ†áÂøó
 548:drivers/bsp_f1xx_sdio.c **** 				return SD_DATA_TIMEOUT;
 549:drivers/bsp_f1xx_sdio.c **** 			} else if (SDIO->STA & (1 << 1))    //Êï∞ÊçÆÂùóCRCÈîôËØØ
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 22


 550:drivers/bsp_f1xx_sdio.c **** 			{
 551:drivers/bsp_f1xx_sdio.c **** 				SDIO->ICR |= 1 << 1;        //Ê∏ÖÈîôËØØÊ†áÂøó
 552:drivers/bsp_f1xx_sdio.c **** 				return SD_DATA_CRC_FAIL;
 553:drivers/bsp_f1xx_sdio.c **** 			} else if (SDIO->STA & (1 << 5))    //Êé•Êî∂fifo‰∏äÊ∫¢ÈîôËØØ
 554:drivers/bsp_f1xx_sdio.c **** 			{
 555:drivers/bsp_f1xx_sdio.c **** 				SDIO->ICR |= 1 << 5;        //Ê∏ÖÈîôËØØÊ†áÂøó
 556:drivers/bsp_f1xx_sdio.c **** 				return SD_RX_OVERRUN;
 557:drivers/bsp_f1xx_sdio.c **** 			} else if (SDIO->STA & (1 << 9))    //Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 558:drivers/bsp_f1xx_sdio.c **** 			{
 559:drivers/bsp_f1xx_sdio.c **** 				SDIO->ICR |= 1 << 9;        //Ê∏ÖÈîôËØØÊ†áÂøó
 560:drivers/bsp_f1xx_sdio.c **** 				return SD_START_BIT_ERR;
 561:drivers/bsp_f1xx_sdio.c **** 			}
 562:drivers/bsp_f1xx_sdio.c **** 			while (SDIO->STA & (1 << 21))    //FIFOÈáåÈù¢,ËøòÂ≠òÂú®ÂèØÁî®Êï∞ÊçÆ
 563:drivers/bsp_f1xx_sdio.c **** 			{
 564:drivers/bsp_f1xx_sdio.c **** 				*tempbuff = SDIO->FIFO;    //Âæ™ÁéØËØªÂèñÊï∞ÊçÆ
 565:drivers/bsp_f1xx_sdio.c **** 				tempbuff++;
 566:drivers/bsp_f1xx_sdio.c **** 			}
 567:drivers/bsp_f1xx_sdio.c **** 			if (SDIO->STA & (1 << 8))        //Êé•Êî∂ÁªìÊùü
 568:drivers/bsp_f1xx_sdio.c **** 			{
 569:drivers/bsp_f1xx_sdio.c **** 				if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType
 570:drivers/bsp_f1xx_sdio.c **** 					(SDIO_HIGH_CAPACITY_SD_CARD == CardType)) {
 571:drivers/bsp_f1xx_sdio.c **** 					SDIO_Send_Cmd(SD_CMD_STOP_TRANSMISSION, 1, 0);        //ÂèëÈÄÅCMD12+ÁªìÊùü‰º†Ëæì
 572:drivers/bsp_f1xx_sdio.c **** 					errorstatus = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);//Á≠âÂæÖR1ÂìçÂ∫î
 573:drivers/bsp_f1xx_sdio.c **** 					if (errorstatus != SD_OK)return errorstatus;
 574:drivers/bsp_f1xx_sdio.c **** 				}
 575:drivers/bsp_f1xx_sdio.c **** 			}
 576:drivers/bsp_f1xx_sdio.c **** 			INTX_ENABLE();//ÂºÄÂêØÊÄª‰∏≠Êñ≠
 577:drivers/bsp_f1xx_sdio.c **** 			SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 578:drivers/bsp_f1xx_sdio.c **** 		} else if (DeviceMode == SD_DMA_MODE) {
 579:drivers/bsp_f1xx_sdio.c **** 			SD_DMA_Config((u32 *) buf, nblks * blksize, 0);
 580:drivers/bsp_f1xx_sdio.c **** 			TransferError = SD_OK;
 581:drivers/bsp_f1xx_sdio.c **** 			StopCondition = 1;            //Â§öÂùóËØª,ÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 582:drivers/bsp_f1xx_sdio.c **** 			TransferEnd = 0;                //‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 583:drivers/bsp_f1xx_sdio.c **** 			SDIO->MASK |= (1 << 1) | (1 << 3) | (1 << 8) | (1 << 5) | (1 << 9);    //ÈÖçÁΩÆÈúÄË¶ÅÁöÑ‰∏≠Êñ≠
 584:drivers/bsp_f1xx_sdio.c **** 			SDIO->DCTRL |= 1 << 3;                                //SDIO DMA‰ΩøËÉΩ
 585:drivers/bsp_f1xx_sdio.c **** 			while (((DMA2->ISR & 0X2000) == 0) && timeout)timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 586:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 587:drivers/bsp_f1xx_sdio.c **** 			while ((TransferEnd == 0) && (TransferError == SD_OK));
 588:drivers/bsp_f1xx_sdio.c **** 			if (TransferError != SD_OK)errorstatus = TransferError;
 589:drivers/bsp_f1xx_sdio.c **** 		}
 590:drivers/bsp_f1xx_sdio.c **** 	}
 591:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 592:drivers/bsp_f1xx_sdio.c **** }
 593:drivers/bsp_f1xx_sdio.c **** 
 594:drivers/bsp_f1xx_sdio.c **** //SDÂç°ÂÜô1‰∏™Âùó
 595:drivers/bsp_f1xx_sdio.c **** //buf:Êï∞ÊçÆÁºìÂ≠òÂå∫
 596:drivers/bsp_f1xx_sdio.c **** //addr:ÂÜôÂú∞ÂùÄ
 597:drivers/bsp_f1xx_sdio.c **** //blksize:ÂùóÂ§ßÂ∞è
 598:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 599:drivers/bsp_f1xx_sdio.c **** SD_Error SD_WriteBlock(u8 *buf, long long addr, u16 blksize)
 600:drivers/bsp_f1xx_sdio.c **** {
 601:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 602:drivers/bsp_f1xx_sdio.c **** 	u8 power = 0, cardstate = 0;
 603:drivers/bsp_f1xx_sdio.c **** 	u32 timeout = 0, bytestransferred = 0;
 604:drivers/bsp_f1xx_sdio.c **** 	u32 cardstatus = 0, count = 0, restwords = 0;
 605:drivers/bsp_f1xx_sdio.c **** 	u32 tlen = blksize;                        //ÊÄªÈïøÂ∫¶(Â≠óËäÇ)
 606:drivers/bsp_f1xx_sdio.c **** 	u32 *tempbuff = (u32 *) buf;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 23


 607:drivers/bsp_f1xx_sdio.c **** 	if (buf == NULL)return SD_INVALID_PARAMETER;//ÂèÇÊï∞ÈîôËØØ
 608:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = 0x0;                            //Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 609:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Data_Cfg(SD_DATATIMEOUT, 0, 0, 0);    //Ê∏ÖÈô§DPSMÁä∂ÊÄÅÊú∫ÈÖçÁΩÆ
 610:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->RESP1 & SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 611:drivers/bsp_f1xx_sdio.c **** 	if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)    //Â§ßÂÆπÈáèÂç°
 612:drivers/bsp_f1xx_sdio.c **** 	{
 613:drivers/bsp_f1xx_sdio.c **** 		blksize = 512;
 614:drivers/bsp_f1xx_sdio.c **** 		addr >>= 9;
 615:drivers/bsp_f1xx_sdio.c **** 	}
 616:drivers/bsp_f1xx_sdio.c **** 	if ((blksize > 0) && (blksize <= 2048) && ((blksize & (blksize - 1)) == 0)) {
 617:drivers/bsp_f1xx_sdio.c **** 		power = convert_from_bytes_to_power_of_two(blksize);
 618:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN, 1, blksize);    //ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü≠
 619:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);    //Á≠âÂæÖR1ÂìçÂ∫î
 620:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 621:drivers/bsp_f1xx_sdio.c **** 	} else return SD_INVALID_PARAMETER;
 622:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_SEND_STATUS, 1, (u32) RCA << 16);    //ÂèëÈÄÅCMD13,Êü•ËØ¢Âç°ÁöÑÁä∂ÊÄÅ,Áü≠ÂìçÂ
 623:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);        //Á≠âÂæÖR1ÂìçÂ∫î
 624:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;
 625:drivers/bsp_f1xx_sdio.c **** 	cardstatus = SDIO->RESP1;
 626:drivers/bsp_f1xx_sdio.c **** 	timeout = SD_DATATIMEOUT;
 627:drivers/bsp_f1xx_sdio.c **** 	while (((cardstatus & 0x00000100) == 0) && (timeout > 0))    //Ê£ÄÊü•READY_FOR_DATA‰ΩçÊòØÂê¶ÁΩÆ‰Ωç
 628:drivers/bsp_f1xx_sdio.c **** 	{
 629:drivers/bsp_f1xx_sdio.c **** 		timeout--;
 630:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SEND_STATUS, 1, (u32) RCA << 16);//ÂèëÈÄÅCMD13,Êü•ËØ¢Âç°ÁöÑÁä∂ÊÄÅ,Áü≠ÂìçÂ∫î
 631:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);    //Á≠âÂæÖR1ÂìçÂ∫î
 632:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;
 633:drivers/bsp_f1xx_sdio.c **** 		cardstatus = SDIO->RESP1;
 634:drivers/bsp_f1xx_sdio.c **** 	}
 635:drivers/bsp_f1xx_sdio.c **** 	if (timeout == 0)return SD_ERROR;
 636:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_WRITE_SINGLE_BLOCK, 1, addr);    //ÂèëÈÄÅCMD24,ÂÜôÂçïÂùóÊåá‰ª§,Áü≠ÂìçÂ∫î
 637:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_WRITE_SINGLE_BLOCK);//Á≠âÂæÖR1ÂìçÂ∫î
 638:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;
 639:drivers/bsp_f1xx_sdio.c **** 	StopCondition = 0;                                    //ÂçïÂùóÂÜô,‰∏çÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª
 640:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Data_Cfg(SD_DATATIMEOUT, blksize, power, 0);    //blksize, ÊéßÂà∂Âô®Âà∞Âç°
 641:drivers/bsp_f1xx_sdio.c **** 	timeout = SDIO_DATATIMEOUT;
 642:drivers/bsp_f1xx_sdio.c **** 	if (DeviceMode == SD_POLLING_MODE) {
 643:drivers/bsp_f1xx_sdio.c **** 		INTX_DISABLE();//ÂÖ≥Èó≠ÊÄª‰∏≠Êñ≠(POLLINGÊ®°Âºè,‰∏•Á¶Å‰∏≠Êñ≠ÊâìÊñ≠SDIOËØªÂÜôÊìç‰Ωú!!!)
 644:drivers/bsp_f1xx_sdio.c **** 		while (!(SDIO->STA & ((1 << 10) | (1 << 4) | (1 << 1) | (1 << 3) | (1 << 9))))//Êï∞ÊçÆÂùóÂèëÈÄÅÊà
 645:drivers/bsp_f1xx_sdio.c **** 		{
 646:drivers/bsp_f1xx_sdio.c **** 			if (SDIO->STA & (1 << 14))                            //ÂèëÈÄÅÂå∫ÂçäÁ©∫,Ë°®Á§∫Ëá≥Â∞ëÂ≠ò‰∫Ü8‰∏™Â≠
 647:drivers/bsp_f1xx_sdio.c **** 			{
 648:drivers/bsp_f1xx_sdio.c **** 				if ((tlen - bytestransferred) < SD_HALFFIFOBYTES)//‰∏çÂ§ü32Â≠óËäÇ‰∫Ü
 649:drivers/bsp_f1xx_sdio.c **** 				{
 650:drivers/bsp_f1xx_sdio.c **** 					restwords = ((tlen - bytestransferred) % 4 == 0) ? ((tlen - bytestransferred) / 4) : (
 651:drivers/bsp_f1xx_sdio.c **** 							(tlen - bytestransferred) / 4 + 1);
 652:drivers/bsp_f1xx_sdio.c **** 
 653:drivers/bsp_f1xx_sdio.c **** 					for (count = 0; count < restwords; count++, tempbuff++, bytestransferred += 4) {
 654:drivers/bsp_f1xx_sdio.c **** 						SDIO->FIFO = *tempbuff;
 655:drivers/bsp_f1xx_sdio.c **** 					}
 656:drivers/bsp_f1xx_sdio.c **** 				} else {
 657:drivers/bsp_f1xx_sdio.c **** 					for (count = 0; count < 8; count++) {
 658:drivers/bsp_f1xx_sdio.c **** 						SDIO->FIFO = *(tempbuff + count);
 659:drivers/bsp_f1xx_sdio.c **** 					}
 660:drivers/bsp_f1xx_sdio.c **** 					tempbuff += 8;
 661:drivers/bsp_f1xx_sdio.c **** 					bytestransferred += 32;
 662:drivers/bsp_f1xx_sdio.c **** 				}
 663:drivers/bsp_f1xx_sdio.c **** 				timeout = 0X3FFFFFFF;    //ÂÜôÊï∞ÊçÆÊ∫¢Âá∫Êó∂Èó¥
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 24


 664:drivers/bsp_f1xx_sdio.c **** 			} else {
 665:drivers/bsp_f1xx_sdio.c **** 				if (timeout == 0)return SD_DATA_TIMEOUT;
 666:drivers/bsp_f1xx_sdio.c **** 				timeout--;
 667:drivers/bsp_f1xx_sdio.c **** 			}
 668:drivers/bsp_f1xx_sdio.c **** 		}
 669:drivers/bsp_f1xx_sdio.c **** 		if (SDIO->STA & (1 << 3))        //Êï∞ÊçÆË∂ÖÊó∂ÈîôËØØ
 670:drivers/bsp_f1xx_sdio.c **** 		{
 671:drivers/bsp_f1xx_sdio.c **** 			SDIO->ICR |= 1 << 3;        //Ê∏ÖÈîôËØØÊ†áÂøó
 672:drivers/bsp_f1xx_sdio.c **** 			return SD_DATA_TIMEOUT;
 673:drivers/bsp_f1xx_sdio.c **** 		} else if (SDIO->STA & (1 << 1))    //Êï∞ÊçÆÂùóCRCÈîôËØØ
 674:drivers/bsp_f1xx_sdio.c **** 		{
 675:drivers/bsp_f1xx_sdio.c **** 			SDIO->ICR |= 1 << 1;        //Ê∏ÖÈîôËØØÊ†áÂøó
 676:drivers/bsp_f1xx_sdio.c **** 			return SD_DATA_CRC_FAIL;
 677:drivers/bsp_f1xx_sdio.c **** 		} else if (SDIO->STA & (1 << 4))    //Êé•Êî∂fifo‰∏ãÊ∫¢ÈîôËØØ
 678:drivers/bsp_f1xx_sdio.c **** 		{
 679:drivers/bsp_f1xx_sdio.c **** 			SDIO->ICR |= 1 << 4;        //Ê∏ÖÈîôËØØÊ†áÂøó
 680:drivers/bsp_f1xx_sdio.c **** 			return SD_TX_UNDERRUN;
 681:drivers/bsp_f1xx_sdio.c **** 		} else if (SDIO->STA & (1 << 9))    //Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 682:drivers/bsp_f1xx_sdio.c **** 		{
 683:drivers/bsp_f1xx_sdio.c **** 			SDIO->ICR |= 1 << 9;        //Ê∏ÖÈîôËØØÊ†áÂøó
 684:drivers/bsp_f1xx_sdio.c **** 			return SD_START_BIT_ERR;
 685:drivers/bsp_f1xx_sdio.c **** 		}
 686:drivers/bsp_f1xx_sdio.c **** 		INTX_ENABLE();//ÂºÄÂêØÊÄª‰∏≠Êñ≠
 687:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 688:drivers/bsp_f1xx_sdio.c **** 	} else if (DeviceMode == SD_DMA_MODE) {
 689:drivers/bsp_f1xx_sdio.c **** 		SD_DMA_Config((u32 *) buf, blksize, 1);//SDIO DMAÈÖçÁΩÆ
 690:drivers/bsp_f1xx_sdio.c **** 		TransferError = SD_OK;
 691:drivers/bsp_f1xx_sdio.c **** 		StopCondition = 0;            //ÂçïÂùóÂÜô,‰∏çÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 692:drivers/bsp_f1xx_sdio.c **** 		TransferEnd = 0;                //‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 693:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK |= (1 << 1) | (1 << 3) | (1 << 8) | (1 << 4) | (1 << 9);    //ÈÖçÁΩÆ‰∫ßÁîüÊï∞ÊçÆÊé•Êî∂
 694:drivers/bsp_f1xx_sdio.c **** 		SDIO->DCTRL |= 1 << 3;                                //SDIO DMA‰ΩøËÉΩ.
 695:drivers/bsp_f1xx_sdio.c **** 		while (((DMA2->ISR & 0X2000) == 0) && timeout)timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 696:drivers/bsp_f1xx_sdio.c **** 		if (timeout == 0) {
 697:drivers/bsp_f1xx_sdio.c **** 			bsp_SD_Init();                        //ÈáçÊñ∞ÂàùÂßãÂåñSDÂç°,ÂèØ‰ª•Ëß£ÂÜ≥ÂÜôÂÖ•Ê≠ªÊú∫ÁöÑÈóÆÈ¢ò
 698:drivers/bsp_f1xx_sdio.c **** 			return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 699:drivers/bsp_f1xx_sdio.c **** 		}
 700:drivers/bsp_f1xx_sdio.c **** 		timeout = SDIO_DATATIMEOUT;
 701:drivers/bsp_f1xx_sdio.c **** 		while ((TransferEnd == 0) && (TransferError == SD_OK) && timeout)timeout--;
 702:drivers/bsp_f1xx_sdio.c **** 		if (timeout == 0)return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 703:drivers/bsp_f1xx_sdio.c **** 		if (TransferError != SD_OK)return TransferError;
 704:drivers/bsp_f1xx_sdio.c **** 	}
 705:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 706:drivers/bsp_f1xx_sdio.c **** 	errorstatus = IsCardProgramming(&cardstate);
 707:drivers/bsp_f1xx_sdio.c **** 	while ((errorstatus == SD_OK) && ((cardstate == SD_CARD_PROGRAMMING) || (cardstate == SD_CARD_RECE
 708:drivers/bsp_f1xx_sdio.c **** 		errorstatus = IsCardProgramming(&cardstate);
 709:drivers/bsp_f1xx_sdio.c **** 	}
 710:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 711:drivers/bsp_f1xx_sdio.c **** }
 712:drivers/bsp_f1xx_sdio.c **** 
 713:drivers/bsp_f1xx_sdio.c **** //SDÂç°ÂÜôÂ§ö‰∏™Âùó
 714:drivers/bsp_f1xx_sdio.c **** //buf:Êï∞ÊçÆÁºìÂ≠òÂå∫
 715:drivers/bsp_f1xx_sdio.c **** //addr:ÂÜôÂú∞ÂùÄ
 716:drivers/bsp_f1xx_sdio.c **** //blksize:ÂùóÂ§ßÂ∞è
 717:drivers/bsp_f1xx_sdio.c **** //nblks:Ë¶ÅÂÜôÂÖ•ÁöÑÂùóÊï∞
 718:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 719:drivers/bsp_f1xx_sdio.c **** SD_Error SD_WriteMultiBlocks(u8 *buf, long long addr, u16 blksize, u32 nblks)
 720:drivers/bsp_f1xx_sdio.c **** {
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 25


 721:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 722:drivers/bsp_f1xx_sdio.c **** 	u8 power = 0, cardstate = 0;
 723:drivers/bsp_f1xx_sdio.c **** 	u32 timeout = 0, bytestransferred = 0;
 724:drivers/bsp_f1xx_sdio.c **** 	u32 count = 0, restwords = 0;
 725:drivers/bsp_f1xx_sdio.c **** 	u32 tlen = nblks * blksize;                //ÊÄªÈïøÂ∫¶(Â≠óËäÇ)
 726:drivers/bsp_f1xx_sdio.c **** 	u32 *tempbuff = (u32 *) buf;
 727:drivers/bsp_f1xx_sdio.c **** 	if (buf == NULL)return SD_INVALID_PARAMETER; //ÂèÇÊï∞ÈîôËØØ
 728:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = 0x0;                            //Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 729:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Data_Cfg(SD_DATATIMEOUT, 0, 0, 0);    //Ê∏ÖÈô§DPSMÁä∂ÊÄÅÊú∫ÈÖçÁΩÆ
 730:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->RESP1 & SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 731:drivers/bsp_f1xx_sdio.c **** 	if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 732:drivers/bsp_f1xx_sdio.c **** 	{
 733:drivers/bsp_f1xx_sdio.c **** 		blksize = 512;
 734:drivers/bsp_f1xx_sdio.c **** 		addr >>= 9;
 735:drivers/bsp_f1xx_sdio.c **** 	}
 736:drivers/bsp_f1xx_sdio.c **** 	if ((blksize > 0) && (blksize <= 2048) && ((blksize & (blksize - 1)) == 0)) {
 737:drivers/bsp_f1xx_sdio.c **** 		power = convert_from_bytes_to_power_of_two(blksize);
 738:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN, 1, blksize);    //ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü≠
 739:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);    //Á≠âÂæÖR1ÂìçÂ∫î
 740:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 741:drivers/bsp_f1xx_sdio.c **** 	} else return SD_INVALID_PARAMETER;
 742:drivers/bsp_f1xx_sdio.c **** 	if (nblks > 1) {
 743:drivers/bsp_f1xx_sdio.c **** 		if (nblks * blksize > SD_MAX_DATA_LENGTH)return SD_INVALID_PARAMETER;
 744:drivers/bsp_f1xx_sdio.c **** 		if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType) 
 745:drivers/bsp_f1xx_sdio.c **** 			(SDIO_HIGH_CAPACITY_SD_CARD == CardType)) {
 746:drivers/bsp_f1xx_sdio.c **** 			//ÊèêÈ´òÊÄßËÉΩ
 747:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_APP_CMD, 1, (u32) RCA << 16);    //ÂèëÈÄÅACMD55,Áü≠ÂìçÂ∫î
 748:drivers/bsp_f1xx_sdio.c **** 			errorstatus = CmdResp1Error(SD_CMD_APP_CMD);        //Á≠âÂæÖR1ÂìçÂ∫î
 749:drivers/bsp_f1xx_sdio.c **** 			if (errorstatus != SD_OK)return errorstatus;
 750:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_SET_BLOCK_COUNT, 1, nblks);    //ÂèëÈÄÅCMD23,ËÆæÁΩÆÂùóÊï∞Èáè,Áü≠ÂìçÂ∫î
 751:drivers/bsp_f1xx_sdio.c **** 			errorstatus = CmdResp1Error(SD_CMD_SET_BLOCK_COUNT);//Á≠âÂæÖR1ÂìçÂ∫î
 752:drivers/bsp_f1xx_sdio.c **** 			if (errorstatus != SD_OK)return errorstatus;
 753:drivers/bsp_f1xx_sdio.c **** 		}
 754:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_WRITE_MULT_BLOCK, 1, addr);        //ÂèëÈÄÅCMD25,Â§öÂùóÂÜôÊåá‰ª§,Áü≠ÂìçÂ∫î
 755:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_WRITE_MULT_BLOCK);    //Á≠âÂæÖR1ÂìçÂ∫î
 756:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;
 757:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Data_Cfg(SD_DATATIMEOUT, nblks * blksize, power, 0);//blksize, ÊéßÂà∂Âô®Âà∞Âç°
 758:drivers/bsp_f1xx_sdio.c **** 		if (DeviceMode == SD_POLLING_MODE) {
 759:drivers/bsp_f1xx_sdio.c **** 			timeout = SDIO_DATATIMEOUT;
 760:drivers/bsp_f1xx_sdio.c **** 			INTX_DISABLE();//ÂÖ≥Èó≠ÊÄª‰∏≠Êñ≠(POLLINGÊ®°Âºè,‰∏•Á¶Å‰∏≠Êñ≠ÊâìÊñ≠SDIOËØªÂÜôÊìç‰Ωú!!!)
 761:drivers/bsp_f1xx_sdio.c **** 			while (!(SDIO->STA & ((1 << 4) | (1 << 1) | (1 << 8) | (1 << 3) | (1 << 9))))//‰∏ãÊ∫¢/CRC/Êï∞ÊçÆ
 762:drivers/bsp_f1xx_sdio.c **** 			{
 763:drivers/bsp_f1xx_sdio.c **** 				if (SDIO->STA & (1 << 14))                            //ÂèëÈÄÅÂå∫ÂçäÁ©∫,Ë°®Á§∫Ëá≥Â∞ëÂ≠ò‰∫Ü8Â≠ó(
 764:drivers/bsp_f1xx_sdio.c **** 				{
 765:drivers/bsp_f1xx_sdio.c **** 					if ((tlen - bytestransferred) < SD_HALFFIFOBYTES)//‰∏çÂ§ü32Â≠óËäÇ‰∫Ü
 766:drivers/bsp_f1xx_sdio.c **** 					{
 767:drivers/bsp_f1xx_sdio.c **** 						restwords = ((tlen - bytestransferred) % 4 == 0) ? ((tlen - bytestransferred) / 4) : (
 768:drivers/bsp_f1xx_sdio.c **** 								(tlen - bytestransferred) / 4 + 1);
 769:drivers/bsp_f1xx_sdio.c **** 						for (count = 0; count < restwords; count++, tempbuff++, bytestransferred += 4) {
 770:drivers/bsp_f1xx_sdio.c **** 							SDIO->FIFO = *tempbuff;
 771:drivers/bsp_f1xx_sdio.c **** 						}
 772:drivers/bsp_f1xx_sdio.c **** 					} else                                        //ÂèëÈÄÅÂå∫ÂçäÁ©∫,ÂèØ‰ª•ÂèëÈÄÅËá≥Â∞ë8Â≠ó(32Â≠óËä
 773:drivers/bsp_f1xx_sdio.c **** 					{
 774:drivers/bsp_f1xx_sdio.c **** 						for (count = 0; count < SD_HALFFIFO; count++) {
 775:drivers/bsp_f1xx_sdio.c **** 							SDIO->FIFO = *(tempbuff + count);
 776:drivers/bsp_f1xx_sdio.c **** 						}
 777:drivers/bsp_f1xx_sdio.c **** 						tempbuff += SD_HALFFIFO;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 26


 778:drivers/bsp_f1xx_sdio.c **** 						bytestransferred += SD_HALFFIFOBYTES;
 779:drivers/bsp_f1xx_sdio.c **** 					}
 780:drivers/bsp_f1xx_sdio.c **** 					timeout = 0X3FFFFFFF;    //ÂÜôÊï∞ÊçÆÊ∫¢Âá∫Êó∂Èó¥
 781:drivers/bsp_f1xx_sdio.c **** 				} else {
 782:drivers/bsp_f1xx_sdio.c **** 					if (timeout == 0)return SD_DATA_TIMEOUT;
 783:drivers/bsp_f1xx_sdio.c **** 					timeout--;
 784:drivers/bsp_f1xx_sdio.c **** 				}
 785:drivers/bsp_f1xx_sdio.c **** 			}
 786:drivers/bsp_f1xx_sdio.c **** 			if (SDIO->STA & (1 << 3))        //Êï∞ÊçÆË∂ÖÊó∂ÈîôËØØ
 787:drivers/bsp_f1xx_sdio.c **** 			{
 788:drivers/bsp_f1xx_sdio.c **** 				SDIO->ICR |= 1 << 3;        //Ê∏ÖÈîôËØØÊ†áÂøó
 789:drivers/bsp_f1xx_sdio.c **** 				return SD_DATA_TIMEOUT;
 790:drivers/bsp_f1xx_sdio.c **** 			} else if (SDIO->STA & (1 << 1))    //Êï∞ÊçÆÂùóCRCÈîôËØØ
 791:drivers/bsp_f1xx_sdio.c **** 			{
 792:drivers/bsp_f1xx_sdio.c **** 				SDIO->ICR |= 1 << 1;        //Ê∏ÖÈîôËØØÊ†áÂøó
 793:drivers/bsp_f1xx_sdio.c **** 				return SD_DATA_CRC_FAIL;
 794:drivers/bsp_f1xx_sdio.c **** 			} else if (SDIO->STA & (1 << 4))    //Êé•Êî∂fifo‰∏ãÊ∫¢ÈîôËØØ
 795:drivers/bsp_f1xx_sdio.c **** 			{
 796:drivers/bsp_f1xx_sdio.c **** 				SDIO->ICR |= 1 << 4;        //Ê∏ÖÈîôËØØÊ†áÂøó
 797:drivers/bsp_f1xx_sdio.c **** 				return SD_TX_UNDERRUN;
 798:drivers/bsp_f1xx_sdio.c **** 			} else if (SDIO->STA & (1 << 9))    //Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 799:drivers/bsp_f1xx_sdio.c **** 			{
 800:drivers/bsp_f1xx_sdio.c **** 				SDIO->ICR |= 1 << 9;        //Ê∏ÖÈîôËØØÊ†áÂøó
 801:drivers/bsp_f1xx_sdio.c **** 				return SD_START_BIT_ERR;
 802:drivers/bsp_f1xx_sdio.c **** 			}
 803:drivers/bsp_f1xx_sdio.c **** 			if (SDIO->STA & (1 << 8))        //ÂèëÈÄÅÁªìÊùü
 804:drivers/bsp_f1xx_sdio.c **** 			{
 805:drivers/bsp_f1xx_sdio.c **** 				if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType
 806:drivers/bsp_f1xx_sdio.c **** 					(SDIO_HIGH_CAPACITY_SD_CARD == CardType)) {
 807:drivers/bsp_f1xx_sdio.c **** 					SDIO_Send_Cmd(SD_CMD_STOP_TRANSMISSION, 1, 0);        //ÂèëÈÄÅCMD12+ÁªìÊùü‰º†Ëæì
 808:drivers/bsp_f1xx_sdio.c **** 					errorstatus = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);//Á≠âÂæÖR1ÂìçÂ∫î
 809:drivers/bsp_f1xx_sdio.c **** 					if (errorstatus != SD_OK)return errorstatus;
 810:drivers/bsp_f1xx_sdio.c **** 				}
 811:drivers/bsp_f1xx_sdio.c **** 			}
 812:drivers/bsp_f1xx_sdio.c **** 			INTX_ENABLE();//ÂºÄÂêØÊÄª‰∏≠Êñ≠
 813:drivers/bsp_f1xx_sdio.c **** 			SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 814:drivers/bsp_f1xx_sdio.c **** 		} else if (DeviceMode == SD_DMA_MODE) {
 815:drivers/bsp_f1xx_sdio.c **** 			SD_DMA_Config((u32 *) buf, nblks * blksize, 1);//SDIO DMAÈÖçÁΩÆ
 816:drivers/bsp_f1xx_sdio.c **** 			TransferError = SD_OK;
 817:drivers/bsp_f1xx_sdio.c **** 			StopCondition = 1;            //Â§öÂùóÂÜô,ÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 818:drivers/bsp_f1xx_sdio.c **** 			TransferEnd = 0;                //‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 819:drivers/bsp_f1xx_sdio.c **** 			SDIO->MASK |= (1 << 1) | (1 << 3) | (1 << 8) | (1 << 4) | (1 << 9);    //ÈÖçÁΩÆ‰∫ßÁîüÊï∞ÊçÆÊé•Êî
 820:drivers/bsp_f1xx_sdio.c **** 			SDIO->DCTRL |= 1 << 3;                                //SDIO DMA‰ΩøËÉΩ.
 821:drivers/bsp_f1xx_sdio.c **** 			timeout = SDIO_DATATIMEOUT;
 822:drivers/bsp_f1xx_sdio.c **** 			while (((DMA2->ISR & 0X2000) == 0) && timeout)timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 823:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)                                    //Ë∂ÖÊó∂
 824:drivers/bsp_f1xx_sdio.c **** 			{
 825:drivers/bsp_f1xx_sdio.c **** 				bsp_SD_Init();                        //ÈáçÊñ∞ÂàùÂßãÂåñSDÂç°,ÂèØ‰ª•Ëß£ÂÜ≥ÂÜôÂÖ•Ê≠ªÊú∫ÁöÑÈóÆÈ¢ò
 826:drivers/bsp_f1xx_sdio.c **** 				return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 827:drivers/bsp_f1xx_sdio.c **** 			}
 828:drivers/bsp_f1xx_sdio.c **** 			timeout = SDIO_DATATIMEOUT;
 829:drivers/bsp_f1xx_sdio.c **** 			while ((TransferEnd == 0) && (TransferError == SD_OK) && timeout)timeout--;
 830:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 831:drivers/bsp_f1xx_sdio.c **** 			if (TransferError != SD_OK)return TransferError;
 832:drivers/bsp_f1xx_sdio.c **** 		}
 833:drivers/bsp_f1xx_sdio.c **** 	}
 834:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 27


 835:drivers/bsp_f1xx_sdio.c **** 	errorstatus = IsCardProgramming(&cardstate);
 836:drivers/bsp_f1xx_sdio.c **** 	while ((errorstatus == SD_OK) && ((cardstate == SD_CARD_PROGRAMMING) || (cardstate == SD_CARD_RECE
 837:drivers/bsp_f1xx_sdio.c **** 		errorstatus = IsCardProgramming(&cardstate);
 838:drivers/bsp_f1xx_sdio.c **** 	}
 839:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 840:drivers/bsp_f1xx_sdio.c **** }
 841:drivers/bsp_f1xx_sdio.c **** 
 842:drivers/bsp_f1xx_sdio.c **** //SDIO‰∏≠Êñ≠ÊúçÂä°ÂáΩÊï∞
 843:drivers/bsp_f1xx_sdio.c **** void SDIO_IRQHandler(void)
 844:drivers/bsp_f1xx_sdio.c **** {
 845:drivers/bsp_f1xx_sdio.c **** 	SD_ProcessIRQSrc();//Â§ÑÁêÜÊâÄÊúâSDIOÁõ∏ÂÖ≥‰∏≠Êñ≠
 846:drivers/bsp_f1xx_sdio.c **** }
 847:drivers/bsp_f1xx_sdio.c **** 
 848:drivers/bsp_f1xx_sdio.c **** //SDIO‰∏≠Êñ≠Â§ÑÁêÜÂáΩÊï∞
 849:drivers/bsp_f1xx_sdio.c **** //Â§ÑÁêÜSDIO‰º†ËæìËøáÁ®ã‰∏≠ÁöÑÂêÑÁßç‰∏≠Êñ≠‰∫ãÂä°
 850:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å
 851:drivers/bsp_f1xx_sdio.c **** SD_Error SD_ProcessIRQSrc(void)
 852:drivers/bsp_f1xx_sdio.c **** {
 853:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->STA & (1 << 8))//Êé•Êî∂ÂÆåÊàê‰∏≠Êñ≠
 854:drivers/bsp_f1xx_sdio.c **** 	{
 855:drivers/bsp_f1xx_sdio.c **** 		if (StopCondition == 1) {
 856:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_STOP_TRANSMISSION, 1, 0);        //ÂèëÈÄÅCMD12,ÁªìÊùü‰º†Ëæì
 857:drivers/bsp_f1xx_sdio.c **** 			TransferError = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);
 858:drivers/bsp_f1xx_sdio.c **** 		} else TransferError = SD_OK;
 859:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 8;//Ê∏ÖÈô§ÂÆåÊàê‰∏≠Êñ≠Ê†áËÆ∞
 860:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK &= ~((1 << 1) | (1 << 3) | (1 << 8) | (1 << 14) | (1 << 15) | (1 << 4) | (1 << 5) |
 861:drivers/bsp_f1xx_sdio.c **** 						(1 << 9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Êñ≠
 862:drivers/bsp_f1xx_sdio.c **** 		TransferEnd = 1;
 863:drivers/bsp_f1xx_sdio.c **** 		return (TransferError);
 864:drivers/bsp_f1xx_sdio.c **** 	}
 865:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->STA & (1 << 1))//Êï∞ÊçÆCRCÈîôËØØ
 866:drivers/bsp_f1xx_sdio.c **** 	{
 867:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 1;//Ê∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞
 868:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK &= ~((1 << 1) | (1 << 3) | (1 << 8) | (1 << 14) | (1 << 15) | (1 << 4) | (1 << 5) |
 869:drivers/bsp_f1xx_sdio.c **** 						(1 << 9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Êñ≠
 870:drivers/bsp_f1xx_sdio.c **** 		TransferError = SD_DATA_CRC_FAIL;
 871:drivers/bsp_f1xx_sdio.c **** 		return (SD_DATA_CRC_FAIL);
 872:drivers/bsp_f1xx_sdio.c **** 	}
 873:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->STA & (1 << 3))//Êï∞ÊçÆË∂ÖÊó∂ÈîôËØØ
 874:drivers/bsp_f1xx_sdio.c **** 	{
 875:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 3;//Ê∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞
 876:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK &= ~((1 << 1) | (1 << 3) | (1 << 8) | (1 << 14) | (1 << 15) | (1 << 4) | (1 << 5) |
 877:drivers/bsp_f1xx_sdio.c **** 						(1 << 9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Êñ≠
 878:drivers/bsp_f1xx_sdio.c **** 		TransferError = SD_DATA_TIMEOUT;
 879:drivers/bsp_f1xx_sdio.c **** 		return (SD_DATA_TIMEOUT);
 880:drivers/bsp_f1xx_sdio.c **** 	}
 881:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->STA & (1 << 5))//FIFO‰∏äÊ∫¢ÈîôËØØ
 882:drivers/bsp_f1xx_sdio.c **** 	{
 883:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 5;//Ê∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞
 884:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK &= ~((1 << 1) | (1 << 3) | (1 << 8) | (1 << 14) | (1 << 15) | (1 << 4) | (1 << 5) |
 885:drivers/bsp_f1xx_sdio.c **** 						(1 << 9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Êñ≠
 886:drivers/bsp_f1xx_sdio.c **** 		TransferError = SD_RX_OVERRUN;
 887:drivers/bsp_f1xx_sdio.c **** 		return (SD_RX_OVERRUN);
 888:drivers/bsp_f1xx_sdio.c **** 	}
 889:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->STA & (1 << 4))//FIFO‰∏ãÊ∫¢ÈîôËØØ
 890:drivers/bsp_f1xx_sdio.c **** 	{
 891:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 4;//Ê∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 28


 892:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK &= ~((1 << 1) | (1 << 3) | (1 << 8) | (1 << 14) | (1 << 15) | (1 << 4) | (1 << 5) |
 893:drivers/bsp_f1xx_sdio.c **** 						(1 << 9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Êñ≠
 894:drivers/bsp_f1xx_sdio.c **** 		TransferError = SD_TX_UNDERRUN;
 895:drivers/bsp_f1xx_sdio.c **** 		return (SD_TX_UNDERRUN);
 896:drivers/bsp_f1xx_sdio.c **** 	}
 897:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->STA & (1 << 9))//Ëµ∑Âßã‰ΩçÈîôËØØ
 898:drivers/bsp_f1xx_sdio.c **** 	{
 899:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 9;//Ê∏ÖÈô§‰∏≠Êñ≠Ê†áËÆ∞
 900:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK &= ~((1 << 1) | (1 << 3) | (1 << 8) | (1 << 14) | (1 << 15) | (1 << 4) | (1 << 5) |
 901:drivers/bsp_f1xx_sdio.c **** 						(1 << 9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Êñ≠
 902:drivers/bsp_f1xx_sdio.c **** 		TransferError = SD_START_BIT_ERR;
 903:drivers/bsp_f1xx_sdio.c **** 		return (SD_START_BIT_ERR);
 904:drivers/bsp_f1xx_sdio.c **** 	}
 905:drivers/bsp_f1xx_sdio.c **** 	return (SD_OK);
 906:drivers/bsp_f1xx_sdio.c **** }
 907:drivers/bsp_f1xx_sdio.c **** 
 908:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•CMD0ÁöÑÊâßË°åÁä∂ÊÄÅ
 909:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:sdÂç°ÈîôËØØÁ†Å
 910:drivers/bsp_f1xx_sdio.c **** SD_Error CmdError(void)
 911:drivers/bsp_f1xx_sdio.c **** {
 645              		.loc 1 911 0
 646              		.cfi_startproc
 647              		@ args = 0, pretend = 0, frame = 0
 648              		@ frame_needed = 0, uses_anonymous_args = 0
 649              		@ link register save eliminated.
 650              	.LVL81:
 912:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 913:drivers/bsp_f1xx_sdio.c **** 	u32 timeout = SDIO_CMD0TIMEOUT;
 651              		.loc 1 913 0
 652 0000 4FF48033 		mov	r3, #65536
 653              	.LVL82:
 654              	.L28:
 914:drivers/bsp_f1xx_sdio.c **** 	while (timeout--) {
 655              		.loc 1 914 0
 656 0004 5A1E     		subs	r2, r3, #1
 657              	.LVL83:
 658 0006 2BB1     		cbz	r3, .L29
 915:drivers/bsp_f1xx_sdio.c **** 		if (SDIO->STA & (1 << 7))break;    //ÂëΩ‰ª§Â∑≤ÂèëÈÄÅ(Êó†ÈúÄÂìçÂ∫î)
 659              		.loc 1 915 0
 660 0008 074B     		ldr	r3, .L33
 661 000a 596B     		ldr	r1, [r3, #52]
 914:drivers/bsp_f1xx_sdio.c **** 	while (timeout--) {
 662              		.loc 1 914 0
 663 000c 1346     		mov	r3, r2
 664              		.loc 1 915 0
 665 000e 11F0800F 		tst	r1, #128
 666 0012 F7D0     		beq	.L28
 667              	.L29:
 916:drivers/bsp_f1xx_sdio.c **** 	}
 917:drivers/bsp_f1xx_sdio.c **** 	if (timeout == 0)return SD_CMD_RSP_TIMEOUT;
 668              		.loc 1 917 0
 669 0014 2AB1     		cbz	r2, .L32
 918:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0X5FF;                //Ê∏ÖÈô§Ê†áËÆ∞
 670              		.loc 1 918 0
 671 0016 044B     		ldr	r3, .L33
 672 0018 40F2FF52 		movw	r2, #1535
 673              	.LVL84:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 29


 674 001c 9A63     		str	r2, [r3, #56]
 919:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 675              		.loc 1 919 0
 676 001e 0020     		movs	r0, #0
 677 0020 7047     		bx	lr
 678              	.LVL85:
 679              	.L32:
 917:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0X5FF;                //Ê∏ÖÈô§Ê†áËÆ∞
 680              		.loc 1 917 0
 681 0022 0320     		movs	r0, #3
 920:drivers/bsp_f1xx_sdio.c **** }
 682              		.loc 1 920 0
 683 0024 7047     		bx	lr
 684              	.L34:
 685 0026 00BF     		.align	2
 686              	.L33:
 687 0028 00800140 		.word	1073840128
 688              		.cfi_endproc
 689              	.LFE83:
 691              		.section	.text.CmdResp7Error,"ax",%progbits
 692              		.align	1
 693              		.global	CmdResp7Error
 694              		.syntax unified
 695              		.thumb
 696              		.thumb_func
 697              		.fpu softvfp
 699              	CmdResp7Error:
 700              	.LFB84:
 921:drivers/bsp_f1xx_sdio.c **** 
 922:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•R7ÂìçÂ∫îÁöÑÈîôËØØÁä∂ÊÄÅ
 923:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:sdÂç°ÈîôËØØÁ†Å
 924:drivers/bsp_f1xx_sdio.c **** SD_Error CmdResp7Error(void)
 925:drivers/bsp_f1xx_sdio.c **** {
 701              		.loc 1 925 0
 702              		.cfi_startproc
 703              		@ args = 0, pretend = 0, frame = 0
 704              		@ frame_needed = 0, uses_anonymous_args = 0
 705              		@ link register save eliminated.
 706              	.LVL86:
 926:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 927:drivers/bsp_f1xx_sdio.c **** 	u32 status;
 928:drivers/bsp_f1xx_sdio.c **** 	u32 timeout = SDIO_CMD0TIMEOUT;
 707              		.loc 1 928 0
 708 0000 4FF48033 		mov	r3, #65536
 709              	.LVL87:
 710              	.L36:
 929:drivers/bsp_f1xx_sdio.c **** 	while (timeout--) {
 711              		.loc 1 929 0
 712 0004 591E     		subs	r1, r3, #1
 713              	.LVL88:
 714 0006 2BB1     		cbz	r3, .L37
 930:drivers/bsp_f1xx_sdio.c **** 		status = SDIO->STA;
 715              		.loc 1 930 0
 716 0008 0E4B     		ldr	r3, .L43
 717 000a 5A6B     		ldr	r2, [r3, #52]
 718              	.LVL89:
 929:drivers/bsp_f1xx_sdio.c **** 	while (timeout--) {
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 30


 719              		.loc 1 929 0
 720 000c 0B46     		mov	r3, r1
 931:drivers/bsp_f1xx_sdio.c **** 		if (status & ((1 << 0) | (1 << 2) | (1 << 6)))break;//CRCÈîôËØØ/ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂/Â∑≤ÁªèÊî∂Âà∞Âì
 721              		.loc 1 931 0
 722 000e 12F0450F 		tst	r2, #69
 723 0012 F7D0     		beq	.L36
 724              	.L37:
 932:drivers/bsp_f1xx_sdio.c **** 	}
 933:drivers/bsp_f1xx_sdio.c **** 	if ((timeout == 0) || (status & (1 << 2)))    //ÂìçÂ∫îË∂ÖÊó∂
 725              		.loc 1 933 0
 726 0014 61B1     		cbz	r1, .L39
 727              		.loc 1 933 0 is_stmt 0 discriminator 1
 728 0016 12F0040F 		tst	r2, #4
 729 001a 09D1     		bne	.L39
 934:drivers/bsp_f1xx_sdio.c **** 	{
 935:drivers/bsp_f1xx_sdio.c **** 		errorstatus = SD_CMD_RSP_TIMEOUT;    //ÂΩìÂâçÂç°‰∏çÊòØ2.0ÂÖºÂÆπÂç°,ÊàñËÄÖ‰∏çÊîØÊåÅËÆæÂÆöÁöÑÁîµÂéã
 936:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 2;                //Ê∏ÖÈô§ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂Ê†áÂøó
 937:drivers/bsp_f1xx_sdio.c **** 		return errorstatus;
 938:drivers/bsp_f1xx_sdio.c **** 	}
 939:drivers/bsp_f1xx_sdio.c **** 	if (status & 1 << 6)                        //ÊàêÂäüÊé•Êî∂Âà∞ÂìçÂ∫î
 730              		.loc 1 939 0 is_stmt 1
 731 001c 12F0400F 		tst	r2, #64
 732 0020 0DD0     		beq	.L42
 940:drivers/bsp_f1xx_sdio.c **** 	{
 941:drivers/bsp_f1xx_sdio.c **** 		errorstatus = SD_OK;
 942:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 6;                //Ê∏ÖÈô§ÂìçÂ∫îÊ†áÂøó
 733              		.loc 1 942 0
 734 0022 084A     		ldr	r2, .L43
 735              	.LVL90:
 736 0024 936B     		ldr	r3, [r2, #56]
 737 0026 43F04003 		orr	r3, r3, #64
 738 002a 9363     		str	r3, [r2, #56]
 943:drivers/bsp_f1xx_sdio.c **** 	}
 944:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 739              		.loc 1 944 0
 740 002c 0020     		movs	r0, #0
 741 002e 7047     		bx	lr
 742              	.LVL91:
 743              	.L39:
 936:drivers/bsp_f1xx_sdio.c **** 		return errorstatus;
 744              		.loc 1 936 0
 745 0030 044A     		ldr	r2, .L43
 746              	.LVL92:
 747 0032 936B     		ldr	r3, [r2, #56]
 748 0034 43F00403 		orr	r3, r3, #4
 749 0038 9363     		str	r3, [r2, #56]
 937:drivers/bsp_f1xx_sdio.c **** 	}
 750              		.loc 1 937 0
 751 003a 0320     		movs	r0, #3
 752 003c 7047     		bx	lr
 753              	.LVL93:
 754              	.L42:
 755              		.loc 1 944 0
 756 003e 0020     		movs	r0, #0
 945:drivers/bsp_f1xx_sdio.c **** }
 757              		.loc 1 945 0
 758 0040 7047     		bx	lr
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 31


 759              	.L44:
 760 0042 00BF     		.align	2
 761              	.L43:
 762 0044 00800140 		.word	1073840128
 763              		.cfi_endproc
 764              	.LFE84:
 766              		.section	.text.CmdResp1Error,"ax",%progbits
 767              		.align	1
 768              		.global	CmdResp1Error
 769              		.syntax unified
 770              		.thumb
 771              		.thumb_func
 772              		.fpu softvfp
 774              	CmdResp1Error:
 775              	.LFB85:
 946:drivers/bsp_f1xx_sdio.c **** 
 947:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•R1ÂìçÂ∫îÁöÑÈîôËØØÁä∂ÊÄÅ
 948:drivers/bsp_f1xx_sdio.c **** //cmd:ÂΩìÂâçÂëΩ‰ª§
 949:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:sdÂç°ÈîôËØØÁ†Å
 950:drivers/bsp_f1xx_sdio.c **** SD_Error CmdResp1Error(u8 cmd)
 951:drivers/bsp_f1xx_sdio.c **** {
 776              		.loc 1 951 0
 777              		.cfi_startproc
 778              		@ args = 0, pretend = 0, frame = 0
 779              		@ frame_needed = 0, uses_anonymous_args = 0
 780              		@ link register save eliminated.
 781              	.LVL94:
 782              	.L46:
 952:drivers/bsp_f1xx_sdio.c **** 	u32 status;
 953:drivers/bsp_f1xx_sdio.c **** 	while (1) {
 954:drivers/bsp_f1xx_sdio.c **** 		status = SDIO->STA;
 783              		.loc 1 954 0
 784 0000 104B     		ldr	r3, .L53
 785 0002 5B6B     		ldr	r3, [r3, #52]
 786              	.LVL95:
 955:drivers/bsp_f1xx_sdio.c **** 		if (status & ((1 << 0) | (1 << 2) | (1 << 6)))break;//CRCÈîôËØØ/ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂/Â∑≤ÁªèÊî∂Âà∞Âì
 787              		.loc 1 955 0
 788 0004 13F0450F 		tst	r3, #69
 789 0008 FAD0     		beq	.L46
 956:drivers/bsp_f1xx_sdio.c **** 	}
 957:drivers/bsp_f1xx_sdio.c **** 	if (status & (1 << 2))                    //ÂìçÂ∫îË∂ÖÊó∂
 790              		.loc 1 957 0
 791 000a 13F0040F 		tst	r3, #4
 792 000e 0ED1     		bne	.L51
 958:drivers/bsp_f1xx_sdio.c **** 	{
 959:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR = 1 << 2;                    //Ê∏ÖÈô§ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂Ê†áÂøó
 960:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_RSP_TIMEOUT;
 961:drivers/bsp_f1xx_sdio.c **** 	}
 962:drivers/bsp_f1xx_sdio.c **** 	if (status & (1 << 0))                    //CRCÈîôËØØ
 793              		.loc 1 962 0
 794 0010 13F0010F 		tst	r3, #1
 795 0014 10D1     		bne	.L52
 963:drivers/bsp_f1xx_sdio.c **** 	{
 964:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR = 1 << 0;                    //Ê∏ÖÈô§Ê†áÂøó
 965:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_CRC_FAIL;
 966:drivers/bsp_f1xx_sdio.c **** 	}
 967:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->RESPCMD != cmd)return SD_ILLEGAL_CMD;//ÂëΩ‰ª§‰∏çÂåπÈÖç
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 32


 796              		.loc 1 967 0
 797 0016 0B4B     		ldr	r3, .L53
 798              	.LVL96:
 799 0018 1B69     		ldr	r3, [r3, #16]
 800 001a 8342     		cmp	r3, r0
 801 001c 10D1     		bne	.L50
 968:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0X5FF;                    //Ê∏ÖÈô§Ê†áËÆ∞
 802              		.loc 1 968 0
 803 001e 094B     		ldr	r3, .L53
 804 0020 40F2FF52 		movw	r2, #1535
 805 0024 9A63     		str	r2, [r3, #56]
 969:drivers/bsp_f1xx_sdio.c **** 	return (SD_Error) (SDIO->RESP1 & SD_OCR_ERRORBITS);//ËøîÂõûÂç°ÂìçÂ∫î
 806              		.loc 1 969 0
 807 0026 5869     		ldr	r0, [r3, #20]
 808              	.LVL97:
 809 0028 00F00800 		and	r0, r0, #8
 810 002c 7047     		bx	lr
 811              	.LVL98:
 812              	.L51:
 959:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_RSP_TIMEOUT;
 813              		.loc 1 959 0
 814 002e 054B     		ldr	r3, .L53
 815              	.LVL99:
 816 0030 0422     		movs	r2, #4
 817 0032 9A63     		str	r2, [r3, #56]
 960:drivers/bsp_f1xx_sdio.c **** 	}
 818              		.loc 1 960 0
 819 0034 0320     		movs	r0, #3
 820              	.LVL100:
 821 0036 7047     		bx	lr
 822              	.LVL101:
 823              	.L52:
 964:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_CRC_FAIL;
 824              		.loc 1 964 0
 825 0038 0120     		movs	r0, #1
 826              	.LVL102:
 827 003a 024B     		ldr	r3, .L53
 828              	.LVL103:
 829 003c 9863     		str	r0, [r3, #56]
 965:drivers/bsp_f1xx_sdio.c **** 	}
 830              		.loc 1 965 0
 831 003e 7047     		bx	lr
 832              	.LVL104:
 833              	.L50:
 967:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0X5FF;                    //Ê∏ÖÈô§Ê†áËÆ∞
 834              		.loc 1 967 0
 835 0040 1020     		movs	r0, #16
 836              	.LVL105:
 970:drivers/bsp_f1xx_sdio.c **** }
 837              		.loc 1 970 0
 838 0042 7047     		bx	lr
 839              	.L54:
 840              		.align	2
 841              	.L53:
 842 0044 00800140 		.word	1073840128
 843              		.cfi_endproc
 844              	.LFE85:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 33


 846              		.section	.text.SD_SelectDeselect,"ax",%progbits
 847              		.align	1
 848              		.global	SD_SelectDeselect
 849              		.syntax unified
 850              		.thumb
 851              		.thumb_func
 852              		.fpu softvfp
 854              	SD_SelectDeselect:
 855              	.LFB76:
 398:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_SEL_DESEL_CARD, 1, addr);    //ÂèëÈÄÅCMD7,ÈÄâÊã©Âç°,Áü≠ÂìçÂ∫î
 856              		.loc 1 398 0
 857              		.cfi_startproc
 858              		@ args = 0, pretend = 0, frame = 0
 859              		@ frame_needed = 0, uses_anonymous_args = 0
 860              	.LVL106:
 861 0000 08B5     		push	{r3, lr}
 862              	.LCFI6:
 863              		.cfi_def_cfa_offset 8
 864              		.cfi_offset 3, -8
 865              		.cfi_offset 14, -4
 399:drivers/bsp_f1xx_sdio.c **** 	return CmdResp1Error(SD_CMD_SEL_DESEL_CARD);
 866              		.loc 1 399 0
 867 0002 0246     		mov	r2, r0
 868 0004 0121     		movs	r1, #1
 869 0006 0720     		movs	r0, #7
 870              	.LVL107:
 871 0008 FFF7FEFF 		bl	SDIO_Send_Cmd
 872              	.LVL108:
 400:drivers/bsp_f1xx_sdio.c **** }
 873              		.loc 1 400 0
 874 000c 0720     		movs	r0, #7
 875 000e FFF7FEFF 		bl	CmdResp1Error
 876              	.LVL109:
 401:drivers/bsp_f1xx_sdio.c **** 
 877              		.loc 1 401 0
 878 0012 08BD     		pop	{r3, pc}
 879              		.cfi_endproc
 880              	.LFE76:
 882              		.section	.text.SD_ProcessIRQSrc,"ax",%progbits
 883              		.align	1
 884              		.global	SD_ProcessIRQSrc
 885              		.syntax unified
 886              		.thumb
 887              		.thumb_func
 888              		.fpu softvfp
 890              	SD_ProcessIRQSrc:
 891              	.LFB82:
 852:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->STA & (1 << 8))//Êé•Êî∂ÂÆåÊàê‰∏≠Êñ≠
 892              		.loc 1 852 0
 893              		.cfi_startproc
 894              		@ args = 0, pretend = 0, frame = 0
 895              		@ frame_needed = 0, uses_anonymous_args = 0
 896 0000 08B5     		push	{r3, lr}
 897              	.LCFI7:
 898              		.cfi_def_cfa_offset 8
 899              		.cfi_offset 3, -8
 900              		.cfi_offset 14, -4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 34


 853:drivers/bsp_f1xx_sdio.c **** 	{
 901              		.loc 1 853 0
 902 0002 474B     		ldr	r3, .L74
 903 0004 5B6B     		ldr	r3, [r3, #52]
 904 0006 13F4807F 		tst	r3, #256
 905 000a 23D0     		beq	.L58
 855:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_STOP_TRANSMISSION, 1, 0);        //ÂèëÈÄÅCMD12,ÁªìÊùü‰º†Ëæì
 906              		.loc 1 855 0
 907 000c 454B     		ldr	r3, .L74+4
 908 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 909 0010 012B     		cmp	r3, #1
 910 0012 14D0     		beq	.L68
 858:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 8;//Ê∏ÖÈô§ÂÆåÊàê‰∏≠Êñ≠Ê†áËÆ∞
 911              		.loc 1 858 0
 912 0014 444B     		ldr	r3, .L74+8
 913 0016 0022     		movs	r2, #0
 914 0018 1A70     		strb	r2, [r3]
 915              	.L60:
 859:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK &= ~((1 << 1) | (1 << 3) | (1 << 8) | (1 << 14) | (1 << 15) | (1 << 4) | (1 << 5) |
 916              		.loc 1 859 0
 917 001a 414A     		ldr	r2, .L74
 918 001c 936B     		ldr	r3, [r2, #56]
 919 001e 43F48073 		orr	r3, r3, #256
 920 0022 9363     		str	r3, [r2, #56]
 860:drivers/bsp_f1xx_sdio.c **** 						(1 << 9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Êñ≠
 921              		.loc 1 860 0
 922 0024 D36B     		ldr	r3, [r2, #60]
 923 0026 23F44343 		bic	r3, r3, #49920
 924 002a 23F03A03 		bic	r3, r3, #58
 925 002e D363     		str	r3, [r2, #60]
 862:drivers/bsp_f1xx_sdio.c **** 		return (TransferError);
 926              		.loc 1 862 0
 927 0030 3E4B     		ldr	r3, .L74+12
 928 0032 0122     		movs	r2, #1
 929 0034 1A70     		strb	r2, [r3]
 863:drivers/bsp_f1xx_sdio.c **** 	}
 930              		.loc 1 863 0
 931 0036 3C4B     		ldr	r3, .L74+8
 932 0038 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 933 003a C0B2     		uxtb	r0, r0
 934              	.L61:
 906:drivers/bsp_f1xx_sdio.c **** 
 935              		.loc 1 906 0
 936 003c 08BD     		pop	{r3, pc}
 937              	.L68:
 856:drivers/bsp_f1xx_sdio.c **** 			TransferError = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);
 938              		.loc 1 856 0
 939 003e 0022     		movs	r2, #0
 940 0040 0121     		movs	r1, #1
 941 0042 0C20     		movs	r0, #12
 942 0044 FFF7FEFF 		bl	SDIO_Send_Cmd
 943              	.LVL110:
 857:drivers/bsp_f1xx_sdio.c **** 		} else TransferError = SD_OK;
 944              		.loc 1 857 0
 945 0048 0C20     		movs	r0, #12
 946 004a FFF7FEFF 		bl	CmdResp1Error
 947              	.LVL111:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 35


 948 004e 364B     		ldr	r3, .L74+8
 949 0050 1870     		strb	r0, [r3]
 950 0052 E2E7     		b	.L60
 951              	.L58:
 865:drivers/bsp_f1xx_sdio.c **** 	{
 952              		.loc 1 865 0
 953 0054 324B     		ldr	r3, .L74
 954 0056 5B6B     		ldr	r3, [r3, #52]
 955 0058 13F0020F 		tst	r3, #2
 956 005c 15D1     		bne	.L69
 873:drivers/bsp_f1xx_sdio.c **** 	{
 957              		.loc 1 873 0
 958 005e 304B     		ldr	r3, .L74
 959 0060 5B6B     		ldr	r3, [r3, #52]
 960 0062 13F0080F 		tst	r3, #8
 961 0066 1FD1     		bne	.L70
 881:drivers/bsp_f1xx_sdio.c **** 	{
 962              		.loc 1 881 0
 963 0068 2D4B     		ldr	r3, .L74
 964 006a 5B6B     		ldr	r3, [r3, #52]
 965 006c 13F0200F 		tst	r3, #32
 966 0070 29D1     		bne	.L71
 889:drivers/bsp_f1xx_sdio.c **** 	{
 967              		.loc 1 889 0
 968 0072 2B4B     		ldr	r3, .L74
 969 0074 5B6B     		ldr	r3, [r3, #52]
 970 0076 13F0100F 		tst	r3, #16
 971 007a 33D1     		bne	.L72
 897:drivers/bsp_f1xx_sdio.c **** 	{
 972              		.loc 1 897 0
 973 007c 284B     		ldr	r3, .L74
 974 007e 5B6B     		ldr	r3, [r3, #52]
 975 0080 13F4007F 		tst	r3, #512
 976 0084 3DD1     		bne	.L73
 905:drivers/bsp_f1xx_sdio.c **** }
 977              		.loc 1 905 0
 978 0086 0020     		movs	r0, #0
 979 0088 D8E7     		b	.L61
 980              	.L69:
 867:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK &= ~((1 << 1) | (1 << 3) | (1 << 8) | (1 << 14) | (1 << 15) | (1 << 4) | (1 << 5) |
 981              		.loc 1 867 0
 982 008a 254A     		ldr	r2, .L74
 983 008c 936B     		ldr	r3, [r2, #56]
 984 008e 43F00203 		orr	r3, r3, #2
 985 0092 9363     		str	r3, [r2, #56]
 868:drivers/bsp_f1xx_sdio.c **** 						(1 << 9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Êñ≠
 986              		.loc 1 868 0
 987 0094 D36B     		ldr	r3, [r2, #60]
 988 0096 23F44343 		bic	r3, r3, #49920
 989 009a 23F03A03 		bic	r3, r3, #58
 990 009e D363     		str	r3, [r2, #60]
 870:drivers/bsp_f1xx_sdio.c **** 		return (SD_DATA_CRC_FAIL);
 991              		.loc 1 870 0
 992 00a0 0220     		movs	r0, #2
 993 00a2 214B     		ldr	r3, .L74+8
 994 00a4 1870     		strb	r0, [r3]
 871:drivers/bsp_f1xx_sdio.c **** 	}
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 36


 995              		.loc 1 871 0
 996 00a6 C9E7     		b	.L61
 997              	.L70:
 875:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK &= ~((1 << 1) | (1 << 3) | (1 << 8) | (1 << 14) | (1 << 15) | (1 << 4) | (1 << 5) |
 998              		.loc 1 875 0
 999 00a8 1D4A     		ldr	r2, .L74
 1000 00aa 936B     		ldr	r3, [r2, #56]
 1001 00ac 43F00803 		orr	r3, r3, #8
 1002 00b0 9363     		str	r3, [r2, #56]
 876:drivers/bsp_f1xx_sdio.c **** 						(1 << 9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Êñ≠
 1003              		.loc 1 876 0
 1004 00b2 D36B     		ldr	r3, [r2, #60]
 1005 00b4 23F44343 		bic	r3, r3, #49920
 1006 00b8 23F03A03 		bic	r3, r3, #58
 1007 00bc D363     		str	r3, [r2, #60]
 878:drivers/bsp_f1xx_sdio.c **** 		return (SD_DATA_TIMEOUT);
 1008              		.loc 1 878 0
 1009 00be 0420     		movs	r0, #4
 1010 00c0 194B     		ldr	r3, .L74+8
 1011 00c2 1870     		strb	r0, [r3]
 879:drivers/bsp_f1xx_sdio.c **** 	}
 1012              		.loc 1 879 0
 1013 00c4 BAE7     		b	.L61
 1014              	.L71:
 883:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK &= ~((1 << 1) | (1 << 3) | (1 << 8) | (1 << 14) | (1 << 15) | (1 << 4) | (1 << 5) |
 1015              		.loc 1 883 0
 1016 00c6 164A     		ldr	r2, .L74
 1017 00c8 936B     		ldr	r3, [r2, #56]
 1018 00ca 43F02003 		orr	r3, r3, #32
 1019 00ce 9363     		str	r3, [r2, #56]
 884:drivers/bsp_f1xx_sdio.c **** 						(1 << 9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Êñ≠
 1020              		.loc 1 884 0
 1021 00d0 D36B     		ldr	r3, [r2, #60]
 1022 00d2 23F44343 		bic	r3, r3, #49920
 1023 00d6 23F03A03 		bic	r3, r3, #58
 1024 00da D363     		str	r3, [r2, #60]
 886:drivers/bsp_f1xx_sdio.c **** 		return (SD_RX_OVERRUN);
 1025              		.loc 1 886 0
 1026 00dc 0620     		movs	r0, #6
 1027 00de 124B     		ldr	r3, .L74+8
 1028 00e0 1870     		strb	r0, [r3]
 887:drivers/bsp_f1xx_sdio.c **** 	}
 1029              		.loc 1 887 0
 1030 00e2 ABE7     		b	.L61
 1031              	.L72:
 891:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK &= ~((1 << 1) | (1 << 3) | (1 << 8) | (1 << 14) | (1 << 15) | (1 << 4) | (1 << 5) |
 1032              		.loc 1 891 0
 1033 00e4 0E4A     		ldr	r2, .L74
 1034 00e6 936B     		ldr	r3, [r2, #56]
 1035 00e8 43F01003 		orr	r3, r3, #16
 1036 00ec 9363     		str	r3, [r2, #56]
 892:drivers/bsp_f1xx_sdio.c **** 						(1 << 9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Êñ≠
 1037              		.loc 1 892 0
 1038 00ee D36B     		ldr	r3, [r2, #60]
 1039 00f0 23F44343 		bic	r3, r3, #49920
 1040 00f4 23F03A03 		bic	r3, r3, #58
 1041 00f8 D363     		str	r3, [r2, #60]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 37


 894:drivers/bsp_f1xx_sdio.c **** 		return (SD_TX_UNDERRUN);
 1042              		.loc 1 894 0
 1043 00fa 0520     		movs	r0, #5
 1044 00fc 0A4B     		ldr	r3, .L74+8
 1045 00fe 1870     		strb	r0, [r3]
 895:drivers/bsp_f1xx_sdio.c **** 	}
 1046              		.loc 1 895 0
 1047 0100 9CE7     		b	.L61
 1048              	.L73:
 899:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK &= ~((1 << 1) | (1 << 3) | (1 << 8) | (1 << 14) | (1 << 15) | (1 << 4) | (1 << 5) |
 1049              		.loc 1 899 0
 1050 0102 074A     		ldr	r2, .L74
 1051 0104 936B     		ldr	r3, [r2, #56]
 1052 0106 43F40073 		orr	r3, r3, #512
 1053 010a 9363     		str	r3, [r2, #56]
 900:drivers/bsp_f1xx_sdio.c **** 						(1 << 9));//ÂÖ≥Èó≠Áõ∏ÂÖ≥‰∏≠Êñ≠
 1054              		.loc 1 900 0
 1055 010c D36B     		ldr	r3, [r2, #60]
 1056 010e 23F44343 		bic	r3, r3, #49920
 1057 0112 23F03A03 		bic	r3, r3, #58
 1058 0116 D363     		str	r3, [r2, #60]
 902:drivers/bsp_f1xx_sdio.c **** 		return (SD_START_BIT_ERR);
 1059              		.loc 1 902 0
 1060 0118 0720     		movs	r0, #7
 1061 011a 034B     		ldr	r3, .L74+8
 1062 011c 1870     		strb	r0, [r3]
 903:drivers/bsp_f1xx_sdio.c **** 	}
 1063              		.loc 1 903 0
 1064 011e 8DE7     		b	.L61
 1065              	.L75:
 1066              		.align	2
 1067              	.L74:
 1068 0120 00800140 		.word	1073840128
 1069 0124 00000000 		.word	.LANCHOR5
 1070 0128 00000000 		.word	.LANCHOR6
 1071 012c 00000000 		.word	.LANCHOR7
 1072              		.cfi_endproc
 1073              	.LFE82:
 1075              		.section	.text.SDIO_IRQHandler,"ax",%progbits
 1076              		.align	1
 1077              		.global	SDIO_IRQHandler
 1078              		.syntax unified
 1079              		.thumb
 1080              		.thumb_func
 1081              		.fpu softvfp
 1083              	SDIO_IRQHandler:
 1084              	.LFB81:
 844:drivers/bsp_f1xx_sdio.c **** 	SD_ProcessIRQSrc();//Â§ÑÁêÜÊâÄÊúâSDIOÁõ∏ÂÖ≥‰∏≠Êñ≠
 1085              		.loc 1 844 0
 1086              		.cfi_startproc
 1087              		@ args = 0, pretend = 0, frame = 0
 1088              		@ frame_needed = 0, uses_anonymous_args = 0
 1089 0000 08B5     		push	{r3, lr}
 1090              	.LCFI8:
 1091              		.cfi_def_cfa_offset 8
 1092              		.cfi_offset 3, -8
 1093              		.cfi_offset 14, -4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 38


 845:drivers/bsp_f1xx_sdio.c **** }
 1094              		.loc 1 845 0
 1095 0002 FFF7FEFF 		bl	SD_ProcessIRQSrc
 1096              	.LVL112:
 846:drivers/bsp_f1xx_sdio.c **** 
 1097              		.loc 1 846 0
 1098 0006 08BD     		pop	{r3, pc}
 1099              		.cfi_endproc
 1100              	.LFE81:
 1102              		.section	.text.CmdResp3Error,"ax",%progbits
 1103              		.align	1
 1104              		.global	CmdResp3Error
 1105              		.syntax unified
 1106              		.thumb
 1107              		.thumb_func
 1108              		.fpu softvfp
 1110              	CmdResp3Error:
 1111              	.LFB86:
 971:drivers/bsp_f1xx_sdio.c **** 
 972:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•R3ÂìçÂ∫îÁöÑÈîôËØØÁä∂ÊÄÅ
 973:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 974:drivers/bsp_f1xx_sdio.c **** SD_Error CmdResp3Error(void)
 975:drivers/bsp_f1xx_sdio.c **** {
 1112              		.loc 1 975 0
 1113              		.cfi_startproc
 1114              		@ args = 0, pretend = 0, frame = 0
 1115              		@ frame_needed = 0, uses_anonymous_args = 0
 1116              		@ link register save eliminated.
 1117              	.L79:
 976:drivers/bsp_f1xx_sdio.c **** 	u32 status;
 977:drivers/bsp_f1xx_sdio.c **** 	while (1) {
 978:drivers/bsp_f1xx_sdio.c **** 		status = SDIO->STA;
 1118              		.loc 1 978 0
 1119 0000 0A4B     		ldr	r3, .L83
 1120 0002 5B6B     		ldr	r3, [r3, #52]
 1121              	.LVL113:
 979:drivers/bsp_f1xx_sdio.c **** 		if (status & ((1 << 0) | (1 << 2) | (1 << 6)))break;//CRCÈîôËØØ/ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂/Â∑≤ÁªèÊî∂Âà∞Âì
 1122              		.loc 1 979 0
 1123 0004 13F0450F 		tst	r3, #69
 1124 0008 FAD0     		beq	.L79
 980:drivers/bsp_f1xx_sdio.c **** 	}
 981:drivers/bsp_f1xx_sdio.c **** 	if (status & (1 << 2))                    //ÂìçÂ∫îË∂ÖÊó∂
 1125              		.loc 1 981 0
 1126 000a 13F0040F 		tst	r3, #4
 1127 000e 05D1     		bne	.L82
 982:drivers/bsp_f1xx_sdio.c **** 	{
 983:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 2;                //Ê∏ÖÈô§ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂Ê†áÂøó
 984:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_RSP_TIMEOUT;
 985:drivers/bsp_f1xx_sdio.c **** 	}
 986:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0X5FF;                    //Ê∏ÖÈô§Ê†áËÆ∞
 1128              		.loc 1 986 0
 1129 0010 064B     		ldr	r3, .L83
 1130              	.LVL114:
 1131 0012 40F2FF52 		movw	r2, #1535
 1132 0016 9A63     		str	r2, [r3, #56]
 987:drivers/bsp_f1xx_sdio.c **** 	return SD_OK;
 1133              		.loc 1 987 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 39


 1134 0018 0020     		movs	r0, #0
 988:drivers/bsp_f1xx_sdio.c **** }
 1135              		.loc 1 988 0
 1136 001a 7047     		bx	lr
 1137              	.LVL115:
 1138              	.L82:
 983:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_RSP_TIMEOUT;
 1139              		.loc 1 983 0
 1140 001c 034A     		ldr	r2, .L83
 1141 001e 936B     		ldr	r3, [r2, #56]
 1142              	.LVL116:
 1143 0020 43F00403 		orr	r3, r3, #4
 1144 0024 9363     		str	r3, [r2, #56]
 984:drivers/bsp_f1xx_sdio.c **** 	}
 1145              		.loc 1 984 0
 1146 0026 0320     		movs	r0, #3
 1147 0028 7047     		bx	lr
 1148              	.L84:
 1149 002a 00BF     		.align	2
 1150              	.L83:
 1151 002c 00800140 		.word	1073840128
 1152              		.cfi_endproc
 1153              	.LFE86:
 1155              		.section	.text.SD_PowerON,"ax",%progbits
 1156              		.align	1
 1157              		.global	SD_PowerON
 1158              		.syntax unified
 1159              		.thumb
 1160              		.thumb_func
 1161              		.fpu softvfp
 1163              	SD_PowerON:
 1164              	.LFB70:
 112:drivers/bsp_f1xx_sdio.c **** 	u8 i = 0;
 1165              		.loc 1 112 0
 1166              		.cfi_startproc
 1167              		@ args = 0, pretend = 0, frame = 0
 1168              		@ frame_needed = 0, uses_anonymous_args = 0
 1169 0000 38B5     		push	{r3, r4, r5, lr}
 1170              	.LCFI9:
 1171              		.cfi_def_cfa_offset 16
 1172              		.cfi_offset 3, -16
 1173              		.cfi_offset 4, -12
 1174              		.cfi_offset 5, -8
 1175              		.cfi_offset 14, -4
 1176              	.LVL117:
 118:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR |= 0 << 9;            //ÈùûÁúÅÁîµÊ®°Âºè
 1177              		.loc 1 118 0
 1178 0002 4A4D     		ldr	r5, .L103
 1179 0004 0024     		movs	r4, #0
 1180 0006 6C60     		str	r4, [r5, #4]
 119:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR |= 0 << 10;            //ÂÖ≥Èó≠ÊóÅË∑Ø,CKÊ†πÊçÆÂàÜÈ¢ëËÆæÁΩÆËæìÂá∫
 1181              		.loc 1 119 0
 1182 0008 6B68     		ldr	r3, [r5, #4]
 1183 000a 6B60     		str	r3, [r5, #4]
 120:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR |= 0 << 11;            //1‰ΩçÊï∞ÊçÆÂÆΩÂ∫¶
 1184              		.loc 1 120 0
 1185 000c 6B68     		ldr	r3, [r5, #4]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 40


 1186 000e 6B60     		str	r3, [r5, #4]
 121:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR |= 0 << 13;            //SDIOCLK‰∏äÂçáÊ≤ø‰∫ßÁîüSDIOCK
 1187              		.loc 1 121 0
 1188 0010 6B68     		ldr	r3, [r5, #4]
 1189 0012 6B60     		str	r3, [r5, #4]
 122:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR |= 0 << 14;            //ÂÖ≥Èó≠Á°¨‰ª∂ÊµÅÊéßÂà∂
 1190              		.loc 1 122 0
 1191 0014 6B68     		ldr	r3, [r5, #4]
 1192 0016 6B60     		str	r3, [r5, #4]
 123:drivers/bsp_f1xx_sdio.c **** 	SDIO_Clock_Set(SDIO_INIT_CLK_DIV);//ËÆæÁΩÆÊó∂ÈíüÈ¢ëÁéá(ÂàùÂßãÂåñÁöÑÊó∂ÂÄô,‰∏çËÉΩË∂ÖËøá400Khz)
 1193              		.loc 1 123 0
 1194 0018 6B68     		ldr	r3, [r5, #4]
 1195 001a 6B60     		str	r3, [r5, #4]
 124:drivers/bsp_f1xx_sdio.c **** 	SDIO->POWER = 0X03;            //‰∏äÁîµÁä∂ÊÄÅ,ÂºÄÂêØÂç°Êó∂Èíü
 1196              		.loc 1 124 0
 1197 001c B220     		movs	r0, #178
 1198 001e FFF7FEFF 		bl	SDIO_Clock_Set
 1199              	.LVL118:
 125:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR |= 1 << 8;            //SDIOCK‰ΩøËÉΩ
 1200              		.loc 1 125 0
 1201 0022 0323     		movs	r3, #3
 1202 0024 2B60     		str	r3, [r5]
 126:drivers/bsp_f1xx_sdio.c **** 	for (i = 0; i < 74; i++) {
 1203              		.loc 1 126 0
 1204 0026 6B68     		ldr	r3, [r5, #4]
 1205 0028 43F48073 		orr	r3, r3, #256
 1206 002c 6B60     		str	r3, [r5, #4]
 114:drivers/bsp_f1xx_sdio.c **** 	u32 response = 0, count = 0, validvoltage = 0;
 1207              		.loc 1 114 0
 1208 002e 2346     		mov	r3, r4
 1209              	.LVL119:
 1210              	.L86:
 127:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_GO_IDLE_STATE, 0, 0);//ÂèëÈÄÅCMD0ËøõÂÖ•IDLE STAGEÊ®°ÂºèÂëΩ‰ª§.
 1211              		.loc 1 127 0 discriminator 1
 1212 0030 492C     		cmp	r4, #73
 1213 0032 0BD8     		bhi	.L87
 128:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdError();
 1214              		.loc 1 128 0
 1215 0034 0022     		movs	r2, #0
 1216 0036 1146     		mov	r1, r2
 1217 0038 1046     		mov	r0, r2
 1218 003a FFF7FEFF 		bl	SDIO_Send_Cmd
 1219              	.LVL120:
 129:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus == SD_OK)break;
 1220              		.loc 1 129 0
 1221 003e FFF7FEFF 		bl	CmdError
 1222              	.LVL121:
 130:drivers/bsp_f1xx_sdio.c **** 	}
 1223              		.loc 1 130 0
 1224 0042 0346     		mov	r3, r0
 1225 0044 10B1     		cbz	r0, .L87
 127:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_GO_IDLE_STATE, 0, 0);//ÂèëÈÄÅCMD0ËøõÂÖ•IDLE STAGEÊ®°ÂºèÂëΩ‰ª§.
 1226              		.loc 1 127 0 discriminator 2
 1227 0046 0134     		adds	r4, r4, #1
 1228              	.LVL122:
 1229 0048 E4B2     		uxtb	r4, r4
 1230              	.LVL123:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 41


 1231 004a F1E7     		b	.L86
 1232              	.LVL124:
 1233              	.L87:
 132:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SDIO_SEND_IF_COND, 1, SD_CHECK_PATTERN);//ÂèëÈÄÅCMD8,Áü≠ÂìçÂ∫î,Ê£ÄÊü•SDÂç°Êé•Âè£ÁâπÊ
 1234              		.loc 1 132 0
 1235 004c 0BB1     		cbz	r3, .L102
 1236              	.LVL125:
 1237              	.L89:
 184:drivers/bsp_f1xx_sdio.c **** 
 1238              		.loc 1 184 0
 1239 004e 1846     		mov	r0, r3
 1240 0050 38BD     		pop	{r3, r4, r5, pc}
 1241              	.LVL126:
 1242              	.L102:
 133:drivers/bsp_f1xx_sdio.c **** 	//arg[11:8]:01,ÊîØÊåÅÁîµÂéãËåÉÂõ¥,2.7~3.6V
 1243              		.loc 1 133 0
 1244 0052 4FF4D572 		mov	r2, #426
 1245 0056 0121     		movs	r1, #1
 1246 0058 0820     		movs	r0, #8
 1247 005a FFF7FEFF 		bl	SDIO_Send_Cmd
 1248              	.LVL127:
 137:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)                                //R7ÂìçÂ∫îÊ≠£Â∏∏
 1249              		.loc 1 137 0
 1250 005e FFF7FEFF 		bl	CmdResp7Error
 1251              	.LVL128:
 138:drivers/bsp_f1xx_sdio.c **** 	{
 1252              		.loc 1 138 0
 1253 0062 28BB     		cbnz	r0, .L97
 140:drivers/bsp_f1xx_sdio.c **** 		SDType = SD_HIGH_CAPACITY;                        //È´òÂÆπÈáèÂç°
 1254              		.loc 1 140 0
 1255 0064 324B     		ldr	r3, .L103+4
 1256 0066 0122     		movs	r2, #1
 1257 0068 1A70     		strb	r2, [r3]
 1258              	.LVL129:
 141:drivers/bsp_f1xx_sdio.c **** 	}
 1259              		.loc 1 141 0
 1260 006a 4FF08045 		mov	r5, #1073741824
 1261              	.LVL130:
 1262              	.L90:
 143:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_APP_CMD);            //Á≠âÂæÖR1ÂìçÂ∫î
 1263              		.loc 1 143 0
 1264 006e 0022     		movs	r2, #0
 1265 0070 0121     		movs	r1, #1
 1266 0072 3720     		movs	r0, #55
 1267              	.LVL131:
 1268 0074 FFF7FEFF 		bl	SDIO_Send_Cmd
 1269              	.LVL132:
 144:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)//SD2.0/SD 1.1,Âê¶Âàô‰∏∫MMCÂç°
 1270              		.loc 1 144 0
 1271 0078 3720     		movs	r0, #55
 1272 007a FFF7FEFF 		bl	CmdResp1Error
 1273              	.LVL133:
 145:drivers/bsp_f1xx_sdio.c **** 	{
 1274              		.loc 1 145 0
 1275 007e 0346     		mov	r3, r0
 1276 0080 C0B1     		cbz	r0, .L98
 115:drivers/bsp_f1xx_sdio.c **** 	u32 SDType = SD_STD_CAPACITY;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 42


 1277              		.loc 1 115 0
 1278 0082 0022     		movs	r2, #0
 1279 0084 1446     		mov	r4, r2
 1280              	.LVL134:
 1281              	.L92:
 169:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_SEND_OP_COND, 1, SD_VOLTAGE_WINDOW_MMC);//ÂèëÈÄÅCMD1,Áü≠ÂìçÂ∫î
 1282              		.loc 1 169 0
 1283 0086 002A     		cmp	r2, #0
 1284 0088 44D1     		bne	.L95
 169:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_SEND_OP_COND, 1, SD_VOLTAGE_WINDOW_MMC);//ÂèëÈÄÅCMD1,Áü≠ÂìçÂ∫î
 1285              		.loc 1 169 0 is_stmt 0 discriminator 1
 1286 008a 4FF6FE72 		movw	r2, #65534
 1287              	.LVL135:
 1288 008e 9442     		cmp	r4, r2
 1289 0090 40D8     		bhi	.L95
 170:drivers/bsp_f1xx_sdio.c **** 			errorstatus = CmdResp3Error();                    //Á≠âÂæÖR3ÂìçÂ∫î
 1290              		.loc 1 170 0 is_stmt 1
 1291 0092 284A     		ldr	r2, .L103+8
 1292 0094 0121     		movs	r1, #1
 1293 0096 0846     		mov	r0, r1
 1294 0098 FFF7FEFF 		bl	SDIO_Send_Cmd
 1295              	.LVL136:
 171:drivers/bsp_f1xx_sdio.c **** 			if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 1296              		.loc 1 171 0
 1297 009c FFF7FEFF 		bl	CmdResp3Error
 1298              	.LVL137:
 172:drivers/bsp_f1xx_sdio.c **** 			response = SDIO->RESP1;;                            //ÂæóÂà∞ÂìçÂ∫î
 1299              		.loc 1 172 0
 1300 00a0 0346     		mov	r3, r0
 1301 00a2 0028     		cmp	r0, #0
 1302 00a4 D3D1     		bne	.L89
 173:drivers/bsp_f1xx_sdio.c **** 			validvoltage = (((response >> 31) == 1) ? 1 : 0);
 1303              		.loc 1 173 0
 1304 00a6 214A     		ldr	r2, .L103
 1305 00a8 5269     		ldr	r2, [r2, #20]
 1306              	.LVL138:
 174:drivers/bsp_f1xx_sdio.c **** 			count++;
 1307              		.loc 1 174 0
 1308 00aa D20F     		lsrs	r2, r2, #31
 1309              	.LVL139:
 175:drivers/bsp_f1xx_sdio.c **** 		}
 1310              		.loc 1 175 0
 1311 00ac 0134     		adds	r4, r4, #1
 1312              	.LVL140:
 1313 00ae EAE7     		b	.L92
 1314              	.LVL141:
 1315              	.L97:
 116:drivers/bsp_f1xx_sdio.c **** 	//ÈÖçÁΩÆCLKCRÂØÑÂ≠òÂô®
 1316              		.loc 1 116 0
 1317 00b0 0025     		movs	r5, #0
 1318 00b2 DCE7     		b	.L90
 1319              	.LVL142:
 1320              	.L98:
 115:drivers/bsp_f1xx_sdio.c **** 	u32 SDType = SD_STD_CAPACITY;
 1321              		.loc 1 115 0
 1322 00b4 0022     		movs	r2, #0
 1323 00b6 1446     		mov	r4, r2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 43


 1324              	.LVL143:
 1325 00b8 1146     		mov	r1, r2
 1326              	.LVL144:
 1327              	.L91:
 148:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_APP_CMD, 1, 0);                //ÂèëÈÄÅCMD55,Áü≠ÂìçÂ∫î
 1328              		.loc 1 148 0
 1329 00ba 02BB     		cbnz	r2, .L93
 148:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_APP_CMD, 1, 0);                //ÂèëÈÄÅCMD55,Áü≠ÂìçÂ∫î
 1330              		.loc 1 148 0 is_stmt 0 discriminator 1
 1331 00bc 4FF6FE72 		movw	r2, #65534
 1332              	.LVL145:
 1333 00c0 9442     		cmp	r4, r2
 1334 00c2 1CD8     		bhi	.L93
 149:drivers/bsp_f1xx_sdio.c **** 			errorstatus = CmdResp1Error(SD_CMD_APP_CMD);        //Á≠âÂæÖR1ÂìçÂ∫î
 1335              		.loc 1 149 0 is_stmt 1
 1336 00c4 0022     		movs	r2, #0
 1337 00c6 0121     		movs	r1, #1
 1338              	.LVL146:
 1339 00c8 3720     		movs	r0, #55
 1340 00ca FFF7FEFF 		bl	SDIO_Send_Cmd
 1341              	.LVL147:
 150:drivers/bsp_f1xx_sdio.c **** 			if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 1342              		.loc 1 150 0
 1343 00ce 3720     		movs	r0, #55
 1344 00d0 FFF7FEFF 		bl	CmdResp1Error
 1345              	.LVL148:
 151:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_SD_APP_OP_COND, 1, SD_VOLTAGE_WINDOW_SD | SDType);//ÂèëÈÄÅACMD41,Áü≠ÂìçÂ∫î
 1346              		.loc 1 151 0
 1347 00d4 0346     		mov	r3, r0
 1348 00d6 0028     		cmp	r0, #0
 1349 00d8 B9D1     		bne	.L89
 152:drivers/bsp_f1xx_sdio.c **** 			errorstatus = CmdResp3Error();                    //Á≠âÂæÖR3ÂìçÂ∫î
 1350              		.loc 1 152 0
 1351 00da 45F00042 		orr	r2, r5, #-2147483648
 1352 00de 42F48012 		orr	r2, r2, #1048576
 1353 00e2 0121     		movs	r1, #1
 1354 00e4 2920     		movs	r0, #41
 1355              	.LVL149:
 1356 00e6 FFF7FEFF 		bl	SDIO_Send_Cmd
 1357              	.LVL150:
 153:drivers/bsp_f1xx_sdio.c **** 			if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 1358              		.loc 1 153 0
 1359 00ea FFF7FEFF 		bl	CmdResp3Error
 1360              	.LVL151:
 154:drivers/bsp_f1xx_sdio.c **** 			response = SDIO->RESP1;;                            //ÂæóÂà∞ÂìçÂ∫î
 1361              		.loc 1 154 0
 1362 00ee 0346     		mov	r3, r0
 1363 00f0 0028     		cmp	r0, #0
 1364 00f2 ACD1     		bne	.L89
 155:drivers/bsp_f1xx_sdio.c **** 			validvoltage = (((response >> 31) == 1) ? 1 : 0);            //Âà§Êñ≠SDÂç°‰∏äÁîµÊòØÂê¶ÂÆåÊàê
 1365              		.loc 1 155 0
 1366 00f4 0D4A     		ldr	r2, .L103
 1367 00f6 5169     		ldr	r1, [r2, #20]
 1368              	.LVL152:
 156:drivers/bsp_f1xx_sdio.c **** 			count++;
 1369              		.loc 1 156 0
 1370 00f8 CA0F     		lsrs	r2, r1, #31
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 44


 1371              	.LVL153:
 157:drivers/bsp_f1xx_sdio.c **** 		}
 1372              		.loc 1 157 0
 1373 00fa 0134     		adds	r4, r4, #1
 1374              	.LVL154:
 1375 00fc DDE7     		b	.L91
 1376              	.LVL155:
 1377              	.L93:
 159:drivers/bsp_f1xx_sdio.c **** 			errorstatus = SD_INVALID_VOLTRANGE;
 1378              		.loc 1 159 0
 1379 00fe 4FF6FE72 		movw	r2, #65534
 1380 0102 9442     		cmp	r4, r2
 1381 0104 0ED8     		bhi	.L99
 1382              	.LVL156:
 163:drivers/bsp_f1xx_sdio.c **** 			CardType = SDIO_HIGH_CAPACITY_SD_CARD;
 1383              		.loc 1 163 0
 1384 0106 11F0804F 		tst	r1, #1073741824
 1385 010a A0D0     		beq	.L89
 164:drivers/bsp_f1xx_sdio.c **** 		}
 1386              		.loc 1 164 0
 1387 010c 084A     		ldr	r2, .L103+4
 1388 010e 0221     		movs	r1, #2
 1389              	.LVL157:
 1390 0110 1170     		strb	r1, [r2]
 1391 0112 9CE7     		b	.L89
 1392              	.L95:
 177:drivers/bsp_f1xx_sdio.c **** 			errorstatus = SD_INVALID_VOLTRANGE;
 1393              		.loc 1 177 0
 1394 0114 4FF6FE72 		movw	r2, #65534
 1395 0118 9442     		cmp	r4, r2
 1396 011a 05D8     		bhi	.L100
 181:drivers/bsp_f1xx_sdio.c **** 	}
 1397              		.loc 1 181 0
 1398 011c 044A     		ldr	r2, .L103+4
 1399 011e 0321     		movs	r1, #3
 1400 0120 1170     		strb	r1, [r2]
 1401 0122 94E7     		b	.L89
 1402              	.LVL158:
 1403              	.L99:
 161:drivers/bsp_f1xx_sdio.c **** 		}
 1404              		.loc 1 161 0
 1405 0124 1B23     		movs	r3, #27
 1406              	.LVL159:
 1407 0126 92E7     		b	.L89
 1408              	.LVL160:
 1409              	.L100:
 179:drivers/bsp_f1xx_sdio.c **** 		}
 1410              		.loc 1 179 0
 1411 0128 1B23     		movs	r3, #27
 1412              	.LVL161:
 1413 012a 90E7     		b	.L89
 1414              	.L104:
 1415              		.align	2
 1416              	.L103:
 1417 012c 00800140 		.word	1073840128
 1418 0130 00000000 		.word	.LANCHOR0
 1419 0134 0080FF80 		.word	-2130739200
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 45


 1420              		.cfi_endproc
 1421              	.LFE70:
 1423              		.section	.text.CmdResp2Error,"ax",%progbits
 1424              		.align	1
 1425              		.global	CmdResp2Error
 1426              		.syntax unified
 1427              		.thumb
 1428              		.thumb_func
 1429              		.fpu softvfp
 1431              	CmdResp2Error:
 1432              	.LFB87:
 989:drivers/bsp_f1xx_sdio.c **** 
 990:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•R2ÂìçÂ∫îÁöÑÈîôËØØÁä∂ÊÄÅ
 991:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
 992:drivers/bsp_f1xx_sdio.c **** SD_Error CmdResp2Error(void)
 993:drivers/bsp_f1xx_sdio.c **** {
 1433              		.loc 1 993 0
 1434              		.cfi_startproc
 1435              		@ args = 0, pretend = 0, frame = 0
 1436              		@ frame_needed = 0, uses_anonymous_args = 0
 1437              		@ link register save eliminated.
 1438              	.LVL162:
 994:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 995:drivers/bsp_f1xx_sdio.c **** 	u32 status;
 996:drivers/bsp_f1xx_sdio.c **** 	u32 timeout = SDIO_CMD0TIMEOUT;
 1439              		.loc 1 996 0
 1440 0000 4FF48033 		mov	r3, #65536
 1441              	.LVL163:
 1442              	.L106:
 997:drivers/bsp_f1xx_sdio.c **** 	while (timeout--) {
 1443              		.loc 1 997 0
 1444 0004 591E     		subs	r1, r3, #1
 1445              	.LVL164:
 1446 0006 2BB1     		cbz	r3, .L107
 998:drivers/bsp_f1xx_sdio.c **** 		status = SDIO->STA;
 1447              		.loc 1 998 0
 1448 0008 104B     		ldr	r3, .L114
 1449 000a 5A6B     		ldr	r2, [r3, #52]
 1450              	.LVL165:
 997:drivers/bsp_f1xx_sdio.c **** 	while (timeout--) {
 1451              		.loc 1 997 0
 1452 000c 0B46     		mov	r3, r1
 999:drivers/bsp_f1xx_sdio.c **** 		if (status & ((1 << 0) | (1 << 2) | (1 << 6)))break;//CRCÈîôËØØ/ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂/Â∑≤ÁªèÊî∂Âà∞Âì
 1453              		.loc 1 999 0
 1454 000e 12F0450F 		tst	r2, #69
 1455 0012 F7D0     		beq	.L106
 1456              	.L107:
1000:drivers/bsp_f1xx_sdio.c **** 	}
1001:drivers/bsp_f1xx_sdio.c **** 	if ((timeout == 0) || (status & (1 << 2)))    //ÂìçÂ∫îË∂ÖÊó∂
 1457              		.loc 1 1001 0
 1458 0014 81B1     		cbz	r1, .L109
 1459              		.loc 1 1001 0 is_stmt 0 discriminator 1
 1460 0016 12F0040F 		tst	r2, #4
 1461 001a 0DD1     		bne	.L109
1002:drivers/bsp_f1xx_sdio.c **** 	{
1003:drivers/bsp_f1xx_sdio.c **** 		errorstatus = SD_CMD_RSP_TIMEOUT;
1004:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 2;                //Ê∏ÖÈô§ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂Ê†áÂøó
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 46


1005:drivers/bsp_f1xx_sdio.c **** 		return errorstatus;
1006:drivers/bsp_f1xx_sdio.c **** 	}
1007:drivers/bsp_f1xx_sdio.c **** 	if (status & 1 << 0)                        //CRCÈîôËØØ
 1462              		.loc 1 1007 0 is_stmt 1
 1463 001c 12F0010F 		tst	r2, #1
 1464 0020 11D0     		beq	.L113
 1465              	.LVL166:
1008:drivers/bsp_f1xx_sdio.c **** 	{
1009:drivers/bsp_f1xx_sdio.c **** 		errorstatus = SD_CMD_CRC_FAIL;
1010:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 0;                //Ê∏ÖÈô§ÂìçÂ∫îÊ†áÂøó
 1466              		.loc 1 1010 0
 1467 0022 0A4A     		ldr	r2, .L114
 1468              	.LVL167:
 1469 0024 936B     		ldr	r3, [r2, #56]
 1470 0026 43F00103 		orr	r3, r3, #1
 1471 002a 9363     		str	r3, [r2, #56]
1009:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 0;                //Ê∏ÖÈô§ÂìçÂ∫îÊ†áÂøó
 1472              		.loc 1 1009 0
 1473 002c 0120     		movs	r0, #1
 1474              	.LVL168:
 1475              	.L112:
1011:drivers/bsp_f1xx_sdio.c **** 	}
1012:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0X5FF;                    //Ê∏ÖÈô§Ê†áËÆ∞
 1476              		.loc 1 1012 0
 1477 002e 074B     		ldr	r3, .L114
 1478 0030 40F2FF52 		movw	r2, #1535
 1479 0034 9A63     		str	r2, [r3, #56]
1013:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
1014:drivers/bsp_f1xx_sdio.c **** }
 1480              		.loc 1 1014 0
 1481 0036 7047     		bx	lr
 1482              	.LVL169:
 1483              	.L109:
1004:drivers/bsp_f1xx_sdio.c **** 		return errorstatus;
 1484              		.loc 1 1004 0
 1485 0038 044A     		ldr	r2, .L114
 1486              	.LVL170:
 1487 003a 936B     		ldr	r3, [r2, #56]
 1488 003c 43F00403 		orr	r3, r3, #4
 1489 0040 9363     		str	r3, [r2, #56]
1005:drivers/bsp_f1xx_sdio.c **** 	}
 1490              		.loc 1 1005 0
 1491 0042 0320     		movs	r0, #3
 1492 0044 7047     		bx	lr
 1493              	.LVL171:
 1494              	.L113:
 994:drivers/bsp_f1xx_sdio.c **** 	u32 status;
 1495              		.loc 1 994 0
 1496 0046 0020     		movs	r0, #0
 1497 0048 F1E7     		b	.L112
 1498              	.L115:
 1499 004a 00BF     		.align	2
 1500              	.L114:
 1501 004c 00800140 		.word	1073840128
 1502              		.cfi_endproc
 1503              	.LFE87:
 1505              		.section	.text.CmdResp6Error,"ax",%progbits
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 47


 1506              		.align	1
 1507              		.global	CmdResp6Error
 1508              		.syntax unified
 1509              		.thumb
 1510              		.thumb_func
 1511              		.fpu softvfp
 1513              	CmdResp6Error:
 1514              	.LFB88:
1015:drivers/bsp_f1xx_sdio.c **** 
1016:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•R6ÂìçÂ∫îÁöÑÈîôËØØÁä∂ÊÄÅ
1017:drivers/bsp_f1xx_sdio.c **** //cmd:‰πãÂâçÂèëÈÄÅÁöÑÂëΩ‰ª§
1018:drivers/bsp_f1xx_sdio.c **** //prca:Âç°ËøîÂõûÁöÑRCAÂú∞ÂùÄ
1019:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
1020:drivers/bsp_f1xx_sdio.c **** SD_Error CmdResp6Error(u8 cmd, u16 *prca)
1021:drivers/bsp_f1xx_sdio.c **** {
 1515              		.loc 1 1021 0
 1516              		.cfi_startproc
 1517              		@ args = 0, pretend = 0, frame = 0
 1518              		@ frame_needed = 0, uses_anonymous_args = 0
 1519              		@ link register save eliminated.
 1520              	.LVL172:
 1521              	.L117:
1022:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
1023:drivers/bsp_f1xx_sdio.c **** 	u32 status;
1024:drivers/bsp_f1xx_sdio.c **** 	u32 rspr1;
1025:drivers/bsp_f1xx_sdio.c **** 	while (1) {
1026:drivers/bsp_f1xx_sdio.c **** 		status = SDIO->STA;
 1522              		.loc 1 1026 0
 1523 0000 1D4B     		ldr	r3, .L130
 1524 0002 5B6B     		ldr	r3, [r3, #52]
 1525              	.LVL173:
1027:drivers/bsp_f1xx_sdio.c **** 		if (status & ((1 << 0) | (1 << 2) | (1 << 6)))break;//CRCÈîôËØØ/ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂/Â∑≤ÁªèÊî∂Âà∞Âì
 1526              		.loc 1 1027 0
 1527 0004 13F0450F 		tst	r3, #69
 1528 0008 FAD0     		beq	.L117
1028:drivers/bsp_f1xx_sdio.c **** 	}
1029:drivers/bsp_f1xx_sdio.c **** 	if (status & (1 << 2))                    //ÂìçÂ∫îË∂ÖÊó∂
 1529              		.loc 1 1029 0
 1530 000a 13F0040F 		tst	r3, #4
 1531 000e 19D1     		bne	.L126
1030:drivers/bsp_f1xx_sdio.c **** 	{
1031:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 2;                //Ê∏ÖÈô§ÂëΩ‰ª§ÂìçÂ∫îË∂ÖÊó∂Ê†áÂøó
1032:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_RSP_TIMEOUT;
1033:drivers/bsp_f1xx_sdio.c **** 	}
1034:drivers/bsp_f1xx_sdio.c **** 	if (status & 1 << 0)                        //CRCÈîôËØØ
 1532              		.loc 1 1034 0
 1533 0010 13F0010F 		tst	r3, #1
 1534 0014 1DD1     		bne	.L127
1035:drivers/bsp_f1xx_sdio.c **** 	{
1036:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 0;                //Ê∏ÖÈô§ÂìçÂ∫îÊ†áÂøó
1037:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_CRC_FAIL;
1038:drivers/bsp_f1xx_sdio.c **** 	}
1039:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->RESPCMD != cmd)                //Âà§Êñ≠ÊòØÂê¶ÂìçÂ∫îcmdÂëΩ‰ª§
 1535              		.loc 1 1039 0
 1536 0016 184B     		ldr	r3, .L130
 1537              	.LVL174:
 1538 0018 1B69     		ldr	r3, [r3, #16]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 48


 1539 001a 8342     		cmp	r3, r0
 1540 001c 26D1     		bne	.L122
1040:drivers/bsp_f1xx_sdio.c **** 	{
1041:drivers/bsp_f1xx_sdio.c **** 		return SD_ILLEGAL_CMD;
1042:drivers/bsp_f1xx_sdio.c **** 	}
1043:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0X5FF;                    //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 1541              		.loc 1 1043 0
 1542 001e 164B     		ldr	r3, .L130
 1543 0020 40F2FF52 		movw	r2, #1535
 1544 0024 9A63     		str	r2, [r3, #56]
1044:drivers/bsp_f1xx_sdio.c **** 	rspr1 = SDIO->RESP1;                    //ÂæóÂà∞ÂìçÂ∫î
 1545              		.loc 1 1044 0
 1546 0026 5B69     		ldr	r3, [r3, #20]
 1547              	.LVL175:
1045:drivers/bsp_f1xx_sdio.c **** 	if (SD_ALLZERO == (rspr1 & (SD_R6_GENERAL_UNKNOWN_ERROR | SD_R6_ILLEGAL_CMD | SD_R6_COM_CRC_FAILED
 1548              		.loc 1 1045 0
 1549 0028 13F4604F 		tst	r3, #57344
 1550 002c 18D0     		beq	.L128
1046:drivers/bsp_f1xx_sdio.c **** 		*prca = (u16) (rspr1 >> 16);            //Âè≥Áßª16‰ΩçÂæóÂà∞,rca
1047:drivers/bsp_f1xx_sdio.c **** 		return errorstatus;
1048:drivers/bsp_f1xx_sdio.c **** 	}
1049:drivers/bsp_f1xx_sdio.c **** 	if (rspr1 & SD_R6_GENERAL_UNKNOWN_ERROR)return SD_GENERAL_UNKNOWN_ERROR;
 1551              		.loc 1 1049 0
 1552 002e 13F4005F 		tst	r3, #8192
 1553 0032 1DD1     		bne	.L123
1050:drivers/bsp_f1xx_sdio.c **** 	if (rspr1 & SD_R6_ILLEGAL_CMD)return SD_ILLEGAL_CMD;
 1554              		.loc 1 1050 0
 1555 0034 13F4804F 		tst	r3, #16384
 1556 0038 1CD1     		bne	.L124
1051:drivers/bsp_f1xx_sdio.c **** 	if (rspr1 & SD_R6_COM_CRC_FAILED)return SD_COM_CRC_FAILED;
 1557              		.loc 1 1051 0
 1558 003a 13F4004F 		tst	r3, #32768
 1559 003e 13D1     		bne	.L129
1052:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 1560              		.loc 1 1052 0
 1561 0040 0020     		movs	r0, #0
 1562              	.LVL176:
1053:drivers/bsp_f1xx_sdio.c **** }
 1563              		.loc 1 1053 0
 1564 0042 7047     		bx	lr
 1565              	.LVL177:
 1566              	.L126:
1031:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_RSP_TIMEOUT;
 1567              		.loc 1 1031 0
 1568 0044 0C4A     		ldr	r2, .L130
 1569 0046 936B     		ldr	r3, [r2, #56]
 1570              	.LVL178:
 1571 0048 43F00403 		orr	r3, r3, #4
 1572 004c 9363     		str	r3, [r2, #56]
1032:drivers/bsp_f1xx_sdio.c **** 	}
 1573              		.loc 1 1032 0
 1574 004e 0320     		movs	r0, #3
 1575              	.LVL179:
 1576 0050 7047     		bx	lr
 1577              	.LVL180:
 1578              	.L127:
1036:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_CRC_FAIL;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 49


 1579              		.loc 1 1036 0
 1580 0052 094A     		ldr	r2, .L130
 1581 0054 936B     		ldr	r3, [r2, #56]
 1582              	.LVL181:
 1583 0056 43F00103 		orr	r3, r3, #1
 1584 005a 9363     		str	r3, [r2, #56]
1037:drivers/bsp_f1xx_sdio.c **** 	}
 1585              		.loc 1 1037 0
 1586 005c 0120     		movs	r0, #1
 1587              	.LVL182:
 1588 005e 7047     		bx	lr
 1589              	.LVL183:
 1590              	.L128:
1046:drivers/bsp_f1xx_sdio.c **** 		return errorstatus;
 1591              		.loc 1 1046 0
 1592 0060 1B0C     		lsrs	r3, r3, #16
 1593              	.LVL184:
 1594 0062 0B80     		strh	r3, [r1]	@ movhi
1047:drivers/bsp_f1xx_sdio.c **** 	}
 1595              		.loc 1 1047 0
 1596 0064 0020     		movs	r0, #0
 1597              	.LVL185:
 1598 0066 7047     		bx	lr
 1599              	.LVL186:
 1600              	.L129:
1051:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 1601              		.loc 1 1051 0
 1602 0068 0F20     		movs	r0, #15
 1603              	.LVL187:
 1604 006a 7047     		bx	lr
 1605              	.LVL188:
 1606              	.L122:
1041:drivers/bsp_f1xx_sdio.c **** 	}
 1607              		.loc 1 1041 0
 1608 006c 1020     		movs	r0, #16
 1609              	.LVL189:
 1610 006e 7047     		bx	lr
 1611              	.LVL190:
 1612              	.L123:
1049:drivers/bsp_f1xx_sdio.c **** 	if (rspr1 & SD_R6_ILLEGAL_CMD)return SD_ILLEGAL_CMD;
 1613              		.loc 1 1049 0
 1614 0070 1320     		movs	r0, #19
 1615              	.LVL191:
 1616 0072 7047     		bx	lr
 1617              	.LVL192:
 1618              	.L124:
1050:drivers/bsp_f1xx_sdio.c **** 	if (rspr1 & SD_R6_COM_CRC_FAILED)return SD_COM_CRC_FAILED;
 1619              		.loc 1 1050 0
 1620 0074 1020     		movs	r0, #16
 1621              	.LVL193:
 1622 0076 7047     		bx	lr
 1623              	.L131:
 1624              		.align	2
 1625              	.L130:
 1626 0078 00800140 		.word	1073840128
 1627              		.cfi_endproc
 1628              	.LFE88:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 50


 1630              		.section	.text.SD_InitializeCards,"ax",%progbits
 1631              		.align	1
 1632              		.global	SD_InitializeCards
 1633              		.syntax unified
 1634              		.thumb
 1635              		.thumb_func
 1636              		.fpu softvfp
 1638              	SD_InitializeCards:
 1639              	.LFB72:
 197:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 1640              		.loc 1 197 0
 1641              		.cfi_startproc
 1642              		@ args = 0, pretend = 0, frame = 8
 1643              		@ frame_needed = 0, uses_anonymous_args = 0
 1644 0000 00B5     		push	{lr}
 1645              	.LCFI10:
 1646              		.cfi_def_cfa_offset 4
 1647              		.cfi_offset 14, -4
 1648 0002 83B0     		sub	sp, sp, #12
 1649              	.LCFI11:
 1650              		.cfi_def_cfa_offset 16
 1651              	.LVL194:
 199:drivers/bsp_f1xx_sdio.c **** 	if ((SDIO->POWER & 0X03) == 0)return SD_REQUEST_NOT_APPLICABLE;//Ê£ÄÊü•ÁîµÊ∫êÁä∂ÊÄÅ,Á°Æ‰øù‰∏∫‰∏äÁî
 1652              		.loc 1 199 0
 1653 0004 0123     		movs	r3, #1
 1654 0006 ADF80630 		strh	r3, [sp, #6]	@ movhi
 200:drivers/bsp_f1xx_sdio.c **** 	if (SDIO_SECURE_DIGITAL_IO_CARD != CardType)            //ÈùûSECURE_DIGITAL_IO_CARD
 1655              		.loc 1 200 0
 1656 000a 334B     		ldr	r3, .L143
 1657 000c 1B68     		ldr	r3, [r3]
 1658 000e 13F0030F 		tst	r3, #3
 1659 0012 5AD0     		beq	.L138
 201:drivers/bsp_f1xx_sdio.c **** 	{
 1660              		.loc 1 201 0
 1661 0014 314B     		ldr	r3, .L143+4
 1662 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1663 0018 042B     		cmp	r3, #4
 1664 001a 35D1     		bne	.L141
 1665              	.LVL195:
 1666              	.L134:
 211:drivers/bsp_f1xx_sdio.c **** 		(SDIO_SECURE_DIGITAL_IO_COMBO_CARD == CardType) || (SDIO_HIGH_CAPACITY_SD_CARD == CardType))//Âà§
 1667              		.loc 1 211 0
 1668 001c 2F4B     		ldr	r3, .L143+4
 1669 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1670 0020 012B     		cmp	r3, #1
 1671 0022 03D9     		bls	.L135
 211:drivers/bsp_f1xx_sdio.c **** 		(SDIO_SECURE_DIGITAL_IO_COMBO_CARD == CardType) || (SDIO_HIGH_CAPACITY_SD_CARD == CardType))//Âà§
 1672              		.loc 1 211 0 is_stmt 0 discriminator 1
 1673 0024 062B     		cmp	r3, #6
 1674 0026 01D0     		beq	.L135
 212:drivers/bsp_f1xx_sdio.c **** 	{
 1675              		.loc 1 212 0 is_stmt 1
 1676 0028 022B     		cmp	r3, #2
 1677 002a 0CD1     		bne	.L136
 1678              	.L135:
 214:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp6Error(SD_CMD_SET_REL_ADDR, &rca);//Á≠âÂæÖR6ÂìçÂ∫î
 1679              		.loc 1 214 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 51


 1680 002c 0022     		movs	r2, #0
 1681 002e 0121     		movs	r1, #1
 1682 0030 0320     		movs	r0, #3
 1683 0032 FFF7FEFF 		bl	SDIO_Send_Cmd
 1684              	.LVL196:
 215:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 1685              		.loc 1 215 0
 1686 0036 0DF10601 		add	r1, sp, #6
 1687 003a 0320     		movs	r0, #3
 1688 003c FFF7FEFF 		bl	CmdResp6Error
 1689              	.LVL197:
 216:drivers/bsp_f1xx_sdio.c **** 	}
 1690              		.loc 1 216 0
 1691 0040 0346     		mov	r3, r0
 1692 0042 0028     		cmp	r0, #0
 1693 0044 42D1     		bne	.L133
 1694              	.LVL198:
 1695              	.L136:
 218:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SET_REL_ADDR, 1, (u32) (rca << 16));//ÂèëÈÄÅCMD3,Áü≠ÂìçÂ∫î
 1696              		.loc 1 218 0
 1697 0046 254B     		ldr	r3, .L143+4
 1698 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1699 004a 032B     		cmp	r3, #3
 1700 004c 30D0     		beq	.L142
 1701              	.L137:
 223:drivers/bsp_f1xx_sdio.c **** 	{
 1702              		.loc 1 223 0
 1703 004e 234B     		ldr	r3, .L143+4
 1704 0050 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1705 0052 042B     		cmp	r3, #4
 1706 0054 3ED0     		beq	.L139
 225:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SEND_CSD, 3, (u32) (rca << 16));//ÂèëÈÄÅCMD9+Âç°RCA,ÂèñÂæóCSD,ÈïøÂìçÂ∫î
 1707              		.loc 1 225 0
 1708 0056 BDF80620 		ldrh	r2, [sp, #6]
 1709 005a 214B     		ldr	r3, .L143+8
 1710 005c 1A60     		str	r2, [r3]
 226:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp2Error();                    //Á≠âÂæÖR2ÂìçÂ∫î
 1711              		.loc 1 226 0
 1712 005e 1204     		lsls	r2, r2, #16
 1713 0060 0321     		movs	r1, #3
 1714 0062 0920     		movs	r0, #9
 1715 0064 FFF7FEFF 		bl	SDIO_Send_Cmd
 1716              	.LVL199:
 227:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 1717              		.loc 1 227 0
 1718 0068 FFF7FEFF 		bl	CmdResp2Error
 1719              	.LVL200:
 228:drivers/bsp_f1xx_sdio.c **** 		CSD_Tab[0] = SDIO->RESP1;
 1720              		.loc 1 228 0
 1721 006c 0346     		mov	r3, r0
 1722 006e 0028     		cmp	r0, #0
 1723 0070 2CD1     		bne	.L133
 229:drivers/bsp_f1xx_sdio.c **** 		CSD_Tab[1] = SDIO->RESP2;
 1724              		.loc 1 229 0
 1725 0072 1949     		ldr	r1, .L143
 1726 0074 4869     		ldr	r0, [r1, #20]
 1727              	.LVL201:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 52


 1728 0076 1B4A     		ldr	r2, .L143+12
 1729 0078 1060     		str	r0, [r2]
 230:drivers/bsp_f1xx_sdio.c **** 		CSD_Tab[2] = SDIO->RESP3;
 1730              		.loc 1 230 0
 1731 007a 8869     		ldr	r0, [r1, #24]
 1732 007c 5060     		str	r0, [r2, #4]
 231:drivers/bsp_f1xx_sdio.c **** 		CSD_Tab[3] = SDIO->RESP4;
 1733              		.loc 1 231 0
 1734 007e C869     		ldr	r0, [r1, #28]
 1735 0080 9060     		str	r0, [r2, #8]
 232:drivers/bsp_f1xx_sdio.c **** 	}
 1736              		.loc 1 232 0
 1737 0082 096A     		ldr	r1, [r1, #32]
 1738 0084 D160     		str	r1, [r2, #12]
 1739 0086 21E0     		b	.L133
 1740              	.LVL202:
 1741              	.L141:
 203:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp2Error();                    //Á≠âÂæÖR2ÂìçÂ∫î
 1742              		.loc 1 203 0
 1743 0088 0022     		movs	r2, #0
 1744 008a 0321     		movs	r1, #3
 1745 008c 0220     		movs	r0, #2
 1746 008e FFF7FEFF 		bl	SDIO_Send_Cmd
 1747              	.LVL203:
 204:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 1748              		.loc 1 204 0
 1749 0092 FFF7FEFF 		bl	CmdResp2Error
 1750              	.LVL204:
 205:drivers/bsp_f1xx_sdio.c **** 		CID_Tab[0] = SDIO->RESP1;
 1751              		.loc 1 205 0
 1752 0096 0346     		mov	r3, r0
 1753 0098 C0B9     		cbnz	r0, .L133
 206:drivers/bsp_f1xx_sdio.c **** 		CID_Tab[1] = SDIO->RESP2;
 1754              		.loc 1 206 0
 1755 009a 0F4A     		ldr	r2, .L143
 1756 009c 5169     		ldr	r1, [r2, #20]
 1757 009e 124B     		ldr	r3, .L143+16
 1758 00a0 1960     		str	r1, [r3]
 207:drivers/bsp_f1xx_sdio.c **** 		CID_Tab[2] = SDIO->RESP3;
 1759              		.loc 1 207 0
 1760 00a2 9169     		ldr	r1, [r2, #24]
 1761 00a4 5960     		str	r1, [r3, #4]
 208:drivers/bsp_f1xx_sdio.c **** 		CID_Tab[3] = SDIO->RESP4;
 1762              		.loc 1 208 0
 1763 00a6 D169     		ldr	r1, [r2, #28]
 1764 00a8 9960     		str	r1, [r3, #8]
 209:drivers/bsp_f1xx_sdio.c **** 	}
 1765              		.loc 1 209 0
 1766 00aa 126A     		ldr	r2, [r2, #32]
 1767 00ac DA60     		str	r2, [r3, #12]
 1768 00ae B5E7     		b	.L134
 1769              	.LVL205:
 1770              	.L142:
 219:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp2Error();                    //Á≠âÂæÖR2ÂìçÂ∫î
 1771              		.loc 1 219 0
 1772 00b0 BDF80620 		ldrh	r2, [sp, #6]
 1773 00b4 1204     		lsls	r2, r2, #16
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 53


 1774 00b6 0121     		movs	r1, #1
 1775 00b8 0320     		movs	r0, #3
 1776 00ba FFF7FEFF 		bl	SDIO_Send_Cmd
 1777              	.LVL206:
 220:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 1778              		.loc 1 220 0
 1779 00be FFF7FEFF 		bl	CmdResp2Error
 1780              	.LVL207:
 221:drivers/bsp_f1xx_sdio.c **** 	}
 1781              		.loc 1 221 0
 1782 00c2 0346     		mov	r3, r0
 1783 00c4 0028     		cmp	r0, #0
 1784 00c6 C2D0     		beq	.L137
 1785 00c8 00E0     		b	.L133
 1786              	.LVL208:
 1787              	.L138:
 200:drivers/bsp_f1xx_sdio.c **** 	if (SDIO_SECURE_DIGITAL_IO_CARD != CardType)            //ÈùûSECURE_DIGITAL_IO_CARD
 1788              		.loc 1 200 0
 1789 00ca 2523     		movs	r3, #37
 1790              	.LVL209:
 1791              	.L133:
 235:drivers/bsp_f1xx_sdio.c **** 
 1792              		.loc 1 235 0
 1793 00cc 1846     		mov	r0, r3
 1794 00ce 03B0     		add	sp, sp, #12
 1795              	.LCFI12:
 1796              		.cfi_remember_state
 1797              		.cfi_def_cfa_offset 4
 1798              		@ sp needed
 1799 00d0 5DF804FB 		ldr	pc, [sp], #4
 1800              	.L139:
 1801              	.LCFI13:
 1802              		.cfi_restore_state
 234:drivers/bsp_f1xx_sdio.c **** }
 1803              		.loc 1 234 0
 1804 00d4 0023     		movs	r3, #0
 1805 00d6 F9E7     		b	.L133
 1806              	.L144:
 1807              		.align	2
 1808              	.L143:
 1809 00d8 00800140 		.word	1073840128
 1810 00dc 00000000 		.word	.LANCHOR0
 1811 00e0 00000000 		.word	.LANCHOR1
 1812 00e4 00000000 		.word	.LANCHOR2
 1813 00e8 00000000 		.word	.LANCHOR3
 1814              		.cfi_endproc
 1815              	.LFE72:
 1817              		.section	.text.IsCardProgramming,"ax",%progbits
 1818              		.align	1
 1819              		.global	IsCardProgramming
 1820              		.syntax unified
 1821              		.thumb
 1822              		.thumb_func
 1823              		.fpu softvfp
 1825              	IsCardProgramming:
 1826              	.LFB90:
1054:drivers/bsp_f1xx_sdio.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 54


1055:drivers/bsp_f1xx_sdio.c **** //SDIO‰ΩøËÉΩÂÆΩÊÄªÁ∫øÊ®°Âºè
1056:drivers/bsp_f1xx_sdio.c **** //enx:0,‰∏ç‰ΩøËÉΩ;1,‰ΩøËÉΩ;
1057:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
1058:drivers/bsp_f1xx_sdio.c **** SD_Error SDEnWideBus(u8 enx)
1059:drivers/bsp_f1xx_sdio.c **** {
1060:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
1061:drivers/bsp_f1xx_sdio.c **** 	u32 scr[2] = {0, 0};
1062:drivers/bsp_f1xx_sdio.c **** 	u8 arg = 0X00;
1063:drivers/bsp_f1xx_sdio.c **** 	if (enx)arg = 0X02;
1064:drivers/bsp_f1xx_sdio.c **** 	else arg = 0X00;
1065:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->RESP1 & SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//SDÂç°Â§Ñ‰∫éLOCKEDÁä∂ÊÄÅ
1066:drivers/bsp_f1xx_sdio.c **** 	errorstatus = FindSCR(RCA, scr);                        //ÂæóÂà∞SCRÂØÑÂ≠òÂô®Êï∞ÊçÆ
1067:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;
1068:drivers/bsp_f1xx_sdio.c **** 	if ((scr[1] & SD_WIDE_BUS_SUPPORT) != SD_ALLZERO)        //ÊîØÊåÅÂÆΩÊÄªÁ∫ø
1069:drivers/bsp_f1xx_sdio.c **** 	{
1070:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_APP_CMD, 1, (u32) RCA << 16);    //ÂèëÈÄÅCMD55+RCA,Áü≠ÂìçÂ∫î
1071:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
1072:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;
1073:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_APP_SD_SET_BUSWIDTH, 1, arg);//ÂèëÈÄÅACMD6,Áü≠ÂìçÂ∫î,ÂèÇÊï∞:10,4‰Ωç;00,1‰Ωç.
1074:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_APP_SD_SET_BUSWIDTH);
1075:drivers/bsp_f1xx_sdio.c **** 		return errorstatus;
1076:drivers/bsp_f1xx_sdio.c **** 	} else return SD_REQUEST_NOT_APPLICABLE;                //‰∏çÊîØÊåÅÂÆΩÊÄªÁ∫øËÆæÁΩÆ
1077:drivers/bsp_f1xx_sdio.c **** }
1078:drivers/bsp_f1xx_sdio.c **** 
1079:drivers/bsp_f1xx_sdio.c **** //Ê£ÄÊü•Âç°ÊòØÂê¶Ê≠£Âú®ÊâßË°åÂÜôÊìç‰Ωú
1080:drivers/bsp_f1xx_sdio.c **** //pstatus:ÂΩìÂâçÁä∂ÊÄÅ.
1081:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å
1082:drivers/bsp_f1xx_sdio.c **** SD_Error IsCardProgramming(u8 *pstatus)
1083:drivers/bsp_f1xx_sdio.c **** {
 1827              		.loc 1 1083 0
 1828              		.cfi_startproc
 1829              		@ args = 0, pretend = 0, frame = 8
 1830              		@ frame_needed = 0, uses_anonymous_args = 0
 1831              	.LVL210:
 1832 0000 10B5     		push	{r4, lr}
 1833              	.LCFI14:
 1834              		.cfi_def_cfa_offset 8
 1835              		.cfi_offset 4, -8
 1836              		.cfi_offset 14, -4
 1837 0002 82B0     		sub	sp, sp, #8
 1838              	.LCFI15:
 1839              		.cfi_def_cfa_offset 16
 1840 0004 0446     		mov	r4, r0
1084:drivers/bsp_f1xx_sdio.c **** 	vu32 respR1 = 0, status = 0;
 1841              		.loc 1 1084 0
 1842 0006 0023     		movs	r3, #0
 1843 0008 0193     		str	r3, [sp, #4]
 1844 000a 0093     		str	r3, [sp]
1085:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_SEND_STATUS, 1, (u32) RCA << 16);        //ÂèëÈÄÅCMD13
 1845              		.loc 1 1085 0
 1846 000c 1D4B     		ldr	r3, .L155
 1847 000e 1A68     		ldr	r2, [r3]
 1848 0010 1204     		lsls	r2, r2, #16
 1849 0012 0121     		movs	r1, #1
 1850 0014 0D20     		movs	r0, #13
 1851              	.LVL211:
 1852 0016 FFF7FEFF 		bl	SDIO_Send_Cmd
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 55


 1853              	.LVL212:
1086:drivers/bsp_f1xx_sdio.c **** 	status = SDIO->STA;
 1854              		.loc 1 1086 0
 1855 001a 1B4B     		ldr	r3, .L155+4
 1856 001c 5B6B     		ldr	r3, [r3, #52]
 1857 001e 0093     		str	r3, [sp]
1087:drivers/bsp_f1xx_sdio.c **** 	while (!(status & ((1 << 0) | (1 << 6) | (1 << 2))))status = SDIO->STA;//Á≠âÂæÖÊìç‰ΩúÂÆåÊàê
 1858              		.loc 1 1087 0
 1859 0020 02E0     		b	.L146
 1860              	.L147:
 1861              		.loc 1 1087 0 is_stmt 0 discriminator 2
 1862 0022 194B     		ldr	r3, .L155+4
 1863 0024 5B6B     		ldr	r3, [r3, #52]
 1864 0026 0093     		str	r3, [sp]
 1865              	.L146:
 1866              		.loc 1 1087 0 discriminator 1
 1867 0028 009B     		ldr	r3, [sp]
 1868 002a 13F0450F 		tst	r3, #69
 1869 002e F8D0     		beq	.L147
1088:drivers/bsp_f1xx_sdio.c **** 	if (status & (1 << 0))            //CRCÊ£ÄÊµãÂ§±Ë¥•
 1870              		.loc 1 1088 0 is_stmt 1
 1871 0030 009B     		ldr	r3, [sp]
 1872 0032 13F0010F 		tst	r3, #1
 1873 0036 13D1     		bne	.L153
1089:drivers/bsp_f1xx_sdio.c **** 	{
1090:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 0;        //Ê∏ÖÈô§ÈîôËØØÊ†áËÆ∞
1091:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_CRC_FAIL;
1092:drivers/bsp_f1xx_sdio.c **** 	}
1093:drivers/bsp_f1xx_sdio.c **** 	if (status & (1 << 2))            //ÂëΩ‰ª§Ë∂ÖÊó∂
 1874              		.loc 1 1093 0
 1875 0038 009B     		ldr	r3, [sp]
 1876 003a 13F0040F 		tst	r3, #4
 1877 003e 17D1     		bne	.L154
1094:drivers/bsp_f1xx_sdio.c **** 	{
1095:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 2;        //Ê∏ÖÈô§ÈîôËØØÊ†áËÆ∞
1096:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_RSP_TIMEOUT;
1097:drivers/bsp_f1xx_sdio.c **** 	}
1098:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->RESPCMD != SD_CMD_SEND_STATUS)return SD_ILLEGAL_CMD;
 1878              		.loc 1 1098 0
 1879 0040 114B     		ldr	r3, .L155+4
 1880 0042 1B69     		ldr	r3, [r3, #16]
 1881 0044 0D2B     		cmp	r3, #13
 1882 0046 1AD1     		bne	.L151
1099:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 1883              		.loc 1 1099 0
 1884 0048 0F4B     		ldr	r3, .L155+4
 1885 004a 40F2FF52 		movw	r2, #1535
 1886 004e 9A63     		str	r2, [r3, #56]
1100:drivers/bsp_f1xx_sdio.c **** 	respR1 = SDIO->RESP1;
 1887              		.loc 1 1100 0
 1888 0050 5B69     		ldr	r3, [r3, #20]
 1889 0052 0193     		str	r3, [sp, #4]
1101:drivers/bsp_f1xx_sdio.c **** 	*pstatus = (u8) ((respR1 >> 9) & 0x0000000F);
 1890              		.loc 1 1101 0
 1891 0054 019B     		ldr	r3, [sp, #4]
 1892 0056 C3F34323 		ubfx	r3, r3, #9, #4
 1893 005a 2370     		strb	r3, [r4]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 56


1102:drivers/bsp_f1xx_sdio.c **** 	return SD_OK;
 1894              		.loc 1 1102 0
 1895 005c 0020     		movs	r0, #0
 1896 005e 05E0     		b	.L149
 1897              	.L153:
1090:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_CRC_FAIL;
 1898              		.loc 1 1090 0
 1899 0060 094A     		ldr	r2, .L155+4
 1900 0062 936B     		ldr	r3, [r2, #56]
 1901 0064 43F00103 		orr	r3, r3, #1
 1902 0068 9363     		str	r3, [r2, #56]
1091:drivers/bsp_f1xx_sdio.c **** 	}
 1903              		.loc 1 1091 0
 1904 006a 0120     		movs	r0, #1
 1905              	.L149:
1103:drivers/bsp_f1xx_sdio.c **** }
 1906              		.loc 1 1103 0
 1907 006c 02B0     		add	sp, sp, #8
 1908              	.LCFI16:
 1909              		.cfi_remember_state
 1910              		.cfi_def_cfa_offset 8
 1911              		@ sp needed
 1912 006e 10BD     		pop	{r4, pc}
 1913              	.LVL213:
 1914              	.L154:
 1915              	.LCFI17:
 1916              		.cfi_restore_state
1095:drivers/bsp_f1xx_sdio.c **** 		return SD_CMD_RSP_TIMEOUT;
 1917              		.loc 1 1095 0
 1918 0070 054A     		ldr	r2, .L155+4
 1919 0072 936B     		ldr	r3, [r2, #56]
 1920 0074 43F00403 		orr	r3, r3, #4
 1921 0078 9363     		str	r3, [r2, #56]
1096:drivers/bsp_f1xx_sdio.c **** 	}
 1922              		.loc 1 1096 0
 1923 007a 0320     		movs	r0, #3
 1924 007c F6E7     		b	.L149
 1925              	.L151:
1098:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 1926              		.loc 1 1098 0
 1927 007e 1020     		movs	r0, #16
 1928 0080 F4E7     		b	.L149
 1929              	.L156:
 1930 0082 00BF     		.align	2
 1931              	.L155:
 1932 0084 00000000 		.word	.LANCHOR1
 1933 0088 00800140 		.word	1073840128
 1934              		.cfi_endproc
 1935              	.LFE90:
 1937              		.section	.text.SD_SendStatus,"ax",%progbits
 1938              		.align	1
 1939              		.global	SD_SendStatus
 1940              		.syntax unified
 1941              		.thumb
 1942              		.thumb_func
 1943              		.fpu softvfp
 1945              	SD_SendStatus:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 57


 1946              	.LFB91:
1104:drivers/bsp_f1xx_sdio.c **** 
1105:drivers/bsp_f1xx_sdio.c **** //ËØªÂèñÂΩìÂâçÂç°Áä∂ÊÄÅ
1106:drivers/bsp_f1xx_sdio.c **** //pcardstatus:Âç°Áä∂ÊÄÅ
1107:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØ‰ª£Á†Å
1108:drivers/bsp_f1xx_sdio.c **** SD_Error SD_SendStatus(uint32_t *pcardstatus)
1109:drivers/bsp_f1xx_sdio.c **** {
 1947              		.loc 1 1109 0
 1948              		.cfi_startproc
 1949              		@ args = 0, pretend = 0, frame = 0
 1950              		@ frame_needed = 0, uses_anonymous_args = 0
 1951              	.LVL214:
1110:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
1111:drivers/bsp_f1xx_sdio.c **** 	if (pcardstatus == NULL) {
 1952              		.loc 1 1111 0
 1953 0000 90B1     		cbz	r0, .L159
1109:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 1954              		.loc 1 1109 0
 1955 0002 10B5     		push	{r4, lr}
 1956              	.LCFI18:
 1957              		.cfi_def_cfa_offset 8
 1958              		.cfi_offset 4, -8
 1959              		.cfi_offset 14, -4
 1960 0004 0446     		mov	r4, r0
1112:drivers/bsp_f1xx_sdio.c **** 		errorstatus = SD_INVALID_PARAMETER;
1113:drivers/bsp_f1xx_sdio.c **** 		return errorstatus;
1114:drivers/bsp_f1xx_sdio.c **** 	}
1115:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_SEND_STATUS, 1, RCA << 16);    //ÂèëÈÄÅCMD13,Áü≠ÂìçÂ∫î
 1961              		.loc 1 1115 0
 1962 0006 0A4B     		ldr	r3, .L164
 1963 0008 1A68     		ldr	r2, [r3]
 1964 000a 1204     		lsls	r2, r2, #16
 1965 000c 0121     		movs	r1, #1
 1966 000e 0D20     		movs	r0, #13
 1967              	.LVL215:
 1968 0010 FFF7FEFF 		bl	SDIO_Send_Cmd
 1969              	.LVL216:
1116:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);    //Êü•ËØ¢ÂìçÂ∫îÁä∂ÊÄÅ
 1970              		.loc 1 1116 0
 1971 0014 0D20     		movs	r0, #13
 1972 0016 FFF7FEFF 		bl	CmdResp1Error
 1973              	.LVL217:
1117:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;
 1974              		.loc 1 1117 0
 1975 001a 0346     		mov	r3, r0
 1976 001c 10B9     		cbnz	r0, .L158
1118:drivers/bsp_f1xx_sdio.c **** 	*pcardstatus = SDIO->RESP1;//ËØªÂèñÂìçÂ∫îÂÄº
 1977              		.loc 1 1118 0
 1978 001e 054A     		ldr	r2, .L164+4
 1979 0020 5269     		ldr	r2, [r2, #20]
 1980 0022 2260     		str	r2, [r4]
 1981              	.L158:
1119:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
1120:drivers/bsp_f1xx_sdio.c **** }
 1982              		.loc 1 1120 0
 1983 0024 1846     		mov	r0, r3
 1984              	.LVL218:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 58


 1985 0026 10BD     		pop	{r4, pc}
 1986              	.LVL219:
 1987              	.L159:
 1988              	.LCFI19:
 1989              		.cfi_def_cfa_offset 0
 1990              		.cfi_restore 4
 1991              		.cfi_restore 14
1113:drivers/bsp_f1xx_sdio.c **** 	}
 1992              		.loc 1 1113 0
 1993 0028 2623     		movs	r3, #38
 1994              		.loc 1 1120 0
 1995 002a 1846     		mov	r0, r3
 1996              	.LVL220:
 1997 002c 7047     		bx	lr
 1998              	.L165:
 1999 002e 00BF     		.align	2
 2000              	.L164:
 2001 0030 00000000 		.word	.LANCHOR1
 2002 0034 00800140 		.word	1073840128
 2003              		.cfi_endproc
 2004              	.LFE91:
 2006              		.section	.text.SD_GetState,"ax",%progbits
 2007              		.align	1
 2008              		.global	SD_GetState
 2009              		.syntax unified
 2010              		.thumb
 2011              		.thumb_func
 2012              		.fpu softvfp
 2014              	SD_GetState:
 2015              	.LFB92:
1121:drivers/bsp_f1xx_sdio.c **** 
1122:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûSDÂç°ÁöÑÁä∂ÊÄÅ
1123:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:SDÂç°Áä∂ÊÄÅ
1124:drivers/bsp_f1xx_sdio.c **** SDCardState SD_GetState(void)
1125:drivers/bsp_f1xx_sdio.c **** {
 2016              		.loc 1 1125 0
 2017              		.cfi_startproc
 2018              		@ args = 0, pretend = 0, frame = 8
 2019              		@ frame_needed = 0, uses_anonymous_args = 0
 2020 0000 00B5     		push	{lr}
 2021              	.LCFI20:
 2022              		.cfi_def_cfa_offset 4
 2023              		.cfi_offset 14, -4
 2024 0002 83B0     		sub	sp, sp, #12
 2025              	.LCFI21:
 2026              		.cfi_def_cfa_offset 16
1126:drivers/bsp_f1xx_sdio.c **** 	u32 resp1 = 0;
 2027              		.loc 1 1126 0
 2028 0004 02A8     		add	r0, sp, #8
 2029 0006 0023     		movs	r3, #0
 2030 0008 40F8043D 		str	r3, [r0, #-4]!
1127:drivers/bsp_f1xx_sdio.c **** 	if (SD_SendStatus(&resp1) != SD_OK)return SD_CARD_ERROR;
 2031              		.loc 1 1127 0
 2032 000c FFF7FEFF 		bl	SD_SendStatus
 2033              	.LVL221:
 2034 0010 28B9     		cbnz	r0, .L168
1128:drivers/bsp_f1xx_sdio.c **** 	else return (SDCardState) ((resp1 >> 9) & 0x0F);
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 59


 2035              		.loc 1 1128 0
 2036 0012 0198     		ldr	r0, [sp, #4]
 2037 0014 C0F34320 		ubfx	r0, r0, #9, #4
 2038              	.L167:
1129:drivers/bsp_f1xx_sdio.c **** }
 2039              		.loc 1 1129 0
 2040 0018 03B0     		add	sp, sp, #12
 2041              	.LCFI22:
 2042              		.cfi_remember_state
 2043              		.cfi_def_cfa_offset 4
 2044              		@ sp needed
 2045 001a 5DF804FB 		ldr	pc, [sp], #4
 2046              	.L168:
 2047              	.LCFI23:
 2048              		.cfi_restore_state
1127:drivers/bsp_f1xx_sdio.c **** 	if (SD_SendStatus(&resp1) != SD_OK)return SD_CARD_ERROR;
 2049              		.loc 1 1127 0
 2050 001e FF20     		movs	r0, #255
 2051 0020 FAE7     		b	.L167
 2052              		.cfi_endproc
 2053              	.LFE92:
 2055              		.section	.text.FindSCR,"ax",%progbits
 2056              		.align	1
 2057              		.global	FindSCR
 2058              		.syntax unified
 2059              		.thumb
 2060              		.thumb_func
 2061              		.fpu softvfp
 2063              	FindSCR:
 2064              	.LFB93:
1130:drivers/bsp_f1xx_sdio.c **** 
1131:drivers/bsp_f1xx_sdio.c **** //Êü•ÊâæSDÂç°ÁöÑSCRÂØÑÂ≠òÂô®ÂÄº
1132:drivers/bsp_f1xx_sdio.c **** //rca:Âç°Áõ∏ÂØπÂú∞ÂùÄ
1133:drivers/bsp_f1xx_sdio.c **** //pscr:Êï∞ÊçÆÁºìÂ≠òÂå∫(Â≠òÂÇ®SCRÂÜÖÂÆπ)
1134:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ
1135:drivers/bsp_f1xx_sdio.c **** SD_Error FindSCR(u16 rca, u32 *pscr)
1136:drivers/bsp_f1xx_sdio.c **** {
 2065              		.loc 1 1136 0
 2066              		.cfi_startproc
 2067              		@ args = 0, pretend = 0, frame = 8
 2068              		@ frame_needed = 0, uses_anonymous_args = 0
 2069              	.LVL222:
 2070 0000 30B5     		push	{r4, r5, lr}
 2071              	.LCFI24:
 2072              		.cfi_def_cfa_offset 12
 2073              		.cfi_offset 4, -12
 2074              		.cfi_offset 5, -8
 2075              		.cfi_offset 14, -4
 2076 0002 83B0     		sub	sp, sp, #12
 2077              	.LCFI25:
 2078              		.cfi_def_cfa_offset 24
 2079 0004 0446     		mov	r4, r0
 2080 0006 0D46     		mov	r5, r1
 2081              	.LVL223:
1137:drivers/bsp_f1xx_sdio.c **** 	u32 index = 0;
1138:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
1139:drivers/bsp_f1xx_sdio.c **** 	u32 tempscr[2] = {0, 0};
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 60


 2082              		.loc 1 1139 0
 2083 0008 0023     		movs	r3, #0
 2084 000a 0093     		str	r3, [sp]
 2085 000c 0193     		str	r3, [sp, #4]
1140:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN, 1, 8);            //ÂèëÈÄÅCMD16,Áü≠ÂìçÂ∫î,ËÆæÁΩÆBlock Size‰∏∫8Â
 2086              		.loc 1 1140 0
 2087 000e 0822     		movs	r2, #8
 2088 0010 0121     		movs	r1, #1
 2089              	.LVL224:
 2090 0012 1020     		movs	r0, #16
 2091              	.LVL225:
 2092 0014 FFF7FEFF 		bl	SDIO_Send_Cmd
 2093              	.LVL226:
1141:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
 2094              		.loc 1 1141 0
 2095 0018 1020     		movs	r0, #16
 2096 001a FFF7FEFF 		bl	CmdResp1Error
 2097              	.LVL227:
1142:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;
 2098              		.loc 1 1142 0
 2099 001e 0346     		mov	r3, r0
 2100 0020 10B1     		cbz	r0, .L181
 2101              	.LVL228:
 2102              	.L171:
1143:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_APP_CMD, 1, (u32) rca << 16);    //ÂèëÈÄÅCMD55,Áü≠ÂìçÂ∫î
1144:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
1145:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;
1146:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Data_Cfg(SD_DATATIMEOUT, 8, 3, 1);        //8‰∏™Â≠óËäÇÈïøÂ∫¶,block‰∏∫8Â≠óËäÇ,SDÂç°Âà∞SDI
1147:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_SD_APP_SEND_SCR, 1, 0);        //ÂèëÈÄÅACMD51,Áü≠ÂìçÂ∫î,ÂèÇÊï∞‰∏∫0
1148:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_SD_APP_SEND_SCR);
1149:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;
1150:drivers/bsp_f1xx_sdio.c **** 	while (!(SDIO->STA &
1151:drivers/bsp_f1xx_sdio.c **** 			 (SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT | SDIO_FLAG_DBCKEND | SDIO_FLAG_ST
1152:drivers/bsp_f1xx_sdio.c **** 		if (SDIO->STA & (1 << 21))//Êé•Êî∂FIFOÊï∞ÊçÆÂèØÁî®
1153:drivers/bsp_f1xx_sdio.c **** 		{
1154:drivers/bsp_f1xx_sdio.c **** 			*(tempscr + index) = SDIO->FIFO;    //ËØªÂèñFIFOÂÜÖÂÆπ
1155:drivers/bsp_f1xx_sdio.c **** 			index++;
1156:drivers/bsp_f1xx_sdio.c **** 			if (index >= 2)break;
1157:drivers/bsp_f1xx_sdio.c **** 		}
1158:drivers/bsp_f1xx_sdio.c **** 	}
1159:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->STA & (1 << 3))        //Êé•Êî∂Êï∞ÊçÆË∂ÖÊó∂
1160:drivers/bsp_f1xx_sdio.c **** 	{
1161:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 3;        //Ê∏ÖÈô§Ê†áËÆ∞
1162:drivers/bsp_f1xx_sdio.c **** 		return SD_DATA_TIMEOUT;
1163:drivers/bsp_f1xx_sdio.c **** 	} else if (SDIO->STA & (1 << 1))    //Â∑≤ÂèëÈÄÅ/Êé•Êî∂ÁöÑÊï∞ÊçÆÂùóCRCÊ†°È™åÈîôËØØ
1164:drivers/bsp_f1xx_sdio.c **** 	{
1165:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 1;        //Ê∏ÖÈô§Ê†áËÆ∞
1166:drivers/bsp_f1xx_sdio.c **** 		return SD_DATA_CRC_FAIL;
1167:drivers/bsp_f1xx_sdio.c **** 	} else if (SDIO->STA & (1 << 5))    //Êé•Êî∂FIFOÊ∫¢Âá∫
1168:drivers/bsp_f1xx_sdio.c **** 	{
1169:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 5;        //Ê∏ÖÈô§Ê†áËÆ∞
1170:drivers/bsp_f1xx_sdio.c **** 		return SD_RX_OVERRUN;
1171:drivers/bsp_f1xx_sdio.c **** 	} else if (SDIO->STA & (1 << 9))    //Ëµ∑Âßã‰ΩçÊ£ÄÊµãÈîôËØØ
1172:drivers/bsp_f1xx_sdio.c **** 	{
1173:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR |= 1 << 9;        //Ê∏ÖÈô§Ê†áËÆ∞
1174:drivers/bsp_f1xx_sdio.c **** 		return SD_START_BIT_ERR;
1175:drivers/bsp_f1xx_sdio.c **** 	}
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 61


1176:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§Ê†áËÆ∞
1177:drivers/bsp_f1xx_sdio.c **** 	//ÊääÊï∞ÊçÆÈ°∫Â∫èÊåâ8‰Ωç‰∏∫Âçï‰ΩçÂÄíËøáÊù•.
1178:drivers/bsp_f1xx_sdio.c **** 	*(pscr + 1) = ((tempscr[0] & SD_0TO7BITS) << 24) | ((tempscr[0] & SD_8TO15BITS) << 8) |
1179:drivers/bsp_f1xx_sdio.c **** 				  ((tempscr[0] & SD_16TO23BITS) >> 8) | ((tempscr[0] & SD_24TO31BITS) >> 24);
1180:drivers/bsp_f1xx_sdio.c **** 	*(pscr) = ((tempscr[1] & SD_0TO7BITS) << 24) | ((tempscr[1] & SD_8TO15BITS) << 8) |
1181:drivers/bsp_f1xx_sdio.c **** 			  ((tempscr[1] & SD_16TO23BITS) >> 8) | ((tempscr[1] & SD_24TO31BITS) >> 24);
1182:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
1183:drivers/bsp_f1xx_sdio.c **** }
 2103              		.loc 1 1183 0
 2104 0022 1846     		mov	r0, r3
 2105 0024 03B0     		add	sp, sp, #12
 2106              	.LCFI26:
 2107              		.cfi_remember_state
 2108              		.cfi_def_cfa_offset 12
 2109              		@ sp needed
 2110 0026 30BD     		pop	{r4, r5, pc}
 2111              	.LVL229:
 2112              	.L181:
 2113              	.LCFI27:
 2114              		.cfi_restore_state
1143:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_APP_CMD, 1, (u32) rca << 16);    //ÂèëÈÄÅCMD55,Áü≠ÂìçÂ∫î
 2115              		.loc 1 1143 0
 2116 0028 2204     		lsls	r2, r4, #16
 2117 002a 0121     		movs	r1, #1
 2118 002c 3720     		movs	r0, #55
 2119              	.LVL230:
 2120 002e FFF7FEFF 		bl	SDIO_Send_Cmd
 2121              	.LVL231:
1144:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;
 2122              		.loc 1 1144 0
 2123 0032 3720     		movs	r0, #55
 2124 0034 FFF7FEFF 		bl	CmdResp1Error
 2125              	.LVL232:
1145:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Data_Cfg(SD_DATATIMEOUT, 8, 3, 1);        //8‰∏™Â≠óËäÇÈïøÂ∫¶,block‰∏∫8Â≠óËäÇ,SDÂç°Âà∞SDI
 2126              		.loc 1 1145 0
 2127 0038 0346     		mov	r3, r0
 2128 003a 0028     		cmp	r0, #0
 2129 003c F1D1     		bne	.L171
1146:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_SD_APP_SEND_SCR, 1, 0);        //ÂèëÈÄÅACMD51,Áü≠ÂìçÂ∫î,ÂèÇÊï∞‰∏∫0
 2130              		.loc 1 1146 0
 2131 003e 0123     		movs	r3, #1
 2132 0040 0322     		movs	r2, #3
 2133 0042 0821     		movs	r1, #8
 2134 0044 4FF0FF30 		mov	r0, #-1
 2135              	.LVL233:
 2136 0048 FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 2137              	.LVL234:
1147:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_SD_APP_SEND_SCR);
 2138              		.loc 1 1147 0
 2139 004c 0022     		movs	r2, #0
 2140 004e 0121     		movs	r1, #1
 2141 0050 3320     		movs	r0, #51
 2142 0052 FFF7FEFF 		bl	SDIO_Send_Cmd
 2143              	.LVL235:
1148:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;
 2144              		.loc 1 1148 0
 2145 0056 3320     		movs	r0, #51
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 62


 2146 0058 FFF7FEFF 		bl	CmdResp1Error
 2147              	.LVL236:
1149:drivers/bsp_f1xx_sdio.c **** 	while (!(SDIO->STA &
 2148              		.loc 1 1149 0
 2149 005c 0346     		mov	r3, r0
 2150 005e 0028     		cmp	r0, #0
 2151 0060 DFD1     		bne	.L171
 2152              	.LVL237:
 2153              	.L173:
1150:drivers/bsp_f1xx_sdio.c **** 			 (SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT | SDIO_FLAG_DBCKEND | SDIO_FLAG_ST
 2154              		.loc 1 1150 0
 2155 0062 314A     		ldr	r2, .L186
 2156 0064 516B     		ldr	r1, [r2, #52]
 2157 0066 40F22A62 		movw	r2, #1578
 2158 006a 1142     		tst	r1, r2
 2159 006c 0CD1     		bne	.L174
1152:drivers/bsp_f1xx_sdio.c **** 		{
 2160              		.loc 1 1152 0
 2161 006e 2E4A     		ldr	r2, .L186
 2162 0070 526B     		ldr	r2, [r2, #52]
 2163 0072 12F4001F 		tst	r2, #2097152
 2164 0076 F4D0     		beq	.L173
1154:drivers/bsp_f1xx_sdio.c **** 			index++;
 2165              		.loc 1 1154 0
 2166 0078 2B4A     		ldr	r2, .L186
 2167 007a D2F88020 		ldr	r2, [r2, #128]
 2168 007e 4DF82020 		str	r2, [sp, r0, lsl #2]
1155:drivers/bsp_f1xx_sdio.c **** 			if (index >= 2)break;
 2169              		.loc 1 1155 0
 2170 0082 0130     		adds	r0, r0, #1
 2171              	.LVL238:
1156:drivers/bsp_f1xx_sdio.c **** 		}
 2172              		.loc 1 1156 0
 2173 0084 0128     		cmp	r0, #1
 2174 0086 ECD9     		bls	.L173
 2175              	.L174:
1159:drivers/bsp_f1xx_sdio.c **** 	{
 2176              		.loc 1 1159 0
 2177 0088 274A     		ldr	r2, .L186
 2178 008a 526B     		ldr	r2, [r2, #52]
 2179 008c 12F0080F 		tst	r2, #8
 2180 0090 2DD1     		bne	.L182
1163:drivers/bsp_f1xx_sdio.c **** 	{
 2181              		.loc 1 1163 0
 2182 0092 254A     		ldr	r2, .L186
 2183 0094 526B     		ldr	r2, [r2, #52]
 2184 0096 12F0020F 		tst	r2, #2
 2185 009a 2FD1     		bne	.L183
1167:drivers/bsp_f1xx_sdio.c **** 	{
 2186              		.loc 1 1167 0
 2187 009c 224A     		ldr	r2, .L186
 2188 009e 526B     		ldr	r2, [r2, #52]
 2189 00a0 12F0200F 		tst	r2, #32
 2190 00a4 31D1     		bne	.L184
1171:drivers/bsp_f1xx_sdio.c **** 	{
 2191              		.loc 1 1171 0
 2192 00a6 204A     		ldr	r2, .L186
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 63


 2193 00a8 526B     		ldr	r2, [r2, #52]
 2194 00aa 12F4007F 		tst	r2, #512
 2195 00ae 33D1     		bne	.L185
1176:drivers/bsp_f1xx_sdio.c **** 	//ÊääÊï∞ÊçÆÈ°∫Â∫èÊåâ8‰Ωç‰∏∫Âçï‰ΩçÂÄíËøáÊù•.
 2196              		.loc 1 1176 0
 2197 00b0 1D4A     		ldr	r2, .L186
 2198 00b2 40F2FF51 		movw	r1, #1535
 2199 00b6 9163     		str	r1, [r2, #56]
1178:drivers/bsp_f1xx_sdio.c **** 				  ((tempscr[0] & SD_16TO23BITS) >> 8) | ((tempscr[0] & SD_24TO31BITS) >> 24);
 2200              		.loc 1 1178 0
 2201 00b8 0099     		ldr	r1, [sp]
 2202 00ba 0A02     		lsls	r2, r1, #8
 2203 00bc 02F47F02 		and	r2, r2, #16711680
 2204 00c0 42EA0162 		orr	r2, r2, r1, lsl #24
1179:drivers/bsp_f1xx_sdio.c **** 	*(pscr) = ((tempscr[1] & SD_0TO7BITS) << 24) | ((tempscr[1] & SD_8TO15BITS) << 8) |
 2205              		.loc 1 1179 0
 2206 00c4 080A     		lsrs	r0, r1, #8
 2207              	.LVL239:
 2208 00c6 00F47F40 		and	r0, r0, #65280
1178:drivers/bsp_f1xx_sdio.c **** 				  ((tempscr[0] & SD_16TO23BITS) >> 8) | ((tempscr[0] & SD_24TO31BITS) >> 24);
 2209              		.loc 1 1178 0
 2210 00ca 0243     		orrs	r2, r2, r0
1179:drivers/bsp_f1xx_sdio.c **** 	*(pscr) = ((tempscr[1] & SD_0TO7BITS) << 24) | ((tempscr[1] & SD_8TO15BITS) << 8) |
 2211              		.loc 1 1179 0
 2212 00cc 42EA1162 		orr	r2, r2, r1, lsr #24
1178:drivers/bsp_f1xx_sdio.c **** 				  ((tempscr[0] & SD_16TO23BITS) >> 8) | ((tempscr[0] & SD_24TO31BITS) >> 24);
 2213              		.loc 1 1178 0
 2214 00d0 6A60     		str	r2, [r5, #4]
1180:drivers/bsp_f1xx_sdio.c **** 			  ((tempscr[1] & SD_16TO23BITS) >> 8) | ((tempscr[1] & SD_24TO31BITS) >> 24);
 2215              		.loc 1 1180 0
 2216 00d2 0199     		ldr	r1, [sp, #4]
 2217 00d4 0A02     		lsls	r2, r1, #8
 2218 00d6 02F47F02 		and	r2, r2, #16711680
 2219 00da 42EA0162 		orr	r2, r2, r1, lsl #24
1181:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 2220              		.loc 1 1181 0
 2221 00de 080A     		lsrs	r0, r1, #8
 2222 00e0 00F47F40 		and	r0, r0, #65280
1180:drivers/bsp_f1xx_sdio.c **** 			  ((tempscr[1] & SD_16TO23BITS) >> 8) | ((tempscr[1] & SD_24TO31BITS) >> 24);
 2223              		.loc 1 1180 0
 2224 00e4 0243     		orrs	r2, r2, r0
1181:drivers/bsp_f1xx_sdio.c **** 	return errorstatus;
 2225              		.loc 1 1181 0
 2226 00e6 42EA1162 		orr	r2, r2, r1, lsr #24
1180:drivers/bsp_f1xx_sdio.c **** 			  ((tempscr[1] & SD_16TO23BITS) >> 8) | ((tempscr[1] & SD_24TO31BITS) >> 24);
 2227              		.loc 1 1180 0
 2228 00ea 2A60     		str	r2, [r5]
1182:drivers/bsp_f1xx_sdio.c **** }
 2229              		.loc 1 1182 0
 2230 00ec 99E7     		b	.L171
 2231              	.LVL240:
 2232              	.L182:
1161:drivers/bsp_f1xx_sdio.c **** 		return SD_DATA_TIMEOUT;
 2233              		.loc 1 1161 0
 2234 00ee 0E4A     		ldr	r2, .L186
 2235 00f0 936B     		ldr	r3, [r2, #56]
 2236 00f2 43F00803 		orr	r3, r3, #8
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 64


 2237 00f6 9363     		str	r3, [r2, #56]
1162:drivers/bsp_f1xx_sdio.c **** 	} else if (SDIO->STA & (1 << 1))    //Â∑≤ÂèëÈÄÅ/Êé•Êî∂ÁöÑÊï∞ÊçÆÂùóCRCÊ†°È™åÈîôËØØ
 2238              		.loc 1 1162 0
 2239 00f8 0423     		movs	r3, #4
 2240 00fa 92E7     		b	.L171
 2241              	.L183:
1165:drivers/bsp_f1xx_sdio.c **** 		return SD_DATA_CRC_FAIL;
 2242              		.loc 1 1165 0
 2243 00fc 0A4A     		ldr	r2, .L186
 2244 00fe 936B     		ldr	r3, [r2, #56]
 2245 0100 43F00203 		orr	r3, r3, #2
 2246 0104 9363     		str	r3, [r2, #56]
1166:drivers/bsp_f1xx_sdio.c **** 	} else if (SDIO->STA & (1 << 5))    //Êé•Êî∂FIFOÊ∫¢Âá∫
 2247              		.loc 1 1166 0
 2248 0106 0223     		movs	r3, #2
 2249 0108 8BE7     		b	.L171
 2250              	.L184:
1169:drivers/bsp_f1xx_sdio.c **** 		return SD_RX_OVERRUN;
 2251              		.loc 1 1169 0
 2252 010a 074A     		ldr	r2, .L186
 2253 010c 936B     		ldr	r3, [r2, #56]
 2254 010e 43F02003 		orr	r3, r3, #32
 2255 0112 9363     		str	r3, [r2, #56]
1170:drivers/bsp_f1xx_sdio.c **** 	} else if (SDIO->STA & (1 << 9))    //Ëµ∑Âßã‰ΩçÊ£ÄÊµãÈîôËØØ
 2256              		.loc 1 1170 0
 2257 0114 0623     		movs	r3, #6
 2258 0116 84E7     		b	.L171
 2259              	.L185:
1173:drivers/bsp_f1xx_sdio.c **** 		return SD_START_BIT_ERR;
 2260              		.loc 1 1173 0
 2261 0118 034A     		ldr	r2, .L186
 2262 011a 936B     		ldr	r3, [r2, #56]
 2263 011c 43F40073 		orr	r3, r3, #512
 2264 0120 9363     		str	r3, [r2, #56]
1174:drivers/bsp_f1xx_sdio.c **** 	}
 2265              		.loc 1 1174 0
 2266 0122 0723     		movs	r3, #7
 2267 0124 7DE7     		b	.L171
 2268              	.L187:
 2269 0126 00BF     		.align	2
 2270              	.L186:
 2271 0128 00800140 		.word	1073840128
 2272              		.cfi_endproc
 2273              	.LFE93:
 2275              		.section	.text.SDEnWideBus,"ax",%progbits
 2276              		.align	1
 2277              		.global	SDEnWideBus
 2278              		.syntax unified
 2279              		.thumb
 2280              		.thumb_func
 2281              		.fpu softvfp
 2283              	SDEnWideBus:
 2284              	.LFB89:
1059:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 2285              		.loc 1 1059 0
 2286              		.cfi_startproc
 2287              		@ args = 0, pretend = 0, frame = 8
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 65


 2288              		@ frame_needed = 0, uses_anonymous_args = 0
 2289              	.LVL241:
 2290 0000 10B5     		push	{r4, lr}
 2291              	.LCFI28:
 2292              		.cfi_def_cfa_offset 8
 2293              		.cfi_offset 4, -8
 2294              		.cfi_offset 14, -4
 2295 0002 82B0     		sub	sp, sp, #8
 2296              	.LCFI29:
 2297              		.cfi_def_cfa_offset 16
 2298              	.LVL242:
1061:drivers/bsp_f1xx_sdio.c **** 	u8 arg = 0X00;
 2299              		.loc 1 1061 0
 2300 0004 0023     		movs	r3, #0
 2301 0006 0093     		str	r3, [sp]
 2302 0008 0193     		str	r3, [sp, #4]
 2303              	.LVL243:
1063:drivers/bsp_f1xx_sdio.c **** 	else arg = 0X00;
 2304              		.loc 1 1063 0
 2305 000a 0446     		mov	r4, r0
 2306 000c 00B1     		cbz	r0, .L189
 2307 000e 0224     		movs	r4, #2
 2308              	.L189:
 2309              	.LVL244:
1065:drivers/bsp_f1xx_sdio.c **** 	errorstatus = FindSCR(RCA, scr);                        //ÂæóÂà∞SCRÂØÑÂ≠òÂô®Êï∞ÊçÆ
 2310              		.loc 1 1065 0
 2311 0010 154B     		ldr	r3, .L194
 2312 0012 5B69     		ldr	r3, [r3, #20]
 2313 0014 13F0007F 		tst	r3, #33554432
 2314 0018 20D1     		bne	.L191
1066:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;
 2315              		.loc 1 1066 0
 2316 001a 6946     		mov	r1, sp
 2317 001c 134B     		ldr	r3, .L194+4
 2318 001e 1888     		ldrh	r0, [r3]
 2319              	.LVL245:
 2320 0020 FFF7FEFF 		bl	FindSCR
 2321              	.LVL246:
1067:drivers/bsp_f1xx_sdio.c **** 	if ((scr[1] & SD_WIDE_BUS_SUPPORT) != SD_ALLZERO)        //ÊîØÊåÅÂÆΩÊÄªÁ∫ø
 2322              		.loc 1 1067 0
 2323 0024 0346     		mov	r3, r0
 2324 0026 D0B9     		cbnz	r0, .L190
1068:drivers/bsp_f1xx_sdio.c **** 	{
 2325              		.loc 1 1068 0
 2326 0028 019B     		ldr	r3, [sp, #4]
 2327 002a 13F4802F 		tst	r3, #262144
 2328 002e 19D0     		beq	.L192
1070:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 2329              		.loc 1 1070 0
 2330 0030 0E4B     		ldr	r3, .L194+4
 2331 0032 1A68     		ldr	r2, [r3]
 2332 0034 1204     		lsls	r2, r2, #16
 2333 0036 0121     		movs	r1, #1
 2334 0038 3720     		movs	r0, #55
 2335              	.LVL247:
 2336 003a FFF7FEFF 		bl	SDIO_Send_Cmd
 2337              	.LVL248:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 66


1071:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;
 2338              		.loc 1 1071 0
 2339 003e 3720     		movs	r0, #55
 2340 0040 FFF7FEFF 		bl	CmdResp1Error
 2341              	.LVL249:
1072:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_APP_SD_SET_BUSWIDTH, 1, arg);//ÂèëÈÄÅACMD6,Áü≠ÂìçÂ∫î,ÂèÇÊï∞:10,4‰Ωç;00,1‰Ωç.
 2342              		.loc 1 1072 0
 2343 0044 0346     		mov	r3, r0
 2344 0046 50B9     		cbnz	r0, .L190
1073:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_APP_SD_SET_BUSWIDTH);
 2345              		.loc 1 1073 0
 2346 0048 2246     		mov	r2, r4
 2347 004a 0121     		movs	r1, #1
 2348 004c 0620     		movs	r0, #6
 2349              	.LVL250:
 2350 004e FFF7FEFF 		bl	SDIO_Send_Cmd
 2351              	.LVL251:
1074:drivers/bsp_f1xx_sdio.c **** 		return errorstatus;
 2352              		.loc 1 1074 0
 2353 0052 0620     		movs	r0, #6
 2354 0054 FFF7FEFF 		bl	CmdResp1Error
 2355              	.LVL252:
 2356 0058 0346     		mov	r3, r0
 2357              	.LVL253:
1075:drivers/bsp_f1xx_sdio.c **** 	} else return SD_REQUEST_NOT_APPLICABLE;                //‰∏çÊîØÊåÅÂÆΩÊÄªÁ∫øËÆæÁΩÆ
 2358              		.loc 1 1075 0
 2359 005a 00E0     		b	.L190
 2360              	.LVL254:
 2361              	.L191:
1065:drivers/bsp_f1xx_sdio.c **** 	errorstatus = FindSCR(RCA, scr);                        //ÂæóÂà∞SCRÂØÑÂ≠òÂô®Êï∞ÊçÆ
 2362              		.loc 1 1065 0
 2363 005c 0E23     		movs	r3, #14
 2364              	.LVL255:
 2365              	.L190:
1077:drivers/bsp_f1xx_sdio.c **** 
 2366              		.loc 1 1077 0
 2367 005e 1846     		mov	r0, r3
 2368 0060 02B0     		add	sp, sp, #8
 2369              	.LCFI30:
 2370              		.cfi_remember_state
 2371              		.cfi_def_cfa_offset 8
 2372              		@ sp needed
 2373 0062 10BD     		pop	{r4, pc}
 2374              	.LVL256:
 2375              	.L192:
 2376              	.LCFI31:
 2377              		.cfi_restore_state
1076:drivers/bsp_f1xx_sdio.c **** }
 2378              		.loc 1 1076 0
 2379 0064 2523     		movs	r3, #37
 2380 0066 FAE7     		b	.L190
 2381              	.L195:
 2382              		.align	2
 2383              	.L194:
 2384 0068 00800140 		.word	1073840128
 2385 006c 00000000 		.word	.LANCHOR1
 2386              		.cfi_endproc
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 67


 2387              	.LFE89:
 2389              		.section	.text.SD_EnableWideBusOperation,"ax",%progbits
 2390              		.align	1
 2391              		.global	SD_EnableWideBusOperation
 2392              		.syntax unified
 2393              		.thumb
 2394              		.thumb_func
 2395              		.fpu softvfp
 2397              	SD_EnableWideBusOperation:
 2398              	.LFB74:
 365:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 2399              		.loc 1 365 0
 2400              		.cfi_startproc
 2401              		@ args = 0, pretend = 0, frame = 0
 2402              		@ frame_needed = 0, uses_anonymous_args = 0
 2403              	.LVL257:
 367:drivers/bsp_f1xx_sdio.c **** 	else if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardTy
 2404              		.loc 1 367 0
 2405 0000 124B     		ldr	r3, .L206
 2406 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2407 0004 032B     		cmp	r3, #3
 2408 0006 1BD0     		beq	.L198
 368:drivers/bsp_f1xx_sdio.c **** 			 (SDIO_HIGH_CAPACITY_SD_CARD == CardType)) {
 2409              		.loc 1 368 0
 2410 0008 022B     		cmp	r3, #2
 2411 000a 1BD8     		bhi	.L199
 370:drivers/bsp_f1xx_sdio.c **** 		else {
 2412              		.loc 1 370 0
 2413 000c 0128     		cmp	r0, #1
 2414 000e 01D9     		bls	.L205
 2415 0010 2723     		movs	r3, #39
 2416 0012 18E0     		b	.L202
 2417              	.L205:
 365:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 2418              		.loc 1 365 0
 2419 0014 10B5     		push	{r4, lr}
 2420              	.LCFI32:
 2421              		.cfi_def_cfa_offset 8
 2422              		.cfi_offset 4, -8
 2423              		.cfi_offset 14, -4
 2424 0016 0446     		mov	r4, r0
 372:drivers/bsp_f1xx_sdio.c **** 			if (SD_OK == errorstatus) {
 2425              		.loc 1 372 0
 2426 0018 C0B2     		uxtb	r0, r0
 2427              	.LVL258:
 2428 001a FFF7FEFF 		bl	SDEnWideBus
 2429              	.LVL259:
 373:drivers/bsp_f1xx_sdio.c **** 				SDIO->CLKCR &= ~(3 << 11);        //Ê∏ÖÈô§‰πãÂâçÁöÑ‰ΩçÂÆΩËÆæÁΩÆ
 2430              		.loc 1 373 0
 2431 001e 0346     		mov	r3, r0
 2432 0020 60B9     		cbnz	r0, .L197
 374:drivers/bsp_f1xx_sdio.c **** 				SDIO->CLKCR |= (u16) wmode << 11;//1‰Ωç/4‰ΩçÊÄªÁ∫øÂÆΩÂ∫¶
 2433              		.loc 1 374 0
 2434 0022 0B4A     		ldr	r2, .L206+4
 2435 0024 5168     		ldr	r1, [r2, #4]
 2436 0026 21F4C051 		bic	r1, r1, #6144
 2437 002a 5160     		str	r1, [r2, #4]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 68


 375:drivers/bsp_f1xx_sdio.c **** 				SDIO->CLKCR |= 0 << 14;            //‰∏çÂºÄÂêØÁ°¨‰ª∂ÊµÅÊéßÂà∂
 2438              		.loc 1 375 0
 2439 002c 5068     		ldr	r0, [r2, #4]
 2440              	.LVL260:
 2441 002e 0949     		ldr	r1, .L206+8
 2442 0030 01EAC424 		and	r4, r1, r4, lsl #11
 2443              	.LVL261:
 2444 0034 2043     		orrs	r0, r0, r4
 2445 0036 5060     		str	r0, [r2, #4]
 376:drivers/bsp_f1xx_sdio.c **** 			}
 2446              		.loc 1 376 0
 2447 0038 5168     		ldr	r1, [r2, #4]
 2448 003a 5160     		str	r1, [r2, #4]
 2449              	.L197:
 381:drivers/bsp_f1xx_sdio.c **** 
 2450              		.loc 1 381 0
 2451 003c 1846     		mov	r0, r3
 2452 003e 10BD     		pop	{r4, pc}
 2453              	.LVL262:
 2454              	.L198:
 2455              	.LCFI33:
 2456              		.cfi_def_cfa_offset 0
 2457              		.cfi_restore 4
 2458              		.cfi_restore 14
 367:drivers/bsp_f1xx_sdio.c **** 	else if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardTy
 2459              		.loc 1 367 0
 2460 0040 2723     		movs	r3, #39
 2461 0042 00E0     		b	.L202
 2462              	.L199:
 366:drivers/bsp_f1xx_sdio.c **** 	if (SDIO_MULTIMEDIA_CARD == CardType)return SD_UNSUPPORTED_FEATURE;//MMCÂç°‰∏çÊîØÊåÅ
 2463              		.loc 1 366 0
 2464 0044 0023     		movs	r3, #0
 2465              	.L202:
 381:drivers/bsp_f1xx_sdio.c **** 
 2466              		.loc 1 381 0
 2467 0046 1846     		mov	r0, r3
 2468              	.LVL263:
 2469 0048 7047     		bx	lr
 2470              	.L207:
 2471 004a 00BF     		.align	2
 2472              	.L206:
 2473 004c 00000000 		.word	.LANCHOR0
 2474 0050 00800140 		.word	1073840128
 2475 0054 00F8FF07 		.word	134215680
 2476              		.cfi_endproc
 2477              	.LFE74:
 2479              		.section	.text.bsp_SD_Init,"ax",%progbits
 2480              		.align	1
 2481              		.global	bsp_SD_Init
 2482              		.syntax unified
 2483              		.thumb
 2484              		.thumb_func
 2485              		.fpu softvfp
 2487              	bsp_SD_Init:
 2488              	.LFB66:
  19:drivers/bsp_f1xx_sdio.c **** 	u8 clkdiv = 0;
 2489              		.loc 1 19 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 69


 2490              		.cfi_startproc
 2491              		@ args = 0, pretend = 0, frame = 0
 2492              		@ frame_needed = 0, uses_anonymous_args = 0
 2493 0000 08B5     		push	{r3, lr}
 2494              	.LCFI34:
 2495              		.cfi_def_cfa_offset 8
 2496              		.cfi_offset 3, -8
 2497              		.cfi_offset 14, -4
 2498              	.LVL264:
  23:drivers/bsp_f1xx_sdio.c **** 	RCC->APB2ENR |= 1 << 5;        //‰ΩøËÉΩPORTDÊó∂Èíü
 2499              		.loc 1 23 0
 2500 0002 334B     		ldr	r3, .L223
 2501 0004 9A69     		ldr	r2, [r3, #24]
 2502 0006 42F01002 		orr	r2, r2, #16
 2503 000a 9A61     		str	r2, [r3, #24]
  24:drivers/bsp_f1xx_sdio.c **** 	RCC->AHBENR |= 1 << 10;        //‰ΩøËÉΩSDIOÊó∂Èíü
 2504              		.loc 1 24 0
 2505 000c 9A69     		ldr	r2, [r3, #24]
 2506 000e 42F02002 		orr	r2, r2, #32
 2507 0012 9A61     		str	r2, [r3, #24]
  25:drivers/bsp_f1xx_sdio.c **** 	RCC->AHBENR |= 1 << 1;        //‰ΩøËÉΩDMA2Êó∂Èíü
 2508              		.loc 1 25 0
 2509 0014 5A69     		ldr	r2, [r3, #20]
 2510 0016 42F48062 		orr	r2, r2, #1024
 2511 001a 5A61     		str	r2, [r3, #20]
  26:drivers/bsp_f1xx_sdio.c **** 
 2512              		.loc 1 26 0
 2513 001c 5A69     		ldr	r2, [r3, #20]
 2514 001e 42F00202 		orr	r2, r2, #2
 2515 0022 5A61     		str	r2, [r3, #20]
  28:drivers/bsp_f1xx_sdio.c **** 	GPIOC->CRH |= 0X000BBBBB;    //PC.8~12 Â§çÁî®ËæìÂá∫
 2516              		.loc 1 28 0
 2517 0024 2B4A     		ldr	r2, .L223+4
 2518 0026 5368     		ldr	r3, [r2, #4]
 2519 0028 1B0D     		lsrs	r3, r3, #20
 2520 002a 1B05     		lsls	r3, r3, #20
 2521 002c 5360     		str	r3, [r2, #4]
  29:drivers/bsp_f1xx_sdio.c **** 
 2522              		.loc 1 29 0
 2523 002e 5168     		ldr	r1, [r2, #4]
 2524 0030 294B     		ldr	r3, .L223+8
 2525 0032 0B43     		orrs	r3, r3, r1
 2526 0034 5360     		str	r3, [r2, #4]
  31:drivers/bsp_f1xx_sdio.c **** 	GPIOD->CRL |= 0X00000B00;    //PD2Â§çÁî®ËæìÂá∫,PD7 ‰∏äÊãâËæìÂÖ•
 2527              		.loc 1 31 0
 2528 0036 294B     		ldr	r3, .L223+12
 2529 0038 1A68     		ldr	r2, [r3]
 2530 003a 22F47062 		bic	r2, r2, #3840
 2531 003e 1A60     		str	r2, [r3]
  32:drivers/bsp_f1xx_sdio.c **** 	//SDIOÂ§ñËÆæÂØÑÂ≠òÂô®ËÆæÁΩÆ‰∏∫ÈªòËÆ§ÂÄº
 2532              		.loc 1 32 0
 2533 0040 1A68     		ldr	r2, [r3]
 2534 0042 42F43062 		orr	r2, r2, #2816
 2535 0046 1A60     		str	r2, [r3]
  34:drivers/bsp_f1xx_sdio.c **** 	SDIO->CLKCR = 0x00000000;
 2536              		.loc 1 34 0
 2537 0048 03F5D843 		add	r3, r3, #27648
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 70


 2538 004c 0021     		movs	r1, #0
 2539 004e 1960     		str	r1, [r3]
  35:drivers/bsp_f1xx_sdio.c **** 	SDIO->ARG = 0x00000000;
 2540              		.loc 1 35 0
 2541 0050 5960     		str	r1, [r3, #4]
  36:drivers/bsp_f1xx_sdio.c **** 	SDIO->CMD = 0x00000000;
 2542              		.loc 1 36 0
 2543 0052 9960     		str	r1, [r3, #8]
  37:drivers/bsp_f1xx_sdio.c **** 	SDIO->DTIMER = 0x00000000;
 2544              		.loc 1 37 0
 2545 0054 D960     		str	r1, [r3, #12]
  38:drivers/bsp_f1xx_sdio.c **** 	SDIO->DLEN = 0x00000000;
 2546              		.loc 1 38 0
 2547 0056 5962     		str	r1, [r3, #36]
  39:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = 0x00000000;
 2548              		.loc 1 39 0
 2549 0058 9962     		str	r1, [r3, #40]
  40:drivers/bsp_f1xx_sdio.c **** 	SDIO->ICR = 0x00C007FF;
 2550              		.loc 1 40 0
 2551 005a D962     		str	r1, [r3, #44]
  41:drivers/bsp_f1xx_sdio.c **** 	SDIO->MASK = 0x00000000;
 2552              		.loc 1 41 0
 2553 005c 204A     		ldr	r2, .L223+16
 2554 005e 9A63     		str	r2, [r3, #56]
  42:drivers/bsp_f1xx_sdio.c **** 	MY_NVIC_Init(1, 0, SDIO_IRQn, 1);        //SDIO‰∏≠Êñ≠ÈÖçÁΩÆ
 2555              		.loc 1 42 0
 2556 0060 D963     		str	r1, [r3, #60]
  43:drivers/bsp_f1xx_sdio.c **** 	errorstatus = SD_PowerON();            //SDÂç°‰∏äÁîµ
 2557              		.loc 1 43 0
 2558 0062 0123     		movs	r3, #1
 2559 0064 3122     		movs	r2, #49
 2560 0066 1846     		mov	r0, r3
 2561 0068 FFF7FEFF 		bl	MY_NVIC_Init
 2562              	.LVL265:
  44:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)errorstatus = SD_InitializeCards();            //ÂàùÂßãÂåñSDÂç°
 2563              		.loc 1 44 0
 2564 006c FFF7FEFF 		bl	SD_PowerON
 2565              	.LVL266:
  45:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)errorstatus = SD_GetCardInfo(&SDCardInfo);    //Ëé∑ÂèñÂç°‰ø°ÊÅØ
 2566              		.loc 1 45 0
 2567 0070 0346     		mov	r3, r0
 2568 0072 A8B1     		cbz	r0, .L218
 2569              	.LVL267:
 2570              	.L209:
  46:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)errorstatus = SD_SelectDeselect((u32) (SDCardInfo.RCA << 16));//ÈÄâ‰∏≠SDÂ
 2571              		.loc 1 46 0
 2572 0074 C3B1     		cbz	r3, .L219
 2573              	.L210:
  47:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)errorstatus = SD_EnableWideBusOperation(1);    //4‰ΩçÂÆΩÂ∫¶,Â¶ÇÊûúÊòØMMCÂ
 2574              		.loc 1 47 0
 2575 0076 E3B1     		cbz	r3, .L220
 2576              	.L211:
  48:drivers/bsp_f1xx_sdio.c **** 	if ((errorstatus == SD_OK) || (SDIO_MULTIMEDIA_CARD == CardType)) {
 2577              		.loc 1 48 0
 2578 0078 1BB3     		cbz	r3, .L221
 2579              	.L212:
  49:drivers/bsp_f1xx_sdio.c **** 		if (SDCardInfo.CardType == SDIO_STD_CAPACITY_SD_CARD_V1_1 ||
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 71


 2580              		.loc 1 49 0
 2581 007a 1BB1     		cbz	r3, .L213
  49:drivers/bsp_f1xx_sdio.c **** 		if (SDCardInfo.CardType == SDIO_STD_CAPACITY_SD_CARD_V1_1 ||
 2582              		.loc 1 49 0 is_stmt 0 discriminator 1
 2583 007c 194A     		ldr	r2, .L223+20
 2584 007e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 2585 0080 032A     		cmp	r2, #3
 2586 0082 0BD1     		bne	.L214
 2587              	.L213:
  50:drivers/bsp_f1xx_sdio.c **** 			SDCardInfo.CardType == SDIO_STD_CAPACITY_SD_CARD_V2_0) {
 2588              		.loc 1 50 0 is_stmt 1
 2589 0084 184B     		ldr	r3, .L223+24
 2590              	.LVL268:
 2591 0086 93F85630 		ldrb	r3, [r3, #86]	@ zero_extendqisi2
 2592 008a 012B     		cmp	r3, #1
 2593 008c 1ED9     		bls	.L222
  53:drivers/bsp_f1xx_sdio.c **** 		SDIO_Clock_Set(clkdiv);                //ËÆæÁΩÆÊó∂ÈíüÈ¢ëÁéá,SDIOÊó∂ÈíüËÆ°ÁÆóÂÖ¨Âºè:SDIO_CKÊó∂Èíü=
 2594              		.loc 1 53 0
 2595 008e 0220     		movs	r0, #2
 2596              	.L215:
 2597              	.LVL269:
  54:drivers/bsp_f1xx_sdio.c **** 		errorstatus = SD_SetDeviceMode(SD_DMA_MODE);    //ËÆæÁΩÆ‰∏∫DMAÊ®°Âºè
 2598              		.loc 1 54 0
 2599 0090 FFF7FEFF 		bl	SDIO_Clock_Set
 2600              	.LVL270:
  55:drivers/bsp_f1xx_sdio.c **** 		//errorstatus=SD_SetDeviceMode(SD_POLLING_MODE);	//ËÆæÁΩÆ‰∏∫Êü•ËØ¢Ê®°Âºè
 2601              		.loc 1 55 0
 2602 0094 0120     		movs	r0, #1
 2603 0096 FFF7FEFF 		bl	SD_SetDeviceMode
 2604              	.LVL271:
 2605 009a 0346     		mov	r3, r0
 2606              	.LVL272:
 2607              	.L214:
  59:drivers/bsp_f1xx_sdio.c **** 
 2608              		.loc 1 59 0
 2609 009c 1846     		mov	r0, r3
 2610 009e 08BD     		pop	{r3, pc}
 2611              	.LVL273:
 2612              	.L218:
  45:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)errorstatus = SD_GetCardInfo(&SDCardInfo);    //Ëé∑ÂèñÂç°‰ø°ÊÅØ
 2613              		.loc 1 45 0 discriminator 1
 2614 00a0 FFF7FEFF 		bl	SD_InitializeCards
 2615              	.LVL274:
 2616 00a4 0346     		mov	r3, r0
 2617              	.LVL275:
 2618 00a6 E5E7     		b	.L209
 2619              	.L219:
  46:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)errorstatus = SD_SelectDeselect((u32) (SDCardInfo.RCA << 16));//ÈÄâ‰∏≠SDÂ
 2620              		.loc 1 46 0 discriminator 1
 2621 00a8 0F48     		ldr	r0, .L223+24
 2622 00aa FFF7FEFF 		bl	SD_GetCardInfo
 2623              	.LVL276:
 2624 00ae 0346     		mov	r3, r0
 2625              	.LVL277:
 2626 00b0 E1E7     		b	.L210
 2627              	.L220:
  47:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus == SD_OK)errorstatus = SD_EnableWideBusOperation(1);    //4‰ΩçÂÆΩÂ∫¶,Â¶ÇÊûúÊòØMMCÂ
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 72


 2628              		.loc 1 47 0 discriminator 1
 2629 00b2 0D4B     		ldr	r3, .L223+24
 2630              	.LVL278:
 2631 00b4 B3F85400 		ldrh	r0, [r3, #84]
 2632 00b8 0004     		lsls	r0, r0, #16
 2633 00ba FFF7FEFF 		bl	SD_SelectDeselect
 2634              	.LVL279:
 2635 00be 0346     		mov	r3, r0
 2636              	.LVL280:
 2637 00c0 DAE7     		b	.L211
 2638              	.L221:
  48:drivers/bsp_f1xx_sdio.c **** 	if ((errorstatus == SD_OK) || (SDIO_MULTIMEDIA_CARD == CardType)) {
 2639              		.loc 1 48 0 discriminator 1
 2640 00c2 0120     		movs	r0, #1
 2641 00c4 FFF7FEFF 		bl	SD_EnableWideBusOperation
 2642              	.LVL281:
 2643 00c8 0346     		mov	r3, r0
 2644              	.LVL282:
 2645 00ca D6E7     		b	.L212
 2646              	.LVL283:
 2647              	.L222:
  52:drivers/bsp_f1xx_sdio.c **** 		} else clkdiv = SDIO_TRANSFER_CLK_DIV;    //SDHCÁ≠âÂÖ∂‰ªñÂç°ÔºåËÆæÁΩÆÊúÄÈ´ò72/6=12Mhz
 2648              		.loc 1 52 0
 2649 00cc 0820     		movs	r0, #8
 2650 00ce DFE7     		b	.L215
 2651              	.L224:
 2652              		.align	2
 2653              	.L223:
 2654 00d0 00100240 		.word	1073876992
 2655 00d4 00100140 		.word	1073811456
 2656 00d8 BBBB0B00 		.word	768955
 2657 00dc 00140140 		.word	1073812480
 2658 00e0 FF07C000 		.word	12584959
 2659 00e4 00000000 		.word	.LANCHOR0
 2660 00e8 00000000 		.word	SDCardInfo
 2661              		.cfi_endproc
 2662              	.LFE66:
 2664              		.section	.text.convert_from_bytes_to_power_of_two,"ax",%progbits
 2665              		.align	1
 2666              		.global	convert_from_bytes_to_power_of_two
 2667              		.syntax unified
 2668              		.thumb
 2669              		.thumb_func
 2670              		.fpu softvfp
 2672              	convert_from_bytes_to_power_of_two:
 2673              	.LFB94:
1184:drivers/bsp_f1xx_sdio.c **** 
1185:drivers/bsp_f1xx_sdio.c **** //ÂæóÂà∞NumberOfBytes‰ª•2‰∏∫Â∫ïÁöÑÊåáÊï∞.
1186:drivers/bsp_f1xx_sdio.c **** //NumberOfBytes:Â≠óËäÇÊï∞.
1187:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:‰ª•2‰∏∫Â∫ïÁöÑÊåáÊï∞ÂÄº
1188:drivers/bsp_f1xx_sdio.c **** u8 convert_from_bytes_to_power_of_two(u16 NumberOfBytes)
1189:drivers/bsp_f1xx_sdio.c **** {
 2674              		.loc 1 1189 0
 2675              		.cfi_startproc
 2676              		@ args = 0, pretend = 0, frame = 0
 2677              		@ frame_needed = 0, uses_anonymous_args = 0
 2678              		@ link register save eliminated.
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 73


 2679              	.LVL284:
1190:drivers/bsp_f1xx_sdio.c **** 	u8 count = 0;
 2680              		.loc 1 1190 0
 2681 0000 0023     		movs	r3, #0
1191:drivers/bsp_f1xx_sdio.c **** 	while (NumberOfBytes != 1) {
 2682              		.loc 1 1191 0
 2683 0002 02E0     		b	.L226
 2684              	.LVL285:
 2685              	.L227:
1192:drivers/bsp_f1xx_sdio.c **** 		NumberOfBytes >>= 1;
 2686              		.loc 1 1192 0
 2687 0004 4008     		lsrs	r0, r0, #1
 2688              	.LVL286:
1193:drivers/bsp_f1xx_sdio.c **** 		count++;
 2689              		.loc 1 1193 0
 2690 0006 0133     		adds	r3, r3, #1
 2691              	.LVL287:
 2692 0008 DBB2     		uxtb	r3, r3
 2693              	.LVL288:
 2694              	.L226:
1191:drivers/bsp_f1xx_sdio.c **** 	while (NumberOfBytes != 1) {
 2695              		.loc 1 1191 0
 2696 000a 0128     		cmp	r0, #1
 2697 000c FAD1     		bne	.L227
1194:drivers/bsp_f1xx_sdio.c **** 	}
1195:drivers/bsp_f1xx_sdio.c **** 	return count;
1196:drivers/bsp_f1xx_sdio.c **** }
 2698              		.loc 1 1196 0
 2699 000e 1846     		mov	r0, r3
 2700              	.LVL289:
 2701 0010 7047     		bx	lr
 2702              		.cfi_endproc
 2703              	.LFE94:
 2705              		.section	.text.SD_DMA_Config,"ax",%progbits
 2706              		.align	1
 2707              		.global	SD_DMA_Config
 2708              		.syntax unified
 2709              		.thumb
 2710              		.thumb_func
 2711              		.fpu softvfp
 2713              	SD_DMA_Config:
 2714              	.LFB95:
1197:drivers/bsp_f1xx_sdio.c **** 
1198:drivers/bsp_f1xx_sdio.c **** //ÈÖçÁΩÆSDIO DMA
1199:drivers/bsp_f1xx_sdio.c **** //mbuf:Â≠òÂÇ®Âô®Âú∞ÂùÄ
1200:drivers/bsp_f1xx_sdio.c **** //bufsize:‰º†ËæìÊï∞ÊçÆÈáè
1201:drivers/bsp_f1xx_sdio.c **** //dir:ÊñπÂêë;1,Â≠òÂÇ®Âô®-->SDIO(ÂÜôÊï∞ÊçÆ);0,SDIO-->Â≠òÂÇ®Âô®(ËØªÊï∞ÊçÆ);
1202:drivers/bsp_f1xx_sdio.c **** void SD_DMA_Config(u32 *mbuf, u32 bufsize, u8 dir)
1203:drivers/bsp_f1xx_sdio.c **** {
 2715              		.loc 1 1203 0
 2716              		.cfi_startproc
 2717              		@ args = 0, pretend = 0, frame = 0
 2718              		@ frame_needed = 0, uses_anonymous_args = 0
 2719              		@ link register save eliminated.
 2720              	.LVL290:
 2721 0000 10B4     		push	{r4}
 2722              	.LCFI35:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 74


 2723              		.cfi_def_cfa_offset 4
 2724              		.cfi_offset 4, -4
1204:drivers/bsp_f1xx_sdio.c **** 	DMA2->IFCR |= (0XF << 12);                //Ê∏ÖÈô§DMA2ÈÄöÈÅì4ÁöÑÂêÑÁßçÊ†áËÆ∞
 2725              		.loc 1 1204 0
 2726 0002 194C     		ldr	r4, .L230
 2727 0004 6368     		ldr	r3, [r4, #4]
 2728 0006 43F47043 		orr	r3, r3, #61440
 2729 000a 6360     		str	r3, [r4, #4]
1205:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CCR &= ~(1 << 0);        //ÂÖ≥Èó≠DMA ÈÄöÈÅì4
 2730              		.loc 1 1205 0
 2731 000c 174B     		ldr	r3, .L230+4
 2732 000e 1C68     		ldr	r4, [r3]
 2733 0010 24F00104 		bic	r4, r4, #1
 2734 0014 1C60     		str	r4, [r3]
1206:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CCR &= ~(0X7FF << 4);    //Ê∏ÖÈô§‰πãÂâçÁöÑËÆæÁΩÆ,DIR,CIRC,PINC,MINC,PSIZE,MSIZE,PL,
 2735              		.loc 1 1206 0
 2736 0016 1C68     		ldr	r4, [r3]
 2737 0018 24F4FF44 		bic	r4, r4, #32640
 2738 001c 24F07004 		bic	r4, r4, #112
 2739 0020 1C60     		str	r4, [r3]
1207:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CCR |= dir << 4;        //‰ªéÂ≠òÂÇ®Âô®ËØª
 2740              		.loc 1 1207 0
 2741 0022 1C68     		ldr	r4, [r3]
 2742 0024 44EA0212 		orr	r2, r4, r2, lsl #4
 2743              	.LVL291:
 2744 0028 1A60     		str	r2, [r3]
1208:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CCR |= 0 << 5;            //ÊôÆÈÄöÊ®°Âºè
 2745              		.loc 1 1208 0
 2746 002a 1A68     		ldr	r2, [r3]
 2747 002c 1A60     		str	r2, [r3]
1209:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CCR |= 0 << 6;            //Â§ñËÆæÂú∞ÂùÄÈùûÂ¢ûÈáèÊ®°Âºè
 2748              		.loc 1 1209 0
 2749 002e 1A68     		ldr	r2, [r3]
 2750 0030 1A60     		str	r2, [r3]
1210:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CCR |= 1 << 7;            //Â≠òÂÇ®Âô®Â¢ûÈáèÊ®°Âºè
 2751              		.loc 1 1210 0
 2752 0032 1A68     		ldr	r2, [r3]
 2753 0034 42F08002 		orr	r2, r2, #128
 2754 0038 1A60     		str	r2, [r3]
1211:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CCR |= 2 << 8;            //Â§ñËÆæÊï∞ÊçÆÂÆΩÂ∫¶‰∏∫32‰Ωç
 2755              		.loc 1 1211 0
 2756 003a 1A68     		ldr	r2, [r3]
 2757 003c 42F40072 		orr	r2, r2, #512
 2758 0040 1A60     		str	r2, [r3]
1212:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CCR |= 2 << 10;            //Â≠òÂÇ®Âô®Êï∞ÊçÆÂÆΩÂ∫¶32‰Ωç
 2759              		.loc 1 1212 0
 2760 0042 1A68     		ldr	r2, [r3]
 2761 0044 42F40062 		orr	r2, r2, #2048
 2762 0048 1A60     		str	r2, [r3]
1213:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CCR |= 2 << 12;            //È´ò‰ºòÂÖàÁ∫ß
 2763              		.loc 1 1213 0
 2764 004a 1A68     		ldr	r2, [r3]
 2765 004c 42F40052 		orr	r2, r2, #8192
 2766 0050 1A60     		str	r2, [r3]
1214:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CNDTR = bufsize / 4;    //DMA2,‰º†ËæìÊï∞ÊçÆÈáè
 2767              		.loc 1 1214 0
 2768 0052 8908     		lsrs	r1, r1, #2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 75


 2769              	.LVL292:
 2770 0054 5960     		str	r1, [r3, #4]
1215:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CPAR = (u32) &SDIO->FIFO;//DMA2 Â§ñËÆæÂú∞ÂùÄ
 2771              		.loc 1 1215 0
 2772 0056 064A     		ldr	r2, .L230+8
 2773 0058 9A60     		str	r2, [r3, #8]
1216:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CMAR = (u32) mbuf;        //DMA2,Â≠òÂÇ®Âô®Âú∞ÂùÄ
 2774              		.loc 1 1216 0
 2775 005a D860     		str	r0, [r3, #12]
1217:drivers/bsp_f1xx_sdio.c **** 	DMA2_Channel4->CCR |= 1 << 0;            //ÂºÄÂêØDMAÈÄöÈÅì
 2776              		.loc 1 1217 0
 2777 005c 1A68     		ldr	r2, [r3]
 2778 005e 42F00102 		orr	r2, r2, #1
 2779 0062 1A60     		str	r2, [r3]
1218:drivers/bsp_f1xx_sdio.c **** }
 2780              		.loc 1 1218 0
 2781 0064 10BC     		pop	{r4}
 2782              	.LCFI36:
 2783              		.cfi_restore 4
 2784              		.cfi_def_cfa_offset 0
 2785 0066 7047     		bx	lr
 2786              	.L231:
 2787              		.align	2
 2788              	.L230:
 2789 0068 00040240 		.word	1073873920
 2790 006c 44040240 		.word	1073873988
 2791 0070 80800140 		.word	1073840256
 2792              		.cfi_endproc
 2793              	.LFE95:
 2795              		.section	.text.SD_ReadBlock,"ax",%progbits
 2796              		.align	1
 2797              		.global	SD_ReadBlock
 2798              		.syntax unified
 2799              		.thumb
 2800              		.thumb_func
 2801              		.fpu softvfp
 2803              	SD_ReadBlock:
 2804              	.LFB77:
 408:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 2805              		.loc 1 408 0
 2806              		.cfi_startproc
 2807              		@ args = 4, pretend = 0, frame = 0
 2808              		@ frame_needed = 0, uses_anonymous_args = 0
 2809              	.LVL293:
 2810 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 2811              	.LCFI37:
 2812              		.cfi_def_cfa_offset 32
 2813              		.cfi_offset 3, -32
 2814              		.cfi_offset 4, -28
 2815              		.cfi_offset 5, -24
 2816              		.cfi_offset 6, -20
 2817              		.cfi_offset 7, -16
 2818              		.cfi_offset 8, -12
 2819              		.cfi_offset 9, -8
 2820              		.cfi_offset 14, -4
 2821 0004 BDF82040 		ldrh	r4, [sp, #32]
 2822              	.LVL294:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 76


 413:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = 0x0;    //Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 2823              		.loc 1 413 0
 2824 0008 0028     		cmp	r0, #0
 2825 000a 00F0E080 		beq	.L250
 2826 000e 1646     		mov	r6, r2
 2827 0010 0746     		mov	r7, r0
 414:drivers/bsp_f1xx_sdio.c **** 	if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 2828              		.loc 1 414 0
 2829 0012 764A     		ldr	r2, .L266
 2830              	.LVL295:
 2831 0014 0021     		movs	r1, #0
 2832 0016 D162     		str	r1, [r2, #44]
 2833              	.LVL296:
 415:drivers/bsp_f1xx_sdio.c **** 	{
 2834              		.loc 1 415 0
 2835 0018 754A     		ldr	r2, .L266+4
 2836 001a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 2837 001c 022A     		cmp	r2, #2
 2838 001e 59D0     		beq	.L259
 2839              	.LVL297:
 2840              	.L234:
 420:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->RESP1 & SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 2841              		.loc 1 420 0
 2842 0020 0023     		movs	r3, #0
 2843 0022 1A46     		mov	r2, r3
 2844 0024 1946     		mov	r1, r3
 2845 0026 4FF0FF30 		mov	r0, #-1
 2846              	.LVL298:
 2847 002a FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 2848              	.LVL299:
 421:drivers/bsp_f1xx_sdio.c **** 	if ((blksize > 0) && (blksize <= 2048) && ((blksize & (blksize - 1)) == 0)) {
 2849              		.loc 1 421 0
 2850 002e 6F4B     		ldr	r3, .L266
 2851 0030 5B69     		ldr	r3, [r3, #20]
 2852 0032 13F0007F 		tst	r3, #33554432
 2853 0036 40F0CC80 		bne	.L251
 422:drivers/bsp_f1xx_sdio.c **** 		power = convert_from_bytes_to_power_of_two(blksize);
 2854              		.loc 1 422 0
 2855 003a 631E     		subs	r3, r4, #1
 2856 003c 9BB2     		uxth	r3, r3
 2857 003e B3F5006F 		cmp	r3, #2048
 2858 0042 80F0CA80 		bcs	.L252
 422:drivers/bsp_f1xx_sdio.c **** 		power = convert_from_bytes_to_power_of_two(blksize);
 2859              		.loc 1 422 0 is_stmt 0 discriminator 1
 2860 0046 631E     		subs	r3, r4, #1
 2861 0048 1C42     		tst	r4, r3
 2862 004a 40F0C880 		bne	.L253
 423:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN, 1, blksize);    //ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü≠
 2863              		.loc 1 423 0 is_stmt 1
 2864 004e 2046     		mov	r0, r4
 2865 0050 FFF7FEFF 		bl	convert_from_bytes_to_power_of_two
 2866              	.LVL300:
 2867 0054 8046     		mov	r8, r0
 2868              	.LVL301:
 424:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);    //Á≠âÂæÖR1ÂìçÂ∫î
 2869              		.loc 1 424 0
 2870 0056 2246     		mov	r2, r4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 77


 2871 0058 0121     		movs	r1, #1
 2872 005a 1020     		movs	r0, #16
 2873 005c FFF7FEFF 		bl	SDIO_Send_Cmd
 2874              	.LVL302:
 425:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 2875              		.loc 1 425 0
 2876 0060 1020     		movs	r0, #16
 2877 0062 FFF7FEFF 		bl	CmdResp1Error
 2878              	.LVL303:
 426:drivers/bsp_f1xx_sdio.c **** 	} else return SD_INVALID_PARAMETER;
 2879              		.loc 1 426 0
 2880 0066 0546     		mov	r5, r0
 2881 0068 0028     		cmp	r0, #0
 2882 006a 40F0B380 		bne	.L233
 428:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_READ_SINGLE_BLOCK, 1, addr);        //ÂèëÈÄÅCMD17+‰ªéaddrÂú∞ÂùÄÂá∫ËØªÂèñÊï∞Êç
 2883              		.loc 1 428 0
 2884 006e 0123     		movs	r3, #1
 2885 0070 4246     		mov	r2, r8
 2886 0072 2146     		mov	r1, r4
 2887 0074 4FF0FF30 		mov	r0, #-1
 2888              	.LVL304:
 2889 0078 FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 2890              	.LVL305:
 429:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_READ_SINGLE_BLOCK);//Á≠âÂæÖR1ÂìçÂ∫î
 2891              		.loc 1 429 0
 2892 007c 3246     		mov	r2, r6
 2893 007e 0121     		movs	r1, #1
 2894 0080 1120     		movs	r0, #17
 2895 0082 FFF7FEFF 		bl	SDIO_Send_Cmd
 2896              	.LVL306:
 430:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;        //ÂìçÂ∫îÈîôËØØ
 2897              		.loc 1 430 0
 2898 0086 1120     		movs	r0, #17
 2899 0088 FFF7FEFF 		bl	CmdResp1Error
 2900              	.LVL307:
 431:drivers/bsp_f1xx_sdio.c **** 	if (DeviceMode == SD_POLLING_MODE)                        //Êü•ËØ¢Ê®°Âºè,ËΩÆËØ¢Êï∞ÊçÆ
 2901              		.loc 1 431 0
 2902 008c 0546     		mov	r5, r0
 2903 008e 0028     		cmp	r0, #0
 2904 0090 40F0A080 		bne	.L233
 432:drivers/bsp_f1xx_sdio.c **** 	{
 2905              		.loc 1 432 0
 2906 0094 574B     		ldr	r3, .L266+8
 2907 0096 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2908 0098 13B3     		cbz	r3, .L260
 475:drivers/bsp_f1xx_sdio.c **** 		SD_DMA_Config((u32 *) buf, blksize, 0);
 2909              		.loc 1 475 0
 2910 009a 012B     		cmp	r3, #1
 2911 009c 40F09A80 		bne	.L233
 476:drivers/bsp_f1xx_sdio.c **** 		TransferError = SD_OK;
 2912              		.loc 1 476 0
 2913 00a0 0022     		movs	r2, #0
 2914 00a2 2146     		mov	r1, r4
 2915 00a4 3846     		mov	r0, r7
 2916              	.LVL308:
 2917 00a6 FFF7FEFF 		bl	SD_DMA_Config
 2918              	.LVL309:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 78


 477:drivers/bsp_f1xx_sdio.c **** 		StopCondition = 0;            //ÂçïÂùóËØª,‰∏çÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 2919              		.loc 1 477 0
 2920 00aa 0023     		movs	r3, #0
 2921 00ac 524A     		ldr	r2, .L266+12
 2922 00ae 1370     		strb	r3, [r2]
 478:drivers/bsp_f1xx_sdio.c **** 		TransferEnd = 0;                //‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 2923              		.loc 1 478 0
 2924 00b0 524A     		ldr	r2, .L266+16
 2925 00b2 1370     		strb	r3, [r2]
 479:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK |= (1 << 1) | (1 << 3) | (1 << 8) | (1 << 5) | (1 << 9);    //ÈÖçÁΩÆÈúÄË¶ÅÁöÑ‰∏≠Êñ≠
 2926              		.loc 1 479 0
 2927 00b4 524A     		ldr	r2, .L266+20
 2928 00b6 1370     		strb	r3, [r2]
 480:drivers/bsp_f1xx_sdio.c **** 		SDIO->DCTRL |= 1 << 3;            //SDIO DMA‰ΩøËÉΩ
 2929              		.loc 1 480 0
 2930 00b8 4C4A     		ldr	r2, .L266
 2931 00ba D36B     		ldr	r3, [r2, #60]
 2932 00bc 43F44A73 		orr	r3, r3, #808
 2933 00c0 43F00203 		orr	r3, r3, #2
 2934 00c4 D363     		str	r3, [r2, #60]
 481:drivers/bsp_f1xx_sdio.c **** 		while (((DMA2->ISR & 0X2000) == 0) && (TransferEnd == 0) && (TransferError == SD_OK) && timeout)
 2935              		.loc 1 481 0
 2936 00c6 D36A     		ldr	r3, [r2, #44]
 2937 00c8 43F00803 		orr	r3, r3, #8
 2938 00cc D362     		str	r3, [r2, #44]
 412:drivers/bsp_f1xx_sdio.c **** 	if (NULL == buf)return SD_INVALID_PARAMETER;
 2939              		.loc 1 412 0
 2940 00ce 4FF0FF33 		mov	r3, #-1
 482:drivers/bsp_f1xx_sdio.c **** 			timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 2941              		.loc 1 482 0
 2942 00d2 67E0     		b	.L247
 2943              	.LVL310:
 2944              	.L259:
 418:drivers/bsp_f1xx_sdio.c **** 	}
 2945              		.loc 1 418 0
 2946 00d4 720A     		lsrs	r2, r6, #9
 2947 00d6 42EAC356 		orr	r6, r2, r3, lsl #23
 2948              	.LVL311:
 417:drivers/bsp_f1xx_sdio.c **** 		addr >>= 9;
 2949              		.loc 1 417 0
 2950 00da 4FF40074 		mov	r4, #512
 2951 00de 9FE7     		b	.L234
 2952              	.LVL312:
 2953              	.L260:
 434:drivers/bsp_f1xx_sdio.c **** 		while (!(SDIO->STA & ((1 << 5) | (1 << 1) | (1 << 3) | (1 << 10) | (1 << 9))))//Êó†‰∏äÊ∫¢/CRC/Ë∂Ö
 2954              		.loc 1 434 0
 2955 00e0 FFF7FEFF 		bl	INTX_DISABLE
 2956              	.LVL313:
 412:drivers/bsp_f1xx_sdio.c **** 	if (NULL == buf)return SD_INVALID_PARAMETER;
 2957              		.loc 1 412 0
 2958 00e4 4FF0FF33 		mov	r3, #-1
 435:drivers/bsp_f1xx_sdio.c **** 		{
 2959              		.loc 1 435 0
 2960 00e8 09E0     		b	.L236
 2961              	.LVL314:
 2962              	.L239:
 441:drivers/bsp_f1xx_sdio.c **** 				}
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 79


 2963              		.loc 1 441 0 discriminator 3
 2964 00ea 404A     		ldr	r2, .L266
 2965 00ec D2F88020 		ldr	r2, [r2, #128]
 2966 00f0 47F82320 		str	r2, [r7, r3, lsl #2]
 439:drivers/bsp_f1xx_sdio.c **** 				{
 2967              		.loc 1 439 0 discriminator 3
 2968 00f4 0133     		adds	r3, r3, #1
 2969              	.LVL315:
 2970              	.L237:
 439:drivers/bsp_f1xx_sdio.c **** 				{
 2971              		.loc 1 439 0 is_stmt 0 discriminator 1
 2972 00f6 072B     		cmp	r3, #7
 2973 00f8 F7D9     		bls	.L239
 443:drivers/bsp_f1xx_sdio.c **** 				timeout = 0X7FFFFF;    //ËØªÊï∞ÊçÆÊ∫¢Âá∫Êó∂Èó¥
 2974              		.loc 1 443 0 is_stmt 1
 2975 00fa 2037     		adds	r7, r7, #32
 2976              	.LVL316:
 444:drivers/bsp_f1xx_sdio.c **** 			} else    //Â§ÑÁêÜË∂ÖÊó∂
 2977              		.loc 1 444 0
 2978 00fc 414B     		ldr	r3, .L266+24
 2979              	.LVL317:
 2980              	.L236:
 435:drivers/bsp_f1xx_sdio.c **** 		{
 2981              		.loc 1 435 0
 2982 00fe 3B4A     		ldr	r2, .L266
 2983 0100 516B     		ldr	r1, [r2, #52]
 2984 0102 40F22A62 		movw	r2, #1578
 2985 0106 1142     		tst	r1, r2
 2986 0108 0AD1     		bne	.L261
 437:drivers/bsp_f1xx_sdio.c **** 			{
 2987              		.loc 1 437 0
 2988 010a 384A     		ldr	r2, .L266
 2989 010c 526B     		ldr	r2, [r2, #52]
 2990 010e 12F4004F 		tst	r2, #32768
 2991 0112 03D1     		bne	.L262
 447:drivers/bsp_f1xx_sdio.c **** 				timeout--;
 2992              		.loc 1 447 0
 2993 0114 002B     		cmp	r3, #0
 2994 0116 64D0     		beq	.L255
 448:drivers/bsp_f1xx_sdio.c **** 			}
 2995              		.loc 1 448 0
 2996 0118 013B     		subs	r3, r3, #1
 2997              	.LVL318:
 2998 011a F0E7     		b	.L236
 2999              	.L262:
 439:drivers/bsp_f1xx_sdio.c **** 				{
 3000              		.loc 1 439 0
 3001 011c 0023     		movs	r3, #0
 3002              	.LVL319:
 3003 011e EAE7     		b	.L237
 3004              	.LVL320:
 3005              	.L261:
 451:drivers/bsp_f1xx_sdio.c **** 		{
 3006              		.loc 1 451 0
 3007 0120 324B     		ldr	r3, .L266
 3008              	.LVL321:
 3009 0122 5B6B     		ldr	r3, [r3, #52]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 80


 3010 0124 13F0080F 		tst	r3, #8
 3011 0128 15D1     		bne	.L263
 455:drivers/bsp_f1xx_sdio.c **** 		{
 3012              		.loc 1 455 0
 3013 012a 304B     		ldr	r3, .L266
 3014 012c 5B6B     		ldr	r3, [r3, #52]
 3015 012e 13F0020F 		tst	r3, #2
 3016 0132 17D1     		bne	.L264
 459:drivers/bsp_f1xx_sdio.c **** 		{
 3017              		.loc 1 459 0
 3018 0134 2D4B     		ldr	r3, .L266
 3019 0136 5B6B     		ldr	r3, [r3, #52]
 3020 0138 13F0200F 		tst	r3, #32
 3021 013c 19D1     		bne	.L265
 463:drivers/bsp_f1xx_sdio.c **** 		{
 3022              		.loc 1 463 0
 3023 013e 2B4B     		ldr	r3, .L266
 3024 0140 5B6B     		ldr	r3, [r3, #52]
 3025 0142 13F4007F 		tst	r3, #512
 3026 0146 20D0     		beq	.L245
 465:drivers/bsp_f1xx_sdio.c **** 			return SD_START_BIT_ERR;
 3027              		.loc 1 465 0
 3028 0148 284A     		ldr	r2, .L266
 3029 014a 936B     		ldr	r3, [r2, #56]
 3030 014c 43F40073 		orr	r3, r3, #512
 3031 0150 9363     		str	r3, [r2, #56]
 466:drivers/bsp_f1xx_sdio.c **** 		}
 3032              		.loc 1 466 0
 3033 0152 0725     		movs	r5, #7
 3034 0154 3EE0     		b	.L233
 3035              	.L263:
 453:drivers/bsp_f1xx_sdio.c **** 			return SD_DATA_TIMEOUT;
 3036              		.loc 1 453 0
 3037 0156 254A     		ldr	r2, .L266
 3038 0158 936B     		ldr	r3, [r2, #56]
 3039 015a 43F00803 		orr	r3, r3, #8
 3040 015e 9363     		str	r3, [r2, #56]
 454:drivers/bsp_f1xx_sdio.c **** 		} else if (SDIO->STA & (1 << 1))    //Êï∞ÊçÆÂùóCRCÈîôËØØ
 3041              		.loc 1 454 0
 3042 0160 0425     		movs	r5, #4
 3043 0162 37E0     		b	.L233
 3044              	.L264:
 457:drivers/bsp_f1xx_sdio.c **** 			return SD_DATA_CRC_FAIL;
 3045              		.loc 1 457 0
 3046 0164 214A     		ldr	r2, .L266
 3047 0166 936B     		ldr	r3, [r2, #56]
 3048 0168 43F00203 		orr	r3, r3, #2
 3049 016c 9363     		str	r3, [r2, #56]
 458:drivers/bsp_f1xx_sdio.c **** 		} else if (SDIO->STA & (1 << 5))    //Êé•Êî∂fifo‰∏äÊ∫¢ÈîôËØØ
 3050              		.loc 1 458 0
 3051 016e 0225     		movs	r5, #2
 3052 0170 30E0     		b	.L233
 3053              	.L265:
 461:drivers/bsp_f1xx_sdio.c **** 			return SD_RX_OVERRUN;
 3054              		.loc 1 461 0
 3055 0172 1E4A     		ldr	r2, .L266
 3056 0174 936B     		ldr	r3, [r2, #56]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 81


 3057 0176 43F02003 		orr	r3, r3, #32
 3058 017a 9363     		str	r3, [r2, #56]
 462:drivers/bsp_f1xx_sdio.c **** 		} else if (SDIO->STA & (1 << 9))    //Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 3059              		.loc 1 462 0
 3060 017c 0625     		movs	r5, #6
 3061 017e 29E0     		b	.L233
 3062              	.L246:
 470:drivers/bsp_f1xx_sdio.c **** 			tempbuff++;
 3063              		.loc 1 470 0
 3064 0180 1A4B     		ldr	r3, .L266
 3065 0182 D3F88030 		ldr	r3, [r3, #128]
 3066 0186 47F8043B 		str	r3, [r7], #4
 3067              	.LVL322:
 3068              	.L245:
 468:drivers/bsp_f1xx_sdio.c **** 		{
 3069              		.loc 1 468 0
 3070 018a 184B     		ldr	r3, .L266
 3071 018c 5B6B     		ldr	r3, [r3, #52]
 3072 018e 13F4001F 		tst	r3, #2097152
 3073 0192 F5D1     		bne	.L246
 473:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 3074              		.loc 1 473 0
 3075 0194 FFF7FEFF 		bl	INTX_ENABLE
 3076              	.LVL323:
 474:drivers/bsp_f1xx_sdio.c **** 	} else if (DeviceMode == SD_DMA_MODE) {
 3077              		.loc 1 474 0
 3078 0198 144B     		ldr	r3, .L266
 3079 019a 40F2FF52 		movw	r2, #1535
 3080 019e 9A63     		str	r2, [r3, #56]
 3081 01a0 18E0     		b	.L233
 3082              	.LVL324:
 3083              	.L249:
 483:drivers/bsp_f1xx_sdio.c **** 		if (timeout == 0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3084              		.loc 1 483 0
 3085 01a2 013B     		subs	r3, r3, #1
 3086              	.LVL325:
 3087              	.L247:
 482:drivers/bsp_f1xx_sdio.c **** 			timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 3088              		.loc 1 482 0
 3089 01a4 184A     		ldr	r2, .L266+28
 3090 01a6 1268     		ldr	r2, [r2]
 3091 01a8 12F4005F 		tst	r2, #8192
 3092 01ac 07D1     		bne	.L248
 482:drivers/bsp_f1xx_sdio.c **** 			timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 3093              		.loc 1 482 0 is_stmt 0 discriminator 1
 3094 01ae 144A     		ldr	r2, .L266+20
 3095 01b0 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3096 01b2 22B9     		cbnz	r2, .L248
 482:drivers/bsp_f1xx_sdio.c **** 			timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 3097              		.loc 1 482 0 discriminator 2
 3098 01b4 104A     		ldr	r2, .L266+12
 3099 01b6 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3100 01b8 0AB9     		cbnz	r2, .L248
 482:drivers/bsp_f1xx_sdio.c **** 			timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 3101              		.loc 1 482 0 discriminator 3
 3102 01ba 002B     		cmp	r3, #0
 3103 01bc F1D1     		bne	.L249
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 82


 3104              	.L248:
 484:drivers/bsp_f1xx_sdio.c **** 		if (TransferError != SD_OK)errorstatus = TransferError;
 3105              		.loc 1 484 0 is_stmt 1
 3106 01be 93B1     		cbz	r3, .L256
 485:drivers/bsp_f1xx_sdio.c **** 	}
 3107              		.loc 1 485 0
 3108 01c0 0D4B     		ldr	r3, .L266+12
 3109              	.LVL326:
 3110 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3111 01c4 33B1     		cbz	r3, .L233
 485:drivers/bsp_f1xx_sdio.c **** 	}
 3112              		.loc 1 485 0 is_stmt 0 discriminator 1
 3113 01c6 0C4B     		ldr	r3, .L266+12
 3114 01c8 1D78     		ldrb	r5, [r3]	@ zero_extendqisi2
 3115 01ca EDB2     		uxtb	r5, r5
 3116              	.LVL327:
 3117 01cc 02E0     		b	.L233
 3118              	.LVL328:
 3119              	.L250:
 413:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = 0x0;    //Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 3120              		.loc 1 413 0 is_stmt 1
 3121 01ce 2625     		movs	r5, #38
 3122 01d0 00E0     		b	.L233
 3123              	.LVL329:
 3124              	.L251:
 421:drivers/bsp_f1xx_sdio.c **** 	if ((blksize > 0) && (blksize <= 2048) && ((blksize & (blksize - 1)) == 0)) {
 3125              		.loc 1 421 0
 3126 01d2 0E25     		movs	r5, #14
 3127              	.LVL330:
 3128              	.L233:
 488:drivers/bsp_f1xx_sdio.c **** 
 3129              		.loc 1 488 0
 3130 01d4 2846     		mov	r0, r5
 3131 01d6 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3132              	.LVL331:
 3133              	.L252:
 427:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Data_Cfg(SD_DATATIMEOUT, blksize, power, 1);    //blksize,Âç°Âà∞ÊéßÂà∂Âô®
 3134              		.loc 1 427 0
 3135 01da 2625     		movs	r5, #38
 3136 01dc FAE7     		b	.L233
 3137              	.L253:
 3138 01de 2625     		movs	r5, #38
 3139 01e0 F8E7     		b	.L233
 3140              	.LVL332:
 3141              	.L255:
 447:drivers/bsp_f1xx_sdio.c **** 				timeout--;
 3142              		.loc 1 447 0
 3143 01e2 0425     		movs	r5, #4
 3144 01e4 F6E7     		b	.L233
 3145              	.LVL333:
 3146              	.L256:
 484:drivers/bsp_f1xx_sdio.c **** 		if (TransferError != SD_OK)errorstatus = TransferError;
 3147              		.loc 1 484 0
 3148 01e6 0425     		movs	r5, #4
 3149 01e8 F4E7     		b	.L233
 3150              	.L267:
 3151 01ea 00BF     		.align	2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 83


 3152              	.L266:
 3153 01ec 00800140 		.word	1073840128
 3154 01f0 00000000 		.word	.LANCHOR0
 3155 01f4 00000000 		.word	.LANCHOR4
 3156 01f8 00000000 		.word	.LANCHOR6
 3157 01fc 00000000 		.word	.LANCHOR5
 3158 0200 00000000 		.word	.LANCHOR7
 3159 0204 FFFF7F00 		.word	8388607
 3160 0208 00040240 		.word	1073873920
 3161              		.cfi_endproc
 3162              	.LFE77:
 3164              		.section	.text.SD_ReadMultiBlocks,"ax",%progbits
 3165              		.align	1
 3166              		.global	SD_ReadMultiBlocks
 3167              		.syntax unified
 3168              		.thumb
 3169              		.thumb_func
 3170              		.fpu softvfp
 3172              	SD_ReadMultiBlocks:
 3173              	.LFB78:
 499:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 3174              		.loc 1 499 0
 3175              		.cfi_startproc
 3176              		@ args = 8, pretend = 0, frame = 0
 3177              		@ frame_needed = 0, uses_anonymous_args = 0
 3178              	.LVL334:
 3179 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3180              	.LCFI38:
 3181              		.cfi_def_cfa_offset 24
 3182              		.cfi_offset 4, -24
 3183              		.cfi_offset 5, -20
 3184              		.cfi_offset 6, -16
 3185              		.cfi_offset 7, -12
 3186              		.cfi_offset 8, -8
 3187              		.cfi_offset 14, -4
 3188 0004 0646     		mov	r6, r0
 3189 0006 1546     		mov	r5, r2
 3190 0008 BDF81840 		ldrh	r4, [sp, #24]
 3191              	.LVL335:
 504:drivers/bsp_f1xx_sdio.c **** 
 3192              		.loc 1 504 0
 3193 000c 8B4A     		ldr	r2, .L306
 3194              	.LVL336:
 3195 000e 1060     		str	r0, [r2]
 506:drivers/bsp_f1xx_sdio.c **** 	if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 3196              		.loc 1 506 0
 3197 0010 8B4A     		ldr	r2, .L306+4
 3198 0012 0021     		movs	r1, #0
 3199 0014 D162     		str	r1, [r2, #44]
 3200              	.LVL337:
 507:drivers/bsp_f1xx_sdio.c **** 	{
 3201              		.loc 1 507 0
 3202 0016 8B4A     		ldr	r2, .L306+8
 3203 0018 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3204 001a 022A     		cmp	r2, #2
 3205 001c 65D0     		beq	.L298
 3206              	.LVL338:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 84


 3207              	.L269:
 512:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->RESP1 & SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 3208              		.loc 1 512 0
 3209 001e 0023     		movs	r3, #0
 3210 0020 1A46     		mov	r2, r3
 3211 0022 1946     		mov	r1, r3
 3212 0024 4FF0FF30 		mov	r0, #-1
 3213              	.LVL339:
 3214 0028 FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 3215              	.LVL340:
 513:drivers/bsp_f1xx_sdio.c **** 	if ((blksize > 0) && (blksize <= 2048) && ((blksize & (blksize - 1)) == 0)) {
 3216              		.loc 1 513 0
 3217 002c 844B     		ldr	r3, .L306+4
 3218 002e 5B69     		ldr	r3, [r3, #20]
 3219 0030 13F0007F 		tst	r3, #33554432
 3220 0034 40F0F480 		bne	.L289
 514:drivers/bsp_f1xx_sdio.c **** 		power = convert_from_bytes_to_power_of_two(blksize);
 3221              		.loc 1 514 0
 3222 0038 631E     		subs	r3, r4, #1
 3223 003a 9BB2     		uxth	r3, r3
 3224 003c B3F5006F 		cmp	r3, #2048
 3225 0040 80F0F280 		bcs	.L290
 514:drivers/bsp_f1xx_sdio.c **** 		power = convert_from_bytes_to_power_of_two(blksize);
 3226              		.loc 1 514 0 is_stmt 0 discriminator 1
 3227 0044 631E     		subs	r3, r4, #1
 3228 0046 1C42     		tst	r4, r3
 3229 0048 40F0F080 		bne	.L291
 515:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN, 1, blksize);    //ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü≠
 3230              		.loc 1 515 0 is_stmt 1
 3231 004c 2046     		mov	r0, r4
 3232 004e FFF7FEFF 		bl	convert_from_bytes_to_power_of_two
 3233              	.LVL341:
 3234 0052 8046     		mov	r8, r0
 3235              	.LVL342:
 516:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);    //Á≠âÂæÖR1ÂìçÂ∫î
 3236              		.loc 1 516 0
 3237 0054 2746     		mov	r7, r4
 3238 0056 2246     		mov	r2, r4
 3239 0058 0121     		movs	r1, #1
 3240 005a 1020     		movs	r0, #16
 3241 005c FFF7FEFF 		bl	SDIO_Send_Cmd
 3242              	.LVL343:
 517:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 3243              		.loc 1 517 0
 3244 0060 1020     		movs	r0, #16
 3245 0062 FFF7FEFF 		bl	CmdResp1Error
 3246              	.LVL344:
 518:drivers/bsp_f1xx_sdio.c **** 	} else return SD_INVALID_PARAMETER;
 3247              		.loc 1 518 0
 3248 0066 0446     		mov	r4, r0
 3249              	.LVL345:
 3250 0068 0028     		cmp	r0, #0
 3251 006a 40F0DA80 		bne	.L270
 520:drivers/bsp_f1xx_sdio.c **** 	{
 3252              		.loc 1 520 0
 3253 006e 079B     		ldr	r3, [sp, #28]
 3254 0070 012B     		cmp	r3, #1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 85


 3255 0072 40F2D680 		bls	.L270
 522:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Data_Cfg(SD_DATATIMEOUT, nblks * blksize, power, 1);//nblks*blksize,512ÂùóÂ§ßÂ∞è,Âç°Âà∞
 3256              		.loc 1 522 0
 3257 0076 03FB07F7 		mul	r7, r3, r7
 3258 007a B7F1007F 		cmp	r7, #33554432
 3259 007e 80F0D780 		bcs	.L292
 523:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_READ_MULT_BLOCK, 1, addr);    //ÂèëÈÄÅCMD18+‰ªéaddrÂú∞ÂùÄÂá∫ËØªÂèñÊï∞ÊçÆ,Áü≠
 3260              		.loc 1 523 0
 3261 0082 0123     		movs	r3, #1
 3262 0084 4246     		mov	r2, r8
 3263 0086 3946     		mov	r1, r7
 3264 0088 4FF0FF30 		mov	r0, #-1
 3265              	.LVL346:
 3266 008c FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 3267              	.LVL347:
 524:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_READ_MULT_BLOCK);//Á≠âÂæÖR1ÂìçÂ∫î
 3268              		.loc 1 524 0
 3269 0090 2A46     		mov	r2, r5
 3270 0092 0121     		movs	r1, #1
 3271 0094 1220     		movs	r0, #18
 3272 0096 FFF7FEFF 		bl	SDIO_Send_Cmd
 3273              	.LVL348:
 525:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 3274              		.loc 1 525 0
 3275 009a 1220     		movs	r0, #18
 3276 009c FFF7FEFF 		bl	CmdResp1Error
 3277              	.LVL349:
 526:drivers/bsp_f1xx_sdio.c **** 		if (DeviceMode == SD_POLLING_MODE) {
 3278              		.loc 1 526 0
 3279 00a0 0446     		mov	r4, r0
 3280 00a2 0028     		cmp	r0, #0
 3281 00a4 40F0BD80 		bne	.L270
 527:drivers/bsp_f1xx_sdio.c **** 			INTX_DISABLE();//ÂÖ≥Èó≠ÊÄª‰∏≠Êñ≠(POLLINGÊ®°Âºè,‰∏•Á¶Å‰∏≠Êñ≠ÊâìÊñ≠SDIOËØªÂÜôÊìç‰Ωú!!!)
 3282              		.loc 1 527 0
 3283 00a8 674B     		ldr	r3, .L306+12
 3284 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3285 00ac 1BB3     		cbz	r3, .L299
 578:drivers/bsp_f1xx_sdio.c **** 			SD_DMA_Config((u32 *) buf, nblks * blksize, 0);
 3286              		.loc 1 578 0
 3287 00ae 012B     		cmp	r3, #1
 3288 00b0 40F0B780 		bne	.L270
 579:drivers/bsp_f1xx_sdio.c **** 			TransferError = SD_OK;
 3289              		.loc 1 579 0
 3290 00b4 0022     		movs	r2, #0
 3291 00b6 3946     		mov	r1, r7
 3292 00b8 3046     		mov	r0, r6
 3293              	.LVL350:
 3294 00ba FFF7FEFF 		bl	SD_DMA_Config
 3295              	.LVL351:
 580:drivers/bsp_f1xx_sdio.c **** 			StopCondition = 1;            //Â§öÂùóËØª,ÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 3296              		.loc 1 580 0
 3297 00be 0023     		movs	r3, #0
 3298 00c0 624A     		ldr	r2, .L306+16
 3299 00c2 1370     		strb	r3, [r2]
 581:drivers/bsp_f1xx_sdio.c **** 			TransferEnd = 0;                //‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 3300              		.loc 1 581 0
 3301 00c4 624A     		ldr	r2, .L306+20
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 86


 3302 00c6 0121     		movs	r1, #1
 3303 00c8 1170     		strb	r1, [r2]
 582:drivers/bsp_f1xx_sdio.c **** 			SDIO->MASK |= (1 << 1) | (1 << 3) | (1 << 8) | (1 << 5) | (1 << 9);    //ÈÖçÁΩÆÈúÄË¶ÅÁöÑ‰∏≠Êñ≠
 3304              		.loc 1 582 0
 3305 00ca 624A     		ldr	r2, .L306+24
 3306 00cc 1370     		strb	r3, [r2]
 583:drivers/bsp_f1xx_sdio.c **** 			SDIO->DCTRL |= 1 << 3;                                //SDIO DMA‰ΩøËÉΩ
 3307              		.loc 1 583 0
 3308 00ce 5C4A     		ldr	r2, .L306+4
 3309 00d0 D36B     		ldr	r3, [r2, #60]
 3310 00d2 43F44A73 		orr	r3, r3, #808
 3311 00d6 43F00203 		orr	r3, r3, #2
 3312 00da D363     		str	r3, [r2, #60]
 584:drivers/bsp_f1xx_sdio.c **** 			while (((DMA2->ISR & 0X2000) == 0) && timeout)timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 3313              		.loc 1 584 0
 3314 00dc D36A     		ldr	r3, [r2, #44]
 3315 00de 43F00803 		orr	r3, r3, #8
 3316 00e2 D362     		str	r3, [r2, #44]
 503:drivers/bsp_f1xx_sdio.c **** 	tempbuff = (u32 *) buf;//ËΩ¨Êç¢‰∏∫u32ÊåáÈíà
 3317              		.loc 1 503 0
 3318 00e4 4FF0FF33 		mov	r3, #-1
 585:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3319              		.loc 1 585 0
 3320 00e8 84E0     		b	.L284
 3321              	.LVL352:
 3322              	.L298:
 510:drivers/bsp_f1xx_sdio.c **** 	}
 3323              		.loc 1 510 0
 3324 00ea 6A0A     		lsrs	r2, r5, #9
 3325 00ec 42EAC355 		orr	r5, r2, r3, lsl #23
 3326              	.LVL353:
 509:drivers/bsp_f1xx_sdio.c **** 		addr >>= 9;
 3327              		.loc 1 509 0
 3328 00f0 4FF40074 		mov	r4, #512
 3329 00f4 93E7     		b	.L269
 3330              	.LVL354:
 3331              	.L299:
 528:drivers/bsp_f1xx_sdio.c **** 			while (!(SDIO->STA & ((1 << 5) | (1 << 1) | (1 << 3) | (1 << 8) | (1 << 9))))//Êó†‰∏äÊ∫¢/CRC/Ë∂Ö
 3332              		.loc 1 528 0
 3333 00f6 FFF7FEFF 		bl	INTX_DISABLE
 3334              	.LVL355:
 503:drivers/bsp_f1xx_sdio.c **** 	tempbuff = (u32 *) buf;//ËΩ¨Êç¢‰∏∫u32ÊåáÈíà
 3335              		.loc 1 503 0
 3336 00fa 4FF0FF33 		mov	r3, #-1
 529:drivers/bsp_f1xx_sdio.c **** 			{
 3337              		.loc 1 529 0
 3338 00fe 0EE0     		b	.L272
 3339              	.LVL356:
 3340              	.L275:
 535:drivers/bsp_f1xx_sdio.c **** 					}
 3341              		.loc 1 535 0 discriminator 3
 3342 0100 4E4A     		ldr	r2, .L306
 3343 0102 1268     		ldr	r2, [r2]
 3344 0104 4E49     		ldr	r1, .L306+4
 3345 0106 D1F88010 		ldr	r1, [r1, #128]
 3346 010a 42F82310 		str	r1, [r2, r3, lsl #2]
 533:drivers/bsp_f1xx_sdio.c **** 					{
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 87


 3347              		.loc 1 533 0 discriminator 3
 3348 010e 0133     		adds	r3, r3, #1
 3349              	.LVL357:
 3350              	.L273:
 533:drivers/bsp_f1xx_sdio.c **** 					{
 3351              		.loc 1 533 0 is_stmt 0 discriminator 1
 3352 0110 072B     		cmp	r3, #7
 3353 0112 F5D9     		bls	.L275
 537:drivers/bsp_f1xx_sdio.c **** 					timeout = 0X7FFFFF;    //ËØªÊï∞ÊçÆÊ∫¢Âá∫Êó∂Èó¥
 3354              		.loc 1 537 0 is_stmt 1
 3355 0114 494A     		ldr	r2, .L306
 3356 0116 1368     		ldr	r3, [r2]
 3357              	.LVL358:
 3358 0118 2033     		adds	r3, r3, #32
 3359 011a 1360     		str	r3, [r2]
 3360              	.LVL359:
 538:drivers/bsp_f1xx_sdio.c **** 				} else    //Â§ÑÁêÜË∂ÖÊó∂
 3361              		.loc 1 538 0
 3362 011c 4E4B     		ldr	r3, .L306+28
 3363              	.LVL360:
 3364              	.L272:
 529:drivers/bsp_f1xx_sdio.c **** 			{
 3365              		.loc 1 529 0
 3366 011e 484A     		ldr	r2, .L306+4
 3367 0120 516B     		ldr	r1, [r2, #52]
 3368 0122 40F22A32 		movw	r2, #810
 3369 0126 1142     		tst	r1, r2
 3370 0128 0AD1     		bne	.L300
 531:drivers/bsp_f1xx_sdio.c **** 				{
 3371              		.loc 1 531 0
 3372 012a 454A     		ldr	r2, .L306+4
 3373 012c 526B     		ldr	r2, [r2, #52]
 3374 012e 12F4004F 		tst	r2, #32768
 3375 0132 03D1     		bne	.L301
 541:drivers/bsp_f1xx_sdio.c **** 					timeout--;
 3376              		.loc 1 541 0
 3377 0134 002B     		cmp	r3, #0
 3378 0136 7DD0     		beq	.L294
 542:drivers/bsp_f1xx_sdio.c **** 				}
 3379              		.loc 1 542 0
 3380 0138 013B     		subs	r3, r3, #1
 3381              	.LVL361:
 3382 013a F0E7     		b	.L272
 3383              	.L301:
 533:drivers/bsp_f1xx_sdio.c **** 					{
 3384              		.loc 1 533 0
 3385 013c 0023     		movs	r3, #0
 3386              	.LVL362:
 3387 013e E7E7     		b	.L273
 3388              	.LVL363:
 3389              	.L300:
 545:drivers/bsp_f1xx_sdio.c **** 			{
 3390              		.loc 1 545 0
 3391 0140 3F4B     		ldr	r3, .L306+4
 3392              	.LVL364:
 3393 0142 5B6B     		ldr	r3, [r3, #52]
 3394 0144 13F0080F 		tst	r3, #8
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 88


 3395 0148 15D1     		bne	.L302
 549:drivers/bsp_f1xx_sdio.c **** 			{
 3396              		.loc 1 549 0
 3397 014a 3D4B     		ldr	r3, .L306+4
 3398 014c 5B6B     		ldr	r3, [r3, #52]
 3399 014e 13F0020F 		tst	r3, #2
 3400 0152 17D1     		bne	.L303
 553:drivers/bsp_f1xx_sdio.c **** 			{
 3401              		.loc 1 553 0
 3402 0154 3A4B     		ldr	r3, .L306+4
 3403 0156 5B6B     		ldr	r3, [r3, #52]
 3404 0158 13F0200F 		tst	r3, #32
 3405 015c 19D1     		bne	.L304
 557:drivers/bsp_f1xx_sdio.c **** 			{
 3406              		.loc 1 557 0
 3407 015e 384B     		ldr	r3, .L306+4
 3408 0160 5B6B     		ldr	r3, [r3, #52]
 3409 0162 13F4007F 		tst	r3, #512
 3410 0166 24D0     		beq	.L281
 559:drivers/bsp_f1xx_sdio.c **** 				return SD_START_BIT_ERR;
 3411              		.loc 1 559 0
 3412 0168 354A     		ldr	r2, .L306+4
 3413 016a 936B     		ldr	r3, [r2, #56]
 3414 016c 43F40073 		orr	r3, r3, #512
 3415 0170 9363     		str	r3, [r2, #56]
 560:drivers/bsp_f1xx_sdio.c **** 			}
 3416              		.loc 1 560 0
 3417 0172 0724     		movs	r4, #7
 3418 0174 55E0     		b	.L270
 3419              	.L302:
 547:drivers/bsp_f1xx_sdio.c **** 				return SD_DATA_TIMEOUT;
 3420              		.loc 1 547 0
 3421 0176 324A     		ldr	r2, .L306+4
 3422 0178 936B     		ldr	r3, [r2, #56]
 3423 017a 43F00803 		orr	r3, r3, #8
 3424 017e 9363     		str	r3, [r2, #56]
 548:drivers/bsp_f1xx_sdio.c **** 			} else if (SDIO->STA & (1 << 1))    //Êï∞ÊçÆÂùóCRCÈîôËØØ
 3425              		.loc 1 548 0
 3426 0180 0424     		movs	r4, #4
 3427 0182 4EE0     		b	.L270
 3428              	.L303:
 551:drivers/bsp_f1xx_sdio.c **** 				return SD_DATA_CRC_FAIL;
 3429              		.loc 1 551 0
 3430 0184 2E4A     		ldr	r2, .L306+4
 3431 0186 936B     		ldr	r3, [r2, #56]
 3432 0188 43F00203 		orr	r3, r3, #2
 3433 018c 9363     		str	r3, [r2, #56]
 552:drivers/bsp_f1xx_sdio.c **** 			} else if (SDIO->STA & (1 << 5))    //Êé•Êî∂fifo‰∏äÊ∫¢ÈîôËØØ
 3434              		.loc 1 552 0
 3435 018e 0224     		movs	r4, #2
 3436 0190 47E0     		b	.L270
 3437              	.L304:
 555:drivers/bsp_f1xx_sdio.c **** 				return SD_RX_OVERRUN;
 3438              		.loc 1 555 0
 3439 0192 2B4A     		ldr	r2, .L306+4
 3440 0194 936B     		ldr	r3, [r2, #56]
 3441 0196 43F02003 		orr	r3, r3, #32
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 89


 3442 019a 9363     		str	r3, [r2, #56]
 556:drivers/bsp_f1xx_sdio.c **** 			} else if (SDIO->STA & (1 << 9))    //Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 3443              		.loc 1 556 0
 3444 019c 0624     		movs	r4, #6
 3445 019e 40E0     		b	.L270
 3446              	.L282:
 564:drivers/bsp_f1xx_sdio.c **** 				tempbuff++;
 3447              		.loc 1 564 0
 3448 01a0 264B     		ldr	r3, .L306
 3449 01a2 1A68     		ldr	r2, [r3]
 3450 01a4 2649     		ldr	r1, .L306+4
 3451 01a6 D1F88010 		ldr	r1, [r1, #128]
 3452 01aa 1160     		str	r1, [r2]
 565:drivers/bsp_f1xx_sdio.c **** 			}
 3453              		.loc 1 565 0
 3454 01ac 1A68     		ldr	r2, [r3]
 3455 01ae 0432     		adds	r2, r2, #4
 3456 01b0 1A60     		str	r2, [r3]
 3457              	.L281:
 562:drivers/bsp_f1xx_sdio.c **** 			{
 3458              		.loc 1 562 0
 3459 01b2 234B     		ldr	r3, .L306+4
 3460 01b4 5B6B     		ldr	r3, [r3, #52]
 3461 01b6 13F4001F 		tst	r3, #2097152
 3462 01ba F1D1     		bne	.L282
 567:drivers/bsp_f1xx_sdio.c **** 			{
 3463              		.loc 1 567 0
 3464 01bc 204B     		ldr	r3, .L306+4
 3465 01be 5B6B     		ldr	r3, [r3, #52]
 3466 01c0 13F4807F 		tst	r3, #256
 3467 01c4 03D0     		beq	.L283
 569:drivers/bsp_f1xx_sdio.c **** 					(SDIO_HIGH_CAPACITY_SD_CARD == CardType)) {
 3468              		.loc 1 569 0
 3469 01c6 1F4B     		ldr	r3, .L306+8
 3470 01c8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3471 01ca 022B     		cmp	r3, #2
 3472 01cc 06D9     		bls	.L305
 3473              	.L283:
 3474              	.LVL365:
 576:drivers/bsp_f1xx_sdio.c **** 			SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 3475              		.loc 1 576 0
 3476 01ce FFF7FEFF 		bl	INTX_ENABLE
 3477              	.LVL366:
 577:drivers/bsp_f1xx_sdio.c **** 		} else if (DeviceMode == SD_DMA_MODE) {
 3478              		.loc 1 577 0
 3479 01d2 1B4B     		ldr	r3, .L306+4
 3480 01d4 40F2FF52 		movw	r2, #1535
 3481 01d8 9A63     		str	r2, [r3, #56]
 3482 01da 22E0     		b	.L270
 3483              	.LVL367:
 3484              	.L305:
 571:drivers/bsp_f1xx_sdio.c **** 					errorstatus = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);//Á≠âÂæÖR1ÂìçÂ∫î
 3485              		.loc 1 571 0
 3486 01dc 0022     		movs	r2, #0
 3487 01de 0121     		movs	r1, #1
 3488 01e0 0C20     		movs	r0, #12
 3489 01e2 FFF7FEFF 		bl	SDIO_Send_Cmd
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 90


 3490              	.LVL368:
 572:drivers/bsp_f1xx_sdio.c **** 					if (errorstatus != SD_OK)return errorstatus;
 3491              		.loc 1 572 0
 3492 01e6 0C20     		movs	r0, #12
 3493 01e8 FFF7FEFF 		bl	CmdResp1Error
 3494              	.LVL369:
 573:drivers/bsp_f1xx_sdio.c **** 				}
 3495              		.loc 1 573 0
 3496 01ec 0446     		mov	r4, r0
 3497 01ee C0B9     		cbnz	r0, .L270
 3498 01f0 EDE7     		b	.L283
 3499              	.LVL370:
 3500              	.L286:
 585:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3501              		.loc 1 585 0 discriminator 3
 3502 01f2 013B     		subs	r3, r3, #1
 3503              	.LVL371:
 3504              	.L284:
 585:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3505              		.loc 1 585 0 is_stmt 0 discriminator 1
 3506 01f4 194A     		ldr	r2, .L306+32
 3507 01f6 1268     		ldr	r2, [r2]
 3508 01f8 12F4005F 		tst	r2, #8192
 3509 01fc 01D1     		bne	.L285
 585:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)return SD_DATA_TIMEOUT;//Ë∂ÖÊó∂
 3510              		.loc 1 585 0 discriminator 2
 3511 01fe 002B     		cmp	r3, #0
 3512 0200 F7D1     		bne	.L286
 3513              	.L285:
 586:drivers/bsp_f1xx_sdio.c **** 			while ((TransferEnd == 0) && (TransferError == SD_OK));
 3514              		.loc 1 586 0 is_stmt 1
 3515 0202 CBB1     		cbz	r3, .L295
 3516              	.LVL372:
 3517              	.L288:
 587:drivers/bsp_f1xx_sdio.c **** 			if (TransferError != SD_OK)errorstatus = TransferError;
 3518              		.loc 1 587 0 discriminator 2
 3519 0204 134B     		ldr	r3, .L306+24
 3520 0206 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3521 0208 1BB9     		cbnz	r3, .L287
 587:drivers/bsp_f1xx_sdio.c **** 			if (TransferError != SD_OK)errorstatus = TransferError;
 3522              		.loc 1 587 0 is_stmt 0 discriminator 1
 3523 020a 104B     		ldr	r3, .L306+16
 3524 020c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3525 020e 002B     		cmp	r3, #0
 3526 0210 F8D0     		beq	.L288
 3527              	.L287:
 588:drivers/bsp_f1xx_sdio.c **** 		}
 3528              		.loc 1 588 0 is_stmt 1
 3529 0212 0E4B     		ldr	r3, .L306+16
 3530 0214 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3531 0216 23B1     		cbz	r3, .L270
 588:drivers/bsp_f1xx_sdio.c **** 		}
 3532              		.loc 1 588 0 is_stmt 0 discriminator 1
 3533 0218 0C4B     		ldr	r3, .L306+16
 3534 021a 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 3535 021c E4B2     		uxtb	r4, r4
 3536              	.LVL373:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 91


 3537 021e 00E0     		b	.L270
 3538              	.LVL374:
 3539              	.L289:
 513:drivers/bsp_f1xx_sdio.c **** 	if ((blksize > 0) && (blksize <= 2048) && ((blksize & (blksize - 1)) == 0)) {
 3540              		.loc 1 513 0 is_stmt 1
 3541 0220 0E24     		movs	r4, #14
 3542              	.LVL375:
 3543              	.L270:
 592:drivers/bsp_f1xx_sdio.c **** 
 3544              		.loc 1 592 0
 3545 0222 2046     		mov	r0, r4
 3546 0224 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3547              	.LVL376:
 3548              	.L290:
 519:drivers/bsp_f1xx_sdio.c **** 	if (nblks > 1)                                            //Â§öÂùóËØª
 3549              		.loc 1 519 0
 3550 0228 2624     		movs	r4, #38
 3551              	.LVL377:
 3552 022a FAE7     		b	.L270
 3553              	.LVL378:
 3554              	.L291:
 3555 022c 2624     		movs	r4, #38
 3556              	.LVL379:
 3557 022e F8E7     		b	.L270
 3558              	.LVL380:
 3559              	.L292:
 522:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Data_Cfg(SD_DATATIMEOUT, nblks * blksize, power, 1);//nblks*blksize,512ÂùóÂ§ßÂ∞è,Âç°Âà∞
 3560              		.loc 1 522 0
 3561 0230 2624     		movs	r4, #38
 3562 0232 F6E7     		b	.L270
 3563              	.LVL381:
 3564              	.L294:
 541:drivers/bsp_f1xx_sdio.c **** 					timeout--;
 3565              		.loc 1 541 0
 3566 0234 0424     		movs	r4, #4
 3567 0236 F4E7     		b	.L270
 3568              	.LVL382:
 3569              	.L295:
 586:drivers/bsp_f1xx_sdio.c **** 			while ((TransferEnd == 0) && (TransferError == SD_OK));
 3570              		.loc 1 586 0
 3571 0238 0424     		movs	r4, #4
 3572 023a F2E7     		b	.L270
 3573              	.L307:
 3574              		.align	2
 3575              	.L306:
 3576 023c 00000000 		.word	tempbuff
 3577 0240 00800140 		.word	1073840128
 3578 0244 00000000 		.word	.LANCHOR0
 3579 0248 00000000 		.word	.LANCHOR4
 3580 024c 00000000 		.word	.LANCHOR6
 3581 0250 00000000 		.word	.LANCHOR5
 3582 0254 00000000 		.word	.LANCHOR7
 3583 0258 FFFF7F00 		.word	8388607
 3584 025c 00040240 		.word	1073873920
 3585              		.cfi_endproc
 3586              	.LFE78:
 3588              		.section	.text.SD_WriteBlock,"ax",%progbits
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 92


 3589              		.align	1
 3590              		.global	SD_WriteBlock
 3591              		.syntax unified
 3592              		.thumb
 3593              		.thumb_func
 3594              		.fpu softvfp
 3596              	SD_WriteBlock:
 3597              	.LFB79:
 600:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 3598              		.loc 1 600 0
 3599              		.cfi_startproc
 3600              		@ args = 4, pretend = 0, frame = 8
 3601              		@ frame_needed = 0, uses_anonymous_args = 0
 3602              	.LVL383:
 3603 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3604              	.LCFI39:
 3605              		.cfi_def_cfa_offset 28
 3606              		.cfi_offset 4, -28
 3607              		.cfi_offset 5, -24
 3608              		.cfi_offset 6, -20
 3609              		.cfi_offset 7, -16
 3610              		.cfi_offset 8, -12
 3611              		.cfi_offset 9, -8
 3612              		.cfi_offset 14, -4
 3613 0004 83B0     		sub	sp, sp, #12
 3614              	.LCFI40:
 3615              		.cfi_def_cfa_offset 40
 3616 0006 9946     		mov	r9, r3
 3617 0008 BDF82840 		ldrh	r4, [sp, #40]
 3618              	.LVL384:
 602:drivers/bsp_f1xx_sdio.c **** 	u32 timeout = 0, bytestransferred = 0;
 3619              		.loc 1 602 0
 3620 000c 0023     		movs	r3, #0
 3621 000e 8DF80730 		strb	r3, [sp, #7]
 3622              	.LVL385:
 607:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = 0x0;                            //Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 3623              		.loc 1 607 0
 3624 0012 0028     		cmp	r0, #0
 3625 0014 00F04181 		beq	.L338
 3626 0018 1646     		mov	r6, r2
 3627 001a A046     		mov	r8, r4
 3628 001c 0746     		mov	r7, r0
 608:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Data_Cfg(SD_DATATIMEOUT, 0, 0, 0);    //Ê∏ÖÈô§DPSMÁä∂ÊÄÅÊú∫ÈÖçÁΩÆ
 3629              		.loc 1 608 0
 3630 001e A74D     		ldr	r5, .L358
 3631 0020 1946     		mov	r1, r3
 3632 0022 EB62     		str	r3, [r5, #44]
 3633              	.LVL386:
 609:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->RESP1 & SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 3634              		.loc 1 609 0
 3635 0024 1A46     		mov	r2, r3
 3636              	.LVL387:
 3637 0026 4FF0FF30 		mov	r0, #-1
 3638              	.LVL388:
 3639 002a FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 3640              	.LVL389:
 610:drivers/bsp_f1xx_sdio.c **** 	if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)    //Â§ßÂÆπÈáèÂç°
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 93


 3641              		.loc 1 610 0
 3642 002e 6B69     		ldr	r3, [r5, #20]
 3643 0030 13F0007F 		tst	r3, #33554432
 3644 0034 40F03681 		bne	.L339
 611:drivers/bsp_f1xx_sdio.c **** 	{
 3645              		.loc 1 611 0
 3646 0038 A14B     		ldr	r3, .L358+4
 3647 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3648 003c 022B     		cmp	r3, #2
 3649 003e 42D0     		beq	.L348
 3650              	.LVL390:
 3651              	.L310:
 616:drivers/bsp_f1xx_sdio.c **** 		power = convert_from_bytes_to_power_of_two(blksize);
 3652              		.loc 1 616 0
 3653 0040 631E     		subs	r3, r4, #1
 3654 0042 9BB2     		uxth	r3, r3
 3655 0044 B3F5006F 		cmp	r3, #2048
 3656 0048 80F02E81 		bcs	.L340
 616:drivers/bsp_f1xx_sdio.c **** 		power = convert_from_bytes_to_power_of_two(blksize);
 3657              		.loc 1 616 0 is_stmt 0 discriminator 1
 3658 004c 631E     		subs	r3, r4, #1
 3659 004e 1C42     		tst	r4, r3
 3660 0050 40F02C81 		bne	.L341
 617:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN, 1, blksize);    //ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü≠
 3661              		.loc 1 617 0 is_stmt 1
 3662 0054 2046     		mov	r0, r4
 3663 0056 FFF7FEFF 		bl	convert_from_bytes_to_power_of_two
 3664              	.LVL391:
 3665 005a 8146     		mov	r9, r0
 3666              	.LVL392:
 618:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);    //Á≠âÂæÖR1ÂìçÂ∫î
 3667              		.loc 1 618 0
 3668 005c 2546     		mov	r5, r4
 3669 005e 2246     		mov	r2, r4
 3670 0060 0121     		movs	r1, #1
 3671 0062 1020     		movs	r0, #16
 3672 0064 FFF7FEFF 		bl	SDIO_Send_Cmd
 3673              	.LVL393:
 619:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 3674              		.loc 1 619 0
 3675 0068 1020     		movs	r0, #16
 3676 006a FFF7FEFF 		bl	CmdResp1Error
 3677              	.LVL394:
 620:drivers/bsp_f1xx_sdio.c **** 	} else return SD_INVALID_PARAMETER;
 3678              		.loc 1 620 0
 3679 006e 0346     		mov	r3, r0
 3680 0070 0028     		cmp	r0, #0
 3681 0072 40F01381 		bne	.L309
 622:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);        //Á≠âÂæÖR1ÂìçÂ∫î
 3682              		.loc 1 622 0
 3683 0076 934B     		ldr	r3, .L358+8
 3684 0078 1A68     		ldr	r2, [r3]
 3685 007a 1204     		lsls	r2, r2, #16
 3686 007c 0121     		movs	r1, #1
 3687 007e 0D20     		movs	r0, #13
 3688              	.LVL395:
 3689 0080 FFF7FEFF 		bl	SDIO_Send_Cmd
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 94


 3690              	.LVL396:
 623:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;
 3691              		.loc 1 623 0
 3692 0084 0D20     		movs	r0, #13
 3693 0086 FFF7FEFF 		bl	CmdResp1Error
 3694              	.LVL397:
 624:drivers/bsp_f1xx_sdio.c **** 	cardstatus = SDIO->RESP1;
 3695              		.loc 1 624 0
 3696 008a 0346     		mov	r3, r0
 3697 008c 0028     		cmp	r0, #0
 3698 008e 40F00581 		bne	.L309
 625:drivers/bsp_f1xx_sdio.c **** 	timeout = SD_DATATIMEOUT;
 3699              		.loc 1 625 0
 3700 0092 8A4B     		ldr	r3, .L358
 3701 0094 5B69     		ldr	r3, [r3, #20]
 3702              	.LVL398:
 626:drivers/bsp_f1xx_sdio.c **** 	while (((cardstatus & 0x00000100) == 0) && (timeout > 0))    //Ê£ÄÊü•READY_FOR_DATA‰ΩçÊòØÂê¶ÁΩÆ‰Ωç
 3703              		.loc 1 626 0
 3704 0096 4FF0FF34 		mov	r4, #-1
 3705              	.LVL399:
 3706              	.L311:
 627:drivers/bsp_f1xx_sdio.c **** 	{
 3707              		.loc 1 627 0
 3708 009a 13F4807F 		tst	r3, #256
 3709 009e 18D1     		bne	.L312
 627:drivers/bsp_f1xx_sdio.c **** 	{
 3710              		.loc 1 627 0 is_stmt 0 discriminator 1
 3711 00a0 BCB1     		cbz	r4, .L312
 629:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SEND_STATUS, 1, (u32) RCA << 16);//ÂèëÈÄÅCMD13,Êü•ËØ¢Âç°ÁöÑÁä∂ÊÄÅ,Áü≠ÂìçÂ∫î
 3712              		.loc 1 629 0 is_stmt 1
 3713 00a2 013C     		subs	r4, r4, #1
 3714              	.LVL400:
 630:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);    //Á≠âÂæÖR1ÂìçÂ∫î
 3715              		.loc 1 630 0
 3716 00a4 874B     		ldr	r3, .L358+8
 3717              	.LVL401:
 3718 00a6 1A68     		ldr	r2, [r3]
 3719 00a8 1204     		lsls	r2, r2, #16
 3720 00aa 0121     		movs	r1, #1
 3721 00ac 0D20     		movs	r0, #13
 3722              	.LVL402:
 3723 00ae FFF7FEFF 		bl	SDIO_Send_Cmd
 3724              	.LVL403:
 631:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;
 3725              		.loc 1 631 0
 3726 00b2 0D20     		movs	r0, #13
 3727 00b4 FFF7FEFF 		bl	CmdResp1Error
 3728              	.LVL404:
 632:drivers/bsp_f1xx_sdio.c **** 		cardstatus = SDIO->RESP1;
 3729              		.loc 1 632 0
 3730 00b8 0346     		mov	r3, r0
 3731 00ba 0028     		cmp	r0, #0
 3732 00bc 40F0EE80 		bne	.L309
 633:drivers/bsp_f1xx_sdio.c **** 	}
 3733              		.loc 1 633 0
 3734 00c0 7E4B     		ldr	r3, .L358
 3735 00c2 5B69     		ldr	r3, [r3, #20]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 95


 3736              	.LVL405:
 3737 00c4 E9E7     		b	.L311
 3738              	.LVL406:
 3739              	.L348:
 614:drivers/bsp_f1xx_sdio.c **** 	}
 3740              		.loc 1 614 0
 3741 00c6 730A     		lsrs	r3, r6, #9
 3742 00c8 43EAC956 		orr	r6, r3, r9, lsl #23
 3743              	.LVL407:
 613:drivers/bsp_f1xx_sdio.c **** 		addr >>= 9;
 3744              		.loc 1 613 0
 3745 00cc 4FF40074 		mov	r4, #512
 3746              	.LVL408:
 3747 00d0 B6E7     		b	.L310
 3748              	.LVL409:
 3749              	.L312:
 635:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_WRITE_SINGLE_BLOCK, 1, addr);    //ÂèëÈÄÅCMD24,ÂÜôÂçïÂùóÊåá‰ª§,Áü≠ÂìçÂ∫î
 3750              		.loc 1 635 0
 3751 00d2 002C     		cmp	r4, #0
 3752 00d4 00F0EC80 		beq	.L342
 636:drivers/bsp_f1xx_sdio.c **** 	errorstatus = CmdResp1Error(SD_CMD_WRITE_SINGLE_BLOCK);//Á≠âÂæÖR1ÂìçÂ∫î
 3753              		.loc 1 636 0
 3754 00d8 3246     		mov	r2, r6
 3755 00da 0121     		movs	r1, #1
 3756 00dc 1820     		movs	r0, #24
 3757              	.LVL410:
 3758 00de FFF7FEFF 		bl	SDIO_Send_Cmd
 3759              	.LVL411:
 637:drivers/bsp_f1xx_sdio.c **** 	if (errorstatus != SD_OK)return errorstatus;
 3760              		.loc 1 637 0
 3761 00e2 1820     		movs	r0, #24
 3762 00e4 FFF7FEFF 		bl	CmdResp1Error
 3763              	.LVL412:
 638:drivers/bsp_f1xx_sdio.c **** 	StopCondition = 0;                                    //ÂçïÂùóÂÜô,‰∏çÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª
 3764              		.loc 1 638 0
 3765 00e8 0346     		mov	r3, r0
 3766 00ea 0028     		cmp	r0, #0
 3767 00ec 40F0D680 		bne	.L309
 639:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Data_Cfg(SD_DATATIMEOUT, blksize, power, 0);    //blksize, ÊéßÂà∂Âô®Âà∞Âç°
 3768              		.loc 1 639 0
 3769 00f0 0023     		movs	r3, #0
 3770 00f2 754A     		ldr	r2, .L358+12
 3771 00f4 1370     		strb	r3, [r2]
 640:drivers/bsp_f1xx_sdio.c **** 	timeout = SDIO_DATATIMEOUT;
 3772              		.loc 1 640 0
 3773 00f6 4A46     		mov	r2, r9
 3774 00f8 2946     		mov	r1, r5
 3775 00fa 4FF0FF30 		mov	r0, #-1
 3776              	.LVL413:
 3777 00fe FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 3778              	.LVL414:
 642:drivers/bsp_f1xx_sdio.c **** 		INTX_DISABLE();//ÂÖ≥Èó≠ÊÄª‰∏≠Êñ≠(POLLINGÊ®°Âºè,‰∏•Á¶Å‰∏≠Êñ≠ÊâìÊñ≠SDIOËØªÂÜôÊìç‰Ωú!!!)
 3779              		.loc 1 642 0
 3780 0102 724B     		ldr	r3, .L358+16
 3781 0104 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3782 0106 5BB1     		cbz	r3, .L349
 688:drivers/bsp_f1xx_sdio.c **** 		SD_DMA_Config((u32 *) buf, blksize, 1);//SDIO DMAÈÖçÁΩÆ
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 96


 3783              		.loc 1 688 0
 3784 0108 012B     		cmp	r3, #1
 3785 010a 7DD0     		beq	.L350
 3786              	.LVL415:
 3787              	.L329:
 705:drivers/bsp_f1xx_sdio.c **** 	errorstatus = IsCardProgramming(&cardstate);
 3788              		.loc 1 705 0
 3789 010c 6B4B     		ldr	r3, .L358
 3790 010e 40F2FF52 		movw	r2, #1535
 3791 0112 9A63     		str	r2, [r3, #56]
 706:drivers/bsp_f1xx_sdio.c **** 	while ((errorstatus == SD_OK) && ((cardstate == SD_CARD_PROGRAMMING) || (cardstate == SD_CARD_RECE
 3792              		.loc 1 706 0
 3793 0114 0DF10700 		add	r0, sp, #7
 3794 0118 FFF7FEFF 		bl	IsCardProgramming
 3795              	.LVL416:
 3796 011c 0346     		mov	r3, r0
 3797              	.LVL417:
 707:drivers/bsp_f1xx_sdio.c **** 		errorstatus = IsCardProgramming(&cardstate);
 3798              		.loc 1 707 0
 3799 011e B4E0     		b	.L336
 3800              	.LVL418:
 3801              	.L349:
 643:drivers/bsp_f1xx_sdio.c **** 		while (!(SDIO->STA & ((1 << 10) | (1 << 4) | (1 << 1) | (1 << 3) | (1 << 9))))//Êï∞ÊçÆÂùóÂèëÈÄÅÊà
 3802              		.loc 1 643 0
 3803 0120 FFF7FEFF 		bl	INTX_DISABLE
 3804              	.LVL419:
 603:drivers/bsp_f1xx_sdio.c **** 	u32 cardstatus = 0, count = 0, restwords = 0;
 3805              		.loc 1 603 0
 3806 0124 0020     		movs	r0, #0
 641:drivers/bsp_f1xx_sdio.c **** 	if (DeviceMode == SD_POLLING_MODE) {
 3807              		.loc 1 641 0
 3808 0126 4FF0FF31 		mov	r1, #-1
 644:drivers/bsp_f1xx_sdio.c **** 		{
 3809              		.loc 1 644 0
 3810 012a 18E0     		b	.L315
 3811              	.LVL420:
 3812              	.L318:
 651:drivers/bsp_f1xx_sdio.c **** 
 3813              		.loc 1 651 0 discriminator 2
 3814 012c 9208     		lsrs	r2, r2, #2
 650:drivers/bsp_f1xx_sdio.c **** 							(tlen - bytestransferred) / 4 + 1);
 3815              		.loc 1 650 0 discriminator 2
 3816 012e 0132     		adds	r2, r2, #1
 3817 0130 28E0     		b	.L319
 3818              	.LVL421:
 3819              	.L352:
 663:drivers/bsp_f1xx_sdio.c **** 			} else {
 3820              		.loc 1 663 0
 3821 0132 6FF04041 		mvn	r1, #-1073741824
 3822 0136 12E0     		b	.L315
 3823              	.LVL422:
 3824              	.L323:
 658:drivers/bsp_f1xx_sdio.c **** 					}
 3825              		.loc 1 658 0 discriminator 3
 3826 0138 57F82310 		ldr	r1, [r7, r3, lsl #2]
 3827 013c 5F4A     		ldr	r2, .L358
 3828 013e C2F88010 		str	r1, [r2, #128]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 97


 657:drivers/bsp_f1xx_sdio.c **** 						SDIO->FIFO = *(tempbuff + count);
 3829              		.loc 1 657 0 discriminator 3
 3830 0142 0133     		adds	r3, r3, #1
 3831              	.LVL423:
 3832              	.L317:
 657:drivers/bsp_f1xx_sdio.c **** 						SDIO->FIFO = *(tempbuff + count);
 3833              		.loc 1 657 0 is_stmt 0 discriminator 1
 3834 0144 072B     		cmp	r3, #7
 3835 0146 F7D9     		bls	.L323
 660:drivers/bsp_f1xx_sdio.c **** 					bytestransferred += 32;
 3836              		.loc 1 660 0 is_stmt 1
 3837 0148 2037     		adds	r7, r7, #32
 3838              	.LVL424:
 661:drivers/bsp_f1xx_sdio.c **** 				}
 3839              		.loc 1 661 0
 3840 014a 2030     		adds	r0, r0, #32
 3841              	.LVL425:
 663:drivers/bsp_f1xx_sdio.c **** 			} else {
 3842              		.loc 1 663 0
 3843 014c 6FF04041 		mvn	r1, #-1073741824
 3844 0150 05E0     		b	.L315
 3845              	.LVL426:
 3846              	.L343:
 657:drivers/bsp_f1xx_sdio.c **** 						SDIO->FIFO = *(tempbuff + count);
 3847              		.loc 1 657 0
 3848 0152 0023     		movs	r3, #0
 3849 0154 F6E7     		b	.L317
 3850              	.L316:
 665:drivers/bsp_f1xx_sdio.c **** 				timeout--;
 3851              		.loc 1 665 0
 3852 0156 0029     		cmp	r1, #0
 3853 0158 00F0AC80 		beq	.L344
 666:drivers/bsp_f1xx_sdio.c **** 			}
 3854              		.loc 1 666 0
 3855 015c 0139     		subs	r1, r1, #1
 3856              	.LVL427:
 3857              	.L315:
 644:drivers/bsp_f1xx_sdio.c **** 		{
 3858              		.loc 1 644 0
 3859 015e 574B     		ldr	r3, .L358
 3860 0160 5A6B     		ldr	r2, [r3, #52]
 3861 0162 40F21A63 		movw	r3, #1562
 3862 0166 1A42     		tst	r2, r3
 3863 0168 17D1     		bne	.L351
 646:drivers/bsp_f1xx_sdio.c **** 			{
 3864              		.loc 1 646 0
 3865 016a 544B     		ldr	r3, .L358
 3866 016c 5B6B     		ldr	r3, [r3, #52]
 3867 016e 13F4804F 		tst	r3, #16384
 3868 0172 F0D0     		beq	.L316
 648:drivers/bsp_f1xx_sdio.c **** 				{
 3869              		.loc 1 648 0
 3870 0174 A8EB0002 		sub	r2, r8, r0
 3871 0178 1F2A     		cmp	r2, #31
 3872 017a EAD8     		bhi	.L343
 650:drivers/bsp_f1xx_sdio.c **** 							(tlen - bytestransferred) / 4 + 1);
 3873              		.loc 1 650 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 98


 3874 017c 12F0030F 		tst	r2, #3
 3875 0180 D4D1     		bne	.L318
 650:drivers/bsp_f1xx_sdio.c **** 							(tlen - bytestransferred) / 4 + 1);
 3876              		.loc 1 650 0 is_stmt 0 discriminator 1
 3877 0182 9208     		lsrs	r2, r2, #2
 3878              	.L319:
 3879              	.LVL428:
 653:drivers/bsp_f1xx_sdio.c **** 						SDIO->FIFO = *tempbuff;
 3880              		.loc 1 653 0 is_stmt 1 discriminator 4
 3881 0184 0023     		movs	r3, #0
 3882              	.LVL429:
 3883              	.L320:
 653:drivers/bsp_f1xx_sdio.c **** 						SDIO->FIFO = *tempbuff;
 3884              		.loc 1 653 0 is_stmt 0 discriminator 1
 3885 0186 9342     		cmp	r3, r2
 3886 0188 D3D2     		bcs	.L352
 654:drivers/bsp_f1xx_sdio.c **** 					}
 3887              		.loc 1 654 0 is_stmt 1 discriminator 3
 3888 018a 57F8044B 		ldr	r4, [r7], #4
 3889              	.LVL430:
 3890 018e 4B49     		ldr	r1, .L358
 3891 0190 C1F88040 		str	r4, [r1, #128]
 653:drivers/bsp_f1xx_sdio.c **** 						SDIO->FIFO = *tempbuff;
 3892              		.loc 1 653 0 discriminator 3
 3893 0194 0133     		adds	r3, r3, #1
 3894              	.LVL431:
 3895 0196 0430     		adds	r0, r0, #4
 3896              	.LVL432:
 3897 0198 F5E7     		b	.L320
 3898              	.LVL433:
 3899              	.L351:
 669:drivers/bsp_f1xx_sdio.c **** 		{
 3900              		.loc 1 669 0
 3901 019a 484B     		ldr	r3, .L358
 3902 019c 5B6B     		ldr	r3, [r3, #52]
 3903 019e 13F0080F 		tst	r3, #8
 3904 01a2 15D1     		bne	.L353
 673:drivers/bsp_f1xx_sdio.c **** 		{
 3905              		.loc 1 673 0
 3906 01a4 454B     		ldr	r3, .L358
 3907 01a6 5B6B     		ldr	r3, [r3, #52]
 3908 01a8 13F0020F 		tst	r3, #2
 3909 01ac 17D1     		bne	.L354
 677:drivers/bsp_f1xx_sdio.c **** 		{
 3910              		.loc 1 677 0
 3911 01ae 434B     		ldr	r3, .L358
 3912 01b0 5B6B     		ldr	r3, [r3, #52]
 3913 01b2 13F0100F 		tst	r3, #16
 3914 01b6 19D1     		bne	.L355
 681:drivers/bsp_f1xx_sdio.c **** 		{
 3915              		.loc 1 681 0
 3916 01b8 404B     		ldr	r3, .L358
 3917 01ba 5B6B     		ldr	r3, [r3, #52]
 3918 01bc 13F4007F 		tst	r3, #512
 3919 01c0 1BD1     		bne	.L356
 686:drivers/bsp_f1xx_sdio.c **** 		SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 3920              		.loc 1 686 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 99


 3921 01c2 FFF7FEFF 		bl	INTX_ENABLE
 3922              	.LVL434:
 687:drivers/bsp_f1xx_sdio.c **** 	} else if (DeviceMode == SD_DMA_MODE) {
 3923              		.loc 1 687 0
 3924 01c6 3D4B     		ldr	r3, .L358
 3925 01c8 40F2FF52 		movw	r2, #1535
 3926 01cc 9A63     		str	r2, [r3, #56]
 3927 01ce 9DE7     		b	.L329
 3928              	.LVL435:
 3929              	.L353:
 671:drivers/bsp_f1xx_sdio.c **** 			return SD_DATA_TIMEOUT;
 3930              		.loc 1 671 0
 3931 01d0 3A4A     		ldr	r2, .L358
 3932 01d2 936B     		ldr	r3, [r2, #56]
 3933 01d4 43F00803 		orr	r3, r3, #8
 3934 01d8 9363     		str	r3, [r2, #56]
 672:drivers/bsp_f1xx_sdio.c **** 		} else if (SDIO->STA & (1 << 1))    //Êï∞ÊçÆÂùóCRCÈîôËØØ
 3935              		.loc 1 672 0
 3936 01da 0423     		movs	r3, #4
 3937 01dc 5EE0     		b	.L309
 3938              	.L354:
 675:drivers/bsp_f1xx_sdio.c **** 			return SD_DATA_CRC_FAIL;
 3939              		.loc 1 675 0
 3940 01de 374A     		ldr	r2, .L358
 3941 01e0 936B     		ldr	r3, [r2, #56]
 3942 01e2 43F00203 		orr	r3, r3, #2
 3943 01e6 9363     		str	r3, [r2, #56]
 676:drivers/bsp_f1xx_sdio.c **** 		} else if (SDIO->STA & (1 << 4))    //Êé•Êî∂fifo‰∏ãÊ∫¢ÈîôËØØ
 3944              		.loc 1 676 0
 3945 01e8 0223     		movs	r3, #2
 3946 01ea 57E0     		b	.L309
 3947              	.L355:
 679:drivers/bsp_f1xx_sdio.c **** 			return SD_TX_UNDERRUN;
 3948              		.loc 1 679 0
 3949 01ec 334A     		ldr	r2, .L358
 3950 01ee 936B     		ldr	r3, [r2, #56]
 3951 01f0 43F01003 		orr	r3, r3, #16
 3952 01f4 9363     		str	r3, [r2, #56]
 680:drivers/bsp_f1xx_sdio.c **** 		} else if (SDIO->STA & (1 << 9))    //Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 3953              		.loc 1 680 0
 3954 01f6 0523     		movs	r3, #5
 3955 01f8 50E0     		b	.L309
 3956              	.L356:
 683:drivers/bsp_f1xx_sdio.c **** 			return SD_START_BIT_ERR;
 3957              		.loc 1 683 0
 3958 01fa 304A     		ldr	r2, .L358
 3959 01fc 936B     		ldr	r3, [r2, #56]
 3960 01fe 43F40073 		orr	r3, r3, #512
 3961 0202 9363     		str	r3, [r2, #56]
 684:drivers/bsp_f1xx_sdio.c **** 		}
 3962              		.loc 1 684 0
 3963 0204 0723     		movs	r3, #7
 3964 0206 49E0     		b	.L309
 3965              	.LVL436:
 3966              	.L350:
 689:drivers/bsp_f1xx_sdio.c **** 		TransferError = SD_OK;
 3967              		.loc 1 689 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 100


 3968 0208 0122     		movs	r2, #1
 3969 020a 2946     		mov	r1, r5
 3970 020c 3846     		mov	r0, r7
 3971 020e FFF7FEFF 		bl	SD_DMA_Config
 3972              	.LVL437:
 690:drivers/bsp_f1xx_sdio.c **** 		StopCondition = 0;            //ÂçïÂùóÂÜô,‰∏çÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 3973              		.loc 1 690 0
 3974 0212 0023     		movs	r3, #0
 3975 0214 2E4A     		ldr	r2, .L358+20
 3976 0216 1370     		strb	r3, [r2]
 691:drivers/bsp_f1xx_sdio.c **** 		TransferEnd = 0;                //‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 3977              		.loc 1 691 0
 3978 0218 2B4A     		ldr	r2, .L358+12
 3979 021a 1370     		strb	r3, [r2]
 692:drivers/bsp_f1xx_sdio.c **** 		SDIO->MASK |= (1 << 1) | (1 << 3) | (1 << 8) | (1 << 4) | (1 << 9);    //ÈÖçÁΩÆ‰∫ßÁîüÊï∞ÊçÆÊé•Êî∂
 3980              		.loc 1 692 0
 3981 021c 2D4A     		ldr	r2, .L358+24
 3982 021e 1370     		strb	r3, [r2]
 693:drivers/bsp_f1xx_sdio.c **** 		SDIO->DCTRL |= 1 << 3;                                //SDIO DMA‰ΩøËÉΩ.
 3983              		.loc 1 693 0
 3984 0220 264A     		ldr	r2, .L358
 3985 0222 D36B     		ldr	r3, [r2, #60]
 3986 0224 43F44673 		orr	r3, r3, #792
 3987 0228 43F00203 		orr	r3, r3, #2
 3988 022c D363     		str	r3, [r2, #60]
 694:drivers/bsp_f1xx_sdio.c **** 		while (((DMA2->ISR & 0X2000) == 0) && timeout)timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 3989              		.loc 1 694 0
 3990 022e D36A     		ldr	r3, [r2, #44]
 3991 0230 43F00803 		orr	r3, r3, #8
 3992 0234 D362     		str	r3, [r2, #44]
 641:drivers/bsp_f1xx_sdio.c **** 	if (DeviceMode == SD_POLLING_MODE) {
 3993              		.loc 1 641 0
 3994 0236 4FF0FF33 		mov	r3, #-1
 695:drivers/bsp_f1xx_sdio.c **** 		if (timeout == 0) {
 3995              		.loc 1 695 0
 3996 023a 00E0     		b	.L330
 3997              	.LVL438:
 3998              	.L332:
 695:drivers/bsp_f1xx_sdio.c **** 		if (timeout == 0) {
 3999              		.loc 1 695 0 is_stmt 0 discriminator 3
 4000 023c 013B     		subs	r3, r3, #1
 4001              	.LVL439:
 4002              	.L330:
 695:drivers/bsp_f1xx_sdio.c **** 		if (timeout == 0) {
 4003              		.loc 1 695 0 discriminator 1
 4004 023e 264A     		ldr	r2, .L358+28
 4005 0240 1268     		ldr	r2, [r2]
 4006 0242 12F4005F 		tst	r2, #8192
 4007 0246 01D1     		bne	.L331
 695:drivers/bsp_f1xx_sdio.c **** 		if (timeout == 0) {
 4008              		.loc 1 695 0 discriminator 2
 4009 0248 002B     		cmp	r3, #0
 4010 024a F7D1     		bne	.L332
 4011              	.L331:
 696:drivers/bsp_f1xx_sdio.c **** 			bsp_SD_Init();                        //ÈáçÊñ∞ÂàùÂßãÂåñSDÂç°,ÂèØ‰ª•Ëß£ÂÜ≥ÂÜôÂÖ•Ê≠ªÊú∫ÁöÑÈóÆÈ¢ò
 4012              		.loc 1 696 0 is_stmt 1
 4013 024c 53B1     		cbz	r3, .L357
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 101


 700:drivers/bsp_f1xx_sdio.c **** 		while ((TransferEnd == 0) && (TransferError == SD_OK) && timeout)timeout--;
 4014              		.loc 1 700 0
 4015 024e 4FF0FF33 		mov	r3, #-1
 4016              	.LVL440:
 4017              	.L333:
 701:drivers/bsp_f1xx_sdio.c **** 		if (timeout == 0)return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 4018              		.loc 1 701 0 discriminator 1
 4019 0252 204A     		ldr	r2, .L358+24
 4020 0254 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4021 0256 4AB9     		cbnz	r2, .L334
 701:drivers/bsp_f1xx_sdio.c **** 		if (timeout == 0)return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 4022              		.loc 1 701 0 is_stmt 0 discriminator 2
 4023 0258 1D4A     		ldr	r2, .L358+20
 4024 025a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4025 025c 32B9     		cbnz	r2, .L334
 701:drivers/bsp_f1xx_sdio.c **** 		if (timeout == 0)return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 4026              		.loc 1 701 0 discriminator 3
 4027 025e 2BB1     		cbz	r3, .L334
 701:drivers/bsp_f1xx_sdio.c **** 		if (timeout == 0)return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 4028              		.loc 1 701 0 discriminator 4
 4029 0260 013B     		subs	r3, r3, #1
 4030              	.LVL441:
 4031 0262 F6E7     		b	.L333
 4032              	.L357:
 697:drivers/bsp_f1xx_sdio.c **** 			return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 4033              		.loc 1 697 0 is_stmt 1
 4034 0264 FFF7FEFF 		bl	bsp_SD_Init
 4035              	.LVL442:
 698:drivers/bsp_f1xx_sdio.c **** 		}
 4036              		.loc 1 698 0
 4037 0268 0423     		movs	r3, #4
 4038 026a 17E0     		b	.L309
 4039              	.LVL443:
 4040              	.L334:
 702:drivers/bsp_f1xx_sdio.c **** 		if (TransferError != SD_OK)return TransferError;
 4041              		.loc 1 702 0
 4042 026c 23B3     		cbz	r3, .L346
 703:drivers/bsp_f1xx_sdio.c **** 	}
 4043              		.loc 1 703 0
 4044 026e 184B     		ldr	r3, .L358+20
 4045              	.LVL444:
 4046 0270 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4047 0272 002B     		cmp	r3, #0
 4048 0274 3FF44AAF 		beq	.L329
 703:drivers/bsp_f1xx_sdio.c **** 	}
 4049              		.loc 1 703 0 is_stmt 0 discriminator 1
 4050 0278 154B     		ldr	r3, .L358+20
 4051 027a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4052 027c DBB2     		uxtb	r3, r3
 4053 027e 0DE0     		b	.L309
 4054              	.LVL445:
 4055              	.L337:
 708:drivers/bsp_f1xx_sdio.c **** 	}
 4056              		.loc 1 708 0 is_stmt 1
 4057 0280 0DF10700 		add	r0, sp, #7
 4058 0284 FFF7FEFF 		bl	IsCardProgramming
 4059              	.LVL446:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 102


 4060 0288 0346     		mov	r3, r0
 4061              	.LVL447:
 4062              	.L336:
 707:drivers/bsp_f1xx_sdio.c **** 		errorstatus = IsCardProgramming(&cardstate);
 4063              		.loc 1 707 0
 4064 028a 3BB9     		cbnz	r3, .L309
 707:drivers/bsp_f1xx_sdio.c **** 		errorstatus = IsCardProgramming(&cardstate);
 4065              		.loc 1 707 0 is_stmt 0 discriminator 1
 4066 028c 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 4067 0290 063A     		subs	r2, r2, #6
 4068 0292 D2B2     		uxtb	r2, r2
 4069 0294 012A     		cmp	r2, #1
 4070 0296 F3D9     		bls	.L337
 4071 0298 00E0     		b	.L309
 4072              	.LVL448:
 4073              	.L338:
 607:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = 0x0;                            //Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 4074              		.loc 1 607 0 is_stmt 1
 4075 029a 2623     		movs	r3, #38
 4076              	.LVL449:
 4077              	.L309:
 711:drivers/bsp_f1xx_sdio.c **** 
 4078              		.loc 1 711 0
 4079 029c 1846     		mov	r0, r3
 4080 029e 03B0     		add	sp, sp, #12
 4081              	.LCFI41:
 4082              		.cfi_remember_state
 4083              		.cfi_def_cfa_offset 28
 4084              		@ sp needed
 4085 02a0 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 4086              	.LVL450:
 4087              	.L339:
 4088              	.LCFI42:
 4089              		.cfi_restore_state
 610:drivers/bsp_f1xx_sdio.c **** 	if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)    //Â§ßÂÆπÈáèÂç°
 4090              		.loc 1 610 0
 4091 02a4 0E23     		movs	r3, #14
 4092 02a6 F9E7     		b	.L309
 4093              	.LVL451:
 4094              	.L340:
 621:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_SEND_STATUS, 1, (u32) RCA << 16);    //ÂèëÈÄÅCMD13,Êü•ËØ¢Âç°ÁöÑÁä∂ÊÄÅ,Áü≠ÂìçÂ
 4095              		.loc 1 621 0
 4096 02a8 2623     		movs	r3, #38
 4097 02aa F7E7     		b	.L309
 4098              	.L341:
 4099 02ac 2623     		movs	r3, #38
 4100 02ae F5E7     		b	.L309
 4101              	.LVL452:
 4102              	.L342:
 635:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Cmd(SD_CMD_WRITE_SINGLE_BLOCK, 1, addr);    //ÂèëÈÄÅCMD24,ÂÜôÂçïÂùóÊåá‰ª§,Áü≠ÂìçÂ∫î
 4103              		.loc 1 635 0
 4104 02b0 2923     		movs	r3, #41
 4105              	.LVL453:
 4106 02b2 F3E7     		b	.L309
 4107              	.LVL454:
 4108              	.L344:
 665:drivers/bsp_f1xx_sdio.c **** 				timeout--;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 103


 4109              		.loc 1 665 0
 4110 02b4 0423     		movs	r3, #4
 4111 02b6 F1E7     		b	.L309
 4112              	.LVL455:
 4113              	.L346:
 702:drivers/bsp_f1xx_sdio.c **** 		if (TransferError != SD_OK)return TransferError;
 4114              		.loc 1 702 0
 4115 02b8 0423     		movs	r3, #4
 4116              	.LVL456:
 4117 02ba EFE7     		b	.L309
 4118              	.L359:
 4119              		.align	2
 4120              	.L358:
 4121 02bc 00800140 		.word	1073840128
 4122 02c0 00000000 		.word	.LANCHOR0
 4123 02c4 00000000 		.word	.LANCHOR1
 4124 02c8 00000000 		.word	.LANCHOR5
 4125 02cc 00000000 		.word	.LANCHOR4
 4126 02d0 00000000 		.word	.LANCHOR6
 4127 02d4 00000000 		.word	.LANCHOR7
 4128 02d8 00040240 		.word	1073873920
 4129              		.cfi_endproc
 4130              	.LFE79:
 4132              		.section	.text.SD_WriteMultiBlocks,"ax",%progbits
 4133              		.align	1
 4134              		.global	SD_WriteMultiBlocks
 4135              		.syntax unified
 4136              		.thumb
 4137              		.thumb_func
 4138              		.fpu softvfp
 4140              	SD_WriteMultiBlocks:
 4141              	.LFB80:
 720:drivers/bsp_f1xx_sdio.c **** 	SD_Error errorstatus = SD_OK;
 4142              		.loc 1 720 0
 4143              		.cfi_startproc
 4144              		@ args = 8, pretend = 0, frame = 8
 4145              		@ frame_needed = 0, uses_anonymous_args = 0
 4146              	.LVL457:
 4147 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 4148              	.LCFI43:
 4149              		.cfi_def_cfa_offset 32
 4150              		.cfi_offset 4, -32
 4151              		.cfi_offset 5, -28
 4152              		.cfi_offset 6, -24
 4153              		.cfi_offset 7, -20
 4154              		.cfi_offset 8, -16
 4155              		.cfi_offset 9, -12
 4156              		.cfi_offset 10, -8
 4157              		.cfi_offset 14, -4
 4158 0004 82B0     		sub	sp, sp, #8
 4159              	.LCFI44:
 4160              		.cfi_def_cfa_offset 40
 4161 0006 9A46     		mov	r10, r3
 4162 0008 BDF82840 		ldrh	r4, [sp, #40]
 4163 000c 0B9D     		ldr	r5, [sp, #44]
 4164              	.LVL458:
 722:drivers/bsp_f1xx_sdio.c **** 	u32 timeout = 0, bytestransferred = 0;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 104


 4165              		.loc 1 722 0
 4166 000e 0023     		movs	r3, #0
 4167 0010 8DF80730 		strb	r3, [sp, #7]
 4168              	.LVL459:
 725:drivers/bsp_f1xx_sdio.c **** 	u32 *tempbuff = (u32 *) buf;
 4169              		.loc 1 725 0
 4170 0014 05FB04F9 		mul	r9, r5, r4
 4171              	.LVL460:
 727:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = 0x0;                            //Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 4172              		.loc 1 727 0
 4173 0018 0028     		cmp	r0, #0
 4174 001a 00F05281 		beq	.L389
 4175 001e 1746     		mov	r7, r2
 4176 0020 8046     		mov	r8, r0
 728:drivers/bsp_f1xx_sdio.c **** 	SDIO_Send_Data_Cfg(SD_DATATIMEOUT, 0, 0, 0);    //Ê∏ÖÈô§DPSMÁä∂ÊÄÅÊú∫ÈÖçÁΩÆ
 4177              		.loc 1 728 0
 4178 0022 B04E     		ldr	r6, .L409
 4179 0024 1946     		mov	r1, r3
 4180 0026 F362     		str	r3, [r6, #44]
 4181              	.LVL461:
 729:drivers/bsp_f1xx_sdio.c **** 	if (SDIO->RESP1 & SD_CARD_LOCKED)return SD_LOCK_UNLOCK_FAILED;//Âç°ÈîÅ‰∫Ü
 4182              		.loc 1 729 0
 4183 0028 1A46     		mov	r2, r3
 4184              	.LVL462:
 4185 002a 4FF0FF30 		mov	r0, #-1
 4186              	.LVL463:
 4187 002e FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 4188              	.LVL464:
 730:drivers/bsp_f1xx_sdio.c **** 	if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 4189              		.loc 1 730 0
 4190 0032 7369     		ldr	r3, [r6, #20]
 4191 0034 13F0007F 		tst	r3, #33554432
 4192 0038 40F04881 		bne	.L390
 731:drivers/bsp_f1xx_sdio.c **** 	{
 4193              		.loc 1 731 0
 4194 003c AA4B     		ldr	r3, .L409+4
 4195 003e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4196 0040 022B     		cmp	r3, #2
 4197 0042 63D0     		beq	.L399
 4198              	.LVL465:
 4199              	.L362:
 736:drivers/bsp_f1xx_sdio.c **** 		power = convert_from_bytes_to_power_of_two(blksize);
 4200              		.loc 1 736 0
 4201 0044 631E     		subs	r3, r4, #1
 4202 0046 9BB2     		uxth	r3, r3
 4203 0048 B3F5006F 		cmp	r3, #2048
 4204 004c 80F04081 		bcs	.L391
 736:drivers/bsp_f1xx_sdio.c **** 		power = convert_from_bytes_to_power_of_two(blksize);
 4205              		.loc 1 736 0 is_stmt 0 discriminator 1
 4206 0050 631E     		subs	r3, r4, #1
 4207 0052 1C42     		tst	r4, r3
 4208 0054 40F03E81 		bne	.L392
 737:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Cmd(SD_CMD_SET_BLOCKLEN, 1, blksize);    //ÂèëÈÄÅCMD16+ËÆæÁΩÆÊï∞ÊçÆÈïøÂ∫¶‰∏∫blksize,Áü≠
 4209              		.loc 1 737 0 is_stmt 1
 4210 0058 2046     		mov	r0, r4
 4211 005a FFF7FEFF 		bl	convert_from_bytes_to_power_of_two
 4212              	.LVL466:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 105


 4213 005e 8246     		mov	r10, r0
 4214              	.LVL467:
 738:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);    //Á≠âÂæÖR1ÂìçÂ∫î
 4215              		.loc 1 738 0
 4216 0060 2646     		mov	r6, r4
 4217 0062 2246     		mov	r2, r4
 4218 0064 0121     		movs	r1, #1
 4219 0066 1020     		movs	r0, #16
 4220 0068 FFF7FEFF 		bl	SDIO_Send_Cmd
 4221              	.LVL468:
 739:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;    //ÂìçÂ∫îÈîôËØØ
 4222              		.loc 1 739 0
 4223 006c 1020     		movs	r0, #16
 4224 006e FFF7FEFF 		bl	CmdResp1Error
 4225              	.LVL469:
 740:drivers/bsp_f1xx_sdio.c **** 	} else return SD_INVALID_PARAMETER;
 4226              		.loc 1 740 0
 4227 0072 0346     		mov	r3, r0
 4228 0074 0028     		cmp	r0, #0
 4229 0076 40F02581 		bne	.L361
 742:drivers/bsp_f1xx_sdio.c **** 		if (nblks * blksize > SD_MAX_DATA_LENGTH)return SD_INVALID_PARAMETER;
 4230              		.loc 1 742 0
 4231 007a 012D     		cmp	r5, #1
 4232 007c 3CD9     		bls	.L363
 743:drivers/bsp_f1xx_sdio.c **** 		if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType) 
 4233              		.loc 1 743 0
 4234 007e 05FB06F6 		mul	r6, r5, r6
 4235 0082 B6F1007F 		cmp	r6, #33554432
 4236 0086 80F02781 		bcs	.L393
 744:drivers/bsp_f1xx_sdio.c **** 			(SDIO_HIGH_CAPACITY_SD_CARD == CardType)) {
 4237              		.loc 1 744 0
 4238 008a 974B     		ldr	r3, .L409+4
 4239 008c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4240 008e 022B     		cmp	r3, #2
 4241 0090 19D8     		bhi	.L364
 747:drivers/bsp_f1xx_sdio.c **** 			errorstatus = CmdResp1Error(SD_CMD_APP_CMD);        //Á≠âÂæÖR1ÂìçÂ∫î
 4242              		.loc 1 747 0
 4243 0092 964B     		ldr	r3, .L409+8
 4244 0094 1A68     		ldr	r2, [r3]
 4245 0096 1204     		lsls	r2, r2, #16
 4246 0098 0121     		movs	r1, #1
 4247 009a 3720     		movs	r0, #55
 4248              	.LVL470:
 4249 009c FFF7FEFF 		bl	SDIO_Send_Cmd
 4250              	.LVL471:
 748:drivers/bsp_f1xx_sdio.c **** 			if (errorstatus != SD_OK)return errorstatus;
 4251              		.loc 1 748 0
 4252 00a0 3720     		movs	r0, #55
 4253 00a2 FFF7FEFF 		bl	CmdResp1Error
 4254              	.LVL472:
 749:drivers/bsp_f1xx_sdio.c **** 			SDIO_Send_Cmd(SD_CMD_SET_BLOCK_COUNT, 1, nblks);    //ÂèëÈÄÅCMD23,ËÆæÁΩÆÂùóÊï∞Èáè,Áü≠ÂìçÂ∫î
 4255              		.loc 1 749 0
 4256 00a6 0346     		mov	r3, r0
 4257 00a8 0028     		cmp	r0, #0
 4258 00aa 40F00B81 		bne	.L361
 750:drivers/bsp_f1xx_sdio.c **** 			errorstatus = CmdResp1Error(SD_CMD_SET_BLOCK_COUNT);//Á≠âÂæÖR1ÂìçÂ∫î
 4259              		.loc 1 750 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 106


 4260 00ae 2A46     		mov	r2, r5
 4261 00b0 0121     		movs	r1, #1
 4262 00b2 1720     		movs	r0, #23
 4263              	.LVL473:
 4264 00b4 FFF7FEFF 		bl	SDIO_Send_Cmd
 4265              	.LVL474:
 751:drivers/bsp_f1xx_sdio.c **** 			if (errorstatus != SD_OK)return errorstatus;
 4266              		.loc 1 751 0
 4267 00b8 1720     		movs	r0, #23
 4268 00ba FFF7FEFF 		bl	CmdResp1Error
 4269              	.LVL475:
 752:drivers/bsp_f1xx_sdio.c **** 		}
 4270              		.loc 1 752 0
 4271 00be 0346     		mov	r3, r0
 4272 00c0 0028     		cmp	r0, #0
 4273 00c2 40F0FF80 		bne	.L361
 4274              	.L364:
 754:drivers/bsp_f1xx_sdio.c **** 		errorstatus = CmdResp1Error(SD_CMD_WRITE_MULT_BLOCK);    //Á≠âÂæÖR1ÂìçÂ∫î
 4275              		.loc 1 754 0
 4276 00c6 3A46     		mov	r2, r7
 4277 00c8 0121     		movs	r1, #1
 4278 00ca 1920     		movs	r0, #25
 4279              	.LVL476:
 4280 00cc FFF7FEFF 		bl	SDIO_Send_Cmd
 4281              	.LVL477:
 755:drivers/bsp_f1xx_sdio.c **** 		if (errorstatus != SD_OK)return errorstatus;
 4282              		.loc 1 755 0
 4283 00d0 1920     		movs	r0, #25
 4284 00d2 FFF7FEFF 		bl	CmdResp1Error
 4285              	.LVL478:
 756:drivers/bsp_f1xx_sdio.c **** 		SDIO_Send_Data_Cfg(SD_DATATIMEOUT, nblks * blksize, power, 0);//blksize, ÊéßÂà∂Âô®Âà∞Âç°
 4286              		.loc 1 756 0
 4287 00d6 0346     		mov	r3, r0
 4288 00d8 0028     		cmp	r0, #0
 4289 00da 40F0F380 		bne	.L361
 757:drivers/bsp_f1xx_sdio.c **** 		if (DeviceMode == SD_POLLING_MODE) {
 4290              		.loc 1 757 0
 4291 00de 0023     		movs	r3, #0
 4292 00e0 5246     		mov	r2, r10
 4293 00e2 3146     		mov	r1, r6
 4294 00e4 4FF0FF30 		mov	r0, #-1
 4295              	.LVL479:
 4296 00e8 FFF7FEFF 		bl	SDIO_Send_Data_Cfg
 4297              	.LVL480:
 758:drivers/bsp_f1xx_sdio.c **** 			timeout = SDIO_DATATIMEOUT;
 4298              		.loc 1 758 0
 4299 00ec 804B     		ldr	r3, .L409+12
 4300 00ee 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4301 00f0 93B1     		cbz	r3, .L400
 814:drivers/bsp_f1xx_sdio.c **** 			SD_DMA_Config((u32 *) buf, nblks * blksize, 1);//SDIO DMAÈÖçÁΩÆ
 4302              		.loc 1 814 0
 4303 00f2 012B     		cmp	r3, #1
 4304 00f4 00F09A80 		beq	.L401
 4305              	.LVL481:
 4306              	.L363:
 834:drivers/bsp_f1xx_sdio.c **** 	errorstatus = IsCardProgramming(&cardstate);
 4307              		.loc 1 834 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 107


 4308 00f8 7A4B     		ldr	r3, .L409
 4309 00fa 40F2FF52 		movw	r2, #1535
 4310 00fe 9A63     		str	r2, [r3, #56]
 835:drivers/bsp_f1xx_sdio.c **** 	while ((errorstatus == SD_OK) && ((cardstate == SD_CARD_PROGRAMMING) || (cardstate == SD_CARD_RECE
 4311              		.loc 1 835 0
 4312 0100 0DF10700 		add	r0, sp, #7
 4313 0104 FFF7FEFF 		bl	IsCardProgramming
 4314              	.LVL482:
 4315 0108 0346     		mov	r3, r0
 4316              	.LVL483:
 836:drivers/bsp_f1xx_sdio.c **** 		errorstatus = IsCardProgramming(&cardstate);
 4317              		.loc 1 836 0
 4318 010a D2E0     		b	.L387
 4319              	.LVL484:
 4320              	.L399:
 734:drivers/bsp_f1xx_sdio.c **** 	}
 4321              		.loc 1 734 0
 4322 010c 7B0A     		lsrs	r3, r7, #9
 4323 010e 43EACA57 		orr	r7, r3, r10, lsl #23
 4324              	.LVL485:
 733:drivers/bsp_f1xx_sdio.c **** 		addr >>= 9;
 4325              		.loc 1 733 0
 4326 0112 4FF40074 		mov	r4, #512
 4327 0116 95E7     		b	.L362
 4328              	.LVL486:
 4329              	.L400:
 760:drivers/bsp_f1xx_sdio.c **** 			while (!(SDIO->STA & ((1 << 4) | (1 << 1) | (1 << 8) | (1 << 3) | (1 << 9))))//‰∏ãÊ∫¢/CRC/Êï∞ÊçÆ
 4330              		.loc 1 760 0
 4331 0118 FFF7FEFF 		bl	INTX_DISABLE
 4332              	.LVL487:
 723:drivers/bsp_f1xx_sdio.c **** 	u32 count = 0, restwords = 0;
 4333              		.loc 1 723 0
 4334 011c 0020     		movs	r0, #0
 759:drivers/bsp_f1xx_sdio.c **** 			INTX_DISABLE();//ÂÖ≥Èó≠ÊÄª‰∏≠Êñ≠(POLLINGÊ®°Âºè,‰∏•Á¶Å‰∏≠Êñ≠ÊâìÊñ≠SDIOËØªÂÜôÊìç‰Ωú!!!)
 4335              		.loc 1 759 0
 4336 011e 4FF0FF31 		mov	r1, #-1
 761:drivers/bsp_f1xx_sdio.c **** 			{
 4337              		.loc 1 761 0
 4338 0122 22E0     		b	.L366
 4339              	.LVL488:
 4340              	.L369:
 768:drivers/bsp_f1xx_sdio.c **** 						for (count = 0; count < restwords; count++, tempbuff++, bytestransferred += 4) {
 4341              		.loc 1 768 0 discriminator 2
 4342 0124 9208     		lsrs	r2, r2, #2
 767:drivers/bsp_f1xx_sdio.c **** 								(tlen - bytestransferred) / 4 + 1);
 4343              		.loc 1 767 0 discriminator 2
 4344 0126 0132     		adds	r2, r2, #1
 4345 0128 32E0     		b	.L370
 4346              	.LVL489:
 4347              	.L372:
 770:drivers/bsp_f1xx_sdio.c **** 						}
 4348              		.loc 1 770 0 discriminator 3
 4349 012a 58F8044B 		ldr	r4, [r8], #4
 4350              	.LVL490:
 4351 012e 6D49     		ldr	r1, .L409
 4352 0130 C1F88040 		str	r4, [r1, #128]
 769:drivers/bsp_f1xx_sdio.c **** 							SDIO->FIFO = *tempbuff;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 108


 4353              		.loc 1 769 0 discriminator 3
 4354 0134 0133     		adds	r3, r3, #1
 4355              	.LVL491:
 4356 0136 0430     		adds	r0, r0, #4
 4357              	.LVL492:
 4358              	.L371:
 769:drivers/bsp_f1xx_sdio.c **** 							SDIO->FIFO = *tempbuff;
 4359              		.loc 1 769 0 is_stmt 0 discriminator 1
 4360 0138 9342     		cmp	r3, r2
 4361 013a F6D3     		bcc	.L372
 780:drivers/bsp_f1xx_sdio.c **** 				} else {
 4362              		.loc 1 780 0 is_stmt 1
 4363 013c 6FF04041 		mvn	r1, #-1073741824
 4364 0140 13E0     		b	.L366
 4365              	.LVL493:
 4366              	.L374:
 775:drivers/bsp_f1xx_sdio.c **** 						}
 4367              		.loc 1 775 0 discriminator 3
 4368 0142 58F82310 		ldr	r1, [r8, r3, lsl #2]
 4369 0146 674A     		ldr	r2, .L409
 4370 0148 C2F88010 		str	r1, [r2, #128]
 774:drivers/bsp_f1xx_sdio.c **** 							SDIO->FIFO = *(tempbuff + count);
 4371              		.loc 1 774 0 discriminator 3
 4372 014c 0133     		adds	r3, r3, #1
 4373              	.LVL494:
 4374              	.L368:
 774:drivers/bsp_f1xx_sdio.c **** 							SDIO->FIFO = *(tempbuff + count);
 4375              		.loc 1 774 0 is_stmt 0 discriminator 1
 4376 014e 072B     		cmp	r3, #7
 4377 0150 F7D9     		bls	.L374
 777:drivers/bsp_f1xx_sdio.c **** 						bytestransferred += SD_HALFFIFOBYTES;
 4378              		.loc 1 777 0 is_stmt 1
 4379 0152 08F12008 		add	r8, r8, #32
 4380              	.LVL495:
 778:drivers/bsp_f1xx_sdio.c **** 					}
 4381              		.loc 1 778 0
 4382 0156 2030     		adds	r0, r0, #32
 4383              	.LVL496:
 780:drivers/bsp_f1xx_sdio.c **** 				} else {
 4384              		.loc 1 780 0
 4385 0158 6FF04041 		mvn	r1, #-1073741824
 4386 015c 05E0     		b	.L366
 4387              	.LVL497:
 4388              	.L394:
 774:drivers/bsp_f1xx_sdio.c **** 							SDIO->FIFO = *(tempbuff + count);
 4389              		.loc 1 774 0
 4390 015e 0023     		movs	r3, #0
 4391 0160 F5E7     		b	.L368
 4392              	.L367:
 782:drivers/bsp_f1xx_sdio.c **** 					timeout--;
 4393              		.loc 1 782 0
 4394 0162 0029     		cmp	r1, #0
 4395 0164 00F0BA80 		beq	.L395
 783:drivers/bsp_f1xx_sdio.c **** 				}
 4396              		.loc 1 783 0
 4397 0168 0139     		subs	r1, r1, #1
 4398              	.LVL498:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 109


 4399              	.L366:
 761:drivers/bsp_f1xx_sdio.c **** 			{
 4400              		.loc 1 761 0
 4401 016a 5E4B     		ldr	r3, .L409
 4402 016c 5A6B     		ldr	r2, [r3, #52]
 4403 016e 40F21A33 		movw	r3, #794
 4404 0172 1A42     		tst	r2, r3
 4405 0174 0ED1     		bne	.L402
 763:drivers/bsp_f1xx_sdio.c **** 				{
 4406              		.loc 1 763 0
 4407 0176 5B4B     		ldr	r3, .L409
 4408 0178 5B6B     		ldr	r3, [r3, #52]
 4409 017a 13F4804F 		tst	r3, #16384
 4410 017e F0D0     		beq	.L367
 765:drivers/bsp_f1xx_sdio.c **** 					{
 4411              		.loc 1 765 0
 4412 0180 A9EB0002 		sub	r2, r9, r0
 4413 0184 1F2A     		cmp	r2, #31
 4414 0186 EAD8     		bhi	.L394
 767:drivers/bsp_f1xx_sdio.c **** 								(tlen - bytestransferred) / 4 + 1);
 4415              		.loc 1 767 0
 4416 0188 12F0030F 		tst	r2, #3
 4417 018c CAD1     		bne	.L369
 767:drivers/bsp_f1xx_sdio.c **** 								(tlen - bytestransferred) / 4 + 1);
 4418              		.loc 1 767 0 is_stmt 0 discriminator 1
 4419 018e 9208     		lsrs	r2, r2, #2
 4420              	.L370:
 4421              	.LVL499:
 769:drivers/bsp_f1xx_sdio.c **** 							SDIO->FIFO = *tempbuff;
 4422              		.loc 1 769 0 is_stmt 1 discriminator 4
 4423 0190 0023     		movs	r3, #0
 4424 0192 D1E7     		b	.L371
 4425              	.LVL500:
 4426              	.L402:
 786:drivers/bsp_f1xx_sdio.c **** 			{
 4427              		.loc 1 786 0
 4428 0194 534B     		ldr	r3, .L409
 4429 0196 5B6B     		ldr	r3, [r3, #52]
 4430 0198 13F0080F 		tst	r3, #8
 4431 019c 1ED1     		bne	.L403
 790:drivers/bsp_f1xx_sdio.c **** 			{
 4432              		.loc 1 790 0
 4433 019e 514B     		ldr	r3, .L409
 4434 01a0 5B6B     		ldr	r3, [r3, #52]
 4435 01a2 13F0020F 		tst	r3, #2
 4436 01a6 20D1     		bne	.L404
 794:drivers/bsp_f1xx_sdio.c **** 			{
 4437              		.loc 1 794 0
 4438 01a8 4E4B     		ldr	r3, .L409
 4439 01aa 5B6B     		ldr	r3, [r3, #52]
 4440 01ac 13F0100F 		tst	r3, #16
 4441 01b0 22D1     		bne	.L405
 798:drivers/bsp_f1xx_sdio.c **** 			{
 4442              		.loc 1 798 0
 4443 01b2 4C4B     		ldr	r3, .L409
 4444 01b4 5B6B     		ldr	r3, [r3, #52]
 4445 01b6 13F4007F 		tst	r3, #512
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 110


 4446 01ba 24D1     		bne	.L406
 803:drivers/bsp_f1xx_sdio.c **** 			{
 4447              		.loc 1 803 0
 4448 01bc 494B     		ldr	r3, .L409
 4449 01be 5B6B     		ldr	r3, [r3, #52]
 4450 01c0 13F4807F 		tst	r3, #256
 4451 01c4 03D0     		beq	.L380
 805:drivers/bsp_f1xx_sdio.c **** 					(SDIO_HIGH_CAPACITY_SD_CARD == CardType)) {
 4452              		.loc 1 805 0
 4453 01c6 484B     		ldr	r3, .L409+4
 4454 01c8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4455 01ca 022B     		cmp	r3, #2
 4456 01cc 22D9     		bls	.L407
 4457              	.LVL501:
 4458              	.L380:
 812:drivers/bsp_f1xx_sdio.c **** 			SDIO->ICR = 0X5FF;            //Ê∏ÖÈô§ÊâÄÊúâÊ†áËÆ∞
 4459              		.loc 1 812 0
 4460 01ce FFF7FEFF 		bl	INTX_ENABLE
 4461              	.LVL502:
 813:drivers/bsp_f1xx_sdio.c **** 		} else if (DeviceMode == SD_DMA_MODE) {
 4462              		.loc 1 813 0
 4463 01d2 444B     		ldr	r3, .L409
 4464 01d4 40F2FF52 		movw	r2, #1535
 4465 01d8 9A63     		str	r2, [r3, #56]
 4466 01da 8DE7     		b	.L363
 4467              	.LVL503:
 4468              	.L403:
 788:drivers/bsp_f1xx_sdio.c **** 				return SD_DATA_TIMEOUT;
 4469              		.loc 1 788 0
 4470 01dc 414A     		ldr	r2, .L409
 4471 01de 936B     		ldr	r3, [r2, #56]
 4472 01e0 43F00803 		orr	r3, r3, #8
 4473 01e4 9363     		str	r3, [r2, #56]
 789:drivers/bsp_f1xx_sdio.c **** 			} else if (SDIO->STA & (1 << 1))    //Êï∞ÊçÆÂùóCRCÈîôËØØ
 4474              		.loc 1 789 0
 4475 01e6 0423     		movs	r3, #4
 4476 01e8 6CE0     		b	.L361
 4477              	.L404:
 792:drivers/bsp_f1xx_sdio.c **** 				return SD_DATA_CRC_FAIL;
 4478              		.loc 1 792 0
 4479 01ea 3E4A     		ldr	r2, .L409
 4480 01ec 936B     		ldr	r3, [r2, #56]
 4481 01ee 43F00203 		orr	r3, r3, #2
 4482 01f2 9363     		str	r3, [r2, #56]
 793:drivers/bsp_f1xx_sdio.c **** 			} else if (SDIO->STA & (1 << 4))    //Êé•Êî∂fifo‰∏ãÊ∫¢ÈîôËØØ
 4483              		.loc 1 793 0
 4484 01f4 0223     		movs	r3, #2
 4485 01f6 65E0     		b	.L361
 4486              	.L405:
 796:drivers/bsp_f1xx_sdio.c **** 				return SD_TX_UNDERRUN;
 4487              		.loc 1 796 0
 4488 01f8 3A4A     		ldr	r2, .L409
 4489 01fa 936B     		ldr	r3, [r2, #56]
 4490 01fc 43F01003 		orr	r3, r3, #16
 4491 0200 9363     		str	r3, [r2, #56]
 797:drivers/bsp_f1xx_sdio.c **** 			} else if (SDIO->STA & (1 << 9))    //Êé•Êî∂Ëµ∑Âßã‰ΩçÈîôËØØ
 4492              		.loc 1 797 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 111


 4493 0202 0523     		movs	r3, #5
 4494 0204 5EE0     		b	.L361
 4495              	.L406:
 800:drivers/bsp_f1xx_sdio.c **** 				return SD_START_BIT_ERR;
 4496              		.loc 1 800 0
 4497 0206 374A     		ldr	r2, .L409
 4498 0208 936B     		ldr	r3, [r2, #56]
 4499 020a 43F40073 		orr	r3, r3, #512
 4500 020e 9363     		str	r3, [r2, #56]
 801:drivers/bsp_f1xx_sdio.c **** 			}
 4501              		.loc 1 801 0
 4502 0210 0723     		movs	r3, #7
 4503 0212 57E0     		b	.L361
 4504              	.L407:
 807:drivers/bsp_f1xx_sdio.c **** 					errorstatus = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);//Á≠âÂæÖR1ÂìçÂ∫î
 4505              		.loc 1 807 0
 4506 0214 0022     		movs	r2, #0
 4507 0216 0121     		movs	r1, #1
 4508              	.LVL504:
 4509 0218 0C20     		movs	r0, #12
 4510              	.LVL505:
 4511 021a FFF7FEFF 		bl	SDIO_Send_Cmd
 4512              	.LVL506:
 808:drivers/bsp_f1xx_sdio.c **** 					if (errorstatus != SD_OK)return errorstatus;
 4513              		.loc 1 808 0
 4514 021e 0C20     		movs	r0, #12
 4515 0220 FFF7FEFF 		bl	CmdResp1Error
 4516              	.LVL507:
 809:drivers/bsp_f1xx_sdio.c **** 				}
 4517              		.loc 1 809 0
 4518 0224 0346     		mov	r3, r0
 4519 0226 0028     		cmp	r0, #0
 4520 0228 D1D0     		beq	.L380
 4521 022a 4BE0     		b	.L361
 4522              	.LVL508:
 4523              	.L401:
 815:drivers/bsp_f1xx_sdio.c **** 			TransferError = SD_OK;
 4524              		.loc 1 815 0
 4525 022c 0122     		movs	r2, #1
 4526 022e 3146     		mov	r1, r6
 4527 0230 4046     		mov	r0, r8
 4528 0232 FFF7FEFF 		bl	SD_DMA_Config
 4529              	.LVL509:
 816:drivers/bsp_f1xx_sdio.c **** 			StopCondition = 1;            //Â§öÂùóÂÜô,ÈúÄË¶ÅÂèëÈÄÅÂÅúÊ≠¢‰º†ËæìÊåá‰ª§
 4530              		.loc 1 816 0
 4531 0236 0023     		movs	r3, #0
 4532 0238 2E4A     		ldr	r2, .L409+16
 4533 023a 1370     		strb	r3, [r2]
 817:drivers/bsp_f1xx_sdio.c **** 			TransferEnd = 0;                //‰º†ËæìÁªìÊùüÊ†áÁΩÆ‰ΩçÔºåÂú®‰∏≠Êñ≠ÊúçÂä°ÁΩÆ1
 4534              		.loc 1 817 0
 4535 023c 2E4A     		ldr	r2, .L409+20
 4536 023e 0121     		movs	r1, #1
 4537 0240 1170     		strb	r1, [r2]
 818:drivers/bsp_f1xx_sdio.c **** 			SDIO->MASK |= (1 << 1) | (1 << 3) | (1 << 8) | (1 << 4) | (1 << 9);    //ÈÖçÁΩÆ‰∫ßÁîüÊï∞ÊçÆÊé•Êî
 4538              		.loc 1 818 0
 4539 0242 2E4A     		ldr	r2, .L409+24
 4540 0244 1370     		strb	r3, [r2]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 112


 819:drivers/bsp_f1xx_sdio.c **** 			SDIO->DCTRL |= 1 << 3;                                //SDIO DMA‰ΩøËÉΩ.
 4541              		.loc 1 819 0
 4542 0246 274A     		ldr	r2, .L409
 4543 0248 D36B     		ldr	r3, [r2, #60]
 4544 024a 43F44673 		orr	r3, r3, #792
 4545 024e 43F00203 		orr	r3, r3, #2
 4546 0252 D363     		str	r3, [r2, #60]
 820:drivers/bsp_f1xx_sdio.c **** 			timeout = SDIO_DATATIMEOUT;
 4547              		.loc 1 820 0
 4548 0254 D36A     		ldr	r3, [r2, #44]
 4549 0256 43F00803 		orr	r3, r3, #8
 4550 025a D362     		str	r3, [r2, #44]
 4551              	.LVL510:
 821:drivers/bsp_f1xx_sdio.c **** 			while (((DMA2->ISR & 0X2000) == 0) && timeout)timeout--;//Á≠âÂæÖ‰º†ËæìÂÆåÊàê
 4552              		.loc 1 821 0
 4553 025c 4FF0FF33 		mov	r3, #-1
 822:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)                                    //Ë∂ÖÊó∂
 4554              		.loc 1 822 0
 4555 0260 00E0     		b	.L381
 4556              	.LVL511:
 4557              	.L383:
 822:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)                                    //Ë∂ÖÊó∂
 4558              		.loc 1 822 0 is_stmt 0 discriminator 3
 4559 0262 013B     		subs	r3, r3, #1
 4560              	.LVL512:
 4561              	.L381:
 822:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)                                    //Ë∂ÖÊó∂
 4562              		.loc 1 822 0 discriminator 1
 4563 0264 264A     		ldr	r2, .L409+28
 4564 0266 1268     		ldr	r2, [r2]
 4565 0268 12F4005F 		tst	r2, #8192
 4566 026c 01D1     		bne	.L382
 822:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)                                    //Ë∂ÖÊó∂
 4567              		.loc 1 822 0 discriminator 2
 4568 026e 002B     		cmp	r3, #0
 4569 0270 F7D1     		bne	.L383
 4570              	.L382:
 823:drivers/bsp_f1xx_sdio.c **** 			{
 4571              		.loc 1 823 0 is_stmt 1
 4572 0272 13B1     		cbz	r3, .L408
 828:drivers/bsp_f1xx_sdio.c **** 			while ((TransferEnd == 0) && (TransferError == SD_OK) && timeout)timeout--;
 4573              		.loc 1 828 0
 4574 0274 4FF0FF33 		mov	r3, #-1
 4575              	.LVL513:
 4576 0278 04E0     		b	.L384
 4577              	.LVL514:
 4578              	.L408:
 825:drivers/bsp_f1xx_sdio.c **** 				return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 4579              		.loc 1 825 0
 4580 027a FFF7FEFF 		bl	bsp_SD_Init
 4581              	.LVL515:
 826:drivers/bsp_f1xx_sdio.c **** 			}
 4582              		.loc 1 826 0
 4583 027e 0423     		movs	r3, #4
 4584 0280 20E0     		b	.L361
 4585              	.LVL516:
 4586              	.L386:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 113


 829:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 4587              		.loc 1 829 0 discriminator 4
 4588 0282 013B     		subs	r3, r3, #1
 4589              	.LVL517:
 4590              	.L384:
 829:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 4591              		.loc 1 829 0 is_stmt 0 discriminator 1
 4592 0284 1D4A     		ldr	r2, .L409+24
 4593 0286 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4594 0288 22B9     		cbnz	r2, .L385
 829:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 4595              		.loc 1 829 0 discriminator 2
 4596 028a 1A4A     		ldr	r2, .L409+16
 4597 028c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4598 028e 0AB9     		cbnz	r2, .L385
 829:drivers/bsp_f1xx_sdio.c **** 			if (timeout == 0)return SD_DATA_TIMEOUT;            //Ë∂ÖÊó∂
 4599              		.loc 1 829 0 discriminator 3
 4600 0290 002B     		cmp	r3, #0
 4601 0292 F6D1     		bne	.L386
 4602              	.L385:
 830:drivers/bsp_f1xx_sdio.c **** 			if (TransferError != SD_OK)return TransferError;
 4603              		.loc 1 830 0 is_stmt 1
 4604 0294 23B3     		cbz	r3, .L397
 831:drivers/bsp_f1xx_sdio.c **** 		}
 4605              		.loc 1 831 0
 4606 0296 174B     		ldr	r3, .L409+16
 4607              	.LVL518:
 4608 0298 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4609 029a 002B     		cmp	r3, #0
 4610 029c 3FF42CAF 		beq	.L363
 831:drivers/bsp_f1xx_sdio.c **** 		}
 4611              		.loc 1 831 0 is_stmt 0 discriminator 1
 4612 02a0 144B     		ldr	r3, .L409+16
 4613 02a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4614 02a4 DBB2     		uxtb	r3, r3
 4615 02a6 0DE0     		b	.L361
 4616              	.LVL519:
 4617              	.L388:
 837:drivers/bsp_f1xx_sdio.c **** 	}
 4618              		.loc 1 837 0 is_stmt 1
 4619 02a8 0DF10700 		add	r0, sp, #7
 4620 02ac FFF7FEFF 		bl	IsCardProgramming
 4621              	.LVL520:
 4622 02b0 0346     		mov	r3, r0
 4623              	.LVL521:
 4624              	.L387:
 836:drivers/bsp_f1xx_sdio.c **** 		errorstatus = IsCardProgramming(&cardstate);
 4625              		.loc 1 836 0
 4626 02b2 3BB9     		cbnz	r3, .L361
 836:drivers/bsp_f1xx_sdio.c **** 		errorstatus = IsCardProgramming(&cardstate);
 4627              		.loc 1 836 0 is_stmt 0 discriminator 1
 4628 02b4 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 4629 02b8 063A     		subs	r2, r2, #6
 4630 02ba D2B2     		uxtb	r2, r2
 4631 02bc 012A     		cmp	r2, #1
 4632 02be F3D9     		bls	.L388
 4633 02c0 00E0     		b	.L361
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 114


 4634              	.LVL522:
 4635              	.L389:
 727:drivers/bsp_f1xx_sdio.c **** 	SDIO->DCTRL = 0x0;                            //Êï∞ÊçÆÊéßÂà∂ÂØÑÂ≠òÂô®Ê∏ÖÈõ∂(ÂÖ≥DMA)
 4636              		.loc 1 727 0 is_stmt 1
 4637 02c2 2623     		movs	r3, #38
 4638              	.LVL523:
 4639              	.L361:
 840:drivers/bsp_f1xx_sdio.c **** 
 4640              		.loc 1 840 0
 4641 02c4 1846     		mov	r0, r3
 4642 02c6 02B0     		add	sp, sp, #8
 4643              	.LCFI45:
 4644              		.cfi_remember_state
 4645              		.cfi_def_cfa_offset 32
 4646              		@ sp needed
 4647 02c8 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4648              	.LVL524:
 4649              	.L390:
 4650              	.LCFI46:
 4651              		.cfi_restore_state
 730:drivers/bsp_f1xx_sdio.c **** 	if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)//Â§ßÂÆπÈáèÂç°
 4652              		.loc 1 730 0
 4653 02cc 0E23     		movs	r3, #14
 4654 02ce F9E7     		b	.L361
 4655              	.LVL525:
 4656              	.L391:
 741:drivers/bsp_f1xx_sdio.c **** 	if (nblks > 1) {
 4657              		.loc 1 741 0
 4658 02d0 2623     		movs	r3, #38
 4659 02d2 F7E7     		b	.L361
 4660              	.L392:
 4661 02d4 2623     		movs	r3, #38
 4662 02d6 F5E7     		b	.L361
 4663              	.LVL526:
 4664              	.L393:
 743:drivers/bsp_f1xx_sdio.c **** 		if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType) 
 4665              		.loc 1 743 0
 4666 02d8 2623     		movs	r3, #38
 4667 02da F3E7     		b	.L361
 4668              	.LVL527:
 4669              	.L395:
 782:drivers/bsp_f1xx_sdio.c **** 					timeout--;
 4670              		.loc 1 782 0
 4671 02dc 0423     		movs	r3, #4
 4672 02de F1E7     		b	.L361
 4673              	.LVL528:
 4674              	.L397:
 830:drivers/bsp_f1xx_sdio.c **** 			if (TransferError != SD_OK)return TransferError;
 4675              		.loc 1 830 0
 4676 02e0 0423     		movs	r3, #4
 4677              	.LVL529:
 4678 02e2 EFE7     		b	.L361
 4679              	.L410:
 4680              		.align	2
 4681              	.L409:
 4682 02e4 00800140 		.word	1073840128
 4683 02e8 00000000 		.word	.LANCHOR0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 115


 4684 02ec 00000000 		.word	.LANCHOR1
 4685 02f0 00000000 		.word	.LANCHOR4
 4686 02f4 00000000 		.word	.LANCHOR6
 4687 02f8 00000000 		.word	.LANCHOR5
 4688 02fc 00000000 		.word	.LANCHOR7
 4689 0300 00040240 		.word	1073873920
 4690              		.cfi_endproc
 4691              	.LFE80:
 4693              		.section	.text.SD_ReadDisk,"ax",%progbits
 4694              		.align	1
 4695              		.global	SD_ReadDisk
 4696              		.syntax unified
 4697              		.thumb
 4698              		.thumb_func
 4699              		.fpu softvfp
 4701              	SD_ReadDisk:
 4702              	.LFB96:
1219:drivers/bsp_f1xx_sdio.c **** 
1220:drivers/bsp_f1xx_sdio.c **** //ËØªSDÂç°
1221:drivers/bsp_f1xx_sdio.c **** //buf:ËØªÊï∞ÊçÆÁºìÂ≠òÂå∫
1222:drivers/bsp_f1xx_sdio.c **** //sector:ÊâáÂå∫Âú∞ÂùÄ
1223:drivers/bsp_f1xx_sdio.c **** //cnt:ÊâáÂå∫‰∏™Êï∞
1224:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ;0,Ê≠£Â∏∏;ÂÖ∂‰ªñ,ÈîôËØØ‰ª£Á†Å;
1225:drivers/bsp_f1xx_sdio.c **** u8 SD_ReadDisk(u8 *buf, u32 sector, u8 cnt)
1226:drivers/bsp_f1xx_sdio.c **** {
 4703              		.loc 1 1226 0
 4704              		.cfi_startproc
 4705              		@ args = 0, pretend = 0, frame = 0
 4706              		@ frame_needed = 0, uses_anonymous_args = 0
 4707              	.LVL530:
 4708 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4709              	.LCFI47:
 4710              		.cfi_def_cfa_offset 36
 4711              		.cfi_offset 4, -36
 4712              		.cfi_offset 5, -32
 4713              		.cfi_offset 6, -28
 4714              		.cfi_offset 7, -24
 4715              		.cfi_offset 8, -20
 4716              		.cfi_offset 9, -16
 4717              		.cfi_offset 10, -12
 4718              		.cfi_offset 11, -8
 4719              		.cfi_offset 14, -4
 4720 0004 83B0     		sub	sp, sp, #12
 4721              	.LCFI48:
 4722              		.cfi_def_cfa_offset 48
 4723 0006 0546     		mov	r5, r0
 4724 0008 9146     		mov	r9, r2
 4725              	.LVL531:
1227:drivers/bsp_f1xx_sdio.c **** 	u8 sta = SD_OK;
1228:drivers/bsp_f1xx_sdio.c **** 	long long lsector = sector;
1229:drivers/bsp_f1xx_sdio.c **** 	u8 n;
1230:drivers/bsp_f1xx_sdio.c **** 	lsector <<= 9;
 4726              		.loc 1 1230 0
 4727 000a CF0D     		lsrs	r7, r1, #23
 4728 000c 4E02     		lsls	r6, r1, #9
 4729              	.LVL532:
1231:drivers/bsp_f1xx_sdio.c **** 	if ((u32) buf % 4 != 0) {
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 116


 4730              		.loc 1 1231 0
 4731 000e 10F0030F 		tst	r0, #3
 4732 0012 29D1     		bne	.L417
1232:drivers/bsp_f1xx_sdio.c **** 		for (n = 0; n < cnt; n++) {
1233:drivers/bsp_f1xx_sdio.c **** 			sta = SD_ReadBlock(SDIO_DATA_BUFFER, lsector + 512 * n, 512);//Âçï‰∏™sectorÁöÑËØªÊìç‰Ωú
1234:drivers/bsp_f1xx_sdio.c **** 			memcpy(buf, SDIO_DATA_BUFFER, 512);
1235:drivers/bsp_f1xx_sdio.c **** 			buf += 512;
1236:drivers/bsp_f1xx_sdio.c **** 		}
1237:drivers/bsp_f1xx_sdio.c **** 	} else {
1238:drivers/bsp_f1xx_sdio.c **** 		if (cnt == 1)sta = SD_ReadBlock(buf, lsector, 512);        //Âçï‰∏™sectorÁöÑËØªÊìç‰Ωú
 4733              		.loc 1 1238 0
 4734 0014 012A     		cmp	r2, #1
 4735 0016 2AD0     		beq	.L420
1239:drivers/bsp_f1xx_sdio.c **** 		else sta = SD_ReadMultiBlocks(buf, lsector, 512, cnt);//Â§ö‰∏™sector
 4736              		.loc 1 1239 0
 4737 0018 0192     		str	r2, [sp, #4]
 4738 001a 4FF40073 		mov	r3, #512
 4739 001e 0093     		str	r3, [sp]
 4740 0020 3246     		mov	r2, r6
 4741              	.LVL533:
 4742 0022 3B46     		mov	r3, r7
 4743 0024 FFF7FEFF 		bl	SD_ReadMultiBlocks
 4744              	.LVL534:
 4745 0028 8246     		mov	r10, r0
 4746              	.LVL535:
 4747 002a 19E0     		b	.L415
 4748              	.LVL536:
 4749              	.L414:
1233:drivers/bsp_f1xx_sdio.c **** 			memcpy(buf, SDIO_DATA_BUFFER, 512);
 4750              		.loc 1 1233 0 discriminator 3
 4751 002c 6202     		lsls	r2, r4, #9
 4752 002e DFF85080 		ldr	r8, .L421
 4753 0032 4FF4007B 		mov	fp, #512
 4754 0036 CDF800B0 		str	fp, [sp]
 4755 003a B018     		adds	r0, r6, r2
 4756 003c 47EBE271 		adc	r1, r7, r2, asr #31
 4757 0040 0246     		mov	r2, r0
 4758 0042 0B46     		mov	r3, r1
 4759 0044 4046     		mov	r0, r8
 4760 0046 FFF7FEFF 		bl	SD_ReadBlock
 4761              	.LVL537:
 4762 004a 8246     		mov	r10, r0
 4763              	.LVL538:
1234:drivers/bsp_f1xx_sdio.c **** 			buf += 512;
 4764              		.loc 1 1234 0 discriminator 3
 4765 004c 5A46     		mov	r2, fp
 4766 004e 4146     		mov	r1, r8
 4767 0050 2846     		mov	r0, r5
 4768 0052 FFF7FEFF 		bl	memcpy
 4769              	.LVL539:
1235:drivers/bsp_f1xx_sdio.c **** 		}
 4770              		.loc 1 1235 0 discriminator 3
 4771 0056 5D44     		add	r5, r5, fp
 4772              	.LVL540:
1232:drivers/bsp_f1xx_sdio.c **** 			sta = SD_ReadBlock(SDIO_DATA_BUFFER, lsector + 512 * n, 512);//Âçï‰∏™sectorÁöÑËØªÊìç‰Ωú
 4773              		.loc 1 1232 0 discriminator 3
 4774 0058 0134     		adds	r4, r4, #1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 117


 4775              	.LVL541:
 4776 005a E4B2     		uxtb	r4, r4
 4777              	.LVL542:
 4778              	.L412:
1232:drivers/bsp_f1xx_sdio.c **** 			sta = SD_ReadBlock(SDIO_DATA_BUFFER, lsector + 512 * n, 512);//Âçï‰∏™sectorÁöÑËØªÊìç‰Ωú
 4779              		.loc 1 1232 0 is_stmt 0 discriminator 1
 4780 005c 4C45     		cmp	r4, r9
 4781 005e E5D3     		bcc	.L414
 4782              	.LVL543:
 4783              	.L415:
1240:drivers/bsp_f1xx_sdio.c **** 	}
1241:drivers/bsp_f1xx_sdio.c **** 	return sta;
1242:drivers/bsp_f1xx_sdio.c **** }
 4784              		.loc 1 1242 0 is_stmt 1
 4785 0060 5046     		mov	r0, r10
 4786 0062 03B0     		add	sp, sp, #12
 4787              	.LCFI49:
 4788              		.cfi_remember_state
 4789              		.cfi_def_cfa_offset 36
 4790              		@ sp needed
 4791 0064 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4792              	.LVL544:
 4793              	.L417:
 4794              	.LCFI50:
 4795              		.cfi_restore_state
1232:drivers/bsp_f1xx_sdio.c **** 			sta = SD_ReadBlock(SDIO_DATA_BUFFER, lsector + 512 * n, 512);//Âçï‰∏™sectorÁöÑËØªÊìç‰Ωú
 4796              		.loc 1 1232 0
 4797 0068 0024     		movs	r4, #0
1227:drivers/bsp_f1xx_sdio.c **** 	long long lsector = sector;
 4798              		.loc 1 1227 0
 4799 006a A246     		mov	r10, r4
 4800 006c F6E7     		b	.L412
 4801              	.L420:
1238:drivers/bsp_f1xx_sdio.c **** 		else sta = SD_ReadMultiBlocks(buf, lsector, 512, cnt);//Â§ö‰∏™sector
 4802              		.loc 1 1238 0 discriminator 1
 4803 006e 4FF40073 		mov	r3, #512
 4804 0072 0093     		str	r3, [sp]
 4805 0074 3246     		mov	r2, r6
 4806              	.LVL545:
 4807 0076 3B46     		mov	r3, r7
 4808 0078 FFF7FEFF 		bl	SD_ReadBlock
 4809              	.LVL546:
 4810 007c 8246     		mov	r10, r0
 4811              	.LVL547:
 4812 007e EFE7     		b	.L415
 4813              	.L422:
 4814              		.align	2
 4815              	.L421:
 4816 0080 00000000 		.word	SDIO_DATA_BUFFER
 4817              		.cfi_endproc
 4818              	.LFE96:
 4820              		.section	.text.SD_WriteDisk,"ax",%progbits
 4821              		.align	1
 4822              		.global	SD_WriteDisk
 4823              		.syntax unified
 4824              		.thumb
 4825              		.thumb_func
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 118


 4826              		.fpu softvfp
 4828              	SD_WriteDisk:
 4829              	.LFB97:
1243:drivers/bsp_f1xx_sdio.c **** 
1244:drivers/bsp_f1xx_sdio.c **** //ÂÜôSDÂç°
1245:drivers/bsp_f1xx_sdio.c **** //buf:ÂÜôÊï∞ÊçÆÁºìÂ≠òÂå∫
1246:drivers/bsp_f1xx_sdio.c **** //sector:ÊâáÂå∫Âú∞ÂùÄ
1247:drivers/bsp_f1xx_sdio.c **** //cnt:ÊâáÂå∫‰∏™Êï∞
1248:drivers/bsp_f1xx_sdio.c **** //ËøîÂõûÂÄº:ÈîôËØØÁä∂ÊÄÅ;0,Ê≠£Â∏∏;ÂÖ∂‰ªñ,ÈîôËØØ‰ª£Á†Å;
1249:drivers/bsp_f1xx_sdio.c **** u8 SD_WriteDisk(u8 *buf, u32 sector, u8 cnt)
1250:drivers/bsp_f1xx_sdio.c **** {
 4830              		.loc 1 1250 0
 4831              		.cfi_startproc
 4832              		@ args = 0, pretend = 0, frame = 0
 4833              		@ frame_needed = 0, uses_anonymous_args = 0
 4834              	.LVL548:
 4835 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 4836              	.LCFI51:
 4837              		.cfi_def_cfa_offset 32
 4838              		.cfi_offset 4, -32
 4839              		.cfi_offset 5, -28
 4840              		.cfi_offset 6, -24
 4841              		.cfi_offset 7, -20
 4842              		.cfi_offset 8, -16
 4843              		.cfi_offset 9, -12
 4844              		.cfi_offset 10, -8
 4845              		.cfi_offset 14, -4
 4846 0004 82B0     		sub	sp, sp, #8
 4847              	.LCFI52:
 4848              		.cfi_def_cfa_offset 40
 4849 0006 0746     		mov	r7, r0
 4850 0008 9246     		mov	r10, r2
 4851              	.LVL549:
1251:drivers/bsp_f1xx_sdio.c **** 	u8 sta = SD_OK;
1252:drivers/bsp_f1xx_sdio.c **** 	u8 n;
1253:drivers/bsp_f1xx_sdio.c **** 	long long lsector = sector;
1254:drivers/bsp_f1xx_sdio.c **** 	lsector <<= 9;
 4852              		.loc 1 1254 0
 4853 000a 4FEAD159 		lsr	r9, r1, #23
 4854 000e 4FEA4128 		lsl	r8, r1, #9
 4855              	.LVL550:
1255:drivers/bsp_f1xx_sdio.c **** 	if ((u32) buf % 4 != 0) {
 4856              		.loc 1 1255 0
 4857 0012 10F0030F 		tst	r0, #3
 4858 0016 25D1     		bne	.L429
1256:drivers/bsp_f1xx_sdio.c **** 		for (n = 0; n < cnt; n++) {
1257:drivers/bsp_f1xx_sdio.c **** 			memcpy(SDIO_DATA_BUFFER, buf, 512);
1258:drivers/bsp_f1xx_sdio.c **** 			sta = SD_WriteBlock(SDIO_DATA_BUFFER, lsector + 512 * n, 512);//Âçï‰∏™sectorÁöÑÂÜôÊìç‰Ωú
1259:drivers/bsp_f1xx_sdio.c **** 			buf += 512;
1260:drivers/bsp_f1xx_sdio.c **** 		}
1261:drivers/bsp_f1xx_sdio.c **** 	} else {
1262:drivers/bsp_f1xx_sdio.c **** 		if (cnt == 1)sta = SD_WriteBlock(buf, lsector, 512);        //Âçï‰∏™sectorÁöÑÂÜôÊìç‰Ωú
 4859              		.loc 1 1262 0
 4860 0018 012A     		cmp	r2, #1
 4861 001a 26D0     		beq	.L432
1263:drivers/bsp_f1xx_sdio.c **** 		else sta = SD_WriteMultiBlocks(buf, lsector, 512, cnt);    //Â§ö‰∏™sector
 4862              		.loc 1 1263 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 119


 4863 001c 0192     		str	r2, [sp, #4]
 4864 001e 4FF40073 		mov	r3, #512
 4865 0022 0093     		str	r3, [sp]
 4866 0024 4246     		mov	r2, r8
 4867              	.LVL551:
 4868 0026 4B46     		mov	r3, r9
 4869 0028 FFF7FEFF 		bl	SD_WriteMultiBlocks
 4870              	.LVL552:
 4871 002c 17E0     		b	.L427
 4872              	.LVL553:
 4873              	.L426:
1257:drivers/bsp_f1xx_sdio.c **** 			sta = SD_WriteBlock(SDIO_DATA_BUFFER, lsector + 512 * n, 512);//Âçï‰∏™sectorÁöÑÂÜôÊìç‰Ωú
 4874              		.loc 1 1257 0 discriminator 3
 4875 002e 134D     		ldr	r5, .L433
 4876 0030 4FF40076 		mov	r6, #512
 4877 0034 3246     		mov	r2, r6
 4878 0036 3946     		mov	r1, r7
 4879 0038 2846     		mov	r0, r5
 4880              	.LVL554:
 4881 003a FFF7FEFF 		bl	memcpy
 4882              	.LVL555:
1258:drivers/bsp_f1xx_sdio.c **** 			buf += 512;
 4883              		.loc 1 1258 0 discriminator 3
 4884 003e 6202     		lsls	r2, r4, #9
 4885 0040 0096     		str	r6, [sp]
 4886 0042 18EB0200 		adds	r0, r8, r2
 4887 0046 49EBE271 		adc	r1, r9, r2, asr #31
 4888 004a 0246     		mov	r2, r0
 4889 004c 0B46     		mov	r3, r1
 4890 004e 2846     		mov	r0, r5
 4891 0050 FFF7FEFF 		bl	SD_WriteBlock
 4892              	.LVL556:
1259:drivers/bsp_f1xx_sdio.c **** 		}
 4893              		.loc 1 1259 0 discriminator 3
 4894 0054 3744     		add	r7, r7, r6
 4895              	.LVL557:
1256:drivers/bsp_f1xx_sdio.c **** 			memcpy(SDIO_DATA_BUFFER, buf, 512);
 4896              		.loc 1 1256 0 discriminator 3
 4897 0056 0134     		adds	r4, r4, #1
 4898              	.LVL558:
 4899 0058 E4B2     		uxtb	r4, r4
 4900              	.LVL559:
 4901              	.L424:
1256:drivers/bsp_f1xx_sdio.c **** 			memcpy(SDIO_DATA_BUFFER, buf, 512);
 4902              		.loc 1 1256 0 is_stmt 0 discriminator 1
 4903 005a 5445     		cmp	r4, r10
 4904 005c E7D3     		bcc	.L426
 4905              	.LVL560:
 4906              	.L427:
1264:drivers/bsp_f1xx_sdio.c **** 	}
1265:drivers/bsp_f1xx_sdio.c **** 	return sta;
1266:drivers/bsp_f1xx_sdio.c **** }
 4907              		.loc 1 1266 0 is_stmt 1
 4908 005e 02B0     		add	sp, sp, #8
 4909              	.LCFI53:
 4910              		.cfi_remember_state
 4911              		.cfi_def_cfa_offset 32
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 120


 4912              		@ sp needed
 4913 0060 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4914              	.LVL561:
 4915              	.L429:
 4916              	.LCFI54:
 4917              		.cfi_restore_state
1256:drivers/bsp_f1xx_sdio.c **** 			memcpy(SDIO_DATA_BUFFER, buf, 512);
 4918              		.loc 1 1256 0
 4919 0064 0024     		movs	r4, #0
1251:drivers/bsp_f1xx_sdio.c **** 	u8 n;
 4920              		.loc 1 1251 0
 4921 0066 2046     		mov	r0, r4
 4922              	.LVL562:
 4923 0068 F7E7     		b	.L424
 4924              	.LVL563:
 4925              	.L432:
1262:drivers/bsp_f1xx_sdio.c **** 		else sta = SD_WriteMultiBlocks(buf, lsector, 512, cnt);    //Â§ö‰∏™sector
 4926              		.loc 1 1262 0 discriminator 1
 4927 006a 4FF40073 		mov	r3, #512
 4928 006e 0093     		str	r3, [sp]
 4929 0070 4246     		mov	r2, r8
 4930              	.LVL564:
 4931 0072 4B46     		mov	r3, r9
 4932 0074 FFF7FEFF 		bl	SD_WriteBlock
 4933              	.LVL565:
 4934 0078 F1E7     		b	.L427
 4935              	.L434:
 4936 007a 00BF     		.align	2
 4937              	.L433:
 4938 007c 00000000 		.word	SDIO_DATA_BUFFER
 4939              		.cfi_endproc
 4940              	.LFE97:
 4942              		.comm	tempbuff,4,4
 4943              		.comm	SDIO_DATA_BUFFER,512,4
 4944              		.comm	SDCardInfo,88,8
 4945              		.global	TransferEnd
 4946              		.global	TransferError
 4947              		.section	.bss.CID_Tab,"aw",%nobits
 4948              		.align	2
 4949              		.set	.LANCHOR3,. + 0
 4952              	CID_Tab:
 4953 0000 00000000 		.space	16
 4953      00000000 
 4953      00000000 
 4953      00000000 
 4954              		.section	.bss.CSD_Tab,"aw",%nobits
 4955              		.align	2
 4956              		.set	.LANCHOR2,. + 0
 4959              	CSD_Tab:
 4960 0000 00000000 		.space	16
 4960      00000000 
 4960      00000000 
 4960      00000000 
 4961              		.section	.bss.CardType,"aw",%nobits
 4962              		.set	.LANCHOR0,. + 0
 4965              	CardType:
 4966 0000 00       		.space	1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 121


 4967              		.section	.bss.RCA,"aw",%nobits
 4968              		.align	2
 4969              		.set	.LANCHOR1,. + 0
 4972              	RCA:
 4973 0000 00000000 		.space	4
 4974              		.section	.bss.StopCondition,"aw",%nobits
 4975              		.set	.LANCHOR5,. + 0
 4978              	StopCondition:
 4979 0000 00       		.space	1
 4980              		.section	.bss.TransferEnd,"aw",%nobits
 4981              		.set	.LANCHOR7,. + 0
 4984              	TransferEnd:
 4985 0000 00       		.space	1
 4986              		.section	.bss.TransferError,"aw",%nobits
 4987              		.set	.LANCHOR6,. + 0
 4990              	TransferError:
 4991 0000 00       		.space	1
 4992              		.section	.data.DeviceMode,"aw",%progbits
 4993              		.set	.LANCHOR4,. + 0
 4996              	DeviceMode:
 4997 0000 01       		.byte	1
 4998              		.text
 4999              	.Letext0:
 5000              		.file 2 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/machine/_
 5001              		.file 3 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_stdi
 5002              		.file 4 "Inc/stm32f103xe.h"
 5003              		.file 5 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/lock.
 5004              		.file 6 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_type
 5005              		.file 7 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-7-2017-q4-major/lib/gcc/arm-none-eabi/7.2.1/inc
 5006              		.file 8 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/reent
 5007              		.file 9 "Inc/core_cm3.h"
 5008              		.file 10 "startup/inc/sys.h"
 5009              		.file 11 "tools/inc/malloc.h"
 5010              		.file 12 "tools/inc/tskmanager.h"
 5011              		.file 13 "drivers/inc/bsp_f1xx_sdio.h"
 5012              		.file 14 "<built-in>"
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 122


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bsp_f1xx_sdio.c
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:16     .text.SDIO_Clock_Set:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:23     .text.SDIO_Clock_Set:0000000000000000 SDIO_Clock_Set
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:49     .text.SDIO_Clock_Set:0000000000000010 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:54     .text.SDIO_Send_Cmd:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:61     .text.SDIO_Send_Cmd:0000000000000000 SDIO_Send_Cmd
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:106    .text.SDIO_Send_Cmd:0000000000000024 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:111    .text.SDIO_Send_Data_Cfg:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:118    .text.SDIO_Send_Data_Cfg:0000000000000000 SDIO_Send_Data_Cfg
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:166    .text.SDIO_Send_Data_Cfg:0000000000000028 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:171    .text.SD_PowerOFF:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:178    .text.SD_PowerOFF:0000000000000000 SD_PowerOFF
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:196    .text.SD_PowerOFF:0000000000000010 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:201    .text.SD_GetCardInfo:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:208    .text.SD_GetCardInfo:0000000000000000 SD_GetCardInfo
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:588    .text.SD_GetCardInfo:0000000000000234 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:596    .text.SD_SetDeviceMode:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:603    .text.SD_SetDeviceMode:0000000000000000 SD_SetDeviceMode
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:631    .text.SD_SetDeviceMode:0000000000000010 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:636    .text.CmdError:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:643    .text.CmdError:0000000000000000 CmdError
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:687    .text.CmdError:0000000000000028 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:692    .text.CmdResp7Error:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:699    .text.CmdResp7Error:0000000000000000 CmdResp7Error
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:762    .text.CmdResp7Error:0000000000000044 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:767    .text.CmdResp1Error:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:774    .text.CmdResp1Error:0000000000000000 CmdResp1Error
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:842    .text.CmdResp1Error:0000000000000044 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:847    .text.SD_SelectDeselect:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:854    .text.SD_SelectDeselect:0000000000000000 SD_SelectDeselect
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:883    .text.SD_ProcessIRQSrc:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:890    .text.SD_ProcessIRQSrc:0000000000000000 SD_ProcessIRQSrc
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1068   .text.SD_ProcessIRQSrc:0000000000000120 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1076   .text.SDIO_IRQHandler:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1083   .text.SDIO_IRQHandler:0000000000000000 SDIO_IRQHandler
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1103   .text.CmdResp3Error:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1110   .text.CmdResp3Error:0000000000000000 CmdResp3Error
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1151   .text.CmdResp3Error:000000000000002c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1156   .text.SD_PowerON:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1163   .text.SD_PowerON:0000000000000000 SD_PowerON
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1417   .text.SD_PowerON:000000000000012c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1424   .text.CmdResp2Error:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1431   .text.CmdResp2Error:0000000000000000 CmdResp2Error
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1501   .text.CmdResp2Error:000000000000004c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1506   .text.CmdResp6Error:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1513   .text.CmdResp6Error:0000000000000000 CmdResp6Error
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1626   .text.CmdResp6Error:0000000000000078 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1631   .text.SD_InitializeCards:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1638   .text.SD_InitializeCards:0000000000000000 SD_InitializeCards
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1809   .text.SD_InitializeCards:00000000000000d8 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1818   .text.IsCardProgramming:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1825   .text.IsCardProgramming:0000000000000000 IsCardProgramming
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1932   .text.IsCardProgramming:0000000000000084 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1938   .text.SD_SendStatus:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:1945   .text.SD_SendStatus:0000000000000000 SD_SendStatus
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2001   .text.SD_SendStatus:0000000000000030 $d
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 123


/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2007   .text.SD_GetState:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2014   .text.SD_GetState:0000000000000000 SD_GetState
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2056   .text.FindSCR:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2063   .text.FindSCR:0000000000000000 FindSCR
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2271   .text.FindSCR:0000000000000128 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2276   .text.SDEnWideBus:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2283   .text.SDEnWideBus:0000000000000000 SDEnWideBus
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2384   .text.SDEnWideBus:0000000000000068 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2390   .text.SD_EnableWideBusOperation:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2397   .text.SD_EnableWideBusOperation:0000000000000000 SD_EnableWideBusOperation
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2473   .text.SD_EnableWideBusOperation:000000000000004c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2480   .text.bsp_SD_Init:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2487   .text.bsp_SD_Init:0000000000000000 bsp_SD_Init
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2654   .text.bsp_SD_Init:00000000000000d0 $d
                            *COM*:0000000000000058 SDCardInfo
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2665   .text.convert_from_bytes_to_power_of_two:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2672   .text.convert_from_bytes_to_power_of_two:0000000000000000 convert_from_bytes_to_power_of_two
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2706   .text.SD_DMA_Config:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2713   .text.SD_DMA_Config:0000000000000000 SD_DMA_Config
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2789   .text.SD_DMA_Config:0000000000000068 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2796   .text.SD_ReadBlock:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:2803   .text.SD_ReadBlock:0000000000000000 SD_ReadBlock
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:3153   .text.SD_ReadBlock:00000000000001ec $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:3165   .text.SD_ReadMultiBlocks:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:3172   .text.SD_ReadMultiBlocks:0000000000000000 SD_ReadMultiBlocks
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:3576   .text.SD_ReadMultiBlocks:000000000000023c $d
                            *COM*:0000000000000004 tempbuff
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:3589   .text.SD_WriteBlock:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:3596   .text.SD_WriteBlock:0000000000000000 SD_WriteBlock
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4121   .text.SD_WriteBlock:00000000000002bc $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4133   .text.SD_WriteMultiBlocks:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4140   .text.SD_WriteMultiBlocks:0000000000000000 SD_WriteMultiBlocks
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4682   .text.SD_WriteMultiBlocks:00000000000002e4 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4694   .text.SD_ReadDisk:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4701   .text.SD_ReadDisk:0000000000000000 SD_ReadDisk
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4816   .text.SD_ReadDisk:0000000000000080 $d
                            *COM*:0000000000000200 SDIO_DATA_BUFFER
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4821   .text.SD_WriteDisk:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4828   .text.SD_WriteDisk:0000000000000000 SD_WriteDisk
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4938   .text.SD_WriteDisk:000000000000007c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4984   .bss.TransferEnd:0000000000000000 TransferEnd
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4990   .bss.TransferError:0000000000000000 TransferError
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4948   .bss.CID_Tab:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4952   .bss.CID_Tab:0000000000000000 CID_Tab
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4955   .bss.CSD_Tab:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4959   .bss.CSD_Tab:0000000000000000 CSD_Tab
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4965   .bss.CardType:0000000000000000 CardType
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4966   .bss.CardType:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4968   .bss.RCA:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4972   .bss.RCA:0000000000000000 RCA
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4978   .bss.StopCondition:0000000000000000 StopCondition
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4979   .bss.StopCondition:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4985   .bss.TransferEnd:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4991   .bss.TransferError:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s:4996   .data.DeviceMode:0000000000000000 DeviceMode

UNDEFINED SYMBOLS
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccQ7tbjn.s 			page 124


MY_NVIC_Init
INTX_DISABLE
INTX_ENABLE
memcpy

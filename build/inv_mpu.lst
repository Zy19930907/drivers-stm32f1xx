ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"inv_mpu.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.global	__aeabi_fmul
  16              		.section	.text.get_accel_prod_shift,"ax",%progbits
  17              		.align	1
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	get_accel_prod_shift:
  24              	.LFB98:
  25              		.file 1 "Modules/mpu6050/inv_mpu.c"
   1:Modules/mpu6050/inv_mpu.c **** //
   2:Modules/mpu6050/inv_mpu.c **** // Created by 周洋 on 2020/5/8.
   3:Modules/mpu6050/inv_mpu.c **** //
   4:Modules/mpu6050/inv_mpu.c **** 
   5:Modules/mpu6050/inv_mpu.c **** #include "inv_mpu.h"
   6:Modules/mpu6050/inv_mpu.c **** 
   7:Modules/mpu6050/inv_mpu.c **** /*
   8:Modules/mpu6050/inv_mpu.c ****  $License:
   9:Modules/mpu6050/inv_mpu.c ****     Copyright (C) 2011-2012 InvenSense Corporation, All Rights Reserved.
  10:Modules/mpu6050/inv_mpu.c ****     See included License.txt for License information.
  11:Modules/mpu6050/inv_mpu.c ****  $
  12:Modules/mpu6050/inv_mpu.c ****  */
  13:Modules/mpu6050/inv_mpu.c **** /**
  14:Modules/mpu6050/inv_mpu.c ****  *  @addtogroup  DRIVERS Sensor Driver Layer
  15:Modules/mpu6050/inv_mpu.c ****  *  @brief       Hardware drivers to communicate with sensors via I2C.
  16:Modules/mpu6050/inv_mpu.c ****  *
  17:Modules/mpu6050/inv_mpu.c ****  *  @{
  18:Modules/mpu6050/inv_mpu.c ****  *      @file       inv_mpu.c
  19:Modules/mpu6050/inv_mpu.c ****  *      @brief      An I2C-based driver for Invensense gyroscopes.
  20:Modules/mpu6050/inv_mpu.c ****  *      @details    This driver currently works for the following devices:
  21:Modules/mpu6050/inv_mpu.c ****  *                  MPU6050
  22:Modules/mpu6050/inv_mpu.c ****  *                  MPU6500
  23:Modules/mpu6050/inv_mpu.c ****  *                  MPU9150 (or MPU6050 w/ AK8975 on the auxiliary bus)
  24:Modules/mpu6050/inv_mpu.c ****  *                  MPU9250 (or MPU6500 w/ AK8963 on the auxiliary bus)
  25:Modules/mpu6050/inv_mpu.c ****  */
  26:Modules/mpu6050/inv_mpu.c **** #include <stdio.h>
  27:Modules/mpu6050/inv_mpu.c **** #include <stdint.h>
  28:Modules/mpu6050/inv_mpu.c **** #include <stdlib.h>
  29:Modules/mpu6050/inv_mpu.c **** #include <string.h>
  30:Modules/mpu6050/inv_mpu.c **** #include <math.h>
  31:Modules/mpu6050/inv_mpu.c **** #include "inv_mpu_dmp_motion_driver.h"
  32:Modules/mpu6050/inv_mpu.c **** #include "mod_mpu6050.h"
  33:Modules/mpu6050/inv_mpu.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 2


  34:Modules/mpu6050/inv_mpu.c **** 
  35:Modules/mpu6050/inv_mpu.c **** #define MPU6050							//定义我们使用的传感器为MPU6050
  36:Modules/mpu6050/inv_mpu.c **** #define MOTION_DRIVER_TARGET_MSP430		//定义驱动部分,采用MSP430的驱动(移植到STM32F1)
  37:Modules/mpu6050/inv_mpu.c **** 
  38:Modules/mpu6050/inv_mpu.c **** /* The following functions must be defined for this platform:
  39:Modules/mpu6050/inv_mpu.c ****  * i2c_write(unsigned char slave_addr, unsigned char reg_addr,
  40:Modules/mpu6050/inv_mpu.c ****  *      unsigned char length, unsigned char const *data)
  41:Modules/mpu6050/inv_mpu.c ****  * i2c_read(unsigned char slave_addr, unsigned char reg_addr,
  42:Modules/mpu6050/inv_mpu.c ****  *      unsigned char length, unsigned char *data)
  43:Modules/mpu6050/inv_mpu.c ****  * delay_ms(unsigned long num_ms)
  44:Modules/mpu6050/inv_mpu.c ****  * get_ms(unsigned long *count)
  45:Modules/mpu6050/inv_mpu.c ****  * reg_int_cb(void (*cb)(void), unsigned char port, unsigned char pin)
  46:Modules/mpu6050/inv_mpu.c ****  * labs(long x)
  47:Modules/mpu6050/inv_mpu.c ****  * fabsf(float x)
  48:Modules/mpu6050/inv_mpu.c ****  * min(int a, int b)
  49:Modules/mpu6050/inv_mpu.c ****  */
  50:Modules/mpu6050/inv_mpu.c **** #if defined MOTION_DRIVER_TARGET_MSP430
  51:Modules/mpu6050/inv_mpu.c **** //#include "msp430.h"
  52:Modules/mpu6050/inv_mpu.c **** //#include "msp430_i2c.h"
  53:Modules/mpu6050/inv_mpu.c **** //#include "msp430_clock.h"
  54:Modules/mpu6050/inv_mpu.c **** //#include "msp430_interrupt.h"
  55:Modules/mpu6050/inv_mpu.c **** 
  56:Modules/mpu6050/inv_mpu.c **** #define i2c_write	mod_Mpu_Write
  57:Modules/mpu6050/inv_mpu.c **** #define i2c_read    mod_Mpu_Read
  58:Modules/mpu6050/inv_mpu.c **** #define delay_ms    delay_ms
  59:Modules/mpu6050/inv_mpu.c **** #define get_ms      mget_ms
  60:Modules/mpu6050/inv_mpu.c **** //static inline int reg_int_cb(struct int_param_s *int_param)
  61:Modules/mpu6050/inv_mpu.c **** //{
  62:Modules/mpu6050/inv_mpu.c **** //    return msp430_reg_int_cb(int_param->cb, int_param->pin, int_param->lp_exit,
  63:Modules/mpu6050/inv_mpu.c **** //        int_param->active_low);
  64:Modules/mpu6050/inv_mpu.c **** //}
  65:Modules/mpu6050/inv_mpu.c **** #define log_i 	printf	//打印信息
  66:Modules/mpu6050/inv_mpu.c **** #define log_e  	printf	//打印信息
  67:Modules/mpu6050/inv_mpu.c **** /* labs is already defined by TI's toolchain. */
  68:Modules/mpu6050/inv_mpu.c **** /* fabs is for doubles. fabsf is for floats. */
  69:Modules/mpu6050/inv_mpu.c **** #define fabs        fabsf
  70:Modules/mpu6050/inv_mpu.c **** #define min(a,b) ((a<b)?a:b)
  71:Modules/mpu6050/inv_mpu.c **** #elif defined EMPL_TARGET_MSP430
  72:Modules/mpu6050/inv_mpu.c **** #include "msp430.h"
  73:Modules/mpu6050/inv_mpu.c **** #include "msp430_i2c.h"
  74:Modules/mpu6050/inv_mpu.c **** #include "msp430_clock.h"
  75:Modules/mpu6050/inv_mpu.c **** #include "msp430_interrupt.h"
  76:Modules/mpu6050/inv_mpu.c **** #include "log.h"
  77:Modules/mpu6050/inv_mpu.c **** #define i2c_write   msp430_i2c_write
  78:Modules/mpu6050/inv_mpu.c **** #define i2c_read    msp430_i2c_read
  79:Modules/mpu6050/inv_mpu.c **** #define delay_ms    msp430_delay_ms
  80:Modules/mpu6050/inv_mpu.c **** #define get_ms      msp430_get_clock_ms
  81:Modules/mpu6050/inv_mpu.c **** static inline int reg_int_cb(struct int_param_s *int_param)
  82:Modules/mpu6050/inv_mpu.c **** {
  83:Modules/mpu6050/inv_mpu.c ****     return msp430_reg_int_cb(int_param->cb, int_param->pin, int_param->lp_exit,
  84:Modules/mpu6050/inv_mpu.c ****         int_param->active_low);
  85:Modules/mpu6050/inv_mpu.c **** }
  86:Modules/mpu6050/inv_mpu.c **** #define log_i       MPL_LOGI
  87:Modules/mpu6050/inv_mpu.c **** #define log_e       MPL_LOGE
  88:Modules/mpu6050/inv_mpu.c **** /* labs is already defined by TI's toolchain. */
  89:Modules/mpu6050/inv_mpu.c **** /* fabs is for doubles. fabsf is for floats. */
  90:Modules/mpu6050/inv_mpu.c **** #define fabs        fabsf
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 3


  91:Modules/mpu6050/inv_mpu.c **** #define min(a,b) ((a<b)?a:b)
  92:Modules/mpu6050/inv_mpu.c **** #elif defined EMPL_TARGET_UC3L0
  93:Modules/mpu6050/inv_mpu.c **** /* Instead of using the standard TWI driver from the ASF library, we're using
  94:Modules/mpu6050/inv_mpu.c ****  * a TWI driver that follows the slave address + register address convention.
  95:Modules/mpu6050/inv_mpu.c ****  */
  96:Modules/mpu6050/inv_mpu.c **** #include "twi.h"
  97:Modules/mpu6050/inv_mpu.c **** #include "delay.h"
  98:Modules/mpu6050/inv_mpu.c **** #include "sysclk.h"
  99:Modules/mpu6050/inv_mpu.c **** #include "log.h"
 100:Modules/mpu6050/inv_mpu.c **** #include "sensors_xplained.h"
 101:Modules/mpu6050/inv_mpu.c **** #include "uc3l0_clock.h"
 102:Modules/mpu6050/inv_mpu.c **** #define i2c_write(a, b, c, d)   twi_write(a, b, d, c)
 103:Modules/mpu6050/inv_mpu.c **** #define i2c_read(a, b, c, d)    twi_read(a, b, d, c)
 104:Modules/mpu6050/inv_mpu.c **** /* delay_ms is a function already defined in ASF. */
 105:Modules/mpu6050/inv_mpu.c **** #define get_ms  uc3l0_get_clock_ms
 106:Modules/mpu6050/inv_mpu.c **** static inline int reg_int_cb(struct int_param_s *int_param)
 107:Modules/mpu6050/inv_mpu.c **** {
 108:Modules/mpu6050/inv_mpu.c ****     sensor_board_irq_connect(int_param->pin, int_param->cb, int_param->arg);
 109:Modules/mpu6050/inv_mpu.c ****     return 0;
 110:Modules/mpu6050/inv_mpu.c **** }
 111:Modules/mpu6050/inv_mpu.c **** #define log_i       MPL_LOGI
 112:Modules/mpu6050/inv_mpu.c **** #define log_e       MPL_LOGE
 113:Modules/mpu6050/inv_mpu.c **** /* UC3 is a 32-bit processor, so abs and labs are equivalent. */
 114:Modules/mpu6050/inv_mpu.c **** #define labs        abs
 115:Modules/mpu6050/inv_mpu.c **** #define fabs(x)     (((x)>0)?(x):-(x))
 116:Modules/mpu6050/inv_mpu.c **** #else
 117:Modules/mpu6050/inv_mpu.c **** #error  Gyro driver is missing the system layer implementations.
 118:Modules/mpu6050/inv_mpu.c **** #endif
 119:Modules/mpu6050/inv_mpu.c **** 
 120:Modules/mpu6050/inv_mpu.c **** #if !defined MPU6050 && !defined MPU9150 && !defined MPU6500 && !defined MPU9250
 121:Modules/mpu6050/inv_mpu.c **** #error  Which gyro are you using? Define MPUxxxx in your compiler options.
 122:Modules/mpu6050/inv_mpu.c **** #endif
 123:Modules/mpu6050/inv_mpu.c **** 
 124:Modules/mpu6050/inv_mpu.c **** /* Time for some messy macro work. =]
 125:Modules/mpu6050/inv_mpu.c ****  * #define MPU9150
 126:Modules/mpu6050/inv_mpu.c ****  * is equivalent to..
 127:Modules/mpu6050/inv_mpu.c ****  * #define MPU6050
 128:Modules/mpu6050/inv_mpu.c ****  * #define AK8975_SECONDARY
 129:Modules/mpu6050/inv_mpu.c ****  *
 130:Modules/mpu6050/inv_mpu.c ****  * #define MPU9250
 131:Modules/mpu6050/inv_mpu.c ****  * is equivalent to..
 132:Modules/mpu6050/inv_mpu.c ****  * #define MPU6500
 133:Modules/mpu6050/inv_mpu.c ****  * #define AK8963_SECONDARY
 134:Modules/mpu6050/inv_mpu.c ****  */
 135:Modules/mpu6050/inv_mpu.c **** #if defined MPU9150
 136:Modules/mpu6050/inv_mpu.c **** #ifndef MPU6050
 137:Modules/mpu6050/inv_mpu.c **** #define MPU6050
 138:Modules/mpu6050/inv_mpu.c **** #endif                          /* #ifndef MPU6050 */
 139:Modules/mpu6050/inv_mpu.c **** #if defined AK8963_SECONDARY
 140:Modules/mpu6050/inv_mpu.c **** #error "MPU9150 and AK8963_SECONDARY cannot both be defined."
 141:Modules/mpu6050/inv_mpu.c **** #elif !defined AK8975_SECONDARY /* #if defined AK8963_SECONDARY */
 142:Modules/mpu6050/inv_mpu.c **** #define AK8975_SECONDARY
 143:Modules/mpu6050/inv_mpu.c **** #endif                          /* #if defined AK8963_SECONDARY */
 144:Modules/mpu6050/inv_mpu.c **** #elif defined MPU9250           /* #if defined MPU9150 */
 145:Modules/mpu6050/inv_mpu.c **** #ifndef MPU6500
 146:Modules/mpu6050/inv_mpu.c **** #define MPU6500
 147:Modules/mpu6050/inv_mpu.c **** #endif                          /* #ifndef MPU6500 */
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 4


 148:Modules/mpu6050/inv_mpu.c **** #if defined AK8975_SECONDARY
 149:Modules/mpu6050/inv_mpu.c **** #error "MPU9250 and AK8975_SECONDARY cannot both be defined."
 150:Modules/mpu6050/inv_mpu.c **** #elif !defined AK8963_SECONDARY /* #if defined AK8975_SECONDARY */
 151:Modules/mpu6050/inv_mpu.c **** #define AK8963_SECONDARY
 152:Modules/mpu6050/inv_mpu.c **** #endif                          /* #if defined AK8975_SECONDARY */
 153:Modules/mpu6050/inv_mpu.c **** #endif                          /* #if defined MPU9150 */
 154:Modules/mpu6050/inv_mpu.c **** 
 155:Modules/mpu6050/inv_mpu.c **** #if defined AK8975_SECONDARY || defined AK8963_SECONDARY
 156:Modules/mpu6050/inv_mpu.c **** #define AK89xx_SECONDARY
 157:Modules/mpu6050/inv_mpu.c **** #else
 158:Modules/mpu6050/inv_mpu.c **** /* #warning "No compass = less profit for Invensense. Lame." */
 159:Modules/mpu6050/inv_mpu.c **** #endif
 160:Modules/mpu6050/inv_mpu.c **** 
 161:Modules/mpu6050/inv_mpu.c **** static int set_int_enable(unsigned char enable);
 162:Modules/mpu6050/inv_mpu.c **** 
 163:Modules/mpu6050/inv_mpu.c **** /* Hardware registers needed by driver. */
 164:Modules/mpu6050/inv_mpu.c **** struct gyro_reg_s {
 165:Modules/mpu6050/inv_mpu.c **** 	unsigned char who_am_i;
 166:Modules/mpu6050/inv_mpu.c **** 	unsigned char rate_div;
 167:Modules/mpu6050/inv_mpu.c **** 	unsigned char lpf;
 168:Modules/mpu6050/inv_mpu.c **** 	unsigned char prod_id;
 169:Modules/mpu6050/inv_mpu.c **** 	unsigned char user_ctrl;
 170:Modules/mpu6050/inv_mpu.c **** 	unsigned char fifo_en;
 171:Modules/mpu6050/inv_mpu.c **** 	unsigned char gyro_cfg;
 172:Modules/mpu6050/inv_mpu.c **** 	unsigned char accel_cfg;
 173:Modules/mpu6050/inv_mpu.c **** //    unsigned char accel_cfg2;
 174:Modules/mpu6050/inv_mpu.c **** //    unsigned char lp_accel_odr;
 175:Modules/mpu6050/inv_mpu.c **** 	unsigned char motion_thr;
 176:Modules/mpu6050/inv_mpu.c **** 	unsigned char motion_dur;
 177:Modules/mpu6050/inv_mpu.c **** 	unsigned char fifo_count_h;
 178:Modules/mpu6050/inv_mpu.c **** 	unsigned char fifo_r_w;
 179:Modules/mpu6050/inv_mpu.c **** 	unsigned char raw_gyro;
 180:Modules/mpu6050/inv_mpu.c **** 	unsigned char raw_accel;
 181:Modules/mpu6050/inv_mpu.c **** 	unsigned char temp;
 182:Modules/mpu6050/inv_mpu.c **** 	unsigned char int_enable;
 183:Modules/mpu6050/inv_mpu.c **** 	unsigned char dmp_int_status;
 184:Modules/mpu6050/inv_mpu.c **** 	unsigned char int_status;
 185:Modules/mpu6050/inv_mpu.c **** //    unsigned char accel_intel;
 186:Modules/mpu6050/inv_mpu.c **** 	unsigned char pwr_mgmt_1;
 187:Modules/mpu6050/inv_mpu.c **** 	unsigned char pwr_mgmt_2;
 188:Modules/mpu6050/inv_mpu.c **** 	unsigned char int_pin_cfg;
 189:Modules/mpu6050/inv_mpu.c **** 	unsigned char mem_r_w;
 190:Modules/mpu6050/inv_mpu.c **** 	unsigned char accel_offs;
 191:Modules/mpu6050/inv_mpu.c **** 	unsigned char i2c_mst;
 192:Modules/mpu6050/inv_mpu.c **** 	unsigned char bank_sel;
 193:Modules/mpu6050/inv_mpu.c **** 	unsigned char mem_start_addr;
 194:Modules/mpu6050/inv_mpu.c **** 	unsigned char prgm_start_h;
 195:Modules/mpu6050/inv_mpu.c **** #if defined AK89xx_SECONDARY
 196:Modules/mpu6050/inv_mpu.c **** 	unsigned char s0_addr;
 197:Modules/mpu6050/inv_mpu.c ****     unsigned char s0_reg;
 198:Modules/mpu6050/inv_mpu.c ****     unsigned char s0_ctrl;
 199:Modules/mpu6050/inv_mpu.c ****     unsigned char s1_addr;
 200:Modules/mpu6050/inv_mpu.c ****     unsigned char s1_reg;
 201:Modules/mpu6050/inv_mpu.c ****     unsigned char s1_ctrl;
 202:Modules/mpu6050/inv_mpu.c ****     unsigned char s4_ctrl;
 203:Modules/mpu6050/inv_mpu.c ****     unsigned char s0_do;
 204:Modules/mpu6050/inv_mpu.c ****     unsigned char s1_do;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 5


 205:Modules/mpu6050/inv_mpu.c ****     unsigned char i2c_delay_ctrl;
 206:Modules/mpu6050/inv_mpu.c ****     unsigned char raw_compass;
 207:Modules/mpu6050/inv_mpu.c ****     /* The I2C_MST_VDDIO bit is in this register. */
 208:Modules/mpu6050/inv_mpu.c ****     unsigned char yg_offs_tc;
 209:Modules/mpu6050/inv_mpu.c **** #endif
 210:Modules/mpu6050/inv_mpu.c **** };
 211:Modules/mpu6050/inv_mpu.c **** 
 212:Modules/mpu6050/inv_mpu.c **** /* Information specific to a particular device. */
 213:Modules/mpu6050/inv_mpu.c **** struct hw_s {
 214:Modules/mpu6050/inv_mpu.c **** 	unsigned char addr;
 215:Modules/mpu6050/inv_mpu.c **** 	unsigned short max_fifo;
 216:Modules/mpu6050/inv_mpu.c **** 	unsigned char num_reg;
 217:Modules/mpu6050/inv_mpu.c **** 	unsigned short temp_sens;
 218:Modules/mpu6050/inv_mpu.c **** 	short temp_offset;
 219:Modules/mpu6050/inv_mpu.c **** 	unsigned short bank_size;
 220:Modules/mpu6050/inv_mpu.c **** #if defined AK89xx_SECONDARY
 221:Modules/mpu6050/inv_mpu.c **** 	unsigned short compass_fsr;
 222:Modules/mpu6050/inv_mpu.c **** #endif
 223:Modules/mpu6050/inv_mpu.c **** };
 224:Modules/mpu6050/inv_mpu.c **** 
 225:Modules/mpu6050/inv_mpu.c **** /* When entering motion interrupt mode, the driver keeps track of the
 226:Modules/mpu6050/inv_mpu.c ****  * previous state so that it can be restored at a later time.
 227:Modules/mpu6050/inv_mpu.c ****  */
 228:Modules/mpu6050/inv_mpu.c **** struct motion_int_cache_s {
 229:Modules/mpu6050/inv_mpu.c **** 	unsigned short gyro_fsr;
 230:Modules/mpu6050/inv_mpu.c **** 	unsigned char accel_fsr;
 231:Modules/mpu6050/inv_mpu.c **** 	unsigned short lpf;
 232:Modules/mpu6050/inv_mpu.c **** 	unsigned short sample_rate;
 233:Modules/mpu6050/inv_mpu.c **** 	unsigned char sensors_on;
 234:Modules/mpu6050/inv_mpu.c **** 	unsigned char fifo_sensors;
 235:Modules/mpu6050/inv_mpu.c **** 	unsigned char dmp_on;
 236:Modules/mpu6050/inv_mpu.c **** };
 237:Modules/mpu6050/inv_mpu.c **** 
 238:Modules/mpu6050/inv_mpu.c **** /* Cached chip configuration data.
 239:Modules/mpu6050/inv_mpu.c ****  */
 240:Modules/mpu6050/inv_mpu.c **** struct chip_cfg_s {
 241:Modules/mpu6050/inv_mpu.c **** 	/* Matches gyro_cfg >> 3 & 0x03 */
 242:Modules/mpu6050/inv_mpu.c **** 	unsigned char gyro_fsr;
 243:Modules/mpu6050/inv_mpu.c **** 	/* Matches accel_cfg >> 3 & 0x03 */
 244:Modules/mpu6050/inv_mpu.c **** 	unsigned char accel_fsr;
 245:Modules/mpu6050/inv_mpu.c **** 	/* Enabled sensors. Uses same masks as fifo_en, NOT pwr_mgmt_2. */
 246:Modules/mpu6050/inv_mpu.c **** 	unsigned char sensors;
 247:Modules/mpu6050/inv_mpu.c **** 	/* Matches config register. */
 248:Modules/mpu6050/inv_mpu.c **** 	unsigned char lpf;
 249:Modules/mpu6050/inv_mpu.c **** 	unsigned char clk_src;
 250:Modules/mpu6050/inv_mpu.c **** 	/* Sample rate, NOT rate divider. */
 251:Modules/mpu6050/inv_mpu.c **** 	unsigned short sample_rate;
 252:Modules/mpu6050/inv_mpu.c **** 	/* Matches fifo_en register. */
 253:Modules/mpu6050/inv_mpu.c **** 	unsigned char fifo_enable;
 254:Modules/mpu6050/inv_mpu.c **** 	/* Matches int enable register. */
 255:Modules/mpu6050/inv_mpu.c **** 	unsigned char int_enable;
 256:Modules/mpu6050/inv_mpu.c **** 	/* 1 if devices on auxiliary I2C bus appear on the primary. */
 257:Modules/mpu6050/inv_mpu.c **** 	unsigned char bypass_mode;
 258:Modules/mpu6050/inv_mpu.c **** 	/* 1 if half-sensitivity.
 259:Modules/mpu6050/inv_mpu.c **** 	 * NOTE: This doesn't belong here, but everything else in hw_s is const,
 260:Modules/mpu6050/inv_mpu.c **** 	 * and this allows us to save some precious RAM.
 261:Modules/mpu6050/inv_mpu.c **** 	 */
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 6


 262:Modules/mpu6050/inv_mpu.c **** 	unsigned char accel_half;
 263:Modules/mpu6050/inv_mpu.c **** 	/* 1 if device in low-power accel-only mode. */
 264:Modules/mpu6050/inv_mpu.c **** 	unsigned char lp_accel_mode;
 265:Modules/mpu6050/inv_mpu.c **** 	/* 1 if interrupts are only triggered on motion events. */
 266:Modules/mpu6050/inv_mpu.c **** 	unsigned char int_motion_only;
 267:Modules/mpu6050/inv_mpu.c **** 	struct motion_int_cache_s cache;
 268:Modules/mpu6050/inv_mpu.c **** 	/* 1 for active low interrupts. */
 269:Modules/mpu6050/inv_mpu.c **** 	unsigned char active_low_int;
 270:Modules/mpu6050/inv_mpu.c **** 	/* 1 for latched interrupts. */
 271:Modules/mpu6050/inv_mpu.c **** 	unsigned char latched_int;
 272:Modules/mpu6050/inv_mpu.c **** 	/* 1 if DMP is enabled. */
 273:Modules/mpu6050/inv_mpu.c **** 	unsigned char dmp_on;
 274:Modules/mpu6050/inv_mpu.c **** 	/* Ensures that DMP will only be loaded once. */
 275:Modules/mpu6050/inv_mpu.c **** 	unsigned char dmp_loaded;
 276:Modules/mpu6050/inv_mpu.c **** 	/* Sampling rate used when DMP is enabled. */
 277:Modules/mpu6050/inv_mpu.c **** 	unsigned short dmp_sample_rate;
 278:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 279:Modules/mpu6050/inv_mpu.c **** 	/* Compass sample rate. */
 280:Modules/mpu6050/inv_mpu.c ****     unsigned short compass_sample_rate;
 281:Modules/mpu6050/inv_mpu.c ****     unsigned char compass_addr;
 282:Modules/mpu6050/inv_mpu.c ****     short mag_sens_adj[3];
 283:Modules/mpu6050/inv_mpu.c **** #endif
 284:Modules/mpu6050/inv_mpu.c **** };
 285:Modules/mpu6050/inv_mpu.c **** 
 286:Modules/mpu6050/inv_mpu.c **** /* Information for self-test. */
 287:Modules/mpu6050/inv_mpu.c **** struct test_s {
 288:Modules/mpu6050/inv_mpu.c **** 	unsigned long gyro_sens;
 289:Modules/mpu6050/inv_mpu.c **** 	unsigned long accel_sens;
 290:Modules/mpu6050/inv_mpu.c **** 	unsigned char reg_rate_div;
 291:Modules/mpu6050/inv_mpu.c **** 	unsigned char reg_lpf;
 292:Modules/mpu6050/inv_mpu.c **** 	unsigned char reg_gyro_fsr;
 293:Modules/mpu6050/inv_mpu.c **** 	unsigned char reg_accel_fsr;
 294:Modules/mpu6050/inv_mpu.c **** 	unsigned short wait_ms;
 295:Modules/mpu6050/inv_mpu.c **** 	unsigned char packet_thresh;
 296:Modules/mpu6050/inv_mpu.c **** 	float min_dps;
 297:Modules/mpu6050/inv_mpu.c **** 	float max_dps;
 298:Modules/mpu6050/inv_mpu.c **** 	float max_gyro_var;
 299:Modules/mpu6050/inv_mpu.c **** 	float min_g;
 300:Modules/mpu6050/inv_mpu.c **** 	float max_g;
 301:Modules/mpu6050/inv_mpu.c **** 	float max_accel_var;
 302:Modules/mpu6050/inv_mpu.c **** };
 303:Modules/mpu6050/inv_mpu.c **** 
 304:Modules/mpu6050/inv_mpu.c **** /* Gyro driver state variables. */
 305:Modules/mpu6050/inv_mpu.c **** struct gyro_state_s {
 306:Modules/mpu6050/inv_mpu.c **** 	const struct gyro_reg_s *reg;
 307:Modules/mpu6050/inv_mpu.c **** 	const struct hw_s *hw;
 308:Modules/mpu6050/inv_mpu.c **** 	struct chip_cfg_s chip_cfg;
 309:Modules/mpu6050/inv_mpu.c **** 	const struct test_s *test;
 310:Modules/mpu6050/inv_mpu.c **** };
 311:Modules/mpu6050/inv_mpu.c **** 
 312:Modules/mpu6050/inv_mpu.c **** /* Filter configurations. */
 313:Modules/mpu6050/inv_mpu.c **** enum lpf_e {
 314:Modules/mpu6050/inv_mpu.c **** 	INV_FILTER_256HZ_NOLPF2 = 0,
 315:Modules/mpu6050/inv_mpu.c **** 	INV_FILTER_188HZ,
 316:Modules/mpu6050/inv_mpu.c **** 	INV_FILTER_98HZ,
 317:Modules/mpu6050/inv_mpu.c **** 	INV_FILTER_42HZ,
 318:Modules/mpu6050/inv_mpu.c **** 	INV_FILTER_20HZ,
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 7


 319:Modules/mpu6050/inv_mpu.c **** 	INV_FILTER_10HZ,
 320:Modules/mpu6050/inv_mpu.c **** 	INV_FILTER_5HZ,
 321:Modules/mpu6050/inv_mpu.c **** 	INV_FILTER_2100HZ_NOLPF,
 322:Modules/mpu6050/inv_mpu.c **** 	NUM_FILTER
 323:Modules/mpu6050/inv_mpu.c **** };
 324:Modules/mpu6050/inv_mpu.c **** 
 325:Modules/mpu6050/inv_mpu.c **** /* Full scale ranges. */
 326:Modules/mpu6050/inv_mpu.c **** enum gyro_fsr_e {
 327:Modules/mpu6050/inv_mpu.c **** 	INV_FSR_250DPS = 0,
 328:Modules/mpu6050/inv_mpu.c **** 	INV_FSR_500DPS,
 329:Modules/mpu6050/inv_mpu.c **** 	INV_FSR_1000DPS,
 330:Modules/mpu6050/inv_mpu.c **** 	INV_FSR_2000DPS,
 331:Modules/mpu6050/inv_mpu.c **** 	NUM_GYRO_FSR
 332:Modules/mpu6050/inv_mpu.c **** };
 333:Modules/mpu6050/inv_mpu.c **** 
 334:Modules/mpu6050/inv_mpu.c **** /* Full scale ranges. */
 335:Modules/mpu6050/inv_mpu.c **** enum accel_fsr_e {
 336:Modules/mpu6050/inv_mpu.c **** 	INV_FSR_2G = 0,
 337:Modules/mpu6050/inv_mpu.c **** 	INV_FSR_4G,
 338:Modules/mpu6050/inv_mpu.c **** 	INV_FSR_8G,
 339:Modules/mpu6050/inv_mpu.c **** 	INV_FSR_16G,
 340:Modules/mpu6050/inv_mpu.c **** 	NUM_ACCEL_FSR
 341:Modules/mpu6050/inv_mpu.c **** };
 342:Modules/mpu6050/inv_mpu.c **** 
 343:Modules/mpu6050/inv_mpu.c **** /* Clock sources. */
 344:Modules/mpu6050/inv_mpu.c **** enum clock_sel_e {
 345:Modules/mpu6050/inv_mpu.c **** 	INV_CLK_INTERNAL = 0,
 346:Modules/mpu6050/inv_mpu.c **** 	INV_CLK_PLL,
 347:Modules/mpu6050/inv_mpu.c **** 	NUM_CLK
 348:Modules/mpu6050/inv_mpu.c **** };
 349:Modules/mpu6050/inv_mpu.c **** 
 350:Modules/mpu6050/inv_mpu.c **** /* Low-power accel wakeup rates. */
 351:Modules/mpu6050/inv_mpu.c **** enum lp_accel_rate_e {
 352:Modules/mpu6050/inv_mpu.c **** #if defined MPU6050
 353:Modules/mpu6050/inv_mpu.c **** 	INV_LPA_1_25HZ,
 354:Modules/mpu6050/inv_mpu.c **** 	INV_LPA_5HZ,
 355:Modules/mpu6050/inv_mpu.c **** 	INV_LPA_20HZ,
 356:Modules/mpu6050/inv_mpu.c **** 	INV_LPA_40HZ
 357:Modules/mpu6050/inv_mpu.c **** #elif defined MPU6500
 358:Modules/mpu6050/inv_mpu.c **** 	INV_LPA_0_3125HZ,
 359:Modules/mpu6050/inv_mpu.c ****     INV_LPA_0_625HZ,
 360:Modules/mpu6050/inv_mpu.c ****     INV_LPA_1_25HZ,
 361:Modules/mpu6050/inv_mpu.c ****     INV_LPA_2_5HZ,
 362:Modules/mpu6050/inv_mpu.c ****     INV_LPA_5HZ,
 363:Modules/mpu6050/inv_mpu.c ****     INV_LPA_10HZ,
 364:Modules/mpu6050/inv_mpu.c ****     INV_LPA_20HZ,
 365:Modules/mpu6050/inv_mpu.c ****     INV_LPA_40HZ,
 366:Modules/mpu6050/inv_mpu.c ****     INV_LPA_80HZ,
 367:Modules/mpu6050/inv_mpu.c ****     INV_LPA_160HZ,
 368:Modules/mpu6050/inv_mpu.c ****     INV_LPA_320HZ,
 369:Modules/mpu6050/inv_mpu.c ****     INV_LPA_640HZ
 370:Modules/mpu6050/inv_mpu.c **** #endif
 371:Modules/mpu6050/inv_mpu.c **** };
 372:Modules/mpu6050/inv_mpu.c **** 
 373:Modules/mpu6050/inv_mpu.c **** #define BIT_I2C_MST_VDDIO   (0x80)
 374:Modules/mpu6050/inv_mpu.c **** #define BIT_FIFO_EN         (0x40)
 375:Modules/mpu6050/inv_mpu.c **** #define BIT_DMP_EN          (0x80)
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 8


 376:Modules/mpu6050/inv_mpu.c **** #define BIT_FIFO_RST        (0x04)
 377:Modules/mpu6050/inv_mpu.c **** #define BIT_DMP_RST         (0x08)
 378:Modules/mpu6050/inv_mpu.c **** #define BIT_FIFO_OVERFLOW   (0x10)
 379:Modules/mpu6050/inv_mpu.c **** #define BIT_DATA_RDY_EN     (0x01)
 380:Modules/mpu6050/inv_mpu.c **** #define BIT_DMP_INT_EN      (0x02)
 381:Modules/mpu6050/inv_mpu.c **** #define BIT_MOT_INT_EN      (0x40)
 382:Modules/mpu6050/inv_mpu.c **** #define BITS_FSR            (0x18)
 383:Modules/mpu6050/inv_mpu.c **** #define BITS_LPF            (0x07)
 384:Modules/mpu6050/inv_mpu.c **** #define BITS_HPF            (0x07)
 385:Modules/mpu6050/inv_mpu.c **** #define BITS_CLK            (0x07)
 386:Modules/mpu6050/inv_mpu.c **** #define BIT_FIFO_SIZE_1024  (0x40)
 387:Modules/mpu6050/inv_mpu.c **** #define BIT_FIFO_SIZE_2048  (0x80)
 388:Modules/mpu6050/inv_mpu.c **** #define BIT_FIFO_SIZE_4096  (0xC0)
 389:Modules/mpu6050/inv_mpu.c **** #define BIT_RESET           (0x80)
 390:Modules/mpu6050/inv_mpu.c **** #define BIT_SLEEP           (0x40)
 391:Modules/mpu6050/inv_mpu.c **** #define BIT_S0_DELAY_EN     (0x01)
 392:Modules/mpu6050/inv_mpu.c **** #define BIT_S2_DELAY_EN     (0x04)
 393:Modules/mpu6050/inv_mpu.c **** #define BITS_SLAVE_LENGTH   (0x0F)
 394:Modules/mpu6050/inv_mpu.c **** #define BIT_SLAVE_BYTE_SW   (0x40)
 395:Modules/mpu6050/inv_mpu.c **** #define BIT_SLAVE_GROUP     (0x10)
 396:Modules/mpu6050/inv_mpu.c **** #define BIT_SLAVE_EN        (0x80)
 397:Modules/mpu6050/inv_mpu.c **** #define BIT_I2C_READ        (0x80)
 398:Modules/mpu6050/inv_mpu.c **** #define BITS_I2C_MASTER_DLY (0x1F)
 399:Modules/mpu6050/inv_mpu.c **** #define BIT_AUX_IF_EN       (0x20)
 400:Modules/mpu6050/inv_mpu.c **** #define BIT_ACTL            (0x80)
 401:Modules/mpu6050/inv_mpu.c **** #define BIT_LATCH_EN        (0x20)
 402:Modules/mpu6050/inv_mpu.c **** #define BIT_ANY_RD_CLR      (0x10)
 403:Modules/mpu6050/inv_mpu.c **** #define BIT_BYPASS_EN       (0x02)
 404:Modules/mpu6050/inv_mpu.c **** #define BITS_WOM_EN         (0xC0)
 405:Modules/mpu6050/inv_mpu.c **** #define BIT_LPA_CYCLE       (0x20)
 406:Modules/mpu6050/inv_mpu.c **** #define BIT_STBY_XA         (0x20)
 407:Modules/mpu6050/inv_mpu.c **** #define BIT_STBY_YA         (0x10)
 408:Modules/mpu6050/inv_mpu.c **** #define BIT_STBY_ZA         (0x08)
 409:Modules/mpu6050/inv_mpu.c **** #define BIT_STBY_XG         (0x04)
 410:Modules/mpu6050/inv_mpu.c **** #define BIT_STBY_YG         (0x02)
 411:Modules/mpu6050/inv_mpu.c **** #define BIT_STBY_ZG         (0x01)
 412:Modules/mpu6050/inv_mpu.c **** #define BIT_STBY_XYZA       (BIT_STBY_XA | BIT_STBY_YA | BIT_STBY_ZA)
 413:Modules/mpu6050/inv_mpu.c **** #define BIT_STBY_XYZG       (BIT_STBY_XG | BIT_STBY_YG | BIT_STBY_ZG)
 414:Modules/mpu6050/inv_mpu.c **** 
 415:Modules/mpu6050/inv_mpu.c **** #if defined AK8975_SECONDARY
 416:Modules/mpu6050/inv_mpu.c **** #define SUPPORTS_AK89xx_HIGH_SENS   (0x00)
 417:Modules/mpu6050/inv_mpu.c **** #define AK89xx_FSR                  (9830)
 418:Modules/mpu6050/inv_mpu.c **** #elif defined AK8963_SECONDARY
 419:Modules/mpu6050/inv_mpu.c **** #define SUPPORTS_AK89xx_HIGH_SENS   (0x10)
 420:Modules/mpu6050/inv_mpu.c **** #define AK89xx_FSR                  (4915)
 421:Modules/mpu6050/inv_mpu.c **** #endif
 422:Modules/mpu6050/inv_mpu.c **** 
 423:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 424:Modules/mpu6050/inv_mpu.c **** #define AKM_REG_WHOAMI      (0x00)
 425:Modules/mpu6050/inv_mpu.c **** 
 426:Modules/mpu6050/inv_mpu.c **** #define AKM_REG_ST1         (0x02)
 427:Modules/mpu6050/inv_mpu.c **** #define AKM_REG_HXL         (0x03)
 428:Modules/mpu6050/inv_mpu.c **** #define AKM_REG_ST2         (0x09)
 429:Modules/mpu6050/inv_mpu.c **** 
 430:Modules/mpu6050/inv_mpu.c **** #define AKM_REG_CNTL        (0x0A)
 431:Modules/mpu6050/inv_mpu.c **** #define AKM_REG_ASTC        (0x0C)
 432:Modules/mpu6050/inv_mpu.c **** #define AKM_REG_ASAX        (0x10)
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 9


 433:Modules/mpu6050/inv_mpu.c **** #define AKM_REG_ASAY        (0x11)
 434:Modules/mpu6050/inv_mpu.c **** #define AKM_REG_ASAZ        (0x12)
 435:Modules/mpu6050/inv_mpu.c **** 
 436:Modules/mpu6050/inv_mpu.c **** #define AKM_DATA_READY      (0x01)
 437:Modules/mpu6050/inv_mpu.c **** #define AKM_DATA_OVERRUN    (0x02)
 438:Modules/mpu6050/inv_mpu.c **** #define AKM_OVERFLOW        (0x80)
 439:Modules/mpu6050/inv_mpu.c **** #define AKM_DATA_ERROR      (0x40)
 440:Modules/mpu6050/inv_mpu.c **** 
 441:Modules/mpu6050/inv_mpu.c **** #define AKM_BIT_SELF_TEST   (0x40)
 442:Modules/mpu6050/inv_mpu.c **** 
 443:Modules/mpu6050/inv_mpu.c **** #define AKM_POWER_DOWN          (0x00 | SUPPORTS_AK89xx_HIGH_SENS)
 444:Modules/mpu6050/inv_mpu.c **** #define AKM_SINGLE_MEASUREMENT  (0x01 | SUPPORTS_AK89xx_HIGH_SENS)
 445:Modules/mpu6050/inv_mpu.c **** #define AKM_FUSE_ROM_ACCESS     (0x0F | SUPPORTS_AK89xx_HIGH_SENS)
 446:Modules/mpu6050/inv_mpu.c **** #define AKM_MODE_SELF_TEST      (0x08 | SUPPORTS_AK89xx_HIGH_SENS)
 447:Modules/mpu6050/inv_mpu.c **** 
 448:Modules/mpu6050/inv_mpu.c **** #define AKM_WHOAMI      (0x48)
 449:Modules/mpu6050/inv_mpu.c **** #endif
 450:Modules/mpu6050/inv_mpu.c **** 
 451:Modules/mpu6050/inv_mpu.c **** #if defined MPU6050
 452:Modules/mpu6050/inv_mpu.c **** const struct gyro_reg_s reg = {
 453:Modules/mpu6050/inv_mpu.c **** 		0x75,  //who_am_i
 454:Modules/mpu6050/inv_mpu.c **** 		0x19,  //rate_div
 455:Modules/mpu6050/inv_mpu.c **** 		0x1A,  //lpf
 456:Modules/mpu6050/inv_mpu.c **** 		0x0C,  //prod_id
 457:Modules/mpu6050/inv_mpu.c **** 		0x6A,  //user_ctrl
 458:Modules/mpu6050/inv_mpu.c **** 		0x23,  //fifo_en
 459:Modules/mpu6050/inv_mpu.c **** 		0x1B,  //gyro_cfg
 460:Modules/mpu6050/inv_mpu.c **** 		0x1C,  //accel_cfg
 461:Modules/mpu6050/inv_mpu.c **** 		0x1F,  // motion_thr
 462:Modules/mpu6050/inv_mpu.c **** 		0x20,  // motion_dur
 463:Modules/mpu6050/inv_mpu.c **** 		0x72,  // fifo_count_h
 464:Modules/mpu6050/inv_mpu.c **** 		0x74,  // fifo_r_w
 465:Modules/mpu6050/inv_mpu.c **** 		0x43,  // raw_gyro
 466:Modules/mpu6050/inv_mpu.c **** 		0x3B,  // raw_accel
 467:Modules/mpu6050/inv_mpu.c **** 		0x41,  // temp
 468:Modules/mpu6050/inv_mpu.c **** 		0x38,  // int_enable
 469:Modules/mpu6050/inv_mpu.c **** 		0x39,  //  dmp_int_status
 470:Modules/mpu6050/inv_mpu.c **** 		0x3A,  //  int_status
 471:Modules/mpu6050/inv_mpu.c **** 		0x6B,  // pwr_mgmt_1
 472:Modules/mpu6050/inv_mpu.c **** 		0x6C,  // pwr_mgmt_2
 473:Modules/mpu6050/inv_mpu.c **** 		0x37,  // int_pin_cfg
 474:Modules/mpu6050/inv_mpu.c **** 		0x6F,  // mem_r_w
 475:Modules/mpu6050/inv_mpu.c **** 		0x06,  // accel_offs
 476:Modules/mpu6050/inv_mpu.c **** 		0x24,  // i2c_mst
 477:Modules/mpu6050/inv_mpu.c **** 		0x6D,  // bank_sel
 478:Modules/mpu6050/inv_mpu.c **** 		0x6E,  // mem_start_addr
 479:Modules/mpu6050/inv_mpu.c **** 		0x70   // prgm_start_h
 480:Modules/mpu6050/inv_mpu.c **** };
 481:Modules/mpu6050/inv_mpu.c **** 
 482:Modules/mpu6050/inv_mpu.c **** const struct hw_s hw={
 483:Modules/mpu6050/inv_mpu.c **** 		0x68,	 //addr
 484:Modules/mpu6050/inv_mpu.c **** 		1024,	 //max_fifo
 485:Modules/mpu6050/inv_mpu.c **** 		118,	 //num_reg
 486:Modules/mpu6050/inv_mpu.c **** 		340,	 //temp_sens
 487:Modules/mpu6050/inv_mpu.c **** 		-521,	 //temp_offset
 488:Modules/mpu6050/inv_mpu.c **** 		256	 //bank_size
 489:Modules/mpu6050/inv_mpu.c **** };
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 10


 490:Modules/mpu6050/inv_mpu.c **** 
 491:Modules/mpu6050/inv_mpu.c **** const struct test_s test={
 492:Modules/mpu6050/inv_mpu.c **** 		32768/250,		 //gyro_sens
 493:Modules/mpu6050/inv_mpu.c **** 		32768/16,		 //	accel_sens
 494:Modules/mpu6050/inv_mpu.c **** 		0,				 //	reg_rate_div
 495:Modules/mpu6050/inv_mpu.c **** 		1,				//	reg_lpf
 496:Modules/mpu6050/inv_mpu.c **** 		0,				 //	reg_gyro_fsr
 497:Modules/mpu6050/inv_mpu.c **** 		0x18,			//	reg_accel_fsr
 498:Modules/mpu6050/inv_mpu.c **** 		50,				//	wait_ms
 499:Modules/mpu6050/inv_mpu.c **** 		5,				//	packet_thresh
 500:Modules/mpu6050/inv_mpu.c **** 		10.0f,			 //	min_dps
 501:Modules/mpu6050/inv_mpu.c **** 		105.0f,			 //	max_dps
 502:Modules/mpu6050/inv_mpu.c **** 		0.14f,			//	max_gyro_var
 503:Modules/mpu6050/inv_mpu.c **** 		0.3f,		   //	min_g
 504:Modules/mpu6050/inv_mpu.c **** 		0.95f,		   //	max_g
 505:Modules/mpu6050/inv_mpu.c **** 		0.14f		   //	max_accel_var
 506:Modules/mpu6050/inv_mpu.c **** };
 507:Modules/mpu6050/inv_mpu.c **** 
 508:Modules/mpu6050/inv_mpu.c **** 
 509:Modules/mpu6050/inv_mpu.c **** static struct gyro_state_s st={
 510:Modules/mpu6050/inv_mpu.c **** 		&reg,
 511:Modules/mpu6050/inv_mpu.c **** 		&hw,
 512:Modules/mpu6050/inv_mpu.c **** 		{0},
 513:Modules/mpu6050/inv_mpu.c **** 		&test
 514:Modules/mpu6050/inv_mpu.c **** };
 515:Modules/mpu6050/inv_mpu.c **** 
 516:Modules/mpu6050/inv_mpu.c **** 
 517:Modules/mpu6050/inv_mpu.c **** #elif defined MPU6500
 518:Modules/mpu6050/inv_mpu.c **** const struct gyro_reg_s reg = {
 519:Modules/mpu6050/inv_mpu.c ****     .who_am_i       = 0x75,
 520:Modules/mpu6050/inv_mpu.c ****     .rate_div       = 0x19,
 521:Modules/mpu6050/inv_mpu.c ****     .lpf            = 0x1A,
 522:Modules/mpu6050/inv_mpu.c ****     .prod_id        = 0x0C,
 523:Modules/mpu6050/inv_mpu.c ****     .user_ctrl      = 0x6A,
 524:Modules/mpu6050/inv_mpu.c ****     .fifo_en        = 0x23,
 525:Modules/mpu6050/inv_mpu.c ****     .gyro_cfg       = 0x1B,
 526:Modules/mpu6050/inv_mpu.c ****     .accel_cfg      = 0x1C,
 527:Modules/mpu6050/inv_mpu.c ****     .accel_cfg2     = 0x1D,
 528:Modules/mpu6050/inv_mpu.c ****     .lp_accel_odr   = 0x1E,
 529:Modules/mpu6050/inv_mpu.c ****     .motion_thr     = 0x1F,
 530:Modules/mpu6050/inv_mpu.c ****     .motion_dur     = 0x20,
 531:Modules/mpu6050/inv_mpu.c ****     .fifo_count_h   = 0x72,
 532:Modules/mpu6050/inv_mpu.c ****     .fifo_r_w       = 0x74,
 533:Modules/mpu6050/inv_mpu.c ****     .raw_gyro       = 0x43,
 534:Modules/mpu6050/inv_mpu.c ****     .raw_accel      = 0x3B,
 535:Modules/mpu6050/inv_mpu.c ****     .temp           = 0x41,
 536:Modules/mpu6050/inv_mpu.c ****     .int_enable     = 0x38,
 537:Modules/mpu6050/inv_mpu.c ****     .dmp_int_status = 0x39,
 538:Modules/mpu6050/inv_mpu.c ****     .int_status     = 0x3A,
 539:Modules/mpu6050/inv_mpu.c ****     .accel_intel    = 0x69,
 540:Modules/mpu6050/inv_mpu.c ****     .pwr_mgmt_1     = 0x6B,
 541:Modules/mpu6050/inv_mpu.c ****     .pwr_mgmt_2     = 0x6C,
 542:Modules/mpu6050/inv_mpu.c ****     .int_pin_cfg    = 0x37,
 543:Modules/mpu6050/inv_mpu.c ****     .mem_r_w        = 0x6F,
 544:Modules/mpu6050/inv_mpu.c ****     .accel_offs     = 0x77,
 545:Modules/mpu6050/inv_mpu.c ****     .i2c_mst        = 0x24,
 546:Modules/mpu6050/inv_mpu.c ****     .bank_sel       = 0x6D,
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 11


 547:Modules/mpu6050/inv_mpu.c ****     .mem_start_addr = 0x6E,
 548:Modules/mpu6050/inv_mpu.c ****     .prgm_start_h   = 0x70
 549:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 550:Modules/mpu6050/inv_mpu.c ****     ,.raw_compass   = 0x49,
 551:Modules/mpu6050/inv_mpu.c ****     .s0_addr        = 0x25,
 552:Modules/mpu6050/inv_mpu.c ****     .s0_reg         = 0x26,
 553:Modules/mpu6050/inv_mpu.c ****     .s0_ctrl        = 0x27,
 554:Modules/mpu6050/inv_mpu.c ****     .s1_addr        = 0x28,
 555:Modules/mpu6050/inv_mpu.c ****     .s1_reg         = 0x29,
 556:Modules/mpu6050/inv_mpu.c ****     .s1_ctrl        = 0x2A,
 557:Modules/mpu6050/inv_mpu.c ****     .s4_ctrl        = 0x34,
 558:Modules/mpu6050/inv_mpu.c ****     .s0_do          = 0x63,
 559:Modules/mpu6050/inv_mpu.c ****     .s1_do          = 0x64,
 560:Modules/mpu6050/inv_mpu.c ****     .i2c_delay_ctrl = 0x67
 561:Modules/mpu6050/inv_mpu.c **** #endif
 562:Modules/mpu6050/inv_mpu.c **** };
 563:Modules/mpu6050/inv_mpu.c **** const struct hw_s hw = {
 564:Modules/mpu6050/inv_mpu.c ****     .addr           = 0x68,
 565:Modules/mpu6050/inv_mpu.c ****     .max_fifo       = 1024,
 566:Modules/mpu6050/inv_mpu.c ****     .num_reg        = 128,
 567:Modules/mpu6050/inv_mpu.c ****     .temp_sens      = 321,
 568:Modules/mpu6050/inv_mpu.c ****     .temp_offset    = 0,
 569:Modules/mpu6050/inv_mpu.c ****     .bank_size      = 256
 570:Modules/mpu6050/inv_mpu.c **** #if defined AK89xx_SECONDARY
 571:Modules/mpu6050/inv_mpu.c ****     ,.compass_fsr    = AK89xx_FSR
 572:Modules/mpu6050/inv_mpu.c **** #endif
 573:Modules/mpu6050/inv_mpu.c **** };
 574:Modules/mpu6050/inv_mpu.c **** 
 575:Modules/mpu6050/inv_mpu.c **** const struct test_s test = {
 576:Modules/mpu6050/inv_mpu.c ****     .gyro_sens      = 32768/250,
 577:Modules/mpu6050/inv_mpu.c ****     .accel_sens     = 32768/16,
 578:Modules/mpu6050/inv_mpu.c ****     .reg_rate_div   = 0,    /* 1kHz. */
 579:Modules/mpu6050/inv_mpu.c ****     .reg_lpf        = 1,    /* 188Hz. */
 580:Modules/mpu6050/inv_mpu.c ****     .reg_gyro_fsr   = 0,    /* 250dps. */
 581:Modules/mpu6050/inv_mpu.c ****     .reg_accel_fsr  = 0x18, /* 16g. */
 582:Modules/mpu6050/inv_mpu.c ****     .wait_ms        = 50,
 583:Modules/mpu6050/inv_mpu.c ****     .packet_thresh  = 5,    /* 5% */
 584:Modules/mpu6050/inv_mpu.c ****     .min_dps        = 10.f,
 585:Modules/mpu6050/inv_mpu.c ****     .max_dps        = 105.f,
 586:Modules/mpu6050/inv_mpu.c ****     .max_gyro_var   = 0.14f,
 587:Modules/mpu6050/inv_mpu.c ****     .min_g          = 0.3f,
 588:Modules/mpu6050/inv_mpu.c ****     .max_g          = 0.95f,
 589:Modules/mpu6050/inv_mpu.c ****     .max_accel_var  = 0.14f
 590:Modules/mpu6050/inv_mpu.c **** };
 591:Modules/mpu6050/inv_mpu.c **** 
 592:Modules/mpu6050/inv_mpu.c **** static struct gyro_state_s st = {
 593:Modules/mpu6050/inv_mpu.c ****     .reg = &reg,
 594:Modules/mpu6050/inv_mpu.c ****     .hw = &hw,
 595:Modules/mpu6050/inv_mpu.c ****     .test = &test
 596:Modules/mpu6050/inv_mpu.c **** };
 597:Modules/mpu6050/inv_mpu.c **** #endif
 598:Modules/mpu6050/inv_mpu.c **** 
 599:Modules/mpu6050/inv_mpu.c **** #define MAX_PACKET_LENGTH (12)
 600:Modules/mpu6050/inv_mpu.c **** 
 601:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 602:Modules/mpu6050/inv_mpu.c **** static int setup_compass(void);
 603:Modules/mpu6050/inv_mpu.c **** #define MAX_COMPASS_SAMPLE_RATE (100)
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 12


 604:Modules/mpu6050/inv_mpu.c **** #endif
 605:Modules/mpu6050/inv_mpu.c **** 
 606:Modules/mpu6050/inv_mpu.c **** /**
 607:Modules/mpu6050/inv_mpu.c ****  *  @brief      Enable/disable data ready interrupt.
 608:Modules/mpu6050/inv_mpu.c ****  *  If the DMP is on, the DMP interrupt is enabled. Otherwise, the data ready
 609:Modules/mpu6050/inv_mpu.c ****  *  interrupt is used.
 610:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  enable      1 to enable interrupt.
 611:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
 612:Modules/mpu6050/inv_mpu.c ****  */
 613:Modules/mpu6050/inv_mpu.c **** static int set_int_enable(unsigned char enable)
 614:Modules/mpu6050/inv_mpu.c **** {
 615:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp;
 616:Modules/mpu6050/inv_mpu.c **** 
 617:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.dmp_on) {
 618:Modules/mpu6050/inv_mpu.c **** 		if (enable)
 619:Modules/mpu6050/inv_mpu.c **** 			tmp = BIT_DMP_INT_EN;
 620:Modules/mpu6050/inv_mpu.c **** 		else
 621:Modules/mpu6050/inv_mpu.c **** 			tmp = 0x00;
 622:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &tmp))
 623:Modules/mpu6050/inv_mpu.c **** 			return -1;
 624:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.int_enable = tmp;
 625:Modules/mpu6050/inv_mpu.c **** 	} else {
 626:Modules/mpu6050/inv_mpu.c **** 		if (!st.chip_cfg.sensors)
 627:Modules/mpu6050/inv_mpu.c **** 			return -1;
 628:Modules/mpu6050/inv_mpu.c **** 		if (enable && st.chip_cfg.int_enable)
 629:Modules/mpu6050/inv_mpu.c **** 			return 0;
 630:Modules/mpu6050/inv_mpu.c **** 		if (enable)
 631:Modules/mpu6050/inv_mpu.c **** 			tmp = BIT_DATA_RDY_EN;
 632:Modules/mpu6050/inv_mpu.c **** 		else
 633:Modules/mpu6050/inv_mpu.c **** 			tmp = 0x00;
 634:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &tmp))
 635:Modules/mpu6050/inv_mpu.c **** 			return -1;
 636:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.int_enable = tmp;
 637:Modules/mpu6050/inv_mpu.c **** 	}
 638:Modules/mpu6050/inv_mpu.c **** 	return 0;
 639:Modules/mpu6050/inv_mpu.c **** }
 640:Modules/mpu6050/inv_mpu.c **** 
 641:Modules/mpu6050/inv_mpu.c **** /**
 642:Modules/mpu6050/inv_mpu.c ****  *  @brief      Register dump for testing.
 643:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
 644:Modules/mpu6050/inv_mpu.c ****  */
 645:Modules/mpu6050/inv_mpu.c **** int mpu_reg_dump(void)
 646:Modules/mpu6050/inv_mpu.c **** {
 647:Modules/mpu6050/inv_mpu.c **** 	unsigned char ii;
 648:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
 649:Modules/mpu6050/inv_mpu.c **** 
 650:Modules/mpu6050/inv_mpu.c **** 	for (ii = 0; ii < st.hw->num_reg; ii++) {
 651:Modules/mpu6050/inv_mpu.c **** 		if (ii == st.reg->fifo_r_w || ii == st.reg->mem_r_w)
 652:Modules/mpu6050/inv_mpu.c **** 			continue;
 653:Modules/mpu6050/inv_mpu.c **** 		if (i2c_read(st.hw->addr, ii, 1, &data))
 654:Modules/mpu6050/inv_mpu.c **** 			return -1;
 655:Modules/mpu6050/inv_mpu.c **** 		log_i("%#5x: %#5x\r\n", ii, data);
 656:Modules/mpu6050/inv_mpu.c **** 	}
 657:Modules/mpu6050/inv_mpu.c **** 	return 0;
 658:Modules/mpu6050/inv_mpu.c **** }
 659:Modules/mpu6050/inv_mpu.c **** 
 660:Modules/mpu6050/inv_mpu.c **** /**
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 13


 661:Modules/mpu6050/inv_mpu.c ****  *  @brief      Read from a single register.
 662:Modules/mpu6050/inv_mpu.c ****  *  NOTE: The memory and FIFO read/write registers cannot be accessed.
 663:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  reg     Register address.
 664:Modules/mpu6050/inv_mpu.c ****  *  @param[out] data    Register data.
 665:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
 666:Modules/mpu6050/inv_mpu.c ****  */
 667:Modules/mpu6050/inv_mpu.c **** int mpu_read_reg(unsigned char reg, unsigned char *data)
 668:Modules/mpu6050/inv_mpu.c **** {
 669:Modules/mpu6050/inv_mpu.c **** 	if (reg == st.reg->fifo_r_w || reg == st.reg->mem_r_w)
 670:Modules/mpu6050/inv_mpu.c **** 		return -1;
 671:Modules/mpu6050/inv_mpu.c **** 	if (reg >= st.hw->num_reg)
 672:Modules/mpu6050/inv_mpu.c **** 		return -1;
 673:Modules/mpu6050/inv_mpu.c **** 	return i2c_read(st.hw->addr, reg, 1, data);
 674:Modules/mpu6050/inv_mpu.c **** }
 675:Modules/mpu6050/inv_mpu.c **** 
 676:Modules/mpu6050/inv_mpu.c **** /**
 677:Modules/mpu6050/inv_mpu.c ****  *  @brief      Initialize hardware.
 678:Modules/mpu6050/inv_mpu.c ****  *  Initial configuration:\n
 679:Modules/mpu6050/inv_mpu.c ****  *  Gyro FSR: +/- 2000DPS\n
 680:Modules/mpu6050/inv_mpu.c ****  *  Accel FSR +/- 2G\n
 681:Modules/mpu6050/inv_mpu.c ****  *  DLPF: 42Hz\n
 682:Modules/mpu6050/inv_mpu.c ****  *  FIFO rate: 50Hz\n
 683:Modules/mpu6050/inv_mpu.c ****  *  Clock source: Gyro PLL\n
 684:Modules/mpu6050/inv_mpu.c ****  *  FIFO: Disabled.\n
 685:Modules/mpu6050/inv_mpu.c ****  *  Data ready interrupt: Disabled, active low, unlatched.
 686:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  int_param   Platform-specific parameters to interrupt API.
 687:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
 688:Modules/mpu6050/inv_mpu.c ****  */
 689:Modules/mpu6050/inv_mpu.c **** int mpu_init(void)
 690:Modules/mpu6050/inv_mpu.c **** {
 691:Modules/mpu6050/inv_mpu.c **** 	unsigned char data[6], rev;
 692:Modules/mpu6050/inv_mpu.c **** 
 693:Modules/mpu6050/inv_mpu.c **** 	/* Reset device. */
 694:Modules/mpu6050/inv_mpu.c **** 	data[0] = BIT_RESET;
 695:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 696:Modules/mpu6050/inv_mpu.c **** 		return -1;
 697:Modules/mpu6050/inv_mpu.c **** 	delay_ms(100);
 698:Modules/mpu6050/inv_mpu.c **** 
 699:Modules/mpu6050/inv_mpu.c **** 	/* Wake up chip. */
 700:Modules/mpu6050/inv_mpu.c **** 	data[0] = 0x00;
 701:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 702:Modules/mpu6050/inv_mpu.c **** 		return -1;
 703:Modules/mpu6050/inv_mpu.c **** 
 704:Modules/mpu6050/inv_mpu.c **** #if defined MPU6050
 705:Modules/mpu6050/inv_mpu.c **** 	/* Check product revision. */
 706:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->accel_offs, 6, data))
 707:Modules/mpu6050/inv_mpu.c **** 		return -1;
 708:Modules/mpu6050/inv_mpu.c **** 	rev = ((data[5] & 0x01) << 2) | ((data[3] & 0x01) << 1) |
 709:Modules/mpu6050/inv_mpu.c **** 		  (data[1] & 0x01);
 710:Modules/mpu6050/inv_mpu.c **** 
 711:Modules/mpu6050/inv_mpu.c **** 	if (rev) {
 712:Modules/mpu6050/inv_mpu.c **** 		/* Congrats, these parts are better. */
 713:Modules/mpu6050/inv_mpu.c **** 		if (rev == 1)
 714:Modules/mpu6050/inv_mpu.c **** 			st.chip_cfg.accel_half = 1;
 715:Modules/mpu6050/inv_mpu.c **** 		else if (rev == 2)
 716:Modules/mpu6050/inv_mpu.c **** 			st.chip_cfg.accel_half = 0;
 717:Modules/mpu6050/inv_mpu.c **** 		else {
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 14


 718:Modules/mpu6050/inv_mpu.c **** 			log_e("Unsupported software product rev %d.\n", rev);
 719:Modules/mpu6050/inv_mpu.c **** 			return -1;
 720:Modules/mpu6050/inv_mpu.c **** 		}
 721:Modules/mpu6050/inv_mpu.c **** 	} else {
 722:Modules/mpu6050/inv_mpu.c **** 		if (i2c_read(st.hw->addr, st.reg->prod_id, 1, data))
 723:Modules/mpu6050/inv_mpu.c **** 			return -1;
 724:Modules/mpu6050/inv_mpu.c **** 		rev = data[0] & 0x0F;
 725:Modules/mpu6050/inv_mpu.c **** 		if (!rev) {
 726:Modules/mpu6050/inv_mpu.c **** 			log_e("Product ID read as 0 indicates device is either "
 727:Modules/mpu6050/inv_mpu.c **** 				  "incompatible or an MPU3050.\n");
 728:Modules/mpu6050/inv_mpu.c **** 			return -1;
 729:Modules/mpu6050/inv_mpu.c **** 		} else if (rev == 4) {
 730:Modules/mpu6050/inv_mpu.c **** 			log_i("Half sensitivity part found.\n");
 731:Modules/mpu6050/inv_mpu.c **** 			st.chip_cfg.accel_half = 1;
 732:Modules/mpu6050/inv_mpu.c **** 		} else
 733:Modules/mpu6050/inv_mpu.c **** 			st.chip_cfg.accel_half = 0;
 734:Modules/mpu6050/inv_mpu.c **** 	}
 735:Modules/mpu6050/inv_mpu.c **** #elif defined MPU6500
 736:Modules/mpu6050/inv_mpu.c **** 	#define MPU6500_MEM_REV_ADDR    (0x17)
 737:Modules/mpu6050/inv_mpu.c ****     if (mpu_read_mem(MPU6500_MEM_REV_ADDR, 1, &rev))
 738:Modules/mpu6050/inv_mpu.c ****         return -1;
 739:Modules/mpu6050/inv_mpu.c ****     if (rev == 0x1)
 740:Modules/mpu6050/inv_mpu.c ****         st.chip_cfg.accel_half = 0;
 741:Modules/mpu6050/inv_mpu.c ****     else {
 742:Modules/mpu6050/inv_mpu.c ****         log_e("Unsupported software product rev %d.\n", rev);
 743:Modules/mpu6050/inv_mpu.c ****         return -1;
 744:Modules/mpu6050/inv_mpu.c ****     }
 745:Modules/mpu6050/inv_mpu.c **** 
 746:Modules/mpu6050/inv_mpu.c ****     /* MPU6500 shares 4kB of memory between the DMP and the FIFO. Since the
 747:Modules/mpu6050/inv_mpu.c ****      * first 3kB are needed by the DMP, we'll use the last 1kB for the FIFO.
 748:Modules/mpu6050/inv_mpu.c ****      */
 749:Modules/mpu6050/inv_mpu.c ****     data[0] = BIT_FIFO_SIZE_1024 | 0x8;
 750:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->accel_cfg2, 1, data))
 751:Modules/mpu6050/inv_mpu.c ****         return -1;
 752:Modules/mpu6050/inv_mpu.c **** #endif
 753:Modules/mpu6050/inv_mpu.c **** 
 754:Modules/mpu6050/inv_mpu.c **** 	/* Set to invalid values to ensure no I2C writes are skipped. */
 755:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.sensors = 0xFF;
 756:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.gyro_fsr = 0xFF;
 757:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.accel_fsr = 0xFF;
 758:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lpf = 0xFF;
 759:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.sample_rate = 0xFFFF;
 760:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.fifo_enable = 0xFF;
 761:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.bypass_mode = 0xFF;
 762:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 763:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.compass_sample_rate = 0xFFFF;
 764:Modules/mpu6050/inv_mpu.c **** #endif
 765:Modules/mpu6050/inv_mpu.c **** 	/* mpu_set_sensors always preserves this setting. */
 766:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.clk_src = INV_CLK_PLL;
 767:Modules/mpu6050/inv_mpu.c **** 	/* Handled in next call to mpu_set_bypass. */
 768:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.active_low_int = 1;
 769:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.latched_int = 0;
 770:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.int_motion_only = 0;
 771:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lp_accel_mode = 0;
 772:Modules/mpu6050/inv_mpu.c **** 	memset(&st.chip_cfg.cache, 0, sizeof(st.chip_cfg.cache));
 773:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.dmp_on = 0;
 774:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.dmp_loaded = 0;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 15


 775:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.dmp_sample_rate = 0;
 776:Modules/mpu6050/inv_mpu.c **** 
 777:Modules/mpu6050/inv_mpu.c **** 	if (mpu_set_gyro_fsr(2000))
 778:Modules/mpu6050/inv_mpu.c **** 		return -1;
 779:Modules/mpu6050/inv_mpu.c **** 	if (mpu_set_accel_fsr(2))
 780:Modules/mpu6050/inv_mpu.c **** 		return -1;
 781:Modules/mpu6050/inv_mpu.c **** 	if (mpu_set_lpf(42))
 782:Modules/mpu6050/inv_mpu.c **** 		return -1;
 783:Modules/mpu6050/inv_mpu.c **** 	if (mpu_set_sample_rate(50))
 784:Modules/mpu6050/inv_mpu.c **** 		return -1;
 785:Modules/mpu6050/inv_mpu.c **** 	if (mpu_configure_fifo(0))
 786:Modules/mpu6050/inv_mpu.c **** 		return -1;
 787:Modules/mpu6050/inv_mpu.c **** 
 788:Modules/mpu6050/inv_mpu.c **** //    if (int_param)
 789:Modules/mpu6050/inv_mpu.c **** //        reg_int_cb(int_param);
 790:Modules/mpu6050/inv_mpu.c **** 
 791:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 792:Modules/mpu6050/inv_mpu.c **** 	setup_compass();
 793:Modules/mpu6050/inv_mpu.c ****     if (mpu_set_compass_sample_rate(10))
 794:Modules/mpu6050/inv_mpu.c ****         return -1;
 795:Modules/mpu6050/inv_mpu.c **** #else
 796:Modules/mpu6050/inv_mpu.c **** 	/* Already disabled by setup_compass. */
 797:Modules/mpu6050/inv_mpu.c **** 	if (mpu_set_bypass(0))
 798:Modules/mpu6050/inv_mpu.c **** 		return -1;
 799:Modules/mpu6050/inv_mpu.c **** #endif
 800:Modules/mpu6050/inv_mpu.c **** 
 801:Modules/mpu6050/inv_mpu.c **** 	mpu_set_sensors(0);
 802:Modules/mpu6050/inv_mpu.c **** 	return 0;
 803:Modules/mpu6050/inv_mpu.c **** }
 804:Modules/mpu6050/inv_mpu.c **** 
 805:Modules/mpu6050/inv_mpu.c **** /**
 806:Modules/mpu6050/inv_mpu.c ****  *  @brief      Enter low-power accel-only mode.
 807:Modules/mpu6050/inv_mpu.c ****  *  In low-power accel mode, the chip goes to sleep and only wakes up to sample
 808:Modules/mpu6050/inv_mpu.c ****  *  the accelerometer at one of the following frequencies:
 809:Modules/mpu6050/inv_mpu.c ****  *  \n MPU6050: 1.25Hz, 5Hz, 20Hz, 40Hz
 810:Modules/mpu6050/inv_mpu.c ****  *  \n MPU6500: 1.25Hz, 2.5Hz, 5Hz, 10Hz, 20Hz, 40Hz, 80Hz, 160Hz, 320Hz, 640Hz
 811:Modules/mpu6050/inv_mpu.c ****  *  \n If the requested rate is not one listed above, the device will be set to
 812:Modules/mpu6050/inv_mpu.c ****  *  the next highest rate. Requesting a rate above the maximum supported
 813:Modules/mpu6050/inv_mpu.c ****  *  frequency will result in an error.
 814:Modules/mpu6050/inv_mpu.c ****  *  \n To select a fractional wake-up frequency, round down the value passed to
 815:Modules/mpu6050/inv_mpu.c ****  *  @e rate.
 816:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  rate        Minimum sampling rate, or zero to disable LP
 817:Modules/mpu6050/inv_mpu.c ****  *                          accel mode.
 818:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
 819:Modules/mpu6050/inv_mpu.c ****  */
 820:Modules/mpu6050/inv_mpu.c **** int mpu_lp_accel_mode(unsigned char rate)
 821:Modules/mpu6050/inv_mpu.c **** {
 822:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
 823:Modules/mpu6050/inv_mpu.c **** 
 824:Modules/mpu6050/inv_mpu.c **** 	if (rate > 40)
 825:Modules/mpu6050/inv_mpu.c **** 		return -1;
 826:Modules/mpu6050/inv_mpu.c **** 
 827:Modules/mpu6050/inv_mpu.c **** 	if (!rate) {
 828:Modules/mpu6050/inv_mpu.c **** 		mpu_set_int_latched(0);
 829:Modules/mpu6050/inv_mpu.c **** 		tmp[0] = 0;
 830:Modules/mpu6050/inv_mpu.c **** 		tmp[1] = BIT_STBY_XYZG;
 831:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 16


 832:Modules/mpu6050/inv_mpu.c **** 			return -1;
 833:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.lp_accel_mode = 0;
 834:Modules/mpu6050/inv_mpu.c **** 		return 0;
 835:Modules/mpu6050/inv_mpu.c **** 	}
 836:Modules/mpu6050/inv_mpu.c **** 	/* For LP accel, we automatically configure the hardware to produce latched
 837:Modules/mpu6050/inv_mpu.c **** 	 * interrupts. In LP accel mode, the hardware cycles into sleep mode before
 838:Modules/mpu6050/inv_mpu.c **** 	 * it gets a chance to deassert the interrupt pin; therefore, we shift this
 839:Modules/mpu6050/inv_mpu.c **** 	 * responsibility over to the MCU.
 840:Modules/mpu6050/inv_mpu.c **** 	 *
 841:Modules/mpu6050/inv_mpu.c **** 	 * Any register read will clear the interrupt.
 842:Modules/mpu6050/inv_mpu.c **** 	 */
 843:Modules/mpu6050/inv_mpu.c **** 	mpu_set_int_latched(1);
 844:Modules/mpu6050/inv_mpu.c **** #if defined MPU6050
 845:Modules/mpu6050/inv_mpu.c **** 	tmp[0] = BIT_LPA_CYCLE;
 846:Modules/mpu6050/inv_mpu.c **** 	if (rate == 1) {
 847:Modules/mpu6050/inv_mpu.c **** 		tmp[1] = INV_LPA_1_25HZ;
 848:Modules/mpu6050/inv_mpu.c **** 		mpu_set_lpf(5);
 849:Modules/mpu6050/inv_mpu.c **** 	} else if (rate <= 5) {
 850:Modules/mpu6050/inv_mpu.c **** 		tmp[1] = INV_LPA_5HZ;
 851:Modules/mpu6050/inv_mpu.c **** 		mpu_set_lpf(5);
 852:Modules/mpu6050/inv_mpu.c **** 	} else if (rate <= 20) {
 853:Modules/mpu6050/inv_mpu.c **** 		tmp[1] = INV_LPA_20HZ;
 854:Modules/mpu6050/inv_mpu.c **** 		mpu_set_lpf(10);
 855:Modules/mpu6050/inv_mpu.c **** 	} else {
 856:Modules/mpu6050/inv_mpu.c **** 		tmp[1] = INV_LPA_40HZ;
 857:Modules/mpu6050/inv_mpu.c **** 		mpu_set_lpf(20);
 858:Modules/mpu6050/inv_mpu.c **** 	}
 859:Modules/mpu6050/inv_mpu.c **** 	tmp[1] = (tmp[1] << 6) | BIT_STBY_XYZG;
 860:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
 861:Modules/mpu6050/inv_mpu.c **** 		return -1;
 862:Modules/mpu6050/inv_mpu.c **** #elif defined MPU6500
 863:Modules/mpu6050/inv_mpu.c **** 	/* Set wake frequency. */
 864:Modules/mpu6050/inv_mpu.c ****     if (rate == 1)
 865:Modules/mpu6050/inv_mpu.c ****         tmp[0] = INV_LPA_1_25HZ;
 866:Modules/mpu6050/inv_mpu.c ****     else if (rate == 2)
 867:Modules/mpu6050/inv_mpu.c ****         tmp[0] = INV_LPA_2_5HZ;
 868:Modules/mpu6050/inv_mpu.c ****     else if (rate <= 5)
 869:Modules/mpu6050/inv_mpu.c ****         tmp[0] = INV_LPA_5HZ;
 870:Modules/mpu6050/inv_mpu.c ****     else if (rate <= 10)
 871:Modules/mpu6050/inv_mpu.c ****         tmp[0] = INV_LPA_10HZ;
 872:Modules/mpu6050/inv_mpu.c ****     else if (rate <= 20)
 873:Modules/mpu6050/inv_mpu.c ****         tmp[0] = INV_LPA_20HZ;
 874:Modules/mpu6050/inv_mpu.c ****     else if (rate <= 40)
 875:Modules/mpu6050/inv_mpu.c ****         tmp[0] = INV_LPA_40HZ;
 876:Modules/mpu6050/inv_mpu.c ****     else if (rate <= 80)
 877:Modules/mpu6050/inv_mpu.c ****         tmp[0] = INV_LPA_80HZ;
 878:Modules/mpu6050/inv_mpu.c ****     else if (rate <= 160)
 879:Modules/mpu6050/inv_mpu.c ****         tmp[0] = INV_LPA_160HZ;
 880:Modules/mpu6050/inv_mpu.c ****     else if (rate <= 320)
 881:Modules/mpu6050/inv_mpu.c ****         tmp[0] = INV_LPA_320HZ;
 882:Modules/mpu6050/inv_mpu.c ****     else
 883:Modules/mpu6050/inv_mpu.c ****         tmp[0] = INV_LPA_640HZ;
 884:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->lp_accel_odr, 1, tmp))
 885:Modules/mpu6050/inv_mpu.c ****         return -1;
 886:Modules/mpu6050/inv_mpu.c ****     tmp[0] = BIT_LPA_CYCLE;
 887:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, tmp))
 888:Modules/mpu6050/inv_mpu.c ****         return -1;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 17


 889:Modules/mpu6050/inv_mpu.c **** #endif
 890:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.sensors = INV_XYZ_ACCEL;
 891:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.clk_src = 0;
 892:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lp_accel_mode = 1;
 893:Modules/mpu6050/inv_mpu.c **** 	mpu_configure_fifo(0);
 894:Modules/mpu6050/inv_mpu.c **** 
 895:Modules/mpu6050/inv_mpu.c **** 	return 0;
 896:Modules/mpu6050/inv_mpu.c **** }
 897:Modules/mpu6050/inv_mpu.c **** 
 898:Modules/mpu6050/inv_mpu.c **** /**
 899:Modules/mpu6050/inv_mpu.c ****  *  @brief      Read raw gyro data directly from the registers.
 900:Modules/mpu6050/inv_mpu.c ****  *  @param[out] data        Raw data in hardware units.
 901:Modules/mpu6050/inv_mpu.c ****  *  @param[out] timestamp   Timestamp in milliseconds. Null if not needed.
 902:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
 903:Modules/mpu6050/inv_mpu.c ****  */
 904:Modules/mpu6050/inv_mpu.c **** int mpu_get_gyro_reg(short *data, unsigned long *timestamp)
 905:Modules/mpu6050/inv_mpu.c **** {
 906:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[6];
 907:Modules/mpu6050/inv_mpu.c **** 
 908:Modules/mpu6050/inv_mpu.c **** 	if (!(st.chip_cfg.sensors & INV_XYZ_GYRO))
 909:Modules/mpu6050/inv_mpu.c **** 		return -1;
 910:Modules/mpu6050/inv_mpu.c **** 
 911:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->raw_gyro, 6, tmp))
 912:Modules/mpu6050/inv_mpu.c **** 		return -1;
 913:Modules/mpu6050/inv_mpu.c **** 	data[0] = (tmp[0] << 8) | tmp[1];
 914:Modules/mpu6050/inv_mpu.c **** 	data[1] = (tmp[2] << 8) | tmp[3];
 915:Modules/mpu6050/inv_mpu.c **** 	data[2] = (tmp[4] << 8) | tmp[5];
 916:Modules/mpu6050/inv_mpu.c **** 	if (timestamp)
 917:Modules/mpu6050/inv_mpu.c **** 		get_ms(timestamp);
 918:Modules/mpu6050/inv_mpu.c **** 	return 0;
 919:Modules/mpu6050/inv_mpu.c **** }
 920:Modules/mpu6050/inv_mpu.c **** 
 921:Modules/mpu6050/inv_mpu.c **** /**
 922:Modules/mpu6050/inv_mpu.c ****  *  @brief      Read raw accel data directly from the registers.
 923:Modules/mpu6050/inv_mpu.c ****  *  @param[out] data        Raw data in hardware units.
 924:Modules/mpu6050/inv_mpu.c ****  *  @param[out] timestamp   Timestamp in milliseconds. Null if not needed.
 925:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
 926:Modules/mpu6050/inv_mpu.c ****  */
 927:Modules/mpu6050/inv_mpu.c **** int mpu_get_accel_reg(short *data, unsigned long *timestamp)
 928:Modules/mpu6050/inv_mpu.c **** {
 929:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[6];
 930:Modules/mpu6050/inv_mpu.c **** 
 931:Modules/mpu6050/inv_mpu.c **** 	if (!(st.chip_cfg.sensors & INV_XYZ_ACCEL))
 932:Modules/mpu6050/inv_mpu.c **** 		return -1;
 933:Modules/mpu6050/inv_mpu.c **** 
 934:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->raw_accel, 6, tmp))
 935:Modules/mpu6050/inv_mpu.c **** 		return -1;
 936:Modules/mpu6050/inv_mpu.c **** 	data[0] = (tmp[0] << 8) | tmp[1];
 937:Modules/mpu6050/inv_mpu.c **** 	data[1] = (tmp[2] << 8) | tmp[3];
 938:Modules/mpu6050/inv_mpu.c **** 	data[2] = (tmp[4] << 8) | tmp[5];
 939:Modules/mpu6050/inv_mpu.c **** 	if (timestamp)
 940:Modules/mpu6050/inv_mpu.c **** 		get_ms(timestamp);
 941:Modules/mpu6050/inv_mpu.c **** 	return 0;
 942:Modules/mpu6050/inv_mpu.c **** }
 943:Modules/mpu6050/inv_mpu.c **** 
 944:Modules/mpu6050/inv_mpu.c **** /**
 945:Modules/mpu6050/inv_mpu.c ****  *  @brief      Read temperature data directly from the registers.
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 18


 946:Modules/mpu6050/inv_mpu.c ****  *  @param[out] data        Data in q16 format.
 947:Modules/mpu6050/inv_mpu.c ****  *  @param[out] timestamp   Timestamp in milliseconds. Null if not needed.
 948:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
 949:Modules/mpu6050/inv_mpu.c ****  */
 950:Modules/mpu6050/inv_mpu.c **** int mpu_get_temperature(long *data, unsigned long *timestamp)
 951:Modules/mpu6050/inv_mpu.c **** {
 952:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
 953:Modules/mpu6050/inv_mpu.c **** 	short raw;
 954:Modules/mpu6050/inv_mpu.c **** 
 955:Modules/mpu6050/inv_mpu.c **** 	if (!(st.chip_cfg.sensors))
 956:Modules/mpu6050/inv_mpu.c **** 		return -1;
 957:Modules/mpu6050/inv_mpu.c **** 
 958:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->temp, 2, tmp))
 959:Modules/mpu6050/inv_mpu.c **** 		return -1;
 960:Modules/mpu6050/inv_mpu.c **** 	raw = (tmp[0] << 8) | tmp[1];
 961:Modules/mpu6050/inv_mpu.c **** 	if (timestamp)
 962:Modules/mpu6050/inv_mpu.c **** 		get_ms(timestamp);
 963:Modules/mpu6050/inv_mpu.c **** 
 964:Modules/mpu6050/inv_mpu.c **** 	data[0] = (long)((35 + ((raw - (float)st.hw->temp_offset) / st.hw->temp_sens)) * 65536L);
 965:Modules/mpu6050/inv_mpu.c **** 	return 0;
 966:Modules/mpu6050/inv_mpu.c **** }
 967:Modules/mpu6050/inv_mpu.c **** 
 968:Modules/mpu6050/inv_mpu.c **** /**
 969:Modules/mpu6050/inv_mpu.c ****  *  @brief      Push biases to the accel bias registers.
 970:Modules/mpu6050/inv_mpu.c ****  *  This function expects biases relative to the current sensor output, and
 971:Modules/mpu6050/inv_mpu.c ****  *  these biases will be added to the factory-supplied values.
 972:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  accel_bias  New biases.
 973:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
 974:Modules/mpu6050/inv_mpu.c ****  */
 975:Modules/mpu6050/inv_mpu.c **** int mpu_set_accel_bias(const long *accel_bias)
 976:Modules/mpu6050/inv_mpu.c **** {
 977:Modules/mpu6050/inv_mpu.c **** 	unsigned char data[6];
 978:Modules/mpu6050/inv_mpu.c **** 	short accel_hw[3];
 979:Modules/mpu6050/inv_mpu.c **** 	short got_accel[3];
 980:Modules/mpu6050/inv_mpu.c **** 	short fg[3];
 981:Modules/mpu6050/inv_mpu.c **** 
 982:Modules/mpu6050/inv_mpu.c **** 	if (!accel_bias)
 983:Modules/mpu6050/inv_mpu.c **** 		return -1;
 984:Modules/mpu6050/inv_mpu.c **** 	if (!accel_bias[0] && !accel_bias[1] && !accel_bias[2])
 985:Modules/mpu6050/inv_mpu.c **** 		return 0;
 986:Modules/mpu6050/inv_mpu.c **** 
 987:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, 3, 3, data))
 988:Modules/mpu6050/inv_mpu.c **** 		return -1;
 989:Modules/mpu6050/inv_mpu.c **** 	fg[0] = ((data[0] >> 4) + 8) & 0xf;
 990:Modules/mpu6050/inv_mpu.c **** 	fg[1] = ((data[1] >> 4) + 8) & 0xf;
 991:Modules/mpu6050/inv_mpu.c **** 	fg[2] = ((data[2] >> 4) + 8) & 0xf;
 992:Modules/mpu6050/inv_mpu.c **** 
 993:Modules/mpu6050/inv_mpu.c **** 	accel_hw[0] = (short)(accel_bias[0] * 2 / (64 + fg[0]));
 994:Modules/mpu6050/inv_mpu.c **** 	accel_hw[1] = (short)(accel_bias[1] * 2 / (64 + fg[1]));
 995:Modules/mpu6050/inv_mpu.c **** 	accel_hw[2] = (short)(accel_bias[2] * 2 / (64 + fg[2]));
 996:Modules/mpu6050/inv_mpu.c **** 
 997:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, 0x06, 6, data))
 998:Modules/mpu6050/inv_mpu.c **** 		return -1;
 999:Modules/mpu6050/inv_mpu.c **** 
1000:Modules/mpu6050/inv_mpu.c **** 	got_accel[0] = ((short)data[0] << 8) | data[1];
1001:Modules/mpu6050/inv_mpu.c **** 	got_accel[1] = ((short)data[2] << 8) | data[3];
1002:Modules/mpu6050/inv_mpu.c **** 	got_accel[2] = ((short)data[4] << 8) | data[5];
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 19


1003:Modules/mpu6050/inv_mpu.c **** 
1004:Modules/mpu6050/inv_mpu.c **** 	accel_hw[0] += got_accel[0];
1005:Modules/mpu6050/inv_mpu.c **** 	accel_hw[1] += got_accel[1];
1006:Modules/mpu6050/inv_mpu.c **** 	accel_hw[2] += got_accel[2];
1007:Modules/mpu6050/inv_mpu.c **** 
1008:Modules/mpu6050/inv_mpu.c **** 	data[0] = (accel_hw[0] >> 8) & 0xff;
1009:Modules/mpu6050/inv_mpu.c **** 	data[1] = (accel_hw[0]) & 0xff;
1010:Modules/mpu6050/inv_mpu.c **** 	data[2] = (accel_hw[1] >> 8) & 0xff;
1011:Modules/mpu6050/inv_mpu.c **** 	data[3] = (accel_hw[1]) & 0xff;
1012:Modules/mpu6050/inv_mpu.c **** 	data[4] = (accel_hw[2] >> 8) & 0xff;
1013:Modules/mpu6050/inv_mpu.c **** 	data[5] = (accel_hw[2]) & 0xff;
1014:Modules/mpu6050/inv_mpu.c **** 
1015:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, 0x06, 6, data))
1016:Modules/mpu6050/inv_mpu.c **** 		return -1;
1017:Modules/mpu6050/inv_mpu.c **** 	return 0;
1018:Modules/mpu6050/inv_mpu.c **** }
1019:Modules/mpu6050/inv_mpu.c **** 
1020:Modules/mpu6050/inv_mpu.c **** /**
1021:Modules/mpu6050/inv_mpu.c ****  *  @brief  Reset FIFO read/write pointers.
1022:Modules/mpu6050/inv_mpu.c ****  *  @return 0 if successful.
1023:Modules/mpu6050/inv_mpu.c ****  */
1024:Modules/mpu6050/inv_mpu.c **** int mpu_reset_fifo(void)
1025:Modules/mpu6050/inv_mpu.c **** {
1026:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
1027:Modules/mpu6050/inv_mpu.c **** 
1028:Modules/mpu6050/inv_mpu.c **** 	if (!(st.chip_cfg.sensors))
1029:Modules/mpu6050/inv_mpu.c **** 		return -1;
1030:Modules/mpu6050/inv_mpu.c **** 
1031:Modules/mpu6050/inv_mpu.c **** 	data = 0;
1032:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
1033:Modules/mpu6050/inv_mpu.c **** 		return -1;
1034:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &data))
1035:Modules/mpu6050/inv_mpu.c **** 		return -1;
1036:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
1037:Modules/mpu6050/inv_mpu.c **** 		return -1;
1038:Modules/mpu6050/inv_mpu.c **** 
1039:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.dmp_on) {
1040:Modules/mpu6050/inv_mpu.c **** 		data = BIT_FIFO_RST | BIT_DMP_RST;
1041:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
1042:Modules/mpu6050/inv_mpu.c **** 			return -1;
1043:Modules/mpu6050/inv_mpu.c **** 		delay_ms(50);
1044:Modules/mpu6050/inv_mpu.c **** 		data = BIT_DMP_EN | BIT_FIFO_EN;
1045:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.sensors & INV_XYZ_COMPASS)
1046:Modules/mpu6050/inv_mpu.c **** 			data |= BIT_AUX_IF_EN;
1047:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
1048:Modules/mpu6050/inv_mpu.c **** 			return -1;
1049:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.int_enable)
1050:Modules/mpu6050/inv_mpu.c **** 			data = BIT_DMP_INT_EN;
1051:Modules/mpu6050/inv_mpu.c **** 		else
1052:Modules/mpu6050/inv_mpu.c **** 			data = 0;
1053:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
1054:Modules/mpu6050/inv_mpu.c **** 			return -1;
1055:Modules/mpu6050/inv_mpu.c **** 		data = 0;
1056:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &data))
1057:Modules/mpu6050/inv_mpu.c **** 			return -1;
1058:Modules/mpu6050/inv_mpu.c **** 	} else {
1059:Modules/mpu6050/inv_mpu.c **** 		data = BIT_FIFO_RST;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 20


1060:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
1061:Modules/mpu6050/inv_mpu.c **** 			return -1;
1062:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.bypass_mode || !(st.chip_cfg.sensors & INV_XYZ_COMPASS))
1063:Modules/mpu6050/inv_mpu.c **** 			data = BIT_FIFO_EN;
1064:Modules/mpu6050/inv_mpu.c **** 		else
1065:Modules/mpu6050/inv_mpu.c **** 			data = BIT_FIFO_EN | BIT_AUX_IF_EN;
1066:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
1067:Modules/mpu6050/inv_mpu.c **** 			return -1;
1068:Modules/mpu6050/inv_mpu.c **** 		delay_ms(50);
1069:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.int_enable)
1070:Modules/mpu6050/inv_mpu.c **** 			data = BIT_DATA_RDY_EN;
1071:Modules/mpu6050/inv_mpu.c **** 		else
1072:Modules/mpu6050/inv_mpu.c **** 			data = 0;
1073:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
1074:Modules/mpu6050/inv_mpu.c **** 			return -1;
1075:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &st.chip_cfg.fifo_enable))
1076:Modules/mpu6050/inv_mpu.c **** 			return -1;
1077:Modules/mpu6050/inv_mpu.c **** 	}
1078:Modules/mpu6050/inv_mpu.c **** 	return 0;
1079:Modules/mpu6050/inv_mpu.c **** }
1080:Modules/mpu6050/inv_mpu.c **** 
1081:Modules/mpu6050/inv_mpu.c **** /**
1082:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get the gyro full-scale range.
1083:Modules/mpu6050/inv_mpu.c ****  *  @param[out] fsr Current full-scale range.
1084:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1085:Modules/mpu6050/inv_mpu.c ****  */
1086:Modules/mpu6050/inv_mpu.c **** int mpu_get_gyro_fsr(unsigned short *fsr)
1087:Modules/mpu6050/inv_mpu.c **** {
1088:Modules/mpu6050/inv_mpu.c **** 	switch (st.chip_cfg.gyro_fsr) {
1089:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_250DPS:
1090:Modules/mpu6050/inv_mpu.c **** 			fsr[0] = 250;
1091:Modules/mpu6050/inv_mpu.c **** 			break;
1092:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_500DPS:
1093:Modules/mpu6050/inv_mpu.c **** 			fsr[0] = 500;
1094:Modules/mpu6050/inv_mpu.c **** 			break;
1095:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_1000DPS:
1096:Modules/mpu6050/inv_mpu.c **** 			fsr[0] = 1000;
1097:Modules/mpu6050/inv_mpu.c **** 			break;
1098:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_2000DPS:
1099:Modules/mpu6050/inv_mpu.c **** 			fsr[0] = 2000;
1100:Modules/mpu6050/inv_mpu.c **** 			break;
1101:Modules/mpu6050/inv_mpu.c **** 		default:
1102:Modules/mpu6050/inv_mpu.c **** 			fsr[0] = 0;
1103:Modules/mpu6050/inv_mpu.c **** 			break;
1104:Modules/mpu6050/inv_mpu.c **** 	}
1105:Modules/mpu6050/inv_mpu.c **** 	return 0;
1106:Modules/mpu6050/inv_mpu.c **** }
1107:Modules/mpu6050/inv_mpu.c **** 
1108:Modules/mpu6050/inv_mpu.c **** /**
1109:Modules/mpu6050/inv_mpu.c ****  *  @brief      Set the gyro full-scale range.
1110:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  fsr Desired full-scale range.
1111:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1112:Modules/mpu6050/inv_mpu.c ****  */
1113:Modules/mpu6050/inv_mpu.c **** int mpu_set_gyro_fsr(unsigned short fsr)
1114:Modules/mpu6050/inv_mpu.c **** {
1115:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
1116:Modules/mpu6050/inv_mpu.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 21


1117:Modules/mpu6050/inv_mpu.c **** 	if (!(st.chip_cfg.sensors))
1118:Modules/mpu6050/inv_mpu.c **** 		return -1;
1119:Modules/mpu6050/inv_mpu.c **** 
1120:Modules/mpu6050/inv_mpu.c **** 	switch (fsr) {
1121:Modules/mpu6050/inv_mpu.c **** 		case 250:
1122:Modules/mpu6050/inv_mpu.c **** 			data = INV_FSR_250DPS << 3;
1123:Modules/mpu6050/inv_mpu.c **** 			break;
1124:Modules/mpu6050/inv_mpu.c **** 		case 500:
1125:Modules/mpu6050/inv_mpu.c **** 			data = INV_FSR_500DPS << 3;
1126:Modules/mpu6050/inv_mpu.c **** 			break;
1127:Modules/mpu6050/inv_mpu.c **** 		case 1000:
1128:Modules/mpu6050/inv_mpu.c **** 			data = INV_FSR_1000DPS << 3;
1129:Modules/mpu6050/inv_mpu.c **** 			break;
1130:Modules/mpu6050/inv_mpu.c **** 		case 2000:
1131:Modules/mpu6050/inv_mpu.c **** 			data = INV_FSR_2000DPS << 3;
1132:Modules/mpu6050/inv_mpu.c **** 			break;
1133:Modules/mpu6050/inv_mpu.c **** 		default:
1134:Modules/mpu6050/inv_mpu.c **** 			return -1;
1135:Modules/mpu6050/inv_mpu.c **** 	}
1136:Modules/mpu6050/inv_mpu.c **** 
1137:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.gyro_fsr == (data >> 3))
1138:Modules/mpu6050/inv_mpu.c **** 		return 0;
1139:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, &data))
1140:Modules/mpu6050/inv_mpu.c **** 		return -1;
1141:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.gyro_fsr = data >> 3;
1142:Modules/mpu6050/inv_mpu.c **** 	return 0;
1143:Modules/mpu6050/inv_mpu.c **** }
1144:Modules/mpu6050/inv_mpu.c **** 
1145:Modules/mpu6050/inv_mpu.c **** /**
1146:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get the accel full-scale range.
1147:Modules/mpu6050/inv_mpu.c ****  *  @param[out] fsr Current full-scale range.
1148:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1149:Modules/mpu6050/inv_mpu.c ****  */
1150:Modules/mpu6050/inv_mpu.c **** int mpu_get_accel_fsr(unsigned char *fsr)
1151:Modules/mpu6050/inv_mpu.c **** {
1152:Modules/mpu6050/inv_mpu.c **** 	switch (st.chip_cfg.accel_fsr) {
1153:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_2G:
1154:Modules/mpu6050/inv_mpu.c **** 			fsr[0] = 2;
1155:Modules/mpu6050/inv_mpu.c **** 			break;
1156:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_4G:
1157:Modules/mpu6050/inv_mpu.c **** 			fsr[0] = 4;
1158:Modules/mpu6050/inv_mpu.c **** 			break;
1159:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_8G:
1160:Modules/mpu6050/inv_mpu.c **** 			fsr[0] = 8;
1161:Modules/mpu6050/inv_mpu.c **** 			break;
1162:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_16G:
1163:Modules/mpu6050/inv_mpu.c **** 			fsr[0] = 16;
1164:Modules/mpu6050/inv_mpu.c **** 			break;
1165:Modules/mpu6050/inv_mpu.c **** 		default:
1166:Modules/mpu6050/inv_mpu.c **** 			return -1;
1167:Modules/mpu6050/inv_mpu.c **** 	}
1168:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.accel_half)
1169:Modules/mpu6050/inv_mpu.c **** 		fsr[0] <<= 1;
1170:Modules/mpu6050/inv_mpu.c **** 	return 0;
1171:Modules/mpu6050/inv_mpu.c **** }
1172:Modules/mpu6050/inv_mpu.c **** 
1173:Modules/mpu6050/inv_mpu.c **** /**
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 22


1174:Modules/mpu6050/inv_mpu.c ****  *  @brief      Set the accel full-scale range.
1175:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  fsr Desired full-scale range.
1176:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1177:Modules/mpu6050/inv_mpu.c ****  */
1178:Modules/mpu6050/inv_mpu.c **** int mpu_set_accel_fsr(unsigned char fsr)
1179:Modules/mpu6050/inv_mpu.c **** {
1180:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
1181:Modules/mpu6050/inv_mpu.c **** 
1182:Modules/mpu6050/inv_mpu.c **** 	if (!(st.chip_cfg.sensors))
1183:Modules/mpu6050/inv_mpu.c **** 		return -1;
1184:Modules/mpu6050/inv_mpu.c **** 
1185:Modules/mpu6050/inv_mpu.c **** 	switch (fsr) {
1186:Modules/mpu6050/inv_mpu.c **** 		case 2:
1187:Modules/mpu6050/inv_mpu.c **** 			data = INV_FSR_2G << 3;
1188:Modules/mpu6050/inv_mpu.c **** 			break;
1189:Modules/mpu6050/inv_mpu.c **** 		case 4:
1190:Modules/mpu6050/inv_mpu.c **** 			data = INV_FSR_4G << 3;
1191:Modules/mpu6050/inv_mpu.c **** 			break;
1192:Modules/mpu6050/inv_mpu.c **** 		case 8:
1193:Modules/mpu6050/inv_mpu.c **** 			data = INV_FSR_8G << 3;
1194:Modules/mpu6050/inv_mpu.c **** 			break;
1195:Modules/mpu6050/inv_mpu.c **** 		case 16:
1196:Modules/mpu6050/inv_mpu.c **** 			data = INV_FSR_16G << 3;
1197:Modules/mpu6050/inv_mpu.c **** 			break;
1198:Modules/mpu6050/inv_mpu.c **** 		default:
1199:Modules/mpu6050/inv_mpu.c **** 			return -1;
1200:Modules/mpu6050/inv_mpu.c **** 	}
1201:Modules/mpu6050/inv_mpu.c **** 
1202:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.accel_fsr == (data >> 3))
1203:Modules/mpu6050/inv_mpu.c **** 		return 0;
1204:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->accel_cfg, 1, &data))
1205:Modules/mpu6050/inv_mpu.c **** 		return -1;
1206:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.accel_fsr = data >> 3;
1207:Modules/mpu6050/inv_mpu.c **** 	return 0;
1208:Modules/mpu6050/inv_mpu.c **** }
1209:Modules/mpu6050/inv_mpu.c **** 
1210:Modules/mpu6050/inv_mpu.c **** /**
1211:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get the current DLPF setting.
1212:Modules/mpu6050/inv_mpu.c ****  *  @param[out] lpf Current LPF setting.
1213:Modules/mpu6050/inv_mpu.c ****  *  0 if successful.
1214:Modules/mpu6050/inv_mpu.c ****  */
1215:Modules/mpu6050/inv_mpu.c **** int mpu_get_lpf(unsigned short *lpf)
1216:Modules/mpu6050/inv_mpu.c **** {
1217:Modules/mpu6050/inv_mpu.c **** 	switch (st.chip_cfg.lpf) {
1218:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_188HZ:
1219:Modules/mpu6050/inv_mpu.c **** 			lpf[0] = 188;
1220:Modules/mpu6050/inv_mpu.c **** 			break;
1221:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_98HZ:
1222:Modules/mpu6050/inv_mpu.c **** 			lpf[0] = 98;
1223:Modules/mpu6050/inv_mpu.c **** 			break;
1224:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_42HZ:
1225:Modules/mpu6050/inv_mpu.c **** 			lpf[0] = 42;
1226:Modules/mpu6050/inv_mpu.c **** 			break;
1227:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_20HZ:
1228:Modules/mpu6050/inv_mpu.c **** 			lpf[0] = 20;
1229:Modules/mpu6050/inv_mpu.c **** 			break;
1230:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_10HZ:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 23


1231:Modules/mpu6050/inv_mpu.c **** 			lpf[0] = 10;
1232:Modules/mpu6050/inv_mpu.c **** 			break;
1233:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_5HZ:
1234:Modules/mpu6050/inv_mpu.c **** 			lpf[0] = 5;
1235:Modules/mpu6050/inv_mpu.c **** 			break;
1236:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_256HZ_NOLPF2:
1237:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_2100HZ_NOLPF:
1238:Modules/mpu6050/inv_mpu.c **** 		default:
1239:Modules/mpu6050/inv_mpu.c **** 			lpf[0] = 0;
1240:Modules/mpu6050/inv_mpu.c **** 			break;
1241:Modules/mpu6050/inv_mpu.c **** 	}
1242:Modules/mpu6050/inv_mpu.c **** 	return 0;
1243:Modules/mpu6050/inv_mpu.c **** }
1244:Modules/mpu6050/inv_mpu.c **** 
1245:Modules/mpu6050/inv_mpu.c **** /**
1246:Modules/mpu6050/inv_mpu.c ****  *  @brief      Set digital low pass filter.
1247:Modules/mpu6050/inv_mpu.c ****  *  The following LPF settings are supported: 188, 98, 42, 20, 10, 5.
1248:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  lpf Desired LPF setting.
1249:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1250:Modules/mpu6050/inv_mpu.c ****  */
1251:Modules/mpu6050/inv_mpu.c **** int mpu_set_lpf(unsigned short lpf)
1252:Modules/mpu6050/inv_mpu.c **** {
1253:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
1254:Modules/mpu6050/inv_mpu.c **** 
1255:Modules/mpu6050/inv_mpu.c **** 	if (!(st.chip_cfg.sensors))
1256:Modules/mpu6050/inv_mpu.c **** 		return -1;
1257:Modules/mpu6050/inv_mpu.c **** 
1258:Modules/mpu6050/inv_mpu.c **** 	if (lpf >= 188)
1259:Modules/mpu6050/inv_mpu.c **** 		data = INV_FILTER_188HZ;
1260:Modules/mpu6050/inv_mpu.c **** 	else if (lpf >= 98)
1261:Modules/mpu6050/inv_mpu.c **** 		data = INV_FILTER_98HZ;
1262:Modules/mpu6050/inv_mpu.c **** 	else if (lpf >= 42)
1263:Modules/mpu6050/inv_mpu.c **** 		data = INV_FILTER_42HZ;
1264:Modules/mpu6050/inv_mpu.c **** 	else if (lpf >= 20)
1265:Modules/mpu6050/inv_mpu.c **** 		data = INV_FILTER_20HZ;
1266:Modules/mpu6050/inv_mpu.c **** 	else if (lpf >= 10)
1267:Modules/mpu6050/inv_mpu.c **** 		data = INV_FILTER_10HZ;
1268:Modules/mpu6050/inv_mpu.c **** 	else
1269:Modules/mpu6050/inv_mpu.c **** 		data = INV_FILTER_5HZ;
1270:Modules/mpu6050/inv_mpu.c **** 
1271:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.lpf == data)
1272:Modules/mpu6050/inv_mpu.c **** 		return 0;
1273:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->lpf, 1, &data))
1274:Modules/mpu6050/inv_mpu.c **** 		return -1;
1275:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lpf = data;
1276:Modules/mpu6050/inv_mpu.c **** 	return 0;
1277:Modules/mpu6050/inv_mpu.c **** }
1278:Modules/mpu6050/inv_mpu.c **** 
1279:Modules/mpu6050/inv_mpu.c **** /**
1280:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get sampling rate.
1281:Modules/mpu6050/inv_mpu.c ****  *  @param[out] rate    Current sampling rate (Hz).
1282:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1283:Modules/mpu6050/inv_mpu.c ****  */
1284:Modules/mpu6050/inv_mpu.c **** int mpu_get_sample_rate(unsigned short *rate)
1285:Modules/mpu6050/inv_mpu.c **** {
1286:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.dmp_on)
1287:Modules/mpu6050/inv_mpu.c **** 		return -1;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 24


1288:Modules/mpu6050/inv_mpu.c **** 	else
1289:Modules/mpu6050/inv_mpu.c **** 		rate[0] = st.chip_cfg.sample_rate;
1290:Modules/mpu6050/inv_mpu.c **** 	return 0;
1291:Modules/mpu6050/inv_mpu.c **** }
1292:Modules/mpu6050/inv_mpu.c **** 
1293:Modules/mpu6050/inv_mpu.c **** /**
1294:Modules/mpu6050/inv_mpu.c ****  *  @brief      Set sampling rate.
1295:Modules/mpu6050/inv_mpu.c ****  *  Sampling rate must be between 4Hz and 1kHz.
1296:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  rate    Desired sampling rate (Hz).
1297:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1298:Modules/mpu6050/inv_mpu.c ****  */
1299:Modules/mpu6050/inv_mpu.c **** int mpu_set_sample_rate(unsigned short rate)
1300:Modules/mpu6050/inv_mpu.c **** {
1301:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
1302:Modules/mpu6050/inv_mpu.c **** 
1303:Modules/mpu6050/inv_mpu.c **** 	if (!(st.chip_cfg.sensors))
1304:Modules/mpu6050/inv_mpu.c **** 		return -1;
1305:Modules/mpu6050/inv_mpu.c **** 
1306:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.dmp_on)
1307:Modules/mpu6050/inv_mpu.c **** 		return -1;
1308:Modules/mpu6050/inv_mpu.c **** 	else {
1309:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.lp_accel_mode) {
1310:Modules/mpu6050/inv_mpu.c **** 			if (rate && (rate <= 40)) {
1311:Modules/mpu6050/inv_mpu.c **** 				/* Just stay in low-power accel mode. */
1312:Modules/mpu6050/inv_mpu.c **** 				mpu_lp_accel_mode(rate);
1313:Modules/mpu6050/inv_mpu.c **** 				return 0;
1314:Modules/mpu6050/inv_mpu.c **** 			}
1315:Modules/mpu6050/inv_mpu.c **** 			/* Requested rate exceeds the allowed frequencies in LP accel mode,
1316:Modules/mpu6050/inv_mpu.c **** 			 * switch back to full-power mode.
1317:Modules/mpu6050/inv_mpu.c **** 			 */
1318:Modules/mpu6050/inv_mpu.c **** 			mpu_lp_accel_mode(0);
1319:Modules/mpu6050/inv_mpu.c **** 		}
1320:Modules/mpu6050/inv_mpu.c **** 		if (rate < 4)
1321:Modules/mpu6050/inv_mpu.c **** 			rate = 4;
1322:Modules/mpu6050/inv_mpu.c **** 		else if (rate > 1000)
1323:Modules/mpu6050/inv_mpu.c **** 			rate = 1000;
1324:Modules/mpu6050/inv_mpu.c **** 
1325:Modules/mpu6050/inv_mpu.c **** 		data = 1000 / rate - 1;
1326:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->rate_div, 1, &data))
1327:Modules/mpu6050/inv_mpu.c **** 			return -1;
1328:Modules/mpu6050/inv_mpu.c **** 
1329:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.sample_rate = 1000 / (1 + data);
1330:Modules/mpu6050/inv_mpu.c **** 
1331:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
1332:Modules/mpu6050/inv_mpu.c **** 		mpu_set_compass_sample_rate(min(st.chip_cfg.compass_sample_rate, MAX_COMPASS_SAMPLE_RATE));
1333:Modules/mpu6050/inv_mpu.c **** #endif
1334:Modules/mpu6050/inv_mpu.c **** 
1335:Modules/mpu6050/inv_mpu.c **** 		/* Automatically set LPF to 1/2 sampling rate. */
1336:Modules/mpu6050/inv_mpu.c **** 		mpu_set_lpf(st.chip_cfg.sample_rate >> 1);
1337:Modules/mpu6050/inv_mpu.c **** 		return 0;
1338:Modules/mpu6050/inv_mpu.c **** 	}
1339:Modules/mpu6050/inv_mpu.c **** }
1340:Modules/mpu6050/inv_mpu.c **** 
1341:Modules/mpu6050/inv_mpu.c **** /**
1342:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get compass sampling rate.
1343:Modules/mpu6050/inv_mpu.c ****  *  @param[out] rate    Current compass sampling rate (Hz).
1344:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 25


1345:Modules/mpu6050/inv_mpu.c ****  */
1346:Modules/mpu6050/inv_mpu.c **** int mpu_get_compass_sample_rate(unsigned short *rate)
1347:Modules/mpu6050/inv_mpu.c **** {
1348:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
1349:Modules/mpu6050/inv_mpu.c **** 	rate[0] = st.chip_cfg.compass_sample_rate;
1350:Modules/mpu6050/inv_mpu.c ****     return 0;
1351:Modules/mpu6050/inv_mpu.c **** #else
1352:Modules/mpu6050/inv_mpu.c **** 	rate[0] = 0;
1353:Modules/mpu6050/inv_mpu.c **** 	return -1;
1354:Modules/mpu6050/inv_mpu.c **** #endif
1355:Modules/mpu6050/inv_mpu.c **** }
1356:Modules/mpu6050/inv_mpu.c **** 
1357:Modules/mpu6050/inv_mpu.c **** /**
1358:Modules/mpu6050/inv_mpu.c ****  *  @brief      Set compass sampling rate.
1359:Modules/mpu6050/inv_mpu.c ****  *  The compass on the auxiliary I2C bus is read by the MPU hardware at a
1360:Modules/mpu6050/inv_mpu.c ****  *  maximum of 100Hz. The actual rate can be set to a fraction of the gyro
1361:Modules/mpu6050/inv_mpu.c ****  *  sampling rate.
1362:Modules/mpu6050/inv_mpu.c ****  *
1363:Modules/mpu6050/inv_mpu.c ****  *  \n WARNING: The new rate may be different than what was requested. Call
1364:Modules/mpu6050/inv_mpu.c ****  *  mpu_get_compass_sample_rate to check the actual setting.
1365:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  rate    Desired compass sampling rate (Hz).
1366:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1367:Modules/mpu6050/inv_mpu.c ****  */
1368:Modules/mpu6050/inv_mpu.c **** int mpu_set_compass_sample_rate(unsigned short rate)
1369:Modules/mpu6050/inv_mpu.c **** {
1370:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
1371:Modules/mpu6050/inv_mpu.c **** 	unsigned char div;
1372:Modules/mpu6050/inv_mpu.c ****     if (!rate || rate > st.chip_cfg.sample_rate || rate > MAX_COMPASS_SAMPLE_RATE)
1373:Modules/mpu6050/inv_mpu.c ****         return -1;
1374:Modules/mpu6050/inv_mpu.c **** 
1375:Modules/mpu6050/inv_mpu.c ****     div = st.chip_cfg.sample_rate / rate - 1;
1376:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s4_ctrl, 1, &div))
1377:Modules/mpu6050/inv_mpu.c ****         return -1;
1378:Modules/mpu6050/inv_mpu.c ****     st.chip_cfg.compass_sample_rate = st.chip_cfg.sample_rate / (div + 1);
1379:Modules/mpu6050/inv_mpu.c ****     return 0;
1380:Modules/mpu6050/inv_mpu.c **** #else
1381:Modules/mpu6050/inv_mpu.c **** 	return -1;
1382:Modules/mpu6050/inv_mpu.c **** #endif
1383:Modules/mpu6050/inv_mpu.c **** }
1384:Modules/mpu6050/inv_mpu.c **** 
1385:Modules/mpu6050/inv_mpu.c **** /**
1386:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get gyro sensitivity scale factor.
1387:Modules/mpu6050/inv_mpu.c ****  *  @param[out] sens    Conversion from hardware units to dps.
1388:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1389:Modules/mpu6050/inv_mpu.c ****  */
1390:Modules/mpu6050/inv_mpu.c **** int mpu_get_gyro_sens(float *sens)
1391:Modules/mpu6050/inv_mpu.c **** {
1392:Modules/mpu6050/inv_mpu.c **** 	switch (st.chip_cfg.gyro_fsr) {
1393:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_250DPS:
1394:Modules/mpu6050/inv_mpu.c **** 			sens[0] = 131.f;
1395:Modules/mpu6050/inv_mpu.c **** 			break;
1396:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_500DPS:
1397:Modules/mpu6050/inv_mpu.c **** 			sens[0] = 65.5f;
1398:Modules/mpu6050/inv_mpu.c **** 			break;
1399:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_1000DPS:
1400:Modules/mpu6050/inv_mpu.c **** 			sens[0] = 32.8f;
1401:Modules/mpu6050/inv_mpu.c **** 			break;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 26


1402:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_2000DPS:
1403:Modules/mpu6050/inv_mpu.c **** 			sens[0] = 16.4f;
1404:Modules/mpu6050/inv_mpu.c **** 			break;
1405:Modules/mpu6050/inv_mpu.c **** 		default:
1406:Modules/mpu6050/inv_mpu.c **** 			return -1;
1407:Modules/mpu6050/inv_mpu.c **** 	}
1408:Modules/mpu6050/inv_mpu.c **** 	return 0;
1409:Modules/mpu6050/inv_mpu.c **** }
1410:Modules/mpu6050/inv_mpu.c **** 
1411:Modules/mpu6050/inv_mpu.c **** /**
1412:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get accel sensitivity scale factor.
1413:Modules/mpu6050/inv_mpu.c ****  *  @param[out] sens    Conversion from hardware units to g's.
1414:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1415:Modules/mpu6050/inv_mpu.c ****  */
1416:Modules/mpu6050/inv_mpu.c **** int mpu_get_accel_sens(unsigned short *sens)
1417:Modules/mpu6050/inv_mpu.c **** {
1418:Modules/mpu6050/inv_mpu.c **** 	switch (st.chip_cfg.accel_fsr) {
1419:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_2G:
1420:Modules/mpu6050/inv_mpu.c **** 			sens[0] = 16384;
1421:Modules/mpu6050/inv_mpu.c **** 			break;
1422:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_4G:
1423:Modules/mpu6050/inv_mpu.c **** 			sens[0] = 8092;
1424:Modules/mpu6050/inv_mpu.c **** 			break;
1425:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_8G:
1426:Modules/mpu6050/inv_mpu.c **** 			sens[0] = 4096;
1427:Modules/mpu6050/inv_mpu.c **** 			break;
1428:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_16G:
1429:Modules/mpu6050/inv_mpu.c **** 			sens[0] = 2048;
1430:Modules/mpu6050/inv_mpu.c **** 			break;
1431:Modules/mpu6050/inv_mpu.c **** 		default:
1432:Modules/mpu6050/inv_mpu.c **** 			return -1;
1433:Modules/mpu6050/inv_mpu.c **** 	}
1434:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.accel_half)
1435:Modules/mpu6050/inv_mpu.c **** 		sens[0] >>= 1;
1436:Modules/mpu6050/inv_mpu.c **** 	return 0;
1437:Modules/mpu6050/inv_mpu.c **** }
1438:Modules/mpu6050/inv_mpu.c **** 
1439:Modules/mpu6050/inv_mpu.c **** /**
1440:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get current FIFO configuration.
1441:Modules/mpu6050/inv_mpu.c ****  *  @e sensors can contain a combination of the following flags:
1442:Modules/mpu6050/inv_mpu.c ****  *  \n INV_X_GYRO, INV_Y_GYRO, INV_Z_GYRO
1443:Modules/mpu6050/inv_mpu.c ****  *  \n INV_XYZ_GYRO
1444:Modules/mpu6050/inv_mpu.c ****  *  \n INV_XYZ_ACCEL
1445:Modules/mpu6050/inv_mpu.c ****  *  @param[out] sensors Mask of sensors in FIFO.
1446:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1447:Modules/mpu6050/inv_mpu.c ****  */
1448:Modules/mpu6050/inv_mpu.c **** int mpu_get_fifo_config(unsigned char *sensors)
1449:Modules/mpu6050/inv_mpu.c **** {
1450:Modules/mpu6050/inv_mpu.c **** 	sensors[0] = st.chip_cfg.fifo_enable;
1451:Modules/mpu6050/inv_mpu.c **** 	return 0;
1452:Modules/mpu6050/inv_mpu.c **** }
1453:Modules/mpu6050/inv_mpu.c **** 
1454:Modules/mpu6050/inv_mpu.c **** /**
1455:Modules/mpu6050/inv_mpu.c ****  *  @brief      Select which sensors are pushed to FIFO.
1456:Modules/mpu6050/inv_mpu.c ****  *  @e sensors can contain a combination of the following flags:
1457:Modules/mpu6050/inv_mpu.c ****  *  \n INV_X_GYRO, INV_Y_GYRO, INV_Z_GYRO
1458:Modules/mpu6050/inv_mpu.c ****  *  \n INV_XYZ_GYRO
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 27


1459:Modules/mpu6050/inv_mpu.c ****  *  \n INV_XYZ_ACCEL
1460:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  sensors Mask of sensors to push to FIFO.
1461:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1462:Modules/mpu6050/inv_mpu.c ****  */
1463:Modules/mpu6050/inv_mpu.c **** int mpu_configure_fifo(unsigned char sensors)
1464:Modules/mpu6050/inv_mpu.c **** {
1465:Modules/mpu6050/inv_mpu.c **** 	unsigned char prev;
1466:Modules/mpu6050/inv_mpu.c **** 	int result = 0;
1467:Modules/mpu6050/inv_mpu.c **** 
1468:Modules/mpu6050/inv_mpu.c **** 	/* Compass data isn't going into the FIFO. Stop trying. */
1469:Modules/mpu6050/inv_mpu.c **** 	sensors &= ~INV_XYZ_COMPASS;
1470:Modules/mpu6050/inv_mpu.c **** 
1471:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.dmp_on)
1472:Modules/mpu6050/inv_mpu.c **** 		return 0;
1473:Modules/mpu6050/inv_mpu.c **** 	else {
1474:Modules/mpu6050/inv_mpu.c **** 		if (!(st.chip_cfg.sensors))
1475:Modules/mpu6050/inv_mpu.c **** 			return -1;
1476:Modules/mpu6050/inv_mpu.c **** 		prev = st.chip_cfg.fifo_enable;
1477:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.fifo_enable = sensors & st.chip_cfg.sensors;
1478:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.fifo_enable != sensors)
1479:Modules/mpu6050/inv_mpu.c **** 			/* You're not getting what you asked for. Some sensors are
1480:Modules/mpu6050/inv_mpu.c **** 			 * asleep.
1481:Modules/mpu6050/inv_mpu.c **** 			 */
1482:Modules/mpu6050/inv_mpu.c **** 			result = -1;
1483:Modules/mpu6050/inv_mpu.c **** 		else
1484:Modules/mpu6050/inv_mpu.c **** 			result = 0;
1485:Modules/mpu6050/inv_mpu.c **** 		if (sensors || st.chip_cfg.lp_accel_mode)
1486:Modules/mpu6050/inv_mpu.c **** 			set_int_enable(1);
1487:Modules/mpu6050/inv_mpu.c **** 		else
1488:Modules/mpu6050/inv_mpu.c **** 			set_int_enable(0);
1489:Modules/mpu6050/inv_mpu.c **** 		if (sensors) {
1490:Modules/mpu6050/inv_mpu.c **** 			if (mpu_reset_fifo()) {
1491:Modules/mpu6050/inv_mpu.c **** 				st.chip_cfg.fifo_enable = prev;
1492:Modules/mpu6050/inv_mpu.c **** 				return -1;
1493:Modules/mpu6050/inv_mpu.c **** 			}
1494:Modules/mpu6050/inv_mpu.c **** 		}
1495:Modules/mpu6050/inv_mpu.c **** 	}
1496:Modules/mpu6050/inv_mpu.c **** 
1497:Modules/mpu6050/inv_mpu.c **** 	return result;
1498:Modules/mpu6050/inv_mpu.c **** }
1499:Modules/mpu6050/inv_mpu.c **** 
1500:Modules/mpu6050/inv_mpu.c **** /**
1501:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get current power state.
1502:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  power_on    1 if turned on, 0 if suspended.
1503:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1504:Modules/mpu6050/inv_mpu.c ****  */
1505:Modules/mpu6050/inv_mpu.c **** int mpu_get_power_state(unsigned char *power_on)
1506:Modules/mpu6050/inv_mpu.c **** {
1507:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.sensors)
1508:Modules/mpu6050/inv_mpu.c **** 		power_on[0] = 1;
1509:Modules/mpu6050/inv_mpu.c **** 	else
1510:Modules/mpu6050/inv_mpu.c **** 		power_on[0] = 0;
1511:Modules/mpu6050/inv_mpu.c **** 	return 0;
1512:Modules/mpu6050/inv_mpu.c **** }
1513:Modules/mpu6050/inv_mpu.c **** 
1514:Modules/mpu6050/inv_mpu.c **** /**
1515:Modules/mpu6050/inv_mpu.c ****  *  @brief      Turn specific sensors on/off.
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 28


1516:Modules/mpu6050/inv_mpu.c ****  *  @e sensors can contain a combination of the following flags:
1517:Modules/mpu6050/inv_mpu.c ****  *  \n INV_X_GYRO, INV_Y_GYRO, INV_Z_GYRO
1518:Modules/mpu6050/inv_mpu.c ****  *  \n INV_XYZ_GYRO
1519:Modules/mpu6050/inv_mpu.c ****  *  \n INV_XYZ_ACCEL
1520:Modules/mpu6050/inv_mpu.c ****  *  \n INV_XYZ_COMPASS
1521:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  sensors    Mask of sensors to wake.
1522:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1523:Modules/mpu6050/inv_mpu.c ****  */
1524:Modules/mpu6050/inv_mpu.c **** int mpu_set_sensors(unsigned char sensors)
1525:Modules/mpu6050/inv_mpu.c **** {
1526:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
1527:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
1528:Modules/mpu6050/inv_mpu.c **** 	unsigned char user_ctrl;
1529:Modules/mpu6050/inv_mpu.c **** #endif
1530:Modules/mpu6050/inv_mpu.c **** 
1531:Modules/mpu6050/inv_mpu.c **** 	if (sensors & INV_XYZ_GYRO)
1532:Modules/mpu6050/inv_mpu.c **** 		data = INV_CLK_PLL;
1533:Modules/mpu6050/inv_mpu.c **** 	else if (sensors)
1534:Modules/mpu6050/inv_mpu.c **** 		data = 0;
1535:Modules/mpu6050/inv_mpu.c **** 	else
1536:Modules/mpu6050/inv_mpu.c **** 		data = BIT_SLEEP;
1537:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, &data)) {
1538:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.sensors = 0;
1539:Modules/mpu6050/inv_mpu.c **** 		return -1;
1540:Modules/mpu6050/inv_mpu.c **** 	}
1541:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.clk_src = data & ~BIT_SLEEP;
1542:Modules/mpu6050/inv_mpu.c **** 
1543:Modules/mpu6050/inv_mpu.c **** 	data = 0;
1544:Modules/mpu6050/inv_mpu.c **** 	if (!(sensors & INV_X_GYRO))
1545:Modules/mpu6050/inv_mpu.c **** 		data |= BIT_STBY_XG;
1546:Modules/mpu6050/inv_mpu.c **** 	if (!(sensors & INV_Y_GYRO))
1547:Modules/mpu6050/inv_mpu.c **** 		data |= BIT_STBY_YG;
1548:Modules/mpu6050/inv_mpu.c **** 	if (!(sensors & INV_Z_GYRO))
1549:Modules/mpu6050/inv_mpu.c **** 		data |= BIT_STBY_ZG;
1550:Modules/mpu6050/inv_mpu.c **** 	if (!(sensors & INV_XYZ_ACCEL))
1551:Modules/mpu6050/inv_mpu.c **** 		data |= BIT_STBY_XYZA;
1552:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_2, 1, &data)) {
1553:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.sensors = 0;
1554:Modules/mpu6050/inv_mpu.c **** 		return -1;
1555:Modules/mpu6050/inv_mpu.c **** 	}
1556:Modules/mpu6050/inv_mpu.c **** 
1557:Modules/mpu6050/inv_mpu.c **** 	if (sensors && (sensors != INV_XYZ_ACCEL))
1558:Modules/mpu6050/inv_mpu.c **** 		/* Latched interrupts only used in LP accel mode. */
1559:Modules/mpu6050/inv_mpu.c **** 		mpu_set_int_latched(0);
1560:Modules/mpu6050/inv_mpu.c **** 
1561:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
1562:Modules/mpu6050/inv_mpu.c **** 	#ifdef AK89xx_BYPASS
1563:Modules/mpu6050/inv_mpu.c ****     if (sensors & INV_XYZ_COMPASS)
1564:Modules/mpu6050/inv_mpu.c ****         mpu_set_bypass(1);
1565:Modules/mpu6050/inv_mpu.c ****     else
1566:Modules/mpu6050/inv_mpu.c ****         mpu_set_bypass(0);
1567:Modules/mpu6050/inv_mpu.c **** #else
1568:Modules/mpu6050/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->user_ctrl, 1, &user_ctrl))
1569:Modules/mpu6050/inv_mpu.c ****         return -1;
1570:Modules/mpu6050/inv_mpu.c ****     /* Handle AKM power management. */
1571:Modules/mpu6050/inv_mpu.c ****     if (sensors & INV_XYZ_COMPASS) {
1572:Modules/mpu6050/inv_mpu.c ****         data = AKM_SINGLE_MEASUREMENT;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 29


1573:Modules/mpu6050/inv_mpu.c ****         user_ctrl |= BIT_AUX_IF_EN;
1574:Modules/mpu6050/inv_mpu.c ****     } else {
1575:Modules/mpu6050/inv_mpu.c ****         data = AKM_POWER_DOWN;
1576:Modules/mpu6050/inv_mpu.c ****         user_ctrl &= ~BIT_AUX_IF_EN;
1577:Modules/mpu6050/inv_mpu.c ****     }
1578:Modules/mpu6050/inv_mpu.c ****     if (st.chip_cfg.dmp_on)
1579:Modules/mpu6050/inv_mpu.c ****         user_ctrl |= BIT_DMP_EN;
1580:Modules/mpu6050/inv_mpu.c ****     else
1581:Modules/mpu6050/inv_mpu.c ****         user_ctrl &= ~BIT_DMP_EN;
1582:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s1_do, 1, &data))
1583:Modules/mpu6050/inv_mpu.c ****         return -1;
1584:Modules/mpu6050/inv_mpu.c ****     /* Enable/disable I2C master mode. */
1585:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &user_ctrl))
1586:Modules/mpu6050/inv_mpu.c ****         return -1;
1587:Modules/mpu6050/inv_mpu.c **** #endif
1588:Modules/mpu6050/inv_mpu.c **** #endif
1589:Modules/mpu6050/inv_mpu.c **** 
1590:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.sensors = sensors;
1591:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lp_accel_mode = 0;
1592:Modules/mpu6050/inv_mpu.c **** 	delay_ms(50);
1593:Modules/mpu6050/inv_mpu.c **** 	return 0;
1594:Modules/mpu6050/inv_mpu.c **** }
1595:Modules/mpu6050/inv_mpu.c **** 
1596:Modules/mpu6050/inv_mpu.c **** /**
1597:Modules/mpu6050/inv_mpu.c ****  *  @brief      Read the MPU interrupt status registers.
1598:Modules/mpu6050/inv_mpu.c ****  *  @param[out] status  Mask of interrupt bits.
1599:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1600:Modules/mpu6050/inv_mpu.c ****  */
1601:Modules/mpu6050/inv_mpu.c **** int mpu_get_int_status(short *status)
1602:Modules/mpu6050/inv_mpu.c **** {
1603:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
1604:Modules/mpu6050/inv_mpu.c **** 	if (!st.chip_cfg.sensors)
1605:Modules/mpu6050/inv_mpu.c **** 		return -1;
1606:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->dmp_int_status, 2, tmp))
1607:Modules/mpu6050/inv_mpu.c **** 		return -1;
1608:Modules/mpu6050/inv_mpu.c **** 	status[0] = (tmp[0] << 8) | tmp[1];
1609:Modules/mpu6050/inv_mpu.c **** 	return 0;
1610:Modules/mpu6050/inv_mpu.c **** }
1611:Modules/mpu6050/inv_mpu.c **** 
1612:Modules/mpu6050/inv_mpu.c **** /**
1613:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get one packet from the FIFO.
1614:Modules/mpu6050/inv_mpu.c ****  *  If @e sensors does not contain a particular sensor, disregard the data
1615:Modules/mpu6050/inv_mpu.c ****  *  returned to that pointer.
1616:Modules/mpu6050/inv_mpu.c ****  *  \n @e sensors can contain a combination of the following flags:
1617:Modules/mpu6050/inv_mpu.c ****  *  \n INV_X_GYRO, INV_Y_GYRO, INV_Z_GYRO
1618:Modules/mpu6050/inv_mpu.c ****  *  \n INV_XYZ_GYRO
1619:Modules/mpu6050/inv_mpu.c ****  *  \n INV_XYZ_ACCEL
1620:Modules/mpu6050/inv_mpu.c ****  *  \n If the FIFO has no new data, @e sensors will be zero.
1621:Modules/mpu6050/inv_mpu.c ****  *  \n If the FIFO is disabled, @e sensors will be zero and this function will
1622:Modules/mpu6050/inv_mpu.c ****  *  return a non-zero error code.
1623:Modules/mpu6050/inv_mpu.c ****  *  @param[out] gyro        Gyro data in hardware units.
1624:Modules/mpu6050/inv_mpu.c ****  *  @param[out] accel       Accel data in hardware units.
1625:Modules/mpu6050/inv_mpu.c ****  *  @param[out] timestamp   Timestamp in milliseconds.
1626:Modules/mpu6050/inv_mpu.c ****  *  @param[out] sensors     Mask of sensors read from FIFO.
1627:Modules/mpu6050/inv_mpu.c ****  *  @param[out] more        Number of remaining packets.
1628:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1629:Modules/mpu6050/inv_mpu.c ****  */
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 30


1630:Modules/mpu6050/inv_mpu.c **** int mpu_read_fifo(short *gyro, short *accel, unsigned long *timestamp,
1631:Modules/mpu6050/inv_mpu.c **** 				  unsigned char *sensors, unsigned char *more)
1632:Modules/mpu6050/inv_mpu.c **** {
1633:Modules/mpu6050/inv_mpu.c **** 	/* Assumes maximum packet size is gyro (6) + accel (6). */
1634:Modules/mpu6050/inv_mpu.c **** 	unsigned char data[MAX_PACKET_LENGTH];
1635:Modules/mpu6050/inv_mpu.c **** 	unsigned char packet_size = 0;
1636:Modules/mpu6050/inv_mpu.c **** 	unsigned short fifo_count, index = 0;
1637:Modules/mpu6050/inv_mpu.c **** 
1638:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.dmp_on)
1639:Modules/mpu6050/inv_mpu.c **** 		return -1;
1640:Modules/mpu6050/inv_mpu.c **** 
1641:Modules/mpu6050/inv_mpu.c **** 	sensors[0] = 0;
1642:Modules/mpu6050/inv_mpu.c **** 	if (!st.chip_cfg.sensors)
1643:Modules/mpu6050/inv_mpu.c **** 		return -1;
1644:Modules/mpu6050/inv_mpu.c **** 	if (!st.chip_cfg.fifo_enable)
1645:Modules/mpu6050/inv_mpu.c **** 		return -1;
1646:Modules/mpu6050/inv_mpu.c **** 
1647:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.fifo_enable & INV_X_GYRO)
1648:Modules/mpu6050/inv_mpu.c **** 		packet_size += 2;
1649:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.fifo_enable & INV_Y_GYRO)
1650:Modules/mpu6050/inv_mpu.c **** 		packet_size += 2;
1651:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.fifo_enable & INV_Z_GYRO)
1652:Modules/mpu6050/inv_mpu.c **** 		packet_size += 2;
1653:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.fifo_enable & INV_XYZ_ACCEL)
1654:Modules/mpu6050/inv_mpu.c **** 		packet_size += 6;
1655:Modules/mpu6050/inv_mpu.c **** 
1656:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->fifo_count_h, 2, data))
1657:Modules/mpu6050/inv_mpu.c **** 		return -1;
1658:Modules/mpu6050/inv_mpu.c **** 	fifo_count = (data[0] << 8) | data[1];
1659:Modules/mpu6050/inv_mpu.c **** 	if (fifo_count < packet_size)
1660:Modules/mpu6050/inv_mpu.c **** 		return 0;
1661:Modules/mpu6050/inv_mpu.c **** //    log_i("FIFO count: %hd\n", fifo_count);
1662:Modules/mpu6050/inv_mpu.c **** 	if (fifo_count > (st.hw->max_fifo >> 1)) {
1663:Modules/mpu6050/inv_mpu.c **** 		/* FIFO is 50% full, better check overflow bit. */
1664:Modules/mpu6050/inv_mpu.c **** 		if (i2c_read(st.hw->addr, st.reg->int_status, 1, data))
1665:Modules/mpu6050/inv_mpu.c **** 			return -1;
1666:Modules/mpu6050/inv_mpu.c **** 		if (data[0] & BIT_FIFO_OVERFLOW) {
1667:Modules/mpu6050/inv_mpu.c **** 			mpu_reset_fifo();
1668:Modules/mpu6050/inv_mpu.c **** 			return -2;
1669:Modules/mpu6050/inv_mpu.c **** 		}
1670:Modules/mpu6050/inv_mpu.c **** 	}
1671:Modules/mpu6050/inv_mpu.c **** 	get_ms((unsigned long*)timestamp);
1672:Modules/mpu6050/inv_mpu.c **** 
1673:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->fifo_r_w, packet_size, data))
1674:Modules/mpu6050/inv_mpu.c **** 		return -1;
1675:Modules/mpu6050/inv_mpu.c **** 	more[0] = fifo_count / packet_size - 1;
1676:Modules/mpu6050/inv_mpu.c **** 	sensors[0] = 0;
1677:Modules/mpu6050/inv_mpu.c **** 
1678:Modules/mpu6050/inv_mpu.c **** 	if ((index != packet_size) && st.chip_cfg.fifo_enable & INV_XYZ_ACCEL) {
1679:Modules/mpu6050/inv_mpu.c **** 		accel[0] = (data[index+0] << 8) | data[index+1];
1680:Modules/mpu6050/inv_mpu.c **** 		accel[1] = (data[index+2] << 8) | data[index+3];
1681:Modules/mpu6050/inv_mpu.c **** 		accel[2] = (data[index+4] << 8) | data[index+5];
1682:Modules/mpu6050/inv_mpu.c **** 		sensors[0] |= INV_XYZ_ACCEL;
1683:Modules/mpu6050/inv_mpu.c **** 		index += 6;
1684:Modules/mpu6050/inv_mpu.c **** 	}
1685:Modules/mpu6050/inv_mpu.c **** 	if ((index != packet_size) && st.chip_cfg.fifo_enable & INV_X_GYRO) {
1686:Modules/mpu6050/inv_mpu.c **** 		gyro[0] = (data[index+0] << 8) | data[index+1];
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 31


1687:Modules/mpu6050/inv_mpu.c **** 		sensors[0] |= INV_X_GYRO;
1688:Modules/mpu6050/inv_mpu.c **** 		index += 2;
1689:Modules/mpu6050/inv_mpu.c **** 	}
1690:Modules/mpu6050/inv_mpu.c **** 	if ((index != packet_size) && st.chip_cfg.fifo_enable & INV_Y_GYRO) {
1691:Modules/mpu6050/inv_mpu.c **** 		gyro[1] = (data[index+0] << 8) | data[index+1];
1692:Modules/mpu6050/inv_mpu.c **** 		sensors[0] |= INV_Y_GYRO;
1693:Modules/mpu6050/inv_mpu.c **** 		index += 2;
1694:Modules/mpu6050/inv_mpu.c **** 	}
1695:Modules/mpu6050/inv_mpu.c **** 	if ((index != packet_size) && st.chip_cfg.fifo_enable & INV_Z_GYRO) {
1696:Modules/mpu6050/inv_mpu.c **** 		gyro[2] = (data[index+0] << 8) | data[index+1];
1697:Modules/mpu6050/inv_mpu.c **** 		sensors[0] |= INV_Z_GYRO;
1698:Modules/mpu6050/inv_mpu.c **** 		index += 2;
1699:Modules/mpu6050/inv_mpu.c **** 	}
1700:Modules/mpu6050/inv_mpu.c **** 
1701:Modules/mpu6050/inv_mpu.c **** 	return 0;
1702:Modules/mpu6050/inv_mpu.c **** }
1703:Modules/mpu6050/inv_mpu.c **** 
1704:Modules/mpu6050/inv_mpu.c **** /**
1705:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get one unparsed packet from the FIFO.
1706:Modules/mpu6050/inv_mpu.c ****  *  This function should be used if the packet is to be parsed elsewhere.
1707:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  length  Length of one FIFO packet.
1708:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  data    FIFO packet.
1709:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  more    Number of remaining packets.
1710:Modules/mpu6050/inv_mpu.c ****  */
1711:Modules/mpu6050/inv_mpu.c **** int mpu_read_fifo_stream(unsigned short length, unsigned char *data,
1712:Modules/mpu6050/inv_mpu.c **** 						 unsigned char *more)
1713:Modules/mpu6050/inv_mpu.c **** {
1714:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
1715:Modules/mpu6050/inv_mpu.c **** 	unsigned short fifo_count;
1716:Modules/mpu6050/inv_mpu.c **** 	if (!st.chip_cfg.dmp_on)
1717:Modules/mpu6050/inv_mpu.c **** 		return -1;
1718:Modules/mpu6050/inv_mpu.c **** 	if (!st.chip_cfg.sensors)
1719:Modules/mpu6050/inv_mpu.c **** 		return -1;
1720:Modules/mpu6050/inv_mpu.c **** 
1721:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->fifo_count_h, 2, tmp))
1722:Modules/mpu6050/inv_mpu.c **** 		return -1;
1723:Modules/mpu6050/inv_mpu.c **** 	fifo_count = (tmp[0] << 8) | tmp[1];
1724:Modules/mpu6050/inv_mpu.c **** 	if (fifo_count < length) {
1725:Modules/mpu6050/inv_mpu.c **** 		more[0] = 0;
1726:Modules/mpu6050/inv_mpu.c **** 		return -1;
1727:Modules/mpu6050/inv_mpu.c **** 	}
1728:Modules/mpu6050/inv_mpu.c **** 	if (fifo_count > (st.hw->max_fifo >> 1)) {
1729:Modules/mpu6050/inv_mpu.c **** 		/* FIFO is 50% full, better check overflow bit. */
1730:Modules/mpu6050/inv_mpu.c **** 		if (i2c_read(st.hw->addr, st.reg->int_status, 1, tmp))
1731:Modules/mpu6050/inv_mpu.c **** 			return -1;
1732:Modules/mpu6050/inv_mpu.c **** 		if (tmp[0] & BIT_FIFO_OVERFLOW) {
1733:Modules/mpu6050/inv_mpu.c **** 			mpu_reset_fifo();
1734:Modules/mpu6050/inv_mpu.c **** 			return -2;
1735:Modules/mpu6050/inv_mpu.c **** 		}
1736:Modules/mpu6050/inv_mpu.c **** 	}
1737:Modules/mpu6050/inv_mpu.c **** 
1738:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->fifo_r_w, length, data))
1739:Modules/mpu6050/inv_mpu.c **** 		return -1;
1740:Modules/mpu6050/inv_mpu.c **** 	more[0] = fifo_count / length - 1;
1741:Modules/mpu6050/inv_mpu.c **** 	return 0;
1742:Modules/mpu6050/inv_mpu.c **** }
1743:Modules/mpu6050/inv_mpu.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 32


1744:Modules/mpu6050/inv_mpu.c **** /**
1745:Modules/mpu6050/inv_mpu.c ****  *  @brief      Set device to bypass mode.
1746:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  bypass_on   1 to enable bypass mode.
1747:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1748:Modules/mpu6050/inv_mpu.c ****  */
1749:Modules/mpu6050/inv_mpu.c **** int mpu_set_bypass(unsigned char bypass_on)
1750:Modules/mpu6050/inv_mpu.c **** {
1751:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp;
1752:Modules/mpu6050/inv_mpu.c **** 
1753:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.bypass_mode == bypass_on)
1754:Modules/mpu6050/inv_mpu.c **** 		return 0;
1755:Modules/mpu6050/inv_mpu.c **** 
1756:Modules/mpu6050/inv_mpu.c **** 	if (bypass_on) {
1757:Modules/mpu6050/inv_mpu.c **** 		if (i2c_read(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
1758:Modules/mpu6050/inv_mpu.c **** 			return -1;
1759:Modules/mpu6050/inv_mpu.c **** 		tmp &= ~BIT_AUX_IF_EN;
1760:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
1761:Modules/mpu6050/inv_mpu.c **** 			return -1;
1762:Modules/mpu6050/inv_mpu.c **** 		delay_ms(3);
1763:Modules/mpu6050/inv_mpu.c **** 		tmp = BIT_BYPASS_EN;
1764:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.active_low_int)
1765:Modules/mpu6050/inv_mpu.c **** 			tmp |= BIT_ACTL;
1766:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.latched_int)
1767:Modules/mpu6050/inv_mpu.c **** 			tmp |= BIT_LATCH_EN | BIT_ANY_RD_CLR;
1768:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
1769:Modules/mpu6050/inv_mpu.c **** 			return -1;
1770:Modules/mpu6050/inv_mpu.c **** 	} else {
1771:Modules/mpu6050/inv_mpu.c **** 		/* Enable I2C master mode if compass is being used. */
1772:Modules/mpu6050/inv_mpu.c **** 		if (i2c_read(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
1773:Modules/mpu6050/inv_mpu.c **** 			return -1;
1774:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.sensors & INV_XYZ_COMPASS)
1775:Modules/mpu6050/inv_mpu.c **** 			tmp |= BIT_AUX_IF_EN;
1776:Modules/mpu6050/inv_mpu.c **** 		else
1777:Modules/mpu6050/inv_mpu.c **** 			tmp &= ~BIT_AUX_IF_EN;
1778:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
1779:Modules/mpu6050/inv_mpu.c **** 			return -1;
1780:Modules/mpu6050/inv_mpu.c **** 		delay_ms(3);
1781:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.active_low_int)
1782:Modules/mpu6050/inv_mpu.c **** 			tmp = BIT_ACTL;
1783:Modules/mpu6050/inv_mpu.c **** 		else
1784:Modules/mpu6050/inv_mpu.c **** 			tmp = 0;
1785:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.latched_int)
1786:Modules/mpu6050/inv_mpu.c **** 			tmp |= BIT_LATCH_EN | BIT_ANY_RD_CLR;
1787:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
1788:Modules/mpu6050/inv_mpu.c **** 			return -1;
1789:Modules/mpu6050/inv_mpu.c **** 	}
1790:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.bypass_mode = bypass_on;
1791:Modules/mpu6050/inv_mpu.c **** 	return 0;
1792:Modules/mpu6050/inv_mpu.c **** }
1793:Modules/mpu6050/inv_mpu.c **** 
1794:Modules/mpu6050/inv_mpu.c **** /**
1795:Modules/mpu6050/inv_mpu.c ****  *  @brief      Set interrupt level.
1796:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  active_low  1 for active low, 0 for active high.
1797:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1798:Modules/mpu6050/inv_mpu.c ****  */
1799:Modules/mpu6050/inv_mpu.c **** int mpu_set_int_level(unsigned char active_low)
1800:Modules/mpu6050/inv_mpu.c **** {
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 33


1801:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.active_low_int = active_low;
1802:Modules/mpu6050/inv_mpu.c **** 	return 0;
1803:Modules/mpu6050/inv_mpu.c **** }
1804:Modules/mpu6050/inv_mpu.c **** 
1805:Modules/mpu6050/inv_mpu.c **** /**
1806:Modules/mpu6050/inv_mpu.c ****  *  @brief      Enable latched interrupts.
1807:Modules/mpu6050/inv_mpu.c ****  *  Any MPU register will clear the interrupt.
1808:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  enable  1 to enable, 0 to disable.
1809:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
1810:Modules/mpu6050/inv_mpu.c ****  */
1811:Modules/mpu6050/inv_mpu.c **** int mpu_set_int_latched(unsigned char enable)
1812:Modules/mpu6050/inv_mpu.c **** {
1813:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp;
1814:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.latched_int == enable)
1815:Modules/mpu6050/inv_mpu.c **** 		return 0;
1816:Modules/mpu6050/inv_mpu.c **** 
1817:Modules/mpu6050/inv_mpu.c **** 	if (enable)
1818:Modules/mpu6050/inv_mpu.c **** 		tmp = BIT_LATCH_EN | BIT_ANY_RD_CLR;
1819:Modules/mpu6050/inv_mpu.c **** 	else
1820:Modules/mpu6050/inv_mpu.c **** 		tmp = 0;
1821:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.bypass_mode)
1822:Modules/mpu6050/inv_mpu.c **** 		tmp |= BIT_BYPASS_EN;
1823:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.active_low_int)
1824:Modules/mpu6050/inv_mpu.c **** 		tmp |= BIT_ACTL;
1825:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
1826:Modules/mpu6050/inv_mpu.c **** 		return -1;
1827:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.latched_int = enable;
1828:Modules/mpu6050/inv_mpu.c **** 	return 0;
1829:Modules/mpu6050/inv_mpu.c **** }
1830:Modules/mpu6050/inv_mpu.c **** 
1831:Modules/mpu6050/inv_mpu.c **** #ifdef MPU6050
1832:Modules/mpu6050/inv_mpu.c **** static int get_accel_prod_shift(float *st_shift)
1833:Modules/mpu6050/inv_mpu.c **** {
  26              		.loc 1 1833 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 8
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              	.LVL0:
  31 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 20
  34              		.cfi_offset 4, -20
  35              		.cfi_offset 5, -16
  36              		.cfi_offset 6, -12
  37              		.cfi_offset 7, -8
  38              		.cfi_offset 14, -4
  39 0002 83B0     		sub	sp, sp, #12
  40              	.LCFI1:
  41              		.cfi_def_cfa_offset 32
  42 0004 0646     		mov	r6, r0
1834:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[4], shift_code[3], ii;
1835:Modules/mpu6050/inv_mpu.c **** 
1836:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, 0x0D, 4, tmp))
  43              		.loc 1 1836 0
  44 0006 2A4B     		ldr	r3, .L13
  45 0008 5868     		ldr	r0, [r3, #4]
  46              	.LVL1:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 34


  47 000a 01AB     		add	r3, sp, #4
  48 000c 0422     		movs	r2, #4
  49 000e 0D21     		movs	r1, #13
  50 0010 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
  51 0012 FFF7FEFF 		bl	mod_Mpu_Read
  52              	.LVL2:
  53 0016 0028     		cmp	r0, #0
  54 0018 48D1     		bne	.L9
1837:Modules/mpu6050/inv_mpu.c **** 		return 0x07;
1838:Modules/mpu6050/inv_mpu.c **** 
1839:Modules/mpu6050/inv_mpu.c **** 	shift_code[0] = ((tmp[0] & 0xE0) >> 3) | ((tmp[3] & 0x30) >> 4);
  55              		.loc 1 1839 0
  56 001a 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
  57 001e D210     		asrs	r2, r2, #3
  58 0020 02F01C02 		and	r2, r2, #28
  59 0024 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
  60 0028 C1F30113 		ubfx	r3, r1, #4, #2
  61 002c 1A43     		orrs	r2, r2, r3
  62 002e 8DF80020 		strb	r2, [sp]
1840:Modules/mpu6050/inv_mpu.c **** 	shift_code[1] = ((tmp[1] & 0xE0) >> 3) | ((tmp[3] & 0x0C) >> 2);
  63              		.loc 1 1840 0
  64 0032 9DF80520 		ldrb	r2, [sp, #5]	@ zero_extendqisi2
  65 0036 D210     		asrs	r2, r2, #3
  66 0038 02F01C02 		and	r2, r2, #28
  67 003c C1F38103 		ubfx	r3, r1, #2, #2
  68 0040 1A43     		orrs	r2, r2, r3
  69 0042 8DF80120 		strb	r2, [sp, #1]
1841:Modules/mpu6050/inv_mpu.c **** 	shift_code[2] = ((tmp[2] & 0xE0) >> 3) | (tmp[3] & 0x03);
  70              		.loc 1 1841 0
  71 0046 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
  72 004a DB10     		asrs	r3, r3, #3
  73 004c 03F01C03 		and	r3, r3, #28
  74 0050 01F00301 		and	r1, r1, #3
  75 0054 0B43     		orrs	r3, r3, r1
  76 0056 8DF80230 		strb	r3, [sp, #2]
  77              	.LVL3:
1842:Modules/mpu6050/inv_mpu.c **** 	for (ii = 0; ii < 3; ii++) {
  78              		.loc 1 1842 0
  79 005a 0024     		movs	r4, #0
  80 005c 14E0     		b	.L3
  81              	.LVL4:
  82              	.L12:
1843:Modules/mpu6050/inv_mpu.c **** 		if (!shift_code[ii]) {
1844:Modules/mpu6050/inv_mpu.c **** 			st_shift[ii] = 0.f;
  83              		.loc 1 1844 0
  84 005e 0023     		movs	r3, #0
  85 0060 46F82430 		str	r3, [r6, r4, lsl #2]	@ float
1845:Modules/mpu6050/inv_mpu.c **** 			continue;
  86              		.loc 1 1845 0
  87 0064 0EE0     		b	.L5
  88              	.L7:
1846:Modules/mpu6050/inv_mpu.c **** 		}
1847:Modules/mpu6050/inv_mpu.c **** 		/* Equivalent to..
1848:Modules/mpu6050/inv_mpu.c **** 		 * st_shift[ii] = 0.34f * powf(0.92f/0.34f, (shift_code[ii]-1) / 30.f)
1849:Modules/mpu6050/inv_mpu.c **** 		 */
1850:Modules/mpu6050/inv_mpu.c **** 		st_shift[ii] = 0.34f;
1851:Modules/mpu6050/inv_mpu.c **** 		while (--shift_code[ii])
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 35


1852:Modules/mpu6050/inv_mpu.c **** 			st_shift[ii] *= 1.034f;
  89              		.loc 1 1852 0
  90 0066 1349     		ldr	r1, .L13+4
  91 0068 2868     		ldr	r0, [r5]	@ float
  92 006a FFF7FEFF 		bl	__aeabi_fmul
  93              	.LVL5:
  94 006e 2860     		str	r0, [r5]	@ float
  95              	.L6:
1851:Modules/mpu6050/inv_mpu.c **** 			st_shift[ii] *= 1.034f;
  96              		.loc 1 1851 0
  97 0070 02AB     		add	r3, sp, #8
  98 0072 DA19     		adds	r2, r3, r7
  99 0074 12F8083C 		ldrb	r3, [r2, #-8]	@ zero_extendqisi2
 100 0078 013B     		subs	r3, r3, #1
 101 007a DBB2     		uxtb	r3, r3
 102 007c 02F8083C 		strb	r3, [r2, #-8]
 103 0080 002B     		cmp	r3, #0
 104 0082 F0D1     		bne	.L7
 105              	.L5:
1842:Modules/mpu6050/inv_mpu.c **** 		if (!shift_code[ii]) {
 106              		.loc 1 1842 0 discriminator 2
 107 0084 0134     		adds	r4, r4, #1
 108              	.LVL6:
 109 0086 E4B2     		uxtb	r4, r4
 110              	.LVL7:
 111              	.L3:
1842:Modules/mpu6050/inv_mpu.c **** 		if (!shift_code[ii]) {
 112              		.loc 1 1842 0 is_stmt 0 discriminator 1
 113 0088 022C     		cmp	r4, #2
 114 008a 0CD8     		bhi	.L11
1843:Modules/mpu6050/inv_mpu.c **** 			st_shift[ii] = 0.f;
 115              		.loc 1 1843 0 is_stmt 1
 116 008c 2746     		mov	r7, r4
 117 008e 02AB     		add	r3, sp, #8
 118 0090 2344     		add	r3, r3, r4
 119 0092 13F8083C 		ldrb	r3, [r3, #-8]	@ zero_extendqisi2
 120 0096 002B     		cmp	r3, #0
 121 0098 E1D0     		beq	.L12
1850:Modules/mpu6050/inv_mpu.c **** 		while (--shift_code[ii])
 122              		.loc 1 1850 0
 123 009a 06EB8405 		add	r5, r6, r4, lsl #2
 124 009e 064B     		ldr	r3, .L13+8
 125 00a0 46F82430 		str	r3, [r6, r4, lsl #2]	@ float
1851:Modules/mpu6050/inv_mpu.c **** 			st_shift[ii] *= 1.034f;
 126              		.loc 1 1851 0
 127 00a4 E4E7     		b	.L6
 128              	.L11:
1853:Modules/mpu6050/inv_mpu.c **** 	}
1854:Modules/mpu6050/inv_mpu.c **** 	return 0;
 129              		.loc 1 1854 0
 130 00a6 0020     		movs	r0, #0
 131              	.LVL8:
 132              	.L1:
1855:Modules/mpu6050/inv_mpu.c **** }
 133              		.loc 1 1855 0
 134 00a8 03B0     		add	sp, sp, #12
 135              	.LCFI2:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 36


 136              		.cfi_remember_state
 137              		.cfi_def_cfa_offset 20
 138              		@ sp needed
 139 00aa F0BD     		pop	{r4, r5, r6, r7, pc}
 140              	.LVL9:
 141              	.L9:
 142              	.LCFI3:
 143              		.cfi_restore_state
1837:Modules/mpu6050/inv_mpu.c **** 
 144              		.loc 1 1837 0
 145 00ac 0720     		movs	r0, #7
 146 00ae FBE7     		b	.L1
 147              	.L14:
 148              		.align	2
 149              	.L13:
 150 00b0 00000000 		.word	.LANCHOR0
 151 00b4 1D5A843F 		.word	1065638429
 152 00b8 7B14AE3E 		.word	1051595899
 153              		.cfi_endproc
 154              	.LFE98:
 156              		.global	__aeabi_i2f
 157              		.global	__aeabi_fcmpeq
 158              		.global	__aeabi_fdiv
 159              		.global	__aeabi_fsub
 160              		.global	__aeabi_fcmpgt
 161              		.global	__aeabi_fcmplt
 162              		.section	.text.accel_self_test,"ax",%progbits
 163              		.align	1
 164              		.syntax unified
 165              		.thumb
 166              		.thumb_func
 167              		.fpu softvfp
 169              	accel_self_test:
 170              	.LFB99:
1856:Modules/mpu6050/inv_mpu.c **** 
1857:Modules/mpu6050/inv_mpu.c **** static int accel_self_test(long *bias_regular, long *bias_st)
1858:Modules/mpu6050/inv_mpu.c **** {
 171              		.loc 1 1858 0
 172              		.cfi_startproc
 173              		@ args = 0, pretend = 0, frame = 16
 174              		@ frame_needed = 0, uses_anonymous_args = 0
 175              	.LVL10:
 176 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 177              	.LCFI4:
 178              		.cfi_def_cfa_offset 28
 179              		.cfi_offset 4, -28
 180              		.cfi_offset 5, -24
 181              		.cfi_offset 6, -20
 182              		.cfi_offset 7, -16
 183              		.cfi_offset 8, -12
 184              		.cfi_offset 9, -8
 185              		.cfi_offset 14, -4
 186 0004 85B0     		sub	sp, sp, #20
 187              	.LCFI5:
 188              		.cfi_def_cfa_offset 48
 189 0006 8046     		mov	r8, r0
 190 0008 0F46     		mov	r7, r1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 37


 191              	.LVL11:
1859:Modules/mpu6050/inv_mpu.c **** 	int jj, result = 0;
1860:Modules/mpu6050/inv_mpu.c **** 	float st_shift[3], st_shift_cust, st_shift_var;
1861:Modules/mpu6050/inv_mpu.c **** 
1862:Modules/mpu6050/inv_mpu.c **** 	get_accel_prod_shift(st_shift);
 192              		.loc 1 1862 0
 193 000a 01A8     		add	r0, sp, #4
 194              	.LVL12:
 195 000c FFF7FEFF 		bl	get_accel_prod_shift
 196              	.LVL13:
1859:Modules/mpu6050/inv_mpu.c **** 	int jj, result = 0;
 197              		.loc 1 1859 0
 198 0010 0026     		movs	r6, #0
1863:Modules/mpu6050/inv_mpu.c **** 	for(jj = 0; jj < 3; jj++) {
 199              		.loc 1 1863 0
 200 0012 3446     		mov	r4, r6
 201 0014 0DE0     		b	.L16
 202              	.LVL14:
 203              	.L26:
1864:Modules/mpu6050/inv_mpu.c **** 		st_shift_cust = labs(bias_regular[jj] - bias_st[jj]) / 65536.f;
1865:Modules/mpu6050/inv_mpu.c **** 		if (st_shift[jj]) {
1866:Modules/mpu6050/inv_mpu.c **** 			st_shift_var = st_shift_cust / st_shift[jj] - 1.f;
1867:Modules/mpu6050/inv_mpu.c **** 			if (fabs(st_shift_var) > test.max_accel_var)
1868:Modules/mpu6050/inv_mpu.c **** 				result |= 1 << jj;
1869:Modules/mpu6050/inv_mpu.c **** 		} else if ((st_shift_cust < test.min_g) ||
 204              		.loc 1 1869 0
 205 0016 2049     		ldr	r1, .L29
 206 0018 4846     		mov	r0, r9
 207 001a FFF7FEFF 		bl	__aeabi_fcmplt
 208              	.LVL15:
 209 001e 20B9     		cbnz	r0, .L21
 210              		.loc 1 1869 0 is_stmt 0 discriminator 1
 211 0020 1E49     		ldr	r1, .L29+4
 212 0022 4846     		mov	r0, r9
 213 0024 FFF7FEFF 		bl	__aeabi_fcmpgt
 214              	.LVL16:
 215 0028 10B1     		cbz	r0, .L19
 216              	.L21:
1870:Modules/mpu6050/inv_mpu.c **** 				   (st_shift_cust > test.max_g))
1871:Modules/mpu6050/inv_mpu.c **** 			result |= 1 << jj;
 217              		.loc 1 1871 0 is_stmt 1
 218 002a 0123     		movs	r3, #1
 219 002c A340     		lsls	r3, r3, r4
 220 002e 1E43     		orrs	r6, r6, r3
 221              	.LVL17:
 222              	.L19:
1863:Modules/mpu6050/inv_mpu.c **** 		st_shift_cust = labs(bias_regular[jj] - bias_st[jj]) / 65536.f;
 223              		.loc 1 1863 0 discriminator 2
 224 0030 0134     		adds	r4, r4, #1
 225              	.LVL18:
 226              	.L16:
1863:Modules/mpu6050/inv_mpu.c **** 		st_shift_cust = labs(bias_regular[jj] - bias_st[jj]) / 65536.f;
 227              		.loc 1 1863 0 is_stmt 0 discriminator 1
 228 0032 022C     		cmp	r4, #2
 229 0034 2CDC     		bgt	.L28
1864:Modules/mpu6050/inv_mpu.c **** 		st_shift_cust = labs(bias_regular[jj] - bias_st[jj]) / 65536.f;
 230              		.loc 1 1864 0 is_stmt 1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 38


 231 0036 A500     		lsls	r5, r4, #2
 232 0038 58F82400 		ldr	r0, [r8, r4, lsl #2]
 233 003c 57F82430 		ldr	r3, [r7, r4, lsl #2]
 234 0040 C01A     		subs	r0, r0, r3
 235 0042 0028     		cmp	r0, #0
 236 0044 B8BF     		it	lt
 237 0046 4042     		rsblt	r0, r0, #0
 238 0048 FFF7FEFF 		bl	__aeabi_i2f
 239              	.LVL19:
 240 004c 4FF05E51 		mov	r1, #931135488
 241 0050 FFF7FEFF 		bl	__aeabi_fmul
 242              	.LVL20:
 243 0054 8146     		mov	r9, r0
 244              	.LVL21:
1865:Modules/mpu6050/inv_mpu.c **** 			st_shift_var = st_shift_cust / st_shift[jj] - 1.f;
 245              		.loc 1 1865 0
 246 0056 04AB     		add	r3, sp, #16
 247 0058 1D44     		add	r5, r5, r3
 248 005a 55F80C5C 		ldr	r5, [r5, #-12]	@ float
 249 005e 0021     		movs	r1, #0
 250 0060 2846     		mov	r0, r5
 251              	.LVL22:
 252 0062 FFF7FEFF 		bl	__aeabi_fcmpeq
 253              	.LVL23:
 254 0066 0028     		cmp	r0, #0
 255 0068 D5D1     		bne	.L26
1866:Modules/mpu6050/inv_mpu.c **** 			if (fabs(st_shift_var) > test.max_accel_var)
 256              		.loc 1 1866 0
 257 006a 2946     		mov	r1, r5
 258 006c 4846     		mov	r0, r9
 259 006e FFF7FEFF 		bl	__aeabi_fdiv
 260              	.LVL24:
 261 0072 4FF07E51 		mov	r1, #1065353216
 262 0076 FFF7FEFF 		bl	__aeabi_fsub
 263              	.LVL25:
1867:Modules/mpu6050/inv_mpu.c **** 				result |= 1 << jj;
 264              		.loc 1 1867 0
 265 007a 20F00040 		bic	r0, r0, #-2147483648
 266              	.LVL26:
 267 007e 0849     		ldr	r1, .L29+8
 268 0080 FFF7FEFF 		bl	__aeabi_fcmpgt
 269              	.LVL27:
 270 0084 0028     		cmp	r0, #0
 271 0086 D3D0     		beq	.L19
1868:Modules/mpu6050/inv_mpu.c **** 		} else if ((st_shift_cust < test.min_g) ||
 272              		.loc 1 1868 0
 273 0088 0123     		movs	r3, #1
 274 008a A340     		lsls	r3, r3, r4
 275 008c 1E43     		orrs	r6, r6, r3
 276              	.LVL28:
 277 008e CFE7     		b	.L19
 278              	.LVL29:
 279              	.L28:
1872:Modules/mpu6050/inv_mpu.c **** 	}
1873:Modules/mpu6050/inv_mpu.c **** 
1874:Modules/mpu6050/inv_mpu.c **** 	return result;
1875:Modules/mpu6050/inv_mpu.c **** }
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 39


 280              		.loc 1 1875 0
 281 0090 3046     		mov	r0, r6
 282 0092 05B0     		add	sp, sp, #20
 283              	.LCFI6:
 284              		.cfi_def_cfa_offset 28
 285              		@ sp needed
 286 0094 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 287              	.LVL30:
 288              	.L30:
 289              		.align	2
 290              	.L29:
 291 0098 9A99993E 		.word	1050253722
 292 009c 3333733F 		.word	1064514355
 293 00a0 295C0F3E 		.word	1041194025
 294              		.cfi_endproc
 295              	.LFE99:
 297              		.section	.text.gyro_self_test,"ax",%progbits
 298              		.align	1
 299              		.syntax unified
 300              		.thumb
 301              		.thumb_func
 302              		.fpu softvfp
 304              	gyro_self_test:
 305              	.LFB100:
1876:Modules/mpu6050/inv_mpu.c **** 
1877:Modules/mpu6050/inv_mpu.c **** static int gyro_self_test(long *bias_regular, long *bias_st)
1878:Modules/mpu6050/inv_mpu.c **** {
 306              		.loc 1 1878 0
 307              		.cfi_startproc
 308              		@ args = 0, pretend = 0, frame = 8
 309              		@ frame_needed = 0, uses_anonymous_args = 0
 310              	.LVL31:
 311 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 312              	.LCFI7:
 313              		.cfi_def_cfa_offset 24
 314              		.cfi_offset 4, -24
 315              		.cfi_offset 5, -20
 316              		.cfi_offset 6, -16
 317              		.cfi_offset 7, -12
 318              		.cfi_offset 8, -8
 319              		.cfi_offset 14, -4
 320 0004 82B0     		sub	sp, sp, #8
 321              	.LCFI8:
 322              		.cfi_def_cfa_offset 32
 323 0006 0746     		mov	r7, r0
 324 0008 8846     		mov	r8, r1
 325              	.LVL32:
1879:Modules/mpu6050/inv_mpu.c **** 	int jj, result = 0;
1880:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[3];
1881:Modules/mpu6050/inv_mpu.c **** 	float st_shift, st_shift_cust, st_shift_var;
1882:Modules/mpu6050/inv_mpu.c **** 
1883:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, 0x0D, 3, tmp))
 326              		.loc 1 1883 0
 327 000a 364B     		ldr	r3, .L48
 328 000c 5868     		ldr	r0, [r3, #4]
 329              	.LVL33:
 330 000e 01AB     		add	r3, sp, #4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 40


 331 0010 0322     		movs	r2, #3
 332 0012 0D21     		movs	r1, #13
 333              	.LVL34:
 334 0014 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 335 0016 FFF7FEFF 		bl	mod_Mpu_Read
 336              	.LVL35:
 337 001a 0028     		cmp	r0, #0
 338 001c 5CD1     		bne	.L42
1884:Modules/mpu6050/inv_mpu.c **** 		return 0x07;
1885:Modules/mpu6050/inv_mpu.c **** 
1886:Modules/mpu6050/inv_mpu.c **** 	tmp[0] &= 0x1F;
 339              		.loc 1 1886 0
 340 001e 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 341 0022 03F01F03 		and	r3, r3, #31
 342 0026 8DF80430 		strb	r3, [sp, #4]
1887:Modules/mpu6050/inv_mpu.c **** 	tmp[1] &= 0x1F;
 343              		.loc 1 1887 0
 344 002a 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 345 002e 03F01F03 		and	r3, r3, #31
 346 0032 8DF80530 		strb	r3, [sp, #5]
1888:Modules/mpu6050/inv_mpu.c **** 	tmp[2] &= 0x1F;
 347              		.loc 1 1888 0
 348 0036 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
 349 003a 03F01F03 		and	r3, r3, #31
 350 003e 8DF80630 		strb	r3, [sp, #6]
 351              	.LVL36:
1879:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[3];
 352              		.loc 1 1879 0
 353 0042 0025     		movs	r5, #0
1889:Modules/mpu6050/inv_mpu.c **** 
1890:Modules/mpu6050/inv_mpu.c **** 	for (jj = 0; jj < 3; jj++) {
 354              		.loc 1 1890 0
 355 0044 2C46     		mov	r4, r5
 356 0046 24E0     		b	.L33
 357              	.LVL37:
 358              	.L36:
1891:Modules/mpu6050/inv_mpu.c **** 		st_shift_cust = labs(bias_regular[jj] - bias_st[jj]) / 65536.f;
1892:Modules/mpu6050/inv_mpu.c **** 		if (tmp[jj]) {
1893:Modules/mpu6050/inv_mpu.c **** 			st_shift = 3275.f / test.gyro_sens;
1894:Modules/mpu6050/inv_mpu.c **** 			while (--tmp[jj])
1895:Modules/mpu6050/inv_mpu.c **** 				st_shift *= 1.046f;
 359              		.loc 1 1895 0
 360 0048 2749     		ldr	r1, .L48+4
 361 004a FFF7FEFF 		bl	__aeabi_fmul
 362              	.LVL38:
 363              	.L34:
1894:Modules/mpu6050/inv_mpu.c **** 				st_shift *= 1.046f;
 364              		.loc 1 1894 0
 365 004e 02AB     		add	r3, sp, #8
 366 0050 1A19     		adds	r2, r3, r4
 367 0052 12F8043C 		ldrb	r3, [r2, #-4]	@ zero_extendqisi2
 368 0056 013B     		subs	r3, r3, #1
 369 0058 DBB2     		uxtb	r3, r3
 370 005a 02F8043C 		strb	r3, [r2, #-4]
 371 005e 002B     		cmp	r3, #0
 372 0060 F2D1     		bne	.L36
1896:Modules/mpu6050/inv_mpu.c **** 			st_shift_var = st_shift_cust / st_shift - 1.f;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 41


 373              		.loc 1 1896 0
 374 0062 0146     		mov	r1, r0
 375 0064 3046     		mov	r0, r6
 376              	.LVL39:
 377 0066 FFF7FEFF 		bl	__aeabi_fdiv
 378              	.LVL40:
 379 006a 4FF07E51 		mov	r1, #1065353216
 380 006e FFF7FEFF 		bl	__aeabi_fsub
 381              	.LVL41:
1897:Modules/mpu6050/inv_mpu.c **** 			if (fabs(st_shift_var) > test.max_gyro_var)
 382              		.loc 1 1897 0
 383 0072 20F00040 		bic	r0, r0, #-2147483648
 384              	.LVL42:
 385 0076 1D49     		ldr	r1, .L48+8
 386 0078 FFF7FEFF 		bl	__aeabi_fcmpgt
 387              	.LVL43:
 388 007c 40B1     		cbz	r0, .L37
1898:Modules/mpu6050/inv_mpu.c **** 				result |= 1 << jj;
 389              		.loc 1 1898 0
 390 007e 0123     		movs	r3, #1
 391 0080 A340     		lsls	r3, r3, r4
 392 0082 1D43     		orrs	r5, r5, r3
 393              	.LVL44:
 394 0084 04E0     		b	.L37
 395              	.LVL45:
 396              	.L47:
1893:Modules/mpu6050/inv_mpu.c **** 			while (--tmp[jj])
 397              		.loc 1 1893 0
 398 0086 1A48     		ldr	r0, .L48+12
 399              	.LVL46:
 400 0088 E1E7     		b	.L34
 401              	.L39:
1899:Modules/mpu6050/inv_mpu.c **** 		} else if ((st_shift_cust < test.min_dps) ||
1900:Modules/mpu6050/inv_mpu.c **** 				   (st_shift_cust > test.max_dps))
1901:Modules/mpu6050/inv_mpu.c **** 			result |= 1 << jj;
 402              		.loc 1 1901 0
 403 008a 0123     		movs	r3, #1
 404 008c A340     		lsls	r3, r3, r4
 405 008e 1D43     		orrs	r5, r5, r3
 406              	.LVL47:
 407              	.L37:
1890:Modules/mpu6050/inv_mpu.c **** 		st_shift_cust = labs(bias_regular[jj] - bias_st[jj]) / 65536.f;
 408              		.loc 1 1890 0 discriminator 2
 409 0090 0134     		adds	r4, r4, #1
 410              	.LVL48:
 411              	.L33:
1890:Modules/mpu6050/inv_mpu.c **** 		st_shift_cust = labs(bias_regular[jj] - bias_st[jj]) / 65536.f;
 412              		.loc 1 1890 0 is_stmt 0 discriminator 1
 413 0092 022C     		cmp	r4, #2
 414 0094 21DC     		bgt	.L31
1891:Modules/mpu6050/inv_mpu.c **** 		if (tmp[jj]) {
 415              		.loc 1 1891 0 is_stmt 1
 416 0096 57F82400 		ldr	r0, [r7, r4, lsl #2]
 417 009a 58F82430 		ldr	r3, [r8, r4, lsl #2]
 418 009e C01A     		subs	r0, r0, r3
 419 00a0 0028     		cmp	r0, #0
 420 00a2 B8BF     		it	lt
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 42


 421 00a4 4042     		rsblt	r0, r0, #0
 422 00a6 FFF7FEFF 		bl	__aeabi_i2f
 423              	.LVL49:
 424 00aa 4FF05E51 		mov	r1, #931135488
 425 00ae FFF7FEFF 		bl	__aeabi_fmul
 426              	.LVL50:
 427 00b2 0646     		mov	r6, r0
 428              	.LVL51:
1892:Modules/mpu6050/inv_mpu.c **** 			st_shift = 3275.f / test.gyro_sens;
 429              		.loc 1 1892 0
 430 00b4 02AB     		add	r3, sp, #8
 431 00b6 2344     		add	r3, r3, r4
 432 00b8 13F8043C 		ldrb	r3, [r3, #-4]	@ zero_extendqisi2
 433 00bc 002B     		cmp	r3, #0
 434 00be E2D1     		bne	.L47
1899:Modules/mpu6050/inv_mpu.c **** 				   (st_shift_cust > test.max_dps))
 435              		.loc 1 1899 0
 436 00c0 0C49     		ldr	r1, .L48+16
 437 00c2 FFF7FEFF 		bl	__aeabi_fcmplt
 438              	.LVL52:
 439 00c6 0028     		cmp	r0, #0
 440 00c8 DFD1     		bne	.L39
1899:Modules/mpu6050/inv_mpu.c **** 				   (st_shift_cust > test.max_dps))
 441              		.loc 1 1899 0 is_stmt 0 discriminator 1
 442 00ca 0B49     		ldr	r1, .L48+20
 443 00cc 3046     		mov	r0, r6
 444 00ce FFF7FEFF 		bl	__aeabi_fcmpgt
 445              	.LVL53:
 446 00d2 0028     		cmp	r0, #0
 447 00d4 DCD0     		beq	.L37
 448 00d6 D8E7     		b	.L39
 449              	.LVL54:
 450              	.L42:
1884:Modules/mpu6050/inv_mpu.c **** 
 451              		.loc 1 1884 0 is_stmt 1
 452 00d8 0725     		movs	r5, #7
 453              	.LVL55:
 454              	.L31:
1902:Modules/mpu6050/inv_mpu.c **** 	}
1903:Modules/mpu6050/inv_mpu.c **** 	return result;
1904:Modules/mpu6050/inv_mpu.c **** }
 455              		.loc 1 1904 0
 456 00da 2846     		mov	r0, r5
 457 00dc 02B0     		add	sp, sp, #8
 458              	.LCFI9:
 459              		.cfi_def_cfa_offset 24
 460              		@ sp needed
 461 00de BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 462              	.LVL56:
 463              	.L49:
 464 00e2 00BF     		.align	2
 465              	.L48:
 466 00e4 00000000 		.word	.LANCHOR0
 467 00e8 54E3853F 		.word	1065739092
 468 00ec 295C0F3E 		.word	1041194025
 469 00f0 0000C841 		.word	1103626240
 470 00f4 00002041 		.word	1092616192
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 43


 471 00f8 0000D242 		.word	1121058816
 472              		.cfi_endproc
 473              	.LFE100:
 475              		.section	.text.set_int_enable,"ax",%progbits
 476              		.align	1
 477              		.syntax unified
 478              		.thumb
 479              		.thumb_func
 480              		.fpu softvfp
 482              	set_int_enable:
 483              	.LFB66:
 614:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp;
 484              		.loc 1 614 0
 485              		.cfi_startproc
 486              		@ args = 0, pretend = 0, frame = 8
 487              		@ frame_needed = 0, uses_anonymous_args = 0
 488              	.LVL57:
 489 0000 00B5     		push	{lr}
 490              	.LCFI10:
 491              		.cfi_def_cfa_offset 4
 492              		.cfi_offset 14, -4
 493 0002 83B0     		sub	sp, sp, #12
 494              	.LCFI11:
 495              		.cfi_def_cfa_offset 16
 617:Modules/mpu6050/inv_mpu.c **** 		if (enable)
 496              		.loc 1 617 0
 497 0004 234B     		ldr	r3, .L63
 498 0006 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 499 000a CBB1     		cbz	r3, .L51
 618:Modules/mpu6050/inv_mpu.c **** 			tmp = BIT_DMP_INT_EN;
 500              		.loc 1 618 0
 501 000c A0B1     		cbz	r0, .L52
 619:Modules/mpu6050/inv_mpu.c **** 		else
 502              		.loc 1 619 0
 503 000e 0223     		movs	r3, #2
 504 0010 8DF80730 		strb	r3, [sp, #7]
 505              	.L53:
 622:Modules/mpu6050/inv_mpu.c **** 			return -1;
 506              		.loc 1 622 0
 507 0014 1F4B     		ldr	r3, .L63
 508 0016 5868     		ldr	r0, [r3, #4]
 509              	.LVL58:
 510 0018 1968     		ldr	r1, [r3]
 511 001a 0DF10703 		add	r3, sp, #7
 512 001e 0122     		movs	r2, #1
 513 0020 C97B     		ldrb	r1, [r1, #15]	@ zero_extendqisi2
 514 0022 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 515 0024 FFF7FEFF 		bl	mod_Mpu_Write
 516              	.LVL59:
 517 0028 48BB     		cbnz	r0, .L58
 624:Modules/mpu6050/inv_mpu.c **** 	} else {
 518              		.loc 1 624 0
 519 002a 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 520 002e 194B     		ldr	r3, .L63
 521 0030 5A74     		strb	r2, [r3, #17]
 522              	.L50:
 639:Modules/mpu6050/inv_mpu.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 44


 523              		.loc 1 639 0
 524 0032 03B0     		add	sp, sp, #12
 525              	.LCFI12:
 526              		.cfi_remember_state
 527              		.cfi_def_cfa_offset 4
 528              		@ sp needed
 529 0034 5DF804FB 		ldr	pc, [sp], #4
 530              	.LVL60:
 531              	.L52:
 532              	.LCFI13:
 533              		.cfi_restore_state
 621:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &tmp))
 534              		.loc 1 621 0
 535 0038 0023     		movs	r3, #0
 536 003a 8DF80730 		strb	r3, [sp, #7]
 537 003e E9E7     		b	.L53
 538              	.L51:
 626:Modules/mpu6050/inv_mpu.c **** 			return -1;
 539              		.loc 1 626 0
 540 0040 144B     		ldr	r3, .L63
 541 0042 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 542 0044 F3B1     		cbz	r3, .L59
 628:Modules/mpu6050/inv_mpu.c **** 			return 0;
 543              		.loc 1 628 0
 544 0046 10B1     		cbz	r0, .L55
 628:Modules/mpu6050/inv_mpu.c **** 			return 0;
 545              		.loc 1 628 0 is_stmt 0 discriminator 1
 546 0048 124B     		ldr	r3, .L63
 547 004a 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
 548 004c EBB9     		cbnz	r3, .L60
 549              	.L55:
 630:Modules/mpu6050/inv_mpu.c **** 			tmp = BIT_DATA_RDY_EN;
 550              		.loc 1 630 0 is_stmt 1
 551 004e 90B1     		cbz	r0, .L56
 631:Modules/mpu6050/inv_mpu.c **** 		else
 552              		.loc 1 631 0
 553 0050 0123     		movs	r3, #1
 554 0052 8DF80730 		strb	r3, [sp, #7]
 555              	.L57:
 634:Modules/mpu6050/inv_mpu.c **** 			return -1;
 556              		.loc 1 634 0
 557 0056 0F4B     		ldr	r3, .L63
 558 0058 5868     		ldr	r0, [r3, #4]
 559              	.LVL61:
 560 005a 1968     		ldr	r1, [r3]
 561 005c 0DF10703 		add	r3, sp, #7
 562 0060 0122     		movs	r2, #1
 563 0062 C97B     		ldrb	r1, [r1, #15]	@ zero_extendqisi2
 564 0064 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 565 0066 FFF7FEFF 		bl	mod_Mpu_Write
 566              	.LVL62:
 567 006a 80B9     		cbnz	r0, .L61
 636:Modules/mpu6050/inv_mpu.c **** 	}
 568              		.loc 1 636 0
 569 006c 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 570 0070 084B     		ldr	r3, .L63
 571 0072 5A74     		strb	r2, [r3, #17]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 45


 572 0074 DDE7     		b	.L50
 573              	.LVL63:
 574              	.L56:
 633:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &tmp))
 575              		.loc 1 633 0
 576 0076 0023     		movs	r3, #0
 577 0078 8DF80730 		strb	r3, [sp, #7]
 578 007c EBE7     		b	.L57
 579              	.LVL64:
 580              	.L58:
 623:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.int_enable = tmp;
 581              		.loc 1 623 0
 582 007e 4FF0FF30 		mov	r0, #-1
 583 0082 D6E7     		b	.L50
 584              	.LVL65:
 585              	.L59:
 627:Modules/mpu6050/inv_mpu.c **** 		if (enable && st.chip_cfg.int_enable)
 586              		.loc 1 627 0
 587 0084 4FF0FF30 		mov	r0, #-1
 588              	.LVL66:
 589 0088 D3E7     		b	.L50
 590              	.LVL67:
 591              	.L60:
 629:Modules/mpu6050/inv_mpu.c **** 		if (enable)
 592              		.loc 1 629 0
 593 008a 0020     		movs	r0, #0
 594              	.LVL68:
 595 008c D1E7     		b	.L50
 596              	.L61:
 635:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.int_enable = tmp;
 597              		.loc 1 635 0
 598 008e 4FF0FF30 		mov	r0, #-1
 599 0092 CEE7     		b	.L50
 600              	.L64:
 601              		.align	2
 602              	.L63:
 603 0094 00000000 		.word	.LANCHOR0
 604              		.cfi_endproc
 605              	.LFE66:
 607              		.global	__aeabi_ldivmod
 608              		.section	.text.get_st_biases,"ax",%progbits
 609              		.align	1
 610              		.syntax unified
 611              		.thumb
 612              		.thumb_func
 613              		.fpu softvfp
 615              	get_st_biases:
 616              	.LFB101:
1905:Modules/mpu6050/inv_mpu.c **** 
1906:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
1907:Modules/mpu6050/inv_mpu.c **** static int compass_self_test(void)
1908:Modules/mpu6050/inv_mpu.c **** {
1909:Modules/mpu6050/inv_mpu.c ****     unsigned char tmp[6];
1910:Modules/mpu6050/inv_mpu.c ****     unsigned char tries = 10;
1911:Modules/mpu6050/inv_mpu.c ****     int result = 0x07;
1912:Modules/mpu6050/inv_mpu.c ****     short data;
1913:Modules/mpu6050/inv_mpu.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 46


1914:Modules/mpu6050/inv_mpu.c ****     mpu_set_bypass(1);
1915:Modules/mpu6050/inv_mpu.c **** 
1916:Modules/mpu6050/inv_mpu.c ****     tmp[0] = AKM_POWER_DOWN;
1917:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, tmp))
1918:Modules/mpu6050/inv_mpu.c ****         return 0x07;
1919:Modules/mpu6050/inv_mpu.c ****     tmp[0] = AKM_BIT_SELF_TEST;
1920:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_ASTC, 1, tmp))
1921:Modules/mpu6050/inv_mpu.c ****         goto AKM_restore;
1922:Modules/mpu6050/inv_mpu.c ****     tmp[0] = AKM_MODE_SELF_TEST;
1923:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, tmp))
1924:Modules/mpu6050/inv_mpu.c ****         goto AKM_restore;
1925:Modules/mpu6050/inv_mpu.c **** 
1926:Modules/mpu6050/inv_mpu.c ****     do {
1927:Modules/mpu6050/inv_mpu.c ****         delay_ms(10);
1928:Modules/mpu6050/inv_mpu.c ****         if (i2c_read(st.chip_cfg.compass_addr, AKM_REG_ST1, 1, tmp))
1929:Modules/mpu6050/inv_mpu.c ****             goto AKM_restore;
1930:Modules/mpu6050/inv_mpu.c ****         if (tmp[0] & AKM_DATA_READY)
1931:Modules/mpu6050/inv_mpu.c ****             break;
1932:Modules/mpu6050/inv_mpu.c ****     } while (tries--);
1933:Modules/mpu6050/inv_mpu.c ****     if (!(tmp[0] & AKM_DATA_READY))
1934:Modules/mpu6050/inv_mpu.c ****         goto AKM_restore;
1935:Modules/mpu6050/inv_mpu.c **** 
1936:Modules/mpu6050/inv_mpu.c ****     if (i2c_read(st.chip_cfg.compass_addr, AKM_REG_HXL, 6, tmp))
1937:Modules/mpu6050/inv_mpu.c ****         goto AKM_restore;
1938:Modules/mpu6050/inv_mpu.c **** 
1939:Modules/mpu6050/inv_mpu.c ****     result = 0;
1940:Modules/mpu6050/inv_mpu.c ****     data = (short)(tmp[1] << 8) | tmp[0];
1941:Modules/mpu6050/inv_mpu.c ****     if ((data > 100) || (data < -100))
1942:Modules/mpu6050/inv_mpu.c ****         result |= 0x01;
1943:Modules/mpu6050/inv_mpu.c ****     data = (short)(tmp[3] << 8) | tmp[2];
1944:Modules/mpu6050/inv_mpu.c ****     if ((data > 100) || (data < -100))
1945:Modules/mpu6050/inv_mpu.c ****         result |= 0x02;
1946:Modules/mpu6050/inv_mpu.c ****     data = (short)(tmp[5] << 8) | tmp[4];
1947:Modules/mpu6050/inv_mpu.c ****     if ((data > -300) || (data < -1000))
1948:Modules/mpu6050/inv_mpu.c ****         result |= 0x04;
1949:Modules/mpu6050/inv_mpu.c **** 
1950:Modules/mpu6050/inv_mpu.c **** AKM_restore:
1951:Modules/mpu6050/inv_mpu.c ****     tmp[0] = 0 | SUPPORTS_AK89xx_HIGH_SENS;
1952:Modules/mpu6050/inv_mpu.c ****     i2c_write(st.chip_cfg.compass_addr, AKM_REG_ASTC, 1, tmp);
1953:Modules/mpu6050/inv_mpu.c ****     tmp[0] = SUPPORTS_AK89xx_HIGH_SENS;
1954:Modules/mpu6050/inv_mpu.c ****     i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, tmp);
1955:Modules/mpu6050/inv_mpu.c ****     mpu_set_bypass(0);
1956:Modules/mpu6050/inv_mpu.c ****     return result;
1957:Modules/mpu6050/inv_mpu.c **** }
1958:Modules/mpu6050/inv_mpu.c **** #endif
1959:Modules/mpu6050/inv_mpu.c **** #endif
1960:Modules/mpu6050/inv_mpu.c **** 
1961:Modules/mpu6050/inv_mpu.c **** static int get_st_biases(long *gyro, long *accel, unsigned char hw_test)
1962:Modules/mpu6050/inv_mpu.c **** {
 617              		.loc 1 1962 0
 618              		.cfi_startproc
 619              		@ args = 0, pretend = 0, frame = 16
 620              		@ frame_needed = 0, uses_anonymous_args = 0
 621              	.LVL69:
 622 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 623              	.LCFI14:
 624              		.cfi_def_cfa_offset 28
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 47


 625              		.cfi_offset 4, -28
 626              		.cfi_offset 5, -24
 627              		.cfi_offset 6, -20
 628              		.cfi_offset 7, -16
 629              		.cfi_offset 8, -12
 630              		.cfi_offset 9, -8
 631              		.cfi_offset 14, -4
 632 0004 85B0     		sub	sp, sp, #20
 633              	.LCFI15:
 634              		.cfi_def_cfa_offset 48
 635 0006 0546     		mov	r5, r0
 636 0008 0C46     		mov	r4, r1
 637 000a 1646     		mov	r6, r2
1963:Modules/mpu6050/inv_mpu.c **** 	unsigned char data[MAX_PACKET_LENGTH];
1964:Modules/mpu6050/inv_mpu.c **** 	unsigned char packet_count, ii;
1965:Modules/mpu6050/inv_mpu.c **** 	unsigned short fifo_count;
1966:Modules/mpu6050/inv_mpu.c **** 
1967:Modules/mpu6050/inv_mpu.c **** 	data[0] = 0x01;
 638              		.loc 1 1967 0
 639 000c 0123     		movs	r3, #1
 640 000e 8DF80430 		strb	r3, [sp, #4]
1968:Modules/mpu6050/inv_mpu.c **** 	data[1] = 0;
 641              		.loc 1 1968 0
 642 0012 0023     		movs	r3, #0
 643 0014 8DF80530 		strb	r3, [sp, #5]
1969:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, data))
 644              		.loc 1 1969 0
 645 0018 AB4B     		ldr	r3, .L100
 646 001a 5868     		ldr	r0, [r3, #4]
 647              	.LVL70:
 648 001c 1968     		ldr	r1, [r3]
 649              	.LVL71:
 650 001e 01AB     		add	r3, sp, #4
 651 0020 0222     		movs	r2, #2
 652              	.LVL72:
 653 0022 897C     		ldrb	r1, [r1, #18]	@ zero_extendqisi2
 654 0024 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 655 0026 FFF7FEFF 		bl	mod_Mpu_Write
 656              	.LVL73:
 657 002a 0028     		cmp	r0, #0
 658 002c 40F0D981 		bne	.L78
1970:Modules/mpu6050/inv_mpu.c **** 		return -1;
1971:Modules/mpu6050/inv_mpu.c **** 	delay_ms(200);
 659              		.loc 1 1971 0
 660 0030 C820     		movs	r0, #200
 661 0032 FFF7FEFF 		bl	delay_ms
 662              	.LVL74:
1972:Modules/mpu6050/inv_mpu.c **** 	data[0] = 0;
 663              		.loc 1 1972 0
 664 0036 04AB     		add	r3, sp, #16
 665 0038 0022     		movs	r2, #0
 666 003a 03F80C2D 		strb	r2, [r3, #-12]!
1973:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->int_enable, 1, data))
 667              		.loc 1 1973 0
 668 003e A24A     		ldr	r2, .L100
 669 0040 5068     		ldr	r0, [r2, #4]
 670 0042 1168     		ldr	r1, [r2]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 48


 671 0044 0122     		movs	r2, #1
 672 0046 C97B     		ldrb	r1, [r1, #15]	@ zero_extendqisi2
 673 0048 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 674 004a FFF7FEFF 		bl	mod_Mpu_Write
 675              	.LVL75:
 676 004e 0028     		cmp	r0, #0
 677 0050 40F0CA81 		bne	.L79
1974:Modules/mpu6050/inv_mpu.c **** 		return -1;
1975:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, data))
 678              		.loc 1 1975 0
 679 0054 9C4B     		ldr	r3, .L100
 680 0056 5868     		ldr	r0, [r3, #4]
 681 0058 1968     		ldr	r1, [r3]
 682 005a 01AB     		add	r3, sp, #4
 683 005c 0122     		movs	r2, #1
 684 005e 4979     		ldrb	r1, [r1, #5]	@ zero_extendqisi2
 685 0060 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 686 0062 FFF7FEFF 		bl	mod_Mpu_Write
 687              	.LVL76:
 688 0066 0028     		cmp	r0, #0
 689 0068 40F0C181 		bne	.L80
1976:Modules/mpu6050/inv_mpu.c **** 		return -1;
1977:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 690              		.loc 1 1977 0
 691 006c 964B     		ldr	r3, .L100
 692 006e 5868     		ldr	r0, [r3, #4]
 693 0070 1968     		ldr	r1, [r3]
 694 0072 01AB     		add	r3, sp, #4
 695 0074 0122     		movs	r2, #1
 696 0076 897C     		ldrb	r1, [r1, #18]	@ zero_extendqisi2
 697 0078 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 698 007a FFF7FEFF 		bl	mod_Mpu_Write
 699              	.LVL77:
 700 007e 0028     		cmp	r0, #0
 701 0080 40F0B881 		bne	.L81
1978:Modules/mpu6050/inv_mpu.c **** 		return -1;
1979:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->i2c_mst, 1, data))
 702              		.loc 1 1979 0
 703 0084 904B     		ldr	r3, .L100
 704 0086 5868     		ldr	r0, [r3, #4]
 705 0088 1968     		ldr	r1, [r3]
 706 008a 01AB     		add	r3, sp, #4
 707 008c 0122     		movs	r2, #1
 708 008e C97D     		ldrb	r1, [r1, #23]	@ zero_extendqisi2
 709 0090 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 710 0092 FFF7FEFF 		bl	mod_Mpu_Write
 711              	.LVL78:
 712 0096 0028     		cmp	r0, #0
 713 0098 40F0AF81 		bne	.L82
1980:Modules/mpu6050/inv_mpu.c **** 		return -1;
1981:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, data))
 714              		.loc 1 1981 0
 715 009c 8A4B     		ldr	r3, .L100
 716 009e 5868     		ldr	r0, [r3, #4]
 717 00a0 1968     		ldr	r1, [r3]
 718 00a2 01AB     		add	r3, sp, #4
 719 00a4 0122     		movs	r2, #1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 49


 720 00a6 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 721 00a8 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 722 00aa FFF7FEFF 		bl	mod_Mpu_Write
 723              	.LVL79:
 724 00ae 0028     		cmp	r0, #0
 725 00b0 40F0A681 		bne	.L83
1982:Modules/mpu6050/inv_mpu.c **** 		return -1;
1983:Modules/mpu6050/inv_mpu.c **** 	data[0] = BIT_FIFO_RST | BIT_DMP_RST;
 726              		.loc 1 1983 0
 727 00b4 04AB     		add	r3, sp, #16
 728 00b6 0C22     		movs	r2, #12
 729 00b8 03F80C2D 		strb	r2, [r3, #-12]!
1984:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, data))
 730              		.loc 1 1984 0
 731 00bc 824A     		ldr	r2, .L100
 732 00be 5068     		ldr	r0, [r2, #4]
 733 00c0 1168     		ldr	r1, [r2]
 734 00c2 0122     		movs	r2, #1
 735 00c4 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 736 00c6 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 737 00c8 FFF7FEFF 		bl	mod_Mpu_Write
 738              	.LVL80:
 739 00cc 0028     		cmp	r0, #0
 740 00ce 40F09A81 		bne	.L84
1985:Modules/mpu6050/inv_mpu.c **** 		return -1;
1986:Modules/mpu6050/inv_mpu.c **** 	delay_ms(15);
 741              		.loc 1 1986 0
 742 00d2 0F20     		movs	r0, #15
 743 00d4 FFF7FEFF 		bl	delay_ms
 744              	.LVL81:
1987:Modules/mpu6050/inv_mpu.c **** 	data[0] = st.test->reg_lpf;
 745              		.loc 1 1987 0
 746 00d8 7B4A     		ldr	r2, .L100
 747 00da 936A     		ldr	r3, [r2, #40]
 748 00dc 597A     		ldrb	r1, [r3, #9]	@ zero_extendqisi2
 749 00de 04AB     		add	r3, sp, #16
 750 00e0 03F80C1D 		strb	r1, [r3, #-12]!
1988:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->lpf, 1, data))
 751              		.loc 1 1988 0
 752 00e4 5068     		ldr	r0, [r2, #4]
 753 00e6 1168     		ldr	r1, [r2]
 754 00e8 0122     		movs	r2, #1
 755 00ea 8978     		ldrb	r1, [r1, #2]	@ zero_extendqisi2
 756 00ec 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 757 00ee FFF7FEFF 		bl	mod_Mpu_Write
 758              	.LVL82:
 759 00f2 0028     		cmp	r0, #0
 760 00f4 40F08A81 		bne	.L85
1989:Modules/mpu6050/inv_mpu.c **** 		return -1;
1990:Modules/mpu6050/inv_mpu.c **** 	data[0] = st.test->reg_rate_div;
 761              		.loc 1 1990 0
 762 00f8 734A     		ldr	r2, .L100
 763 00fa 936A     		ldr	r3, [r2, #40]
 764 00fc 197A     		ldrb	r1, [r3, #8]	@ zero_extendqisi2
 765 00fe 04AB     		add	r3, sp, #16
 766 0100 03F80C1D 		strb	r1, [r3, #-12]!
1991:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->rate_div, 1, data))
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 50


 767              		.loc 1 1991 0
 768 0104 5068     		ldr	r0, [r2, #4]
 769 0106 1168     		ldr	r1, [r2]
 770 0108 0122     		movs	r2, #1
 771 010a 4978     		ldrb	r1, [r1, #1]	@ zero_extendqisi2
 772 010c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 773 010e FFF7FEFF 		bl	mod_Mpu_Write
 774              	.LVL83:
 775 0112 0028     		cmp	r0, #0
 776 0114 40F07D81 		bne	.L86
1992:Modules/mpu6050/inv_mpu.c **** 		return -1;
1993:Modules/mpu6050/inv_mpu.c **** 	if (hw_test)
 777              		.loc 1 1993 0
 778 0118 002E     		cmp	r6, #0
 779 011a 00F0C780 		beq	.L67
1994:Modules/mpu6050/inv_mpu.c **** 		data[0] = st.test->reg_gyro_fsr | 0xE0;
 780              		.loc 1 1994 0
 781 011e 6A4B     		ldr	r3, .L100
 782 0120 9B6A     		ldr	r3, [r3, #40]
 783 0122 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 784 0124 63F01F03 		orn	r3, r3, #31
 785 0128 8DF80430 		strb	r3, [sp, #4]
 786              	.L68:
1995:Modules/mpu6050/inv_mpu.c **** 	else
1996:Modules/mpu6050/inv_mpu.c **** 		data[0] = st.test->reg_gyro_fsr;
1997:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, data))
 787              		.loc 1 1997 0
 788 012c 664B     		ldr	r3, .L100
 789 012e 5868     		ldr	r0, [r3, #4]
 790 0130 1968     		ldr	r1, [r3]
 791 0132 01AB     		add	r3, sp, #4
 792 0134 0122     		movs	r2, #1
 793 0136 8979     		ldrb	r1, [r1, #6]	@ zero_extendqisi2
 794 0138 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 795 013a FFF7FEFF 		bl	mod_Mpu_Write
 796              	.LVL84:
 797 013e 0028     		cmp	r0, #0
 798 0140 40F06A81 		bne	.L87
1998:Modules/mpu6050/inv_mpu.c **** 		return -1;
1999:Modules/mpu6050/inv_mpu.c **** 
2000:Modules/mpu6050/inv_mpu.c **** 	if (hw_test)
 799              		.loc 1 2000 0
 800 0144 002E     		cmp	r6, #0
 801 0146 00F0B780 		beq	.L69
2001:Modules/mpu6050/inv_mpu.c **** 		data[0] = st.test->reg_accel_fsr | 0xE0;
 802              		.loc 1 2001 0
 803 014a 5F4B     		ldr	r3, .L100
 804 014c 9B6A     		ldr	r3, [r3, #40]
 805 014e DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 806 0150 63F01F03 		orn	r3, r3, #31
 807 0154 8DF80430 		strb	r3, [sp, #4]
 808              	.L70:
2002:Modules/mpu6050/inv_mpu.c **** 	else
2003:Modules/mpu6050/inv_mpu.c **** 		data[0] = test.reg_accel_fsr;
2004:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->accel_cfg, 1, data))
 809              		.loc 1 2004 0
 810 0158 5B4B     		ldr	r3, .L100
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 51


 811 015a 5868     		ldr	r0, [r3, #4]
 812 015c 1968     		ldr	r1, [r3]
 813 015e 01AB     		add	r3, sp, #4
 814 0160 0122     		movs	r2, #1
 815 0162 C979     		ldrb	r1, [r1, #7]	@ zero_extendqisi2
 816 0164 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 817 0166 FFF7FEFF 		bl	mod_Mpu_Write
 818              	.LVL85:
 819 016a 0028     		cmp	r0, #0
 820 016c 40F05781 		bne	.L88
2005:Modules/mpu6050/inv_mpu.c **** 		return -1;
2006:Modules/mpu6050/inv_mpu.c **** 	if (hw_test)
 821              		.loc 1 2006 0
 822 0170 002E     		cmp	r6, #0
 823 0172 40F0A580 		bne	.L95
 824              	.L71:
2007:Modules/mpu6050/inv_mpu.c **** 		delay_ms(200);
2008:Modules/mpu6050/inv_mpu.c **** 
2009:Modules/mpu6050/inv_mpu.c **** 	/* Fill FIFO for test.wait_ms milliseconds. */
2010:Modules/mpu6050/inv_mpu.c **** 	data[0] = BIT_FIFO_EN;
 825              		.loc 1 2010 0
 826 0176 04AB     		add	r3, sp, #16
 827 0178 4022     		movs	r2, #64
 828 017a 03F80C2D 		strb	r2, [r3, #-12]!
2011:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, data))
 829              		.loc 1 2011 0
 830 017e 524A     		ldr	r2, .L100
 831 0180 5068     		ldr	r0, [r2, #4]
 832 0182 1168     		ldr	r1, [r2]
 833 0184 0122     		movs	r2, #1
 834 0186 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 835 0188 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 836 018a FFF7FEFF 		bl	mod_Mpu_Write
 837              	.LVL86:
 838 018e 0028     		cmp	r0, #0
 839 0190 40F04881 		bne	.L89
2012:Modules/mpu6050/inv_mpu.c **** 		return -1;
2013:Modules/mpu6050/inv_mpu.c **** 
2014:Modules/mpu6050/inv_mpu.c **** 	data[0] = INV_XYZ_GYRO | INV_XYZ_ACCEL;
 840              		.loc 1 2014 0
 841 0194 04AB     		add	r3, sp, #16
 842 0196 7822     		movs	r2, #120
 843 0198 03F80C2D 		strb	r2, [r3, #-12]!
2015:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, data))
 844              		.loc 1 2015 0
 845 019c 4A4A     		ldr	r2, .L100
 846 019e 5068     		ldr	r0, [r2, #4]
 847 01a0 1168     		ldr	r1, [r2]
 848 01a2 0122     		movs	r2, #1
 849 01a4 4979     		ldrb	r1, [r1, #5]	@ zero_extendqisi2
 850 01a6 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 851 01a8 FFF7FEFF 		bl	mod_Mpu_Write
 852              	.LVL87:
 853 01ac 0028     		cmp	r0, #0
 854 01ae 40F03C81 		bne	.L90
2016:Modules/mpu6050/inv_mpu.c **** 		return -1;
2017:Modules/mpu6050/inv_mpu.c **** 	delay_ms(test.wait_ms);
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 52


 855              		.loc 1 2017 0
 856 01b2 3220     		movs	r0, #50
 857 01b4 FFF7FEFF 		bl	delay_ms
 858              	.LVL88:
2018:Modules/mpu6050/inv_mpu.c **** 	data[0] = 0;
 859              		.loc 1 2018 0
 860 01b8 04AB     		add	r3, sp, #16
 861 01ba 0022     		movs	r2, #0
 862 01bc 03F80C2D 		strb	r2, [r3, #-12]!
2019:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, data))
 863              		.loc 1 2019 0
 864 01c0 414A     		ldr	r2, .L100
 865 01c2 5068     		ldr	r0, [r2, #4]
 866 01c4 1168     		ldr	r1, [r2]
 867 01c6 0122     		movs	r2, #1
 868 01c8 4979     		ldrb	r1, [r1, #5]	@ zero_extendqisi2
 869 01ca 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 870 01cc FFF7FEFF 		bl	mod_Mpu_Write
 871              	.LVL89:
 872 01d0 0028     		cmp	r0, #0
 873 01d2 40F02D81 		bne	.L91
2020:Modules/mpu6050/inv_mpu.c **** 		return -1;
2021:Modules/mpu6050/inv_mpu.c **** 
2022:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->fifo_count_h, 2, data))
 874              		.loc 1 2022 0
 875 01d6 3C4B     		ldr	r3, .L100
 876 01d8 5868     		ldr	r0, [r3, #4]
 877 01da 1968     		ldr	r1, [r3]
 878 01dc 01AB     		add	r3, sp, #4
 879 01de 0222     		movs	r2, #2
 880 01e0 897A     		ldrb	r1, [r1, #10]	@ zero_extendqisi2
 881 01e2 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 882 01e4 FFF7FEFF 		bl	mod_Mpu_Read
 883              	.LVL90:
 884 01e8 0028     		cmp	r0, #0
 885 01ea 40F02481 		bne	.L92
2023:Modules/mpu6050/inv_mpu.c **** 		return -1;
2024:Modules/mpu6050/inv_mpu.c **** 
2025:Modules/mpu6050/inv_mpu.c **** 	fifo_count = (data[0] << 8) | data[1];
 886              		.loc 1 2025 0
 887 01ee 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 888 01f2 9DF80570 		ldrb	r7, [sp, #5]	@ zero_extendqisi2
 889 01f6 47EA0327 		orr	r7, r7, r3, lsl #8
 890              	.LVL91:
2026:Modules/mpu6050/inv_mpu.c **** 	packet_count = fifo_count / MAX_PACKET_LENGTH;
 891              		.loc 1 2026 0
 892 01fa 344B     		ldr	r3, .L100+4
 893 01fc A3FB0737 		umull	r3, r7, r3, r7
 894              	.LVL92:
 895 0200 C7F3C707 		ubfx	r7, r7, #3, #8
 896              	.LVL93:
2027:Modules/mpu6050/inv_mpu.c **** 	gyro[0] = gyro[1] = gyro[2] = 0;
 897              		.loc 1 2027 0
 898 0204 0026     		movs	r6, #0
 899 0206 AE60     		str	r6, [r5, #8]
 900              	.LVL94:
 901 0208 6E60     		str	r6, [r5, #4]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 53


 902 020a 2E60     		str	r6, [r5]
2028:Modules/mpu6050/inv_mpu.c **** 	accel[0] = accel[1] = accel[2] = 0;
 903              		.loc 1 2028 0
 904 020c A660     		str	r6, [r4, #8]
 905 020e 6660     		str	r6, [r4, #4]
 906 0210 2660     		str	r6, [r4]
 907              	.LVL95:
 908              	.L72:
2029:Modules/mpu6050/inv_mpu.c **** 
2030:Modules/mpu6050/inv_mpu.c **** 	for (ii = 0; ii < packet_count; ii++) {
 909              		.loc 1 2030 0 discriminator 1
 910 0212 BE42     		cmp	r6, r7
 911 0214 5CD2     		bcs	.L96
 912              	.LBB2:
2031:Modules/mpu6050/inv_mpu.c **** 		short accel_cur[3], gyro_cur[3];
2032:Modules/mpu6050/inv_mpu.c **** 		if (i2c_read(st.hw->addr, st.reg->fifo_r_w, MAX_PACKET_LENGTH, data))
 913              		.loc 1 2032 0
 914 0216 2C4B     		ldr	r3, .L100
 915 0218 5868     		ldr	r0, [r3, #4]
 916 021a 1968     		ldr	r1, [r3]
 917 021c 01AB     		add	r3, sp, #4
 918 021e 0C22     		movs	r2, #12
 919 0220 C97A     		ldrb	r1, [r1, #11]	@ zero_extendqisi2
 920 0222 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 921 0224 FFF7FEFF 		bl	mod_Mpu_Read
 922              	.LVL96:
 923 0228 0028     		cmp	r0, #0
 924 022a 40F00781 		bne	.L93
2033:Modules/mpu6050/inv_mpu.c **** 			return -1;
2034:Modules/mpu6050/inv_mpu.c **** 		accel_cur[0] = ((short)data[0] << 8) | data[1];
 925              		.loc 1 2034 0
 926 022e 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 927 0232 9DF80510 		ldrb	r1, [sp, #5]	@ zero_extendqisi2
 928 0236 41EA0321 		orr	r1, r1, r3, lsl #8
 929 023a 09B2     		sxth	r1, r1
2035:Modules/mpu6050/inv_mpu.c **** 		accel_cur[1] = ((short)data[2] << 8) | data[3];
 930              		.loc 1 2035 0
 931 023c 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
 932 0240 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 933 0244 42EA0322 		orr	r2, r2, r3, lsl #8
 934 0248 12B2     		sxth	r2, r2
2036:Modules/mpu6050/inv_mpu.c **** 		accel_cur[2] = ((short)data[4] << 8) | data[5];
 935              		.loc 1 2036 0
 936 024a 9DF80800 		ldrb	r0, [sp, #8]	@ zero_extendqisi2
 937 024e 9DF80930 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 938 0252 43EA0023 		orr	r3, r3, r0, lsl #8
 939 0256 1BB2     		sxth	r3, r3
2037:Modules/mpu6050/inv_mpu.c **** 		accel[0] += (long)accel_cur[0];
 940              		.loc 1 2037 0
 941 0258 2068     		ldr	r0, [r4]
 942 025a 0144     		add	r1, r1, r0
 943 025c 2160     		str	r1, [r4]
2038:Modules/mpu6050/inv_mpu.c **** 		accel[1] += (long)accel_cur[1];
 944              		.loc 1 2038 0
 945 025e 6168     		ldr	r1, [r4, #4]
 946 0260 0A44     		add	r2, r2, r1
 947 0262 6260     		str	r2, [r4, #4]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 54


2039:Modules/mpu6050/inv_mpu.c **** 		accel[2] += (long)accel_cur[2];
 948              		.loc 1 2039 0
 949 0264 A268     		ldr	r2, [r4, #8]
 950 0266 1344     		add	r3, r3, r2
 951 0268 A360     		str	r3, [r4, #8]
2040:Modules/mpu6050/inv_mpu.c **** 		gyro_cur[0] = (((short)data[6] << 8) | data[7]);
 952              		.loc 1 2040 0
 953 026a 9DF80A30 		ldrb	r3, [sp, #10]	@ zero_extendqisi2
 954 026e 9DF80B20 		ldrb	r2, [sp, #11]	@ zero_extendqisi2
 955 0272 42EA0322 		orr	r2, r2, r3, lsl #8
 956 0276 12B2     		sxth	r2, r2
2041:Modules/mpu6050/inv_mpu.c **** 		gyro_cur[1] = (((short)data[8] << 8) | data[9]);
 957              		.loc 1 2041 0
 958 0278 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 959 027c 9DF80D10 		ldrb	r1, [sp, #13]	@ zero_extendqisi2
 960 0280 41EA0321 		orr	r1, r1, r3, lsl #8
 961 0284 09B2     		sxth	r1, r1
2042:Modules/mpu6050/inv_mpu.c **** 		gyro_cur[2] = (((short)data[10] << 8) | data[11]);
 962              		.loc 1 2042 0
 963 0286 9DF80E00 		ldrb	r0, [sp, #14]	@ zero_extendqisi2
 964 028a 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 965 028e 43EA0023 		orr	r3, r3, r0, lsl #8
 966 0292 1BB2     		sxth	r3, r3
2043:Modules/mpu6050/inv_mpu.c **** 		gyro[0] += (long)gyro_cur[0];
 967              		.loc 1 2043 0
 968 0294 2868     		ldr	r0, [r5]
 969 0296 0244     		add	r2, r2, r0
 970 0298 2A60     		str	r2, [r5]
2044:Modules/mpu6050/inv_mpu.c **** 		gyro[1] += (long)gyro_cur[1];
 971              		.loc 1 2044 0
 972 029a 6A68     		ldr	r2, [r5, #4]
 973 029c 1144     		add	r1, r1, r2
 974 029e 6960     		str	r1, [r5, #4]
2045:Modules/mpu6050/inv_mpu.c **** 		gyro[2] += (long)gyro_cur[2];
 975              		.loc 1 2045 0
 976 02a0 AA68     		ldr	r2, [r5, #8]
 977 02a2 1344     		add	r3, r3, r2
 978 02a4 AB60     		str	r3, [r5, #8]
 979              	.LBE2:
2030:Modules/mpu6050/inv_mpu.c **** 		short accel_cur[3], gyro_cur[3];
 980              		.loc 1 2030 0
 981 02a6 0136     		adds	r6, r6, #1
 982              	.LVL97:
 983 02a8 F6B2     		uxtb	r6, r6
 984              	.LVL98:
 985 02aa B2E7     		b	.L72
 986              	.LVL99:
 987              	.L67:
1996:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, data))
 988              		.loc 1 1996 0
 989 02ac 064B     		ldr	r3, .L100
 990 02ae 9B6A     		ldr	r3, [r3, #40]
 991 02b0 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 992 02b2 8DF80430 		strb	r3, [sp, #4]
 993 02b6 39E7     		b	.L68
 994              	.L69:
2003:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->accel_cfg, 1, data))
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 55


 995              		.loc 1 2003 0
 996 02b8 1823     		movs	r3, #24
 997 02ba 8DF80430 		strb	r3, [sp, #4]
 998 02be 4BE7     		b	.L70
 999              	.L95:
2007:Modules/mpu6050/inv_mpu.c **** 
 1000              		.loc 1 2007 0
 1001 02c0 C820     		movs	r0, #200
 1002 02c2 FFF7FEFF 		bl	delay_ms
 1003              	.LVL100:
 1004 02c6 56E7     		b	.L71
 1005              	.L101:
 1006              		.align	2
 1007              	.L100:
 1008 02c8 00000000 		.word	.LANCHOR0
 1009 02cc ABAAAAAA 		.word	-1431655765
 1010              	.LVL101:
 1011              	.L96:
2046:Modules/mpu6050/inv_mpu.c **** 	}
2047:Modules/mpu6050/inv_mpu.c **** #ifdef EMPL_NO_64BIT
2048:Modules/mpu6050/inv_mpu.c **** 	gyro[0] = (long)(((float)gyro[0]*65536.f) / test.gyro_sens / packet_count);
2049:Modules/mpu6050/inv_mpu.c ****     gyro[1] = (long)(((float)gyro[1]*65536.f) / test.gyro_sens / packet_count);
2050:Modules/mpu6050/inv_mpu.c ****     gyro[2] = (long)(((float)gyro[2]*65536.f) / test.gyro_sens / packet_count);
2051:Modules/mpu6050/inv_mpu.c ****     if (has_accel) {
2052:Modules/mpu6050/inv_mpu.c ****         accel[0] = (long)(((float)accel[0]*65536.f) / test.accel_sens /
2053:Modules/mpu6050/inv_mpu.c ****             packet_count);
2054:Modules/mpu6050/inv_mpu.c ****         accel[1] = (long)(((float)accel[1]*65536.f) / test.accel_sens /
2055:Modules/mpu6050/inv_mpu.c ****             packet_count);
2056:Modules/mpu6050/inv_mpu.c ****         accel[2] = (long)(((float)accel[2]*65536.f) / test.accel_sens /
2057:Modules/mpu6050/inv_mpu.c ****             packet_count);
2058:Modules/mpu6050/inv_mpu.c ****         /* Don't remove gravity! */
2059:Modules/mpu6050/inv_mpu.c ****         accel[2] -= 65536L;
2060:Modules/mpu6050/inv_mpu.c ****     }
2061:Modules/mpu6050/inv_mpu.c **** #else
2062:Modules/mpu6050/inv_mpu.c **** 	gyro[0] = (long)(((long long)gyro[0]<<16) / test.gyro_sens / packet_count);
 1012              		.loc 1 2062 0
 1013 02d0 2968     		ldr	r1, [r5]
 1014 02d2 8322     		movs	r2, #131
 1015 02d4 0023     		movs	r3, #0
 1016 02d6 0804     		lsls	r0, r1, #16
 1017 02d8 0914     		asrs	r1, r1, #16
 1018 02da FFF7FEFF 		bl	__aeabi_ldivmod
 1019              	.LVL102:
 1020 02de FEB2     		uxtb	r6, r7
 1021              	.LVL103:
 1022 02e0 0027     		movs	r7, #0
 1023              	.LVL104:
 1024 02e2 3246     		mov	r2, r6
 1025 02e4 3B46     		mov	r3, r7
 1026 02e6 FFF7FEFF 		bl	__aeabi_ldivmod
 1027              	.LVL105:
 1028 02ea 2860     		str	r0, [r5]
2063:Modules/mpu6050/inv_mpu.c **** 	gyro[1] = (long)(((long long)gyro[1]<<16) / test.gyro_sens / packet_count);
 1029              		.loc 1 2063 0
 1030 02ec 6968     		ldr	r1, [r5, #4]
 1031 02ee 8322     		movs	r2, #131
 1032 02f0 0023     		movs	r3, #0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 56


 1033 02f2 0804     		lsls	r0, r1, #16
 1034 02f4 0914     		asrs	r1, r1, #16
 1035 02f6 FFF7FEFF 		bl	__aeabi_ldivmod
 1036              	.LVL106:
 1037 02fa 3246     		mov	r2, r6
 1038 02fc 3B46     		mov	r3, r7
 1039 02fe FFF7FEFF 		bl	__aeabi_ldivmod
 1040              	.LVL107:
 1041 0302 6860     		str	r0, [r5, #4]
2064:Modules/mpu6050/inv_mpu.c **** 	gyro[2] = (long)(((long long)gyro[2]<<16) / test.gyro_sens / packet_count);
 1042              		.loc 1 2064 0
 1043 0304 A968     		ldr	r1, [r5, #8]
 1044 0306 8322     		movs	r2, #131
 1045 0308 0023     		movs	r3, #0
 1046 030a 0804     		lsls	r0, r1, #16
 1047 030c 0914     		asrs	r1, r1, #16
 1048 030e FFF7FEFF 		bl	__aeabi_ldivmod
 1049              	.LVL108:
 1050 0312 3246     		mov	r2, r6
 1051 0314 3B46     		mov	r3, r7
 1052 0316 FFF7FEFF 		bl	__aeabi_ldivmod
 1053              	.LVL109:
 1054 031a A860     		str	r0, [r5, #8]
2065:Modules/mpu6050/inv_mpu.c **** 	accel[0] = (long)(((long long)accel[0]<<16) / test.accel_sens /
 1055              		.loc 1 2065 0
 1056 031c 2368     		ldr	r3, [r4]
 1057 031e 4FEA0348 		lsl	r8, r3, #16
 1058 0322 4FEA2349 		asr	r9, r3, #16
 1059 0326 B8F1000F 		cmp	r8, #0
 1060 032a 79F10003 		sbcs	r3, r9, #0
 1061 032e 3BDB     		blt	.L97
 1062              	.L74:
 1063 0330 4FEAD820 		lsr	r0, r8, #11
 1064 0334 3246     		mov	r2, r6
 1065 0336 3B46     		mov	r3, r7
 1066 0338 40EA4950 		orr	r0, r0, r9, lsl #21
 1067 033c 4FEAE921 		asr	r1, r9, #11
 1068 0340 FFF7FEFF 		bl	__aeabi_ldivmod
 1069              	.LVL110:
 1070 0344 2060     		str	r0, [r4]
2066:Modules/mpu6050/inv_mpu.c **** 					  packet_count);
2067:Modules/mpu6050/inv_mpu.c **** 	accel[1] = (long)(((long long)accel[1]<<16) / test.accel_sens /
 1071              		.loc 1 2067 0
 1072 0346 6368     		ldr	r3, [r4, #4]
 1073 0348 4FEA0348 		lsl	r8, r3, #16
 1074 034c 4FEA2349 		asr	r9, r3, #16
 1075 0350 B8F1000F 		cmp	r8, #0
 1076 0354 79F10003 		sbcs	r3, r9, #0
 1077 0358 2EDB     		blt	.L98
 1078              	.L75:
 1079 035a 4FEAD820 		lsr	r0, r8, #11
 1080 035e 3246     		mov	r2, r6
 1081 0360 3B46     		mov	r3, r7
 1082 0362 40EA4950 		orr	r0, r0, r9, lsl #21
 1083 0366 4FEAE921 		asr	r1, r9, #11
 1084 036a FFF7FEFF 		bl	__aeabi_ldivmod
 1085              	.LVL111:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 57


 1086 036e 6060     		str	r0, [r4, #4]
2068:Modules/mpu6050/inv_mpu.c **** 					  packet_count);
2069:Modules/mpu6050/inv_mpu.c **** 	accel[2] = (long)(((long long)accel[2]<<16) / test.accel_sens /
 1087              		.loc 1 2069 0
 1088 0370 A368     		ldr	r3, [r4, #8]
 1089 0372 4FEA0348 		lsl	r8, r3, #16
 1090 0376 4FEA2349 		asr	r9, r3, #16
 1091 037a B8F1000F 		cmp	r8, #0
 1092 037e 79F10003 		sbcs	r3, r9, #0
 1093 0382 21DB     		blt	.L99
 1094              	.L76:
 1095 0384 4FEAD820 		lsr	r0, r8, #11
 1096 0388 3246     		mov	r2, r6
 1097 038a 3B46     		mov	r3, r7
 1098 038c 40EA4950 		orr	r0, r0, r9, lsl #21
 1099 0390 4FEAE921 		asr	r1, r9, #11
 1100 0394 FFF7FEFF 		bl	__aeabi_ldivmod
 1101              	.LVL112:
 1102 0398 A060     		str	r0, [r4, #8]
2070:Modules/mpu6050/inv_mpu.c **** 					  packet_count);
2071:Modules/mpu6050/inv_mpu.c **** 	/* Don't remove gravity! */
2072:Modules/mpu6050/inv_mpu.c **** 	if (accel[2] > 0L)
 1103              		.loc 1 2072 0
 1104 039a 0028     		cmp	r0, #0
 1105 039c 1CDD     		ble	.L77
2073:Modules/mpu6050/inv_mpu.c **** 		accel[2] -= 65536L;
 1106              		.loc 1 2073 0
 1107 039e A0F58030 		sub	r0, r0, #65536
 1108 03a2 A060     		str	r0, [r4, #8]
2074:Modules/mpu6050/inv_mpu.c **** 	else
2075:Modules/mpu6050/inv_mpu.c **** 		accel[2] += 65536L;
2076:Modules/mpu6050/inv_mpu.c **** #endif
2077:Modules/mpu6050/inv_mpu.c **** 
2078:Modules/mpu6050/inv_mpu.c **** 	return 0;
 1109              		.loc 1 2078 0
 1110 03a4 0020     		movs	r0, #0
 1111 03a6 4BE0     		b	.L65
 1112              	.L97:
2065:Modules/mpu6050/inv_mpu.c **** 					  packet_count);
 1113              		.loc 1 2065 0
 1114 03a8 40F2FF72 		movw	r2, #2047
 1115 03ac 0023     		movs	r3, #0
 1116 03ae 18EB0208 		adds	r8, r8, r2
 1117 03b2 49EB0309 		adc	r9, r9, r3
 1118 03b6 BBE7     		b	.L74
 1119              	.L98:
2067:Modules/mpu6050/inv_mpu.c **** 					  packet_count);
 1120              		.loc 1 2067 0
 1121 03b8 40F2FF72 		movw	r2, #2047
 1122 03bc 0023     		movs	r3, #0
 1123 03be 18EB0208 		adds	r8, r8, r2
 1124 03c2 49EB0309 		adc	r9, r9, r3
 1125 03c6 C8E7     		b	.L75
 1126              	.L99:
2069:Modules/mpu6050/inv_mpu.c **** 					  packet_count);
 1127              		.loc 1 2069 0
 1128 03c8 40F2FF72 		movw	r2, #2047
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 58


 1129 03cc 0023     		movs	r3, #0
 1130 03ce 18EB0208 		adds	r8, r8, r2
 1131 03d2 49EB0309 		adc	r9, r9, r3
 1132 03d6 D5E7     		b	.L76
 1133              	.L77:
2075:Modules/mpu6050/inv_mpu.c **** #endif
 1134              		.loc 1 2075 0
 1135 03d8 00F58030 		add	r0, r0, #65536
 1136 03dc A060     		str	r0, [r4, #8]
 1137              		.loc 1 2078 0
 1138 03de 0020     		movs	r0, #0
 1139 03e0 2EE0     		b	.L65
 1140              	.LVL113:
 1141              	.L78:
1970:Modules/mpu6050/inv_mpu.c **** 	delay_ms(200);
 1142              		.loc 1 1970 0
 1143 03e2 4FF0FF30 		mov	r0, #-1
 1144 03e6 2BE0     		b	.L65
 1145              	.L79:
1974:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, data))
 1146              		.loc 1 1974 0
 1147 03e8 4FF0FF30 		mov	r0, #-1
 1148 03ec 28E0     		b	.L65
 1149              	.L80:
1976:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 1150              		.loc 1 1976 0
 1151 03ee 4FF0FF30 		mov	r0, #-1
 1152 03f2 25E0     		b	.L65
 1153              	.L81:
1978:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->i2c_mst, 1, data))
 1154              		.loc 1 1978 0
 1155 03f4 4FF0FF30 		mov	r0, #-1
 1156 03f8 22E0     		b	.L65
 1157              	.L82:
1980:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, data))
 1158              		.loc 1 1980 0
 1159 03fa 4FF0FF30 		mov	r0, #-1
 1160 03fe 1FE0     		b	.L65
 1161              	.L83:
1982:Modules/mpu6050/inv_mpu.c **** 	data[0] = BIT_FIFO_RST | BIT_DMP_RST;
 1162              		.loc 1 1982 0
 1163 0400 4FF0FF30 		mov	r0, #-1
 1164 0404 1CE0     		b	.L65
 1165              	.L84:
1985:Modules/mpu6050/inv_mpu.c **** 	delay_ms(15);
 1166              		.loc 1 1985 0
 1167 0406 4FF0FF30 		mov	r0, #-1
 1168 040a 19E0     		b	.L65
 1169              	.L85:
1989:Modules/mpu6050/inv_mpu.c **** 	data[0] = st.test->reg_rate_div;
 1170              		.loc 1 1989 0
 1171 040c 4FF0FF30 		mov	r0, #-1
 1172 0410 16E0     		b	.L65
 1173              	.L86:
1992:Modules/mpu6050/inv_mpu.c **** 	if (hw_test)
 1174              		.loc 1 1992 0
 1175 0412 4FF0FF30 		mov	r0, #-1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 59


 1176 0416 13E0     		b	.L65
 1177              	.L87:
1998:Modules/mpu6050/inv_mpu.c **** 
 1178              		.loc 1 1998 0
 1179 0418 4FF0FF30 		mov	r0, #-1
 1180 041c 10E0     		b	.L65
 1181              	.L88:
2005:Modules/mpu6050/inv_mpu.c **** 	if (hw_test)
 1182              		.loc 1 2005 0
 1183 041e 4FF0FF30 		mov	r0, #-1
 1184 0422 0DE0     		b	.L65
 1185              	.L89:
2012:Modules/mpu6050/inv_mpu.c **** 
 1186              		.loc 1 2012 0
 1187 0424 4FF0FF30 		mov	r0, #-1
 1188 0428 0AE0     		b	.L65
 1189              	.L90:
2016:Modules/mpu6050/inv_mpu.c **** 	delay_ms(test.wait_ms);
 1190              		.loc 1 2016 0
 1191 042a 4FF0FF30 		mov	r0, #-1
 1192 042e 07E0     		b	.L65
 1193              	.L91:
2020:Modules/mpu6050/inv_mpu.c **** 
 1194              		.loc 1 2020 0
 1195 0430 4FF0FF30 		mov	r0, #-1
 1196 0434 04E0     		b	.L65
 1197              	.L92:
2023:Modules/mpu6050/inv_mpu.c **** 
 1198              		.loc 1 2023 0
 1199 0436 4FF0FF30 		mov	r0, #-1
 1200 043a 01E0     		b	.L65
 1201              	.LVL114:
 1202              	.L93:
 1203              	.LBB3:
2033:Modules/mpu6050/inv_mpu.c **** 		accel_cur[0] = ((short)data[0] << 8) | data[1];
 1204              		.loc 1 2033 0
 1205 043c 4FF0FF30 		mov	r0, #-1
 1206              	.LVL115:
 1207              	.L65:
 1208              	.LBE3:
2079:Modules/mpu6050/inv_mpu.c **** }
 1209              		.loc 1 2079 0
 1210 0440 05B0     		add	sp, sp, #20
 1211              	.LCFI16:
 1212              		.cfi_def_cfa_offset 28
 1213              		@ sp needed
 1214 0442 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1215              		.cfi_endproc
 1216              	.LFE101:
 1218 0446 00BF     		.section	.text.mpu_reg_dump,"ax",%progbits
 1219              		.align	1
 1220              		.global	mpu_reg_dump
 1221              		.syntax unified
 1222              		.thumb
 1223              		.thumb_func
 1224              		.fpu softvfp
 1226              	mpu_reg_dump:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 60


 1227              	.LFB67:
 646:Modules/mpu6050/inv_mpu.c **** 	unsigned char ii;
 1228              		.loc 1 646 0
 1229              		.cfi_startproc
 1230              		@ args = 0, pretend = 0, frame = 8
 1231              		@ frame_needed = 0, uses_anonymous_args = 0
 1232 0000 10B5     		push	{r4, lr}
 1233              	.LCFI17:
 1234              		.cfi_def_cfa_offset 8
 1235              		.cfi_offset 4, -8
 1236              		.cfi_offset 14, -4
 1237 0002 82B0     		sub	sp, sp, #8
 1238              	.LCFI18:
 1239              		.cfi_def_cfa_offset 16
 1240              	.LVL116:
 650:Modules/mpu6050/inv_mpu.c **** 		if (ii == st.reg->fifo_r_w || ii == st.reg->mem_r_w)
 1241              		.loc 1 650 0
 1242 0004 0024     		movs	r4, #0
 1243 0006 01E0     		b	.L103
 1244              	.LVL117:
 1245              	.L104:
 650:Modules/mpu6050/inv_mpu.c **** 		if (ii == st.reg->fifo_r_w || ii == st.reg->mem_r_w)
 1246              		.loc 1 650 0 is_stmt 0 discriminator 2
 1247 0008 0134     		adds	r4, r4, #1
 1248              	.LVL118:
 1249 000a E4B2     		uxtb	r4, r4
 1250              	.LVL119:
 1251              	.L103:
 650:Modules/mpu6050/inv_mpu.c **** 		if (ii == st.reg->fifo_r_w || ii == st.reg->mem_r_w)
 1252              		.loc 1 650 0 discriminator 1
 1253 000c 104B     		ldr	r3, .L110
 1254 000e 5868     		ldr	r0, [r3, #4]
 1255 0010 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 1256 0012 A342     		cmp	r3, r4
 1257 0014 16D9     		bls	.L109
 651:Modules/mpu6050/inv_mpu.c **** 			continue;
 1258              		.loc 1 651 0 is_stmt 1
 1259 0016 0E4B     		ldr	r3, .L110
 1260 0018 1B68     		ldr	r3, [r3]
 1261 001a DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 1262 001c A242     		cmp	r2, r4
 1263 001e F3D0     		beq	.L104
 651:Modules/mpu6050/inv_mpu.c **** 			continue;
 1264              		.loc 1 651 0 is_stmt 0 discriminator 1
 1265 0020 5B7D     		ldrb	r3, [r3, #21]	@ zero_extendqisi2
 1266 0022 A342     		cmp	r3, r4
 1267 0024 F0D0     		beq	.L104
 653:Modules/mpu6050/inv_mpu.c **** 			return -1;
 1268              		.loc 1 653 0 is_stmt 1
 1269 0026 0DF10703 		add	r3, sp, #7
 1270 002a 0122     		movs	r2, #1
 1271 002c 2146     		mov	r1, r4
 1272 002e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1273 0030 FFF7FEFF 		bl	mod_Mpu_Read
 1274              	.LVL120:
 1275 0034 48B9     		cbnz	r0, .L107
 655:Modules/mpu6050/inv_mpu.c **** 	}
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 61


 1276              		.loc 1 655 0
 1277 0036 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 1278 003a 2146     		mov	r1, r4
 1279 003c 0548     		ldr	r0, .L110+4
 1280 003e FFF7FEFF 		bl	printf
 1281              	.LVL121:
 1282 0042 E1E7     		b	.L104
 1283              	.L109:
 657:Modules/mpu6050/inv_mpu.c **** }
 1284              		.loc 1 657 0
 1285 0044 0020     		movs	r0, #0
 1286              	.L102:
 658:Modules/mpu6050/inv_mpu.c **** 
 1287              		.loc 1 658 0
 1288 0046 02B0     		add	sp, sp, #8
 1289              	.LCFI19:
 1290              		.cfi_remember_state
 1291              		.cfi_def_cfa_offset 8
 1292              		@ sp needed
 1293 0048 10BD     		pop	{r4, pc}
 1294              	.LVL122:
 1295              	.L107:
 1296              	.LCFI20:
 1297              		.cfi_restore_state
 654:Modules/mpu6050/inv_mpu.c **** 		log_i("%#5x: %#5x\r\n", ii, data);
 1298              		.loc 1 654 0
 1299 004a 4FF0FF30 		mov	r0, #-1
 1300 004e FAE7     		b	.L102
 1301              	.L111:
 1302              		.align	2
 1303              	.L110:
 1304 0050 00000000 		.word	.LANCHOR0
 1305 0054 00000000 		.word	.LC0
 1306              		.cfi_endproc
 1307              	.LFE67:
 1309              		.section	.text.mpu_read_reg,"ax",%progbits
 1310              		.align	1
 1311              		.global	mpu_read_reg
 1312              		.syntax unified
 1313              		.thumb
 1314              		.thumb_func
 1315              		.fpu softvfp
 1317              	mpu_read_reg:
 1318              	.LFB68:
 668:Modules/mpu6050/inv_mpu.c **** 	if (reg == st.reg->fifo_r_w || reg == st.reg->mem_r_w)
 1319              		.loc 1 668 0
 1320              		.cfi_startproc
 1321              		@ args = 0, pretend = 0, frame = 0
 1322              		@ frame_needed = 0, uses_anonymous_args = 0
 1323              	.LVL123:
 669:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1324              		.loc 1 669 0
 1325 0000 0E4B     		ldr	r3, .L121
 1326 0002 1B68     		ldr	r3, [r3]
 1327 0004 DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 1328 0006 8242     		cmp	r2, r0
 1329 0008 0FD0     		beq	.L114
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 62


 669:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1330              		.loc 1 669 0 is_stmt 0 discriminator 1
 1331 000a 5B7D     		ldrb	r3, [r3, #21]	@ zero_extendqisi2
 1332 000c 8342     		cmp	r3, r0
 1333 000e 0FD0     		beq	.L115
 668:Modules/mpu6050/inv_mpu.c **** 	if (reg == st.reg->fifo_r_w || reg == st.reg->mem_r_w)
 1334              		.loc 1 668 0 is_stmt 1
 1335 0010 10B5     		push	{r4, lr}
 1336              	.LCFI21:
 1337              		.cfi_def_cfa_offset 8
 1338              		.cfi_offset 4, -8
 1339              		.cfi_offset 14, -4
 671:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1340              		.loc 1 671 0
 1341 0012 0A4B     		ldr	r3, .L121
 1342 0014 5C68     		ldr	r4, [r3, #4]
 1343 0016 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 1344 0018 8342     		cmp	r3, r0
 1345 001a 0CD9     		bls	.L116
 1346 001c 0B46     		mov	r3, r1
 1347 001e 0146     		mov	r1, r0
 1348              	.LVL124:
 673:Modules/mpu6050/inv_mpu.c **** }
 1349              		.loc 1 673 0
 1350 0020 0122     		movs	r2, #1
 1351 0022 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 1352              	.LVL125:
 1353 0024 FFF7FEFF 		bl	mod_Mpu_Read
 1354              	.LVL126:
 1355              	.L112:
 674:Modules/mpu6050/inv_mpu.c **** 
 1356              		.loc 1 674 0
 1357 0028 10BD     		pop	{r4, pc}
 1358              	.LVL127:
 1359              	.L114:
 1360              	.LCFI22:
 1361              		.cfi_def_cfa_offset 0
 1362              		.cfi_restore 4
 1363              		.cfi_restore 14
 670:Modules/mpu6050/inv_mpu.c **** 	if (reg >= st.hw->num_reg)
 1364              		.loc 1 670 0
 1365 002a 4FF0FF30 		mov	r0, #-1
 1366              	.LVL128:
 1367 002e 7047     		bx	lr
 1368              	.LVL129:
 1369              	.L115:
 1370 0030 4FF0FF30 		mov	r0, #-1
 1371              	.LVL130:
 674:Modules/mpu6050/inv_mpu.c **** 
 1372              		.loc 1 674 0
 1373 0034 7047     		bx	lr
 1374              	.LVL131:
 1375              	.L116:
 1376              	.LCFI23:
 1377              		.cfi_def_cfa_offset 8
 1378              		.cfi_offset 4, -8
 1379              		.cfi_offset 14, -4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 63


 672:Modules/mpu6050/inv_mpu.c **** 	return i2c_read(st.hw->addr, reg, 1, data);
 1380              		.loc 1 672 0
 1381 0036 4FF0FF30 		mov	r0, #-1
 1382              	.LVL132:
 1383 003a F5E7     		b	.L112
 1384              	.L122:
 1385              		.align	2
 1386              	.L121:
 1387 003c 00000000 		.word	.LANCHOR0
 1388              		.cfi_endproc
 1389              	.LFE68:
 1391              		.section	.text.mpu_get_gyro_reg,"ax",%progbits
 1392              		.align	1
 1393              		.global	mpu_get_gyro_reg
 1394              		.syntax unified
 1395              		.thumb
 1396              		.thumb_func
 1397              		.fpu softvfp
 1399              	mpu_get_gyro_reg:
 1400              	.LFB71:
 905:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[6];
 1401              		.loc 1 905 0
 1402              		.cfi_startproc
 1403              		@ args = 0, pretend = 0, frame = 8
 1404              		@ frame_needed = 0, uses_anonymous_args = 0
 1405              	.LVL133:
 908:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1406              		.loc 1 908 0
 1407 0000 174B     		ldr	r3, .L131
 1408 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 1409 0004 13F0700F 		tst	r3, #112
 1410 0008 23D0     		beq	.L125
 905:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[6];
 1411              		.loc 1 905 0
 1412 000a 10B5     		push	{r4, lr}
 1413              	.LCFI24:
 1414              		.cfi_def_cfa_offset 8
 1415              		.cfi_offset 4, -8
 1416              		.cfi_offset 14, -4
 1417 000c 82B0     		sub	sp, sp, #8
 1418              	.LCFI25:
 1419              		.cfi_def_cfa_offset 16
 1420 000e 0446     		mov	r4, r0
 911:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1421              		.loc 1 911 0
 1422 0010 134B     		ldr	r3, .L131
 1423 0012 5868     		ldr	r0, [r3, #4]
 1424              	.LVL134:
 1425 0014 1968     		ldr	r1, [r3]
 1426              	.LVL135:
 1427 0016 6B46     		mov	r3, sp
 1428 0018 0622     		movs	r2, #6
 1429 001a 097B     		ldrb	r1, [r1, #12]	@ zero_extendqisi2
 1430 001c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1431 001e FFF7FEFF 		bl	mod_Mpu_Read
 1432              	.LVL136:
 1433 0022 C8B9     		cbnz	r0, .L126
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 64


 913:Modules/mpu6050/inv_mpu.c **** 	data[1] = (tmp[2] << 8) | tmp[3];
 1434              		.loc 1 913 0
 1435 0024 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
 1436 0028 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
 1437 002c 43EA0223 		orr	r3, r3, r2, lsl #8
 1438 0030 2380     		strh	r3, [r4]	@ movhi
 914:Modules/mpu6050/inv_mpu.c **** 	data[2] = (tmp[4] << 8) | tmp[5];
 1439              		.loc 1 914 0
 1440 0032 9DF80220 		ldrb	r2, [sp, #2]	@ zero_extendqisi2
 1441 0036 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1442 003a 43EA0223 		orr	r3, r3, r2, lsl #8
 1443 003e 6380     		strh	r3, [r4, #2]	@ movhi
 915:Modules/mpu6050/inv_mpu.c **** 	if (timestamp)
 1444              		.loc 1 915 0
 1445 0040 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 1446 0044 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 1447 0048 43EA0223 		orr	r3, r3, r2, lsl #8
 1448 004c A380     		strh	r3, [r4, #4]	@ movhi
 1449              	.L123:
 919:Modules/mpu6050/inv_mpu.c **** 
 1450              		.loc 1 919 0
 1451 004e 02B0     		add	sp, sp, #8
 1452              	.LCFI26:
 1453              		.cfi_def_cfa_offset 8
 1454              		@ sp needed
 1455 0050 10BD     		pop	{r4, pc}
 1456              	.LVL137:
 1457              	.L125:
 1458              	.LCFI27:
 1459              		.cfi_def_cfa_offset 0
 1460              		.cfi_restore 4
 1461              		.cfi_restore 14
 909:Modules/mpu6050/inv_mpu.c **** 
 1462              		.loc 1 909 0
 1463 0052 4FF0FF30 		mov	r0, #-1
 1464              	.LVL138:
 919:Modules/mpu6050/inv_mpu.c **** 
 1465              		.loc 1 919 0
 1466 0056 7047     		bx	lr
 1467              	.LVL139:
 1468              	.L126:
 1469              	.LCFI28:
 1470              		.cfi_def_cfa_offset 16
 1471              		.cfi_offset 4, -8
 1472              		.cfi_offset 14, -4
 912:Modules/mpu6050/inv_mpu.c **** 	data[0] = (tmp[0] << 8) | tmp[1];
 1473              		.loc 1 912 0
 1474 0058 4FF0FF30 		mov	r0, #-1
 1475 005c F7E7     		b	.L123
 1476              	.L132:
 1477 005e 00BF     		.align	2
 1478              	.L131:
 1479 0060 00000000 		.word	.LANCHOR0
 1480              		.cfi_endproc
 1481              	.LFE71:
 1483              		.section	.text.mpu_get_accel_reg,"ax",%progbits
 1484              		.align	1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 65


 1485              		.global	mpu_get_accel_reg
 1486              		.syntax unified
 1487              		.thumb
 1488              		.thumb_func
 1489              		.fpu softvfp
 1491              	mpu_get_accel_reg:
 1492              	.LFB72:
 928:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[6];
 1493              		.loc 1 928 0
 1494              		.cfi_startproc
 1495              		@ args = 0, pretend = 0, frame = 8
 1496              		@ frame_needed = 0, uses_anonymous_args = 0
 1497              	.LVL140:
 931:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1498              		.loc 1 931 0
 1499 0000 174B     		ldr	r3, .L141
 1500 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 1501 0004 13F0080F 		tst	r3, #8
 1502 0008 23D0     		beq	.L135
 928:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[6];
 1503              		.loc 1 928 0
 1504 000a 10B5     		push	{r4, lr}
 1505              	.LCFI29:
 1506              		.cfi_def_cfa_offset 8
 1507              		.cfi_offset 4, -8
 1508              		.cfi_offset 14, -4
 1509 000c 82B0     		sub	sp, sp, #8
 1510              	.LCFI30:
 1511              		.cfi_def_cfa_offset 16
 1512 000e 0446     		mov	r4, r0
 934:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1513              		.loc 1 934 0
 1514 0010 134B     		ldr	r3, .L141
 1515 0012 5868     		ldr	r0, [r3, #4]
 1516              	.LVL141:
 1517 0014 1968     		ldr	r1, [r3]
 1518              	.LVL142:
 1519 0016 6B46     		mov	r3, sp
 1520 0018 0622     		movs	r2, #6
 1521 001a 497B     		ldrb	r1, [r1, #13]	@ zero_extendqisi2
 1522 001c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1523 001e FFF7FEFF 		bl	mod_Mpu_Read
 1524              	.LVL143:
 1525 0022 C8B9     		cbnz	r0, .L136
 936:Modules/mpu6050/inv_mpu.c **** 	data[1] = (tmp[2] << 8) | tmp[3];
 1526              		.loc 1 936 0
 1527 0024 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
 1528 0028 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
 1529 002c 43EA0223 		orr	r3, r3, r2, lsl #8
 1530 0030 2380     		strh	r3, [r4]	@ movhi
 937:Modules/mpu6050/inv_mpu.c **** 	data[2] = (tmp[4] << 8) | tmp[5];
 1531              		.loc 1 937 0
 1532 0032 9DF80220 		ldrb	r2, [sp, #2]	@ zero_extendqisi2
 1533 0036 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1534 003a 43EA0223 		orr	r3, r3, r2, lsl #8
 1535 003e 6380     		strh	r3, [r4, #2]	@ movhi
 938:Modules/mpu6050/inv_mpu.c **** 	if (timestamp)
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 66


 1536              		.loc 1 938 0
 1537 0040 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 1538 0044 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 1539 0048 43EA0223 		orr	r3, r3, r2, lsl #8
 1540 004c A380     		strh	r3, [r4, #4]	@ movhi
 1541              	.L133:
 942:Modules/mpu6050/inv_mpu.c **** 
 1542              		.loc 1 942 0
 1543 004e 02B0     		add	sp, sp, #8
 1544              	.LCFI31:
 1545              		.cfi_def_cfa_offset 8
 1546              		@ sp needed
 1547 0050 10BD     		pop	{r4, pc}
 1548              	.LVL144:
 1549              	.L135:
 1550              	.LCFI32:
 1551              		.cfi_def_cfa_offset 0
 1552              		.cfi_restore 4
 1553              		.cfi_restore 14
 932:Modules/mpu6050/inv_mpu.c **** 
 1554              		.loc 1 932 0
 1555 0052 4FF0FF30 		mov	r0, #-1
 1556              	.LVL145:
 942:Modules/mpu6050/inv_mpu.c **** 
 1557              		.loc 1 942 0
 1558 0056 7047     		bx	lr
 1559              	.LVL146:
 1560              	.L136:
 1561              	.LCFI33:
 1562              		.cfi_def_cfa_offset 16
 1563              		.cfi_offset 4, -8
 1564              		.cfi_offset 14, -4
 935:Modules/mpu6050/inv_mpu.c **** 	data[0] = (tmp[0] << 8) | tmp[1];
 1565              		.loc 1 935 0
 1566 0058 4FF0FF30 		mov	r0, #-1
 1567 005c F7E7     		b	.L133
 1568              	.L142:
 1569 005e 00BF     		.align	2
 1570              	.L141:
 1571 0060 00000000 		.word	.LANCHOR0
 1572              		.cfi_endproc
 1573              	.LFE72:
 1575              		.global	__aeabi_fadd
 1576              		.global	__aeabi_f2iz
 1577              		.section	.text.mpu_get_temperature,"ax",%progbits
 1578              		.align	1
 1579              		.global	mpu_get_temperature
 1580              		.syntax unified
 1581              		.thumb
 1582              		.thumb_func
 1583              		.fpu softvfp
 1585              	mpu_get_temperature:
 1586              	.LFB73:
 951:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
 1587              		.loc 1 951 0
 1588              		.cfi_startproc
 1589              		@ args = 0, pretend = 0, frame = 8
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 67


 1590              		@ frame_needed = 0, uses_anonymous_args = 0
 1591              	.LVL147:
 955:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1592              		.loc 1 955 0
 1593 0000 1F4B     		ldr	r3, .L151
 1594 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 1595 0004 002B     		cmp	r3, #0
 1596 0006 35D0     		beq	.L145
 951:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
 1597              		.loc 1 951 0
 1598 0008 F0B5     		push	{r4, r5, r6, r7, lr}
 1599              	.LCFI34:
 1600              		.cfi_def_cfa_offset 20
 1601              		.cfi_offset 4, -20
 1602              		.cfi_offset 5, -16
 1603              		.cfi_offset 6, -12
 1604              		.cfi_offset 7, -8
 1605              		.cfi_offset 14, -4
 1606 000a 83B0     		sub	sp, sp, #12
 1607              	.LCFI35:
 1608              		.cfi_def_cfa_offset 32
 1609 000c 0646     		mov	r6, r0
 958:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1610              		.loc 1 958 0
 1611 000e 1C4B     		ldr	r3, .L151
 1612 0010 5868     		ldr	r0, [r3, #4]
 1613              	.LVL148:
 1614 0012 1968     		ldr	r1, [r3]
 1615              	.LVL149:
 1616 0014 01AB     		add	r3, sp, #4
 1617 0016 0222     		movs	r2, #2
 1618 0018 897B     		ldrb	r1, [r1, #14]	@ zero_extendqisi2
 1619 001a 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1620 001c FFF7FEFF 		bl	mod_Mpu_Read
 1621              	.LVL150:
 1622 0020 58BB     		cbnz	r0, .L146
 960:Modules/mpu6050/inv_mpu.c **** 	if (timestamp)
 1623              		.loc 1 960 0
 1624 0022 9DF80440 		ldrb	r4, [sp, #4]	@ zero_extendqisi2
 1625 0026 2402     		lsls	r4, r4, #8
 1626 0028 24B2     		sxth	r4, r4
 1627 002a 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 1628 002e 1C43     		orrs	r4, r4, r3
 1629              	.LVL151:
 964:Modules/mpu6050/inv_mpu.c **** 	return 0;
 1630              		.loc 1 964 0
 1631 0030 134B     		ldr	r3, .L151
 1632 0032 5D68     		ldr	r5, [r3, #4]
 1633 0034 B5F90800 		ldrsh	r0, [r5, #8]
 1634 0038 FFF7FEFF 		bl	__aeabi_i2f
 1635              	.LVL152:
 1636 003c 0746     		mov	r7, r0
 1637 003e 2046     		mov	r0, r4
 1638 0040 FFF7FEFF 		bl	__aeabi_i2f
 1639              	.LVL153:
 1640 0044 3946     		mov	r1, r7
 1641 0046 FFF7FEFF 		bl	__aeabi_fsub
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 68


 1642              	.LVL154:
 1643 004a 0446     		mov	r4, r0
 1644              	.LVL155:
 1645 004c E888     		ldrh	r0, [r5, #6]
 1646 004e FFF7FEFF 		bl	__aeabi_i2f
 1647              	.LVL156:
 1648 0052 0146     		mov	r1, r0
 1649 0054 2046     		mov	r0, r4
 1650 0056 FFF7FEFF 		bl	__aeabi_fdiv
 1651              	.LVL157:
 1652 005a 0A49     		ldr	r1, .L151+4
 1653 005c FFF7FEFF 		bl	__aeabi_fadd
 1654              	.LVL158:
 1655 0060 4FF08F41 		mov	r1, #1199570944
 1656 0064 FFF7FEFF 		bl	__aeabi_fmul
 1657              	.LVL159:
 1658 0068 FFF7FEFF 		bl	__aeabi_f2iz
 1659              	.LVL160:
 1660 006c 3060     		str	r0, [r6]
 965:Modules/mpu6050/inv_mpu.c **** }
 1661              		.loc 1 965 0
 1662 006e 0020     		movs	r0, #0
 1663              	.L143:
 966:Modules/mpu6050/inv_mpu.c **** 
 1664              		.loc 1 966 0
 1665 0070 03B0     		add	sp, sp, #12
 1666              	.LCFI36:
 1667              		.cfi_def_cfa_offset 20
 1668              		@ sp needed
 1669 0072 F0BD     		pop	{r4, r5, r6, r7, pc}
 1670              	.LVL161:
 1671              	.L145:
 1672              	.LCFI37:
 1673              		.cfi_def_cfa_offset 0
 1674              		.cfi_restore 4
 1675              		.cfi_restore 5
 1676              		.cfi_restore 6
 1677              		.cfi_restore 7
 1678              		.cfi_restore 14
 956:Modules/mpu6050/inv_mpu.c **** 
 1679              		.loc 1 956 0
 1680 0074 4FF0FF30 		mov	r0, #-1
 1681              	.LVL162:
 966:Modules/mpu6050/inv_mpu.c **** 
 1682              		.loc 1 966 0
 1683 0078 7047     		bx	lr
 1684              	.LVL163:
 1685              	.L146:
 1686              	.LCFI38:
 1687              		.cfi_def_cfa_offset 32
 1688              		.cfi_offset 4, -20
 1689              		.cfi_offset 5, -16
 1690              		.cfi_offset 6, -12
 1691              		.cfi_offset 7, -8
 1692              		.cfi_offset 14, -4
 959:Modules/mpu6050/inv_mpu.c **** 	raw = (tmp[0] << 8) | tmp[1];
 1693              		.loc 1 959 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 69


 1694 007a 4FF0FF30 		mov	r0, #-1
 1695 007e F7E7     		b	.L143
 1696              	.L152:
 1697              		.align	2
 1698              	.L151:
 1699 0080 00000000 		.word	.LANCHOR0
 1700 0084 00000C42 		.word	1108082688
 1701              		.cfi_endproc
 1702              	.LFE73:
 1704              		.section	.text.mpu_set_accel_bias,"ax",%progbits
 1705              		.align	1
 1706              		.global	mpu_set_accel_bias
 1707              		.syntax unified
 1708              		.thumb
 1709              		.thumb_func
 1710              		.fpu softvfp
 1712              	mpu_set_accel_bias:
 1713              	.LFB74:
 976:Modules/mpu6050/inv_mpu.c **** 	unsigned char data[6];
 1714              		.loc 1 976 0
 1715              		.cfi_startproc
 1716              		@ args = 0, pretend = 0, frame = 8
 1717              		@ frame_needed = 0, uses_anonymous_args = 0
 1718              	.LVL164:
 982:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1719              		.loc 1 982 0
 1720 0000 0028     		cmp	r0, #0
 1721 0002 77D0     		beq	.L156
 976:Modules/mpu6050/inv_mpu.c **** 	unsigned char data[6];
 1722              		.loc 1 976 0
 1723 0004 F0B5     		push	{r4, r5, r6, r7, lr}
 1724              	.LCFI39:
 1725              		.cfi_def_cfa_offset 20
 1726              		.cfi_offset 4, -20
 1727              		.cfi_offset 5, -16
 1728              		.cfi_offset 6, -12
 1729              		.cfi_offset 7, -8
 1730              		.cfi_offset 14, -4
 1731 0006 83B0     		sub	sp, sp, #12
 1732              	.LCFI40:
 1733              		.cfi_def_cfa_offset 32
 1734 0008 0446     		mov	r4, r0
 984:Modules/mpu6050/inv_mpu.c **** 		return 0;
 1735              		.loc 1 984 0
 1736 000a 0368     		ldr	r3, [r0]
 1737 000c 23B9     		cbnz	r3, .L155
 984:Modules/mpu6050/inv_mpu.c **** 		return 0;
 1738              		.loc 1 984 0 is_stmt 0 discriminator 1
 1739 000e 4368     		ldr	r3, [r0, #4]
 1740 0010 13B9     		cbnz	r3, .L155
 984:Modules/mpu6050/inv_mpu.c **** 		return 0;
 1741              		.loc 1 984 0 discriminator 2
 1742 0012 8368     		ldr	r3, [r0, #8]
 1743 0014 002B     		cmp	r3, #0
 1744 0016 70D0     		beq	.L157
 1745              	.L155:
 987:Modules/mpu6050/inv_mpu.c **** 		return -1;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 70


 1746              		.loc 1 987 0 is_stmt 1
 1747 0018 3C4B     		ldr	r3, .L166
 1748 001a 5868     		ldr	r0, [r3, #4]
 1749              	.LVL165:
 1750 001c 6B46     		mov	r3, sp
 1751 001e 0322     		movs	r2, #3
 1752 0020 1146     		mov	r1, r2
 1753 0022 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1754 0024 FFF7FEFF 		bl	mod_Mpu_Read
 1755              	.LVL166:
 1756 0028 0028     		cmp	r0, #0
 1757 002a 68D1     		bne	.L158
 989:Modules/mpu6050/inv_mpu.c **** 	fg[1] = ((data[1] >> 4) + 8) & 0xf;
 1758              		.loc 1 989 0
 1759 002c 9DF80010 		ldrb	r1, [sp]	@ zero_extendqisi2
 1760 0030 0909     		lsrs	r1, r1, #4
 1761 0032 0831     		adds	r1, r1, #8
 1762 0034 01F00F01 		and	r1, r1, #15
 990:Modules/mpu6050/inv_mpu.c **** 	fg[2] = ((data[2] >> 4) + 8) & 0xf;
 1763              		.loc 1 990 0
 1764 0038 9DF80120 		ldrb	r2, [sp, #1]	@ zero_extendqisi2
 1765 003c 1209     		lsrs	r2, r2, #4
 1766 003e 0832     		adds	r2, r2, #8
 1767 0040 02F00F02 		and	r2, r2, #15
 991:Modules/mpu6050/inv_mpu.c **** 
 1768              		.loc 1 991 0
 1769 0044 9DF80230 		ldrb	r3, [sp, #2]	@ zero_extendqisi2
 1770 0048 1B09     		lsrs	r3, r3, #4
 1771 004a 0833     		adds	r3, r3, #8
 1772 004c 03F00F03 		and	r3, r3, #15
 993:Modules/mpu6050/inv_mpu.c **** 	accel_hw[1] = (short)(accel_bias[1] * 2 / (64 + fg[1]));
 1773              		.loc 1 993 0
 1774 0050 2568     		ldr	r5, [r4]
 1775 0052 6D00     		lsls	r5, r5, #1
 1776 0054 4031     		adds	r1, r1, #64
 1777 0056 95FBF1F5 		sdiv	r5, r5, r1
 1778 005a 2DB2     		sxth	r5, r5
 994:Modules/mpu6050/inv_mpu.c **** 	accel_hw[2] = (short)(accel_bias[2] * 2 / (64 + fg[2]));
 1779              		.loc 1 994 0
 1780 005c 6668     		ldr	r6, [r4, #4]
 1781 005e 7600     		lsls	r6, r6, #1
 1782 0060 4032     		adds	r2, r2, #64
 1783 0062 96FBF2F2 		sdiv	r2, r6, r2
 1784 0066 16B2     		sxth	r6, r2
 995:Modules/mpu6050/inv_mpu.c **** 
 1785              		.loc 1 995 0
 1786 0068 A468     		ldr	r4, [r4, #8]
 1787              	.LVL167:
 1788 006a 6400     		lsls	r4, r4, #1
 1789 006c 4033     		adds	r3, r3, #64
 1790 006e 94FBF3F3 		sdiv	r3, r4, r3
 1791 0072 1CB2     		sxth	r4, r3
 997:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1792              		.loc 1 997 0
 1793 0074 254B     		ldr	r3, .L166
 1794 0076 5868     		ldr	r0, [r3, #4]
 1795 0078 6B46     		mov	r3, sp
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 71


 1796 007a 0622     		movs	r2, #6
 1797 007c 1146     		mov	r1, r2
 1798 007e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1799 0080 FFF7FEFF 		bl	mod_Mpu_Read
 1800              	.LVL168:
 1801 0084 0028     		cmp	r0, #0
 1802 0086 3DD1     		bne	.L159
1000:Modules/mpu6050/inv_mpu.c **** 	got_accel[1] = ((short)data[2] << 8) | data[3];
 1803              		.loc 1 1000 0
 1804 0088 9DF800C0 		ldrb	ip, [sp]	@ zero_extendqisi2
 1805 008c 9DF80110 		ldrb	r1, [sp, #1]	@ zero_extendqisi2
1001:Modules/mpu6050/inv_mpu.c **** 	got_accel[2] = ((short)data[4] << 8) | data[5];
 1806              		.loc 1 1001 0
 1807 0090 9DF80270 		ldrb	r7, [sp, #2]	@ zero_extendqisi2
 1808 0094 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
1002:Modules/mpu6050/inv_mpu.c **** 
 1809              		.loc 1 1002 0
 1810 0098 9DF80400 		ldrb	r0, [sp, #4]	@ zero_extendqisi2
 1811 009c 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
1004:Modules/mpu6050/inv_mpu.c **** 	accel_hw[1] += got_accel[1];
 1812              		.loc 1 1004 0
 1813 00a0 41EA0C21 		orr	r1, r1, ip, lsl #8
 1814 00a4 0D44     		add	r5, r5, r1
 1815 00a6 2DB2     		sxth	r5, r5
1005:Modules/mpu6050/inv_mpu.c **** 	accel_hw[2] += got_accel[2];
 1816              		.loc 1 1005 0
 1817 00a8 42EA0722 		orr	r2, r2, r7, lsl #8
 1818 00ac 3244     		add	r2, r2, r6
 1819 00ae 12B2     		sxth	r2, r2
1006:Modules/mpu6050/inv_mpu.c **** 
 1820              		.loc 1 1006 0
 1821 00b0 43EA0023 		orr	r3, r3, r0, lsl #8
 1822 00b4 2344     		add	r3, r3, r4
 1823 00b6 1BB2     		sxth	r3, r3
1008:Modules/mpu6050/inv_mpu.c **** 	data[1] = (accel_hw[0]) & 0xff;
 1824              		.loc 1 1008 0
 1825 00b8 2912     		asrs	r1, r5, #8
 1826 00ba 8DF80010 		strb	r1, [sp]
1009:Modules/mpu6050/inv_mpu.c **** 	data[2] = (accel_hw[1] >> 8) & 0xff;
 1827              		.loc 1 1009 0
 1828 00be 8DF80150 		strb	r5, [sp, #1]
1010:Modules/mpu6050/inv_mpu.c **** 	data[3] = (accel_hw[1]) & 0xff;
 1829              		.loc 1 1010 0
 1830 00c2 1112     		asrs	r1, r2, #8
 1831 00c4 8DF80210 		strb	r1, [sp, #2]
1011:Modules/mpu6050/inv_mpu.c **** 	data[4] = (accel_hw[2] >> 8) & 0xff;
 1832              		.loc 1 1011 0
 1833 00c8 8DF80320 		strb	r2, [sp, #3]
1012:Modules/mpu6050/inv_mpu.c **** 	data[5] = (accel_hw[2]) & 0xff;
 1834              		.loc 1 1012 0
 1835 00cc 1A12     		asrs	r2, r3, #8
 1836 00ce 8DF80420 		strb	r2, [sp, #4]
1013:Modules/mpu6050/inv_mpu.c **** 
 1837              		.loc 1 1013 0
 1838 00d2 8DF80530 		strb	r3, [sp, #5]
1015:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1839              		.loc 1 1015 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 72


 1840 00d6 0D4B     		ldr	r3, .L166
 1841 00d8 5868     		ldr	r0, [r3, #4]
 1842 00da 6B46     		mov	r3, sp
 1843 00dc 0622     		movs	r2, #6
 1844 00de 1146     		mov	r1, r2
 1845 00e0 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1846 00e2 FFF7FEFF 		bl	mod_Mpu_Write
 1847              	.LVL169:
 1848 00e6 10B9     		cbnz	r0, .L165
1017:Modules/mpu6050/inv_mpu.c **** }
 1849              		.loc 1 1017 0
 1850 00e8 0020     		movs	r0, #0
 1851              	.L153:
1018:Modules/mpu6050/inv_mpu.c **** 
 1852              		.loc 1 1018 0
 1853 00ea 03B0     		add	sp, sp, #12
 1854              	.LCFI41:
 1855              		.cfi_remember_state
 1856              		.cfi_def_cfa_offset 20
 1857              		@ sp needed
 1858 00ec F0BD     		pop	{r4, r5, r6, r7, pc}
 1859              	.L165:
 1860              	.LCFI42:
 1861              		.cfi_restore_state
1016:Modules/mpu6050/inv_mpu.c **** 	return 0;
 1862              		.loc 1 1016 0
 1863 00ee 4FF0FF30 		mov	r0, #-1
 1864 00f2 FAE7     		b	.L153
 1865              	.LVL170:
 1866              	.L156:
 1867              	.LCFI43:
 1868              		.cfi_def_cfa_offset 0
 1869              		.cfi_restore 4
 1870              		.cfi_restore 5
 1871              		.cfi_restore 6
 1872              		.cfi_restore 7
 1873              		.cfi_restore 14
 983:Modules/mpu6050/inv_mpu.c **** 	if (!accel_bias[0] && !accel_bias[1] && !accel_bias[2])
 1874              		.loc 1 983 0
 1875 00f4 4FF0FF30 		mov	r0, #-1
 1876              	.LVL171:
1018:Modules/mpu6050/inv_mpu.c **** 
 1877              		.loc 1 1018 0
 1878 00f8 7047     		bx	lr
 1879              	.LVL172:
 1880              	.L157:
 1881              	.LCFI44:
 1882              		.cfi_def_cfa_offset 32
 1883              		.cfi_offset 4, -20
 1884              		.cfi_offset 5, -16
 1885              		.cfi_offset 6, -12
 1886              		.cfi_offset 7, -8
 1887              		.cfi_offset 14, -4
 985:Modules/mpu6050/inv_mpu.c **** 
 1888              		.loc 1 985 0
 1889 00fa 0020     		movs	r0, #0
 1890              	.LVL173:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 73


 1891 00fc F5E7     		b	.L153
 1892              	.L158:
 988:Modules/mpu6050/inv_mpu.c **** 	fg[0] = ((data[0] >> 4) + 8) & 0xf;
 1893              		.loc 1 988 0
 1894 00fe 4FF0FF30 		mov	r0, #-1
 1895 0102 F2E7     		b	.L153
 1896              	.LVL174:
 1897              	.L159:
 998:Modules/mpu6050/inv_mpu.c **** 
 1898              		.loc 1 998 0
 1899 0104 4FF0FF30 		mov	r0, #-1
 1900 0108 EFE7     		b	.L153
 1901              	.L167:
 1902 010a 00BF     		.align	2
 1903              	.L166:
 1904 010c 00000000 		.word	.LANCHOR0
 1905              		.cfi_endproc
 1906              	.LFE74:
 1908              		.section	.text.mpu_reset_fifo,"ax",%progbits
 1909              		.align	1
 1910              		.global	mpu_reset_fifo
 1911              		.syntax unified
 1912              		.thumb
 1913              		.thumb_func
 1914              		.fpu softvfp
 1916              	mpu_reset_fifo:
 1917              	.LFB75:
1025:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
 1918              		.loc 1 1025 0
 1919              		.cfi_startproc
 1920              		@ args = 0, pretend = 0, frame = 8
 1921              		@ frame_needed = 0, uses_anonymous_args = 0
1028:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1922              		.loc 1 1028 0
 1923 0000 7B4B     		ldr	r3, .L197
 1924 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 1925 0004 002B     		cmp	r3, #0
 1926 0006 00F0D480 		beq	.L179
1025:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
 1927              		.loc 1 1025 0
 1928 000a 00B5     		push	{lr}
 1929              	.LCFI45:
 1930              		.cfi_def_cfa_offset 4
 1931              		.cfi_offset 14, -4
 1932 000c 83B0     		sub	sp, sp, #12
 1933              	.LCFI46:
 1934              		.cfi_def_cfa_offset 16
1031:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
 1935              		.loc 1 1031 0
 1936 000e 02AB     		add	r3, sp, #8
 1937 0010 0022     		movs	r2, #0
 1938 0012 03F8012D 		strb	r2, [r3, #-1]!
1032:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1939              		.loc 1 1032 0
 1940 0016 764A     		ldr	r2, .L197
 1941 0018 5068     		ldr	r0, [r2, #4]
 1942 001a 1168     		ldr	r1, [r2]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 74


 1943 001c 0122     		movs	r2, #1
 1944 001e C97B     		ldrb	r1, [r1, #15]	@ zero_extendqisi2
 1945 0020 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1946 0022 FFF7FEFF 		bl	mod_Mpu_Write
 1947              	.LVL175:
 1948 0026 0028     		cmp	r0, #0
 1949 0028 40F0C680 		bne	.L180
1034:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1950              		.loc 1 1034 0
 1951 002c 704B     		ldr	r3, .L197
 1952 002e 5868     		ldr	r0, [r3, #4]
 1953 0030 1968     		ldr	r1, [r3]
 1954 0032 0DF10703 		add	r3, sp, #7
 1955 0036 0122     		movs	r2, #1
 1956 0038 4979     		ldrb	r1, [r1, #5]	@ zero_extendqisi2
 1957 003a 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1958 003c FFF7FEFF 		bl	mod_Mpu_Write
 1959              	.LVL176:
 1960 0040 0028     		cmp	r0, #0
 1961 0042 40F0BC80 		bne	.L181
1036:Modules/mpu6050/inv_mpu.c **** 		return -1;
 1962              		.loc 1 1036 0
 1963 0046 6A4B     		ldr	r3, .L197
 1964 0048 5868     		ldr	r0, [r3, #4]
 1965 004a 1968     		ldr	r1, [r3]
 1966 004c 0DF10703 		add	r3, sp, #7
 1967 0050 0122     		movs	r2, #1
 1968 0052 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 1969 0054 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1970 0056 FFF7FEFF 		bl	mod_Mpu_Write
 1971              	.LVL177:
 1972 005a 0028     		cmp	r0, #0
 1973 005c 40F0B280 		bne	.L182
1039:Modules/mpu6050/inv_mpu.c **** 		data = BIT_FIFO_RST | BIT_DMP_RST;
 1974              		.loc 1 1039 0
 1975 0060 634B     		ldr	r3, .L197
 1976 0062 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 1977 0066 002B     		cmp	r3, #0
 1978 0068 53D0     		beq	.L170
1040:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 1979              		.loc 1 1040 0
 1980 006a 02AB     		add	r3, sp, #8
 1981 006c 0C22     		movs	r2, #12
 1982 006e 03F8012D 		strb	r2, [r3, #-1]!
1041:Modules/mpu6050/inv_mpu.c **** 			return -1;
 1983              		.loc 1 1041 0
 1984 0072 5F4A     		ldr	r2, .L197
 1985 0074 5068     		ldr	r0, [r2, #4]
 1986 0076 1168     		ldr	r1, [r2]
 1987 0078 0122     		movs	r2, #1
 1988 007a 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 1989 007c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1990 007e FFF7FEFF 		bl	mod_Mpu_Write
 1991              	.LVL178:
 1992 0082 0028     		cmp	r0, #0
 1993 0084 40F0A180 		bne	.L183
1043:Modules/mpu6050/inv_mpu.c **** 		data = BIT_DMP_EN | BIT_FIFO_EN;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 75


 1994              		.loc 1 1043 0
 1995 0088 3220     		movs	r0, #50
 1996 008a FFF7FEFF 		bl	delay_ms
 1997              	.LVL179:
1044:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.sensors & INV_XYZ_COMPASS)
 1998              		.loc 1 1044 0
 1999 008e C023     		movs	r3, #192
 2000 0090 8DF80730 		strb	r3, [sp, #7]
1045:Modules/mpu6050/inv_mpu.c **** 			data |= BIT_AUX_IF_EN;
 2001              		.loc 1 1045 0
 2002 0094 564B     		ldr	r3, .L197
 2003 0096 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 2004 0098 13F0010F 		tst	r3, #1
 2005 009c 02D0     		beq	.L171
1046:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 2006              		.loc 1 1046 0
 2007 009e E023     		movs	r3, #224
 2008 00a0 8DF80730 		strb	r3, [sp, #7]
 2009              	.L171:
1047:Modules/mpu6050/inv_mpu.c **** 			return -1;
 2010              		.loc 1 1047 0
 2011 00a4 524B     		ldr	r3, .L197
 2012 00a6 5868     		ldr	r0, [r3, #4]
 2013 00a8 1968     		ldr	r1, [r3]
 2014 00aa 0DF10703 		add	r3, sp, #7
 2015 00ae 0122     		movs	r2, #1
 2016 00b0 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 2017 00b2 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2018 00b4 FFF7FEFF 		bl	mod_Mpu_Write
 2019              	.LVL180:
 2020 00b8 0028     		cmp	r0, #0
 2021 00ba 40F08980 		bne	.L184
1049:Modules/mpu6050/inv_mpu.c **** 			data = BIT_DMP_INT_EN;
 2022              		.loc 1 1049 0
 2023 00be 4C4B     		ldr	r3, .L197
 2024 00c0 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
 2025 00c2 FBB1     		cbz	r3, .L172
1050:Modules/mpu6050/inv_mpu.c **** 		else
 2026              		.loc 1 1050 0
 2027 00c4 0223     		movs	r3, #2
 2028 00c6 8DF80730 		strb	r3, [sp, #7]
 2029              	.L173:
1053:Modules/mpu6050/inv_mpu.c **** 			return -1;
 2030              		.loc 1 1053 0
 2031 00ca 494B     		ldr	r3, .L197
 2032 00cc 5868     		ldr	r0, [r3, #4]
 2033 00ce 1968     		ldr	r1, [r3]
 2034 00d0 0DF10703 		add	r3, sp, #7
 2035 00d4 0122     		movs	r2, #1
 2036 00d6 C97B     		ldrb	r1, [r1, #15]	@ zero_extendqisi2
 2037 00d8 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2038 00da FFF7FEFF 		bl	mod_Mpu_Write
 2039              	.LVL181:
 2040 00de 0028     		cmp	r0, #0
 2041 00e0 79D1     		bne	.L185
1055:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &data))
 2042              		.loc 1 1055 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 76


 2043 00e2 02AB     		add	r3, sp, #8
 2044 00e4 0022     		movs	r2, #0
 2045 00e6 03F8012D 		strb	r2, [r3, #-1]!
1056:Modules/mpu6050/inv_mpu.c **** 			return -1;
 2046              		.loc 1 1056 0
 2047 00ea 414A     		ldr	r2, .L197
 2048 00ec 5068     		ldr	r0, [r2, #4]
 2049 00ee 1168     		ldr	r1, [r2]
 2050 00f0 0122     		movs	r2, #1
 2051 00f2 4979     		ldrb	r1, [r1, #5]	@ zero_extendqisi2
 2052 00f4 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2053 00f6 FFF7FEFF 		bl	mod_Mpu_Write
 2054              	.LVL182:
 2055 00fa 38B9     		cbnz	r0, .L195
1078:Modules/mpu6050/inv_mpu.c **** }
 2056              		.loc 1 1078 0
 2057 00fc 0020     		movs	r0, #0
 2058              	.L168:
1079:Modules/mpu6050/inv_mpu.c **** 
 2059              		.loc 1 1079 0
 2060 00fe 03B0     		add	sp, sp, #12
 2061              	.LCFI47:
 2062              		.cfi_remember_state
 2063              		.cfi_def_cfa_offset 4
 2064              		@ sp needed
 2065 0100 5DF804FB 		ldr	pc, [sp], #4
 2066              	.L172:
 2067              	.LCFI48:
 2068              		.cfi_restore_state
1052:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
 2069              		.loc 1 1052 0
 2070 0104 0023     		movs	r3, #0
 2071 0106 8DF80730 		strb	r3, [sp, #7]
 2072 010a DEE7     		b	.L173
 2073              	.L195:
1057:Modules/mpu6050/inv_mpu.c **** 	} else {
 2074              		.loc 1 1057 0
 2075 010c 4FF0FF30 		mov	r0, #-1
 2076 0110 F5E7     		b	.L168
 2077              	.L170:
1059:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 2078              		.loc 1 1059 0
 2079 0112 02AB     		add	r3, sp, #8
 2080 0114 0422     		movs	r2, #4
 2081 0116 03F8012D 		strb	r2, [r3, #-1]!
1060:Modules/mpu6050/inv_mpu.c **** 			return -1;
 2082              		.loc 1 1060 0
 2083 011a 354A     		ldr	r2, .L197
 2084 011c 5068     		ldr	r0, [r2, #4]
 2085 011e 1168     		ldr	r1, [r2]
 2086 0120 0122     		movs	r2, #1
 2087 0122 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 2088 0124 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2089 0126 FFF7FEFF 		bl	mod_Mpu_Write
 2090              	.LVL183:
 2091 012a 0028     		cmp	r0, #0
 2092 012c 56D1     		bne	.L187
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 77


1062:Modules/mpu6050/inv_mpu.c **** 			data = BIT_FIFO_EN;
 2093              		.loc 1 1062 0
 2094 012e 304B     		ldr	r3, .L197
 2095 0130 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
 2096 0132 23B9     		cbnz	r3, .L174
1062:Modules/mpu6050/inv_mpu.c **** 			data = BIT_FIFO_EN;
 2097              		.loc 1 1062 0 is_stmt 0 discriminator 1
 2098 0134 2E4B     		ldr	r3, .L197
 2099 0136 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 2100 0138 13F0010F 		tst	r3, #1
 2101 013c 2ED1     		bne	.L175
 2102              	.L174:
1063:Modules/mpu6050/inv_mpu.c **** 		else
 2103              		.loc 1 1063 0 is_stmt 1
 2104 013e 4023     		movs	r3, #64
 2105 0140 8DF80730 		strb	r3, [sp, #7]
 2106              	.L176:
1066:Modules/mpu6050/inv_mpu.c **** 			return -1;
 2107              		.loc 1 1066 0
 2108 0144 2A4B     		ldr	r3, .L197
 2109 0146 5868     		ldr	r0, [r3, #4]
 2110 0148 1968     		ldr	r1, [r3]
 2111 014a 0DF10703 		add	r3, sp, #7
 2112 014e 0122     		movs	r2, #1
 2113 0150 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 2114 0152 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2115 0154 FFF7FEFF 		bl	mod_Mpu_Write
 2116              	.LVL184:
 2117 0158 0028     		cmp	r0, #0
 2118 015a 42D1     		bne	.L188
1068:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.int_enable)
 2119              		.loc 1 1068 0
 2120 015c 3220     		movs	r0, #50
 2121 015e FFF7FEFF 		bl	delay_ms
 2122              	.LVL185:
1069:Modules/mpu6050/inv_mpu.c **** 			data = BIT_DATA_RDY_EN;
 2123              		.loc 1 1069 0
 2124 0162 234B     		ldr	r3, .L197
 2125 0164 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
 2126 0166 EBB1     		cbz	r3, .L177
1070:Modules/mpu6050/inv_mpu.c **** 		else
 2127              		.loc 1 1070 0
 2128 0168 0123     		movs	r3, #1
 2129 016a 8DF80730 		strb	r3, [sp, #7]
 2130              	.L178:
1073:Modules/mpu6050/inv_mpu.c **** 			return -1;
 2131              		.loc 1 1073 0
 2132 016e 204B     		ldr	r3, .L197
 2133 0170 5868     		ldr	r0, [r3, #4]
 2134 0172 1968     		ldr	r1, [r3]
 2135 0174 0DF10703 		add	r3, sp, #7
 2136 0178 0122     		movs	r2, #1
 2137 017a C97B     		ldrb	r1, [r1, #15]	@ zero_extendqisi2
 2138 017c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2139 017e FFF7FEFF 		bl	mod_Mpu_Write
 2140              	.LVL186:
 2141 0182 88BB     		cbnz	r0, .L189
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 78


1075:Modules/mpu6050/inv_mpu.c **** 			return -1;
 2142              		.loc 1 1075 0
 2143 0184 1A4B     		ldr	r3, .L197
 2144 0186 5868     		ldr	r0, [r3, #4]
 2145 0188 53F8101B 		ldr	r1, [r3], #16
 2146 018c 0122     		movs	r2, #1
 2147 018e 4979     		ldrb	r1, [r1, #5]	@ zero_extendqisi2
 2148 0190 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2149 0192 FFF7FEFF 		bl	mod_Mpu_Write
 2150              	.LVL187:
 2151 0196 48B9     		cbnz	r0, .L196
1078:Modules/mpu6050/inv_mpu.c **** }
 2152              		.loc 1 1078 0
 2153 0198 0020     		movs	r0, #0
 2154 019a B0E7     		b	.L168
 2155              	.L175:
1065:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 2156              		.loc 1 1065 0
 2157 019c 6023     		movs	r3, #96
 2158 019e 8DF80730 		strb	r3, [sp, #7]
 2159 01a2 CFE7     		b	.L176
 2160              	.L177:
1072:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
 2161              		.loc 1 1072 0
 2162 01a4 0023     		movs	r3, #0
 2163 01a6 8DF80730 		strb	r3, [sp, #7]
 2164 01aa E0E7     		b	.L178
 2165              	.L196:
1076:Modules/mpu6050/inv_mpu.c **** 	}
 2166              		.loc 1 1076 0
 2167 01ac 4FF0FF30 		mov	r0, #-1
 2168 01b0 A5E7     		b	.L168
 2169              	.L179:
 2170              	.LCFI49:
 2171              		.cfi_def_cfa_offset 0
 2172              		.cfi_restore 14
1029:Modules/mpu6050/inv_mpu.c **** 
 2173              		.loc 1 1029 0
 2174 01b2 4FF0FF30 		mov	r0, #-1
1079:Modules/mpu6050/inv_mpu.c **** 
 2175              		.loc 1 1079 0
 2176 01b6 7047     		bx	lr
 2177              	.L180:
 2178              	.LCFI50:
 2179              		.cfi_def_cfa_offset 16
 2180              		.cfi_offset 14, -4
1033:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &data))
 2181              		.loc 1 1033 0
 2182 01b8 4FF0FF30 		mov	r0, #-1
 2183 01bc 9FE7     		b	.L168
 2184              	.L181:
1035:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 2185              		.loc 1 1035 0
 2186 01be 4FF0FF30 		mov	r0, #-1
 2187 01c2 9CE7     		b	.L168
 2188              	.L182:
1037:Modules/mpu6050/inv_mpu.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 79


 2189              		.loc 1 1037 0
 2190 01c4 4FF0FF30 		mov	r0, #-1
 2191 01c8 99E7     		b	.L168
 2192              	.L183:
1042:Modules/mpu6050/inv_mpu.c **** 		delay_ms(50);
 2193              		.loc 1 1042 0
 2194 01ca 4FF0FF30 		mov	r0, #-1
 2195 01ce 96E7     		b	.L168
 2196              	.L184:
1048:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.int_enable)
 2197              		.loc 1 1048 0
 2198 01d0 4FF0FF30 		mov	r0, #-1
 2199 01d4 93E7     		b	.L168
 2200              	.L185:
1054:Modules/mpu6050/inv_mpu.c **** 		data = 0;
 2201              		.loc 1 1054 0
 2202 01d6 4FF0FF30 		mov	r0, #-1
 2203 01da 90E7     		b	.L168
 2204              	.L187:
1061:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.bypass_mode || !(st.chip_cfg.sensors & INV_XYZ_COMPASS))
 2205              		.loc 1 1061 0
 2206 01dc 4FF0FF30 		mov	r0, #-1
 2207 01e0 8DE7     		b	.L168
 2208              	.L188:
1067:Modules/mpu6050/inv_mpu.c **** 		delay_ms(50);
 2209              		.loc 1 1067 0
 2210 01e2 4FF0FF30 		mov	r0, #-1
 2211 01e6 8AE7     		b	.L168
 2212              	.L189:
1074:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &st.chip_cfg.fifo_enable))
 2213              		.loc 1 1074 0
 2214 01e8 4FF0FF30 		mov	r0, #-1
 2215 01ec 87E7     		b	.L168
 2216              	.L198:
 2217 01ee 00BF     		.align	2
 2218              	.L197:
 2219 01f0 00000000 		.word	.LANCHOR0
 2220              		.cfi_endproc
 2221              	.LFE75:
 2223              		.section	.text.mpu_get_gyro_fsr,"ax",%progbits
 2224              		.align	1
 2225              		.global	mpu_get_gyro_fsr
 2226              		.syntax unified
 2227              		.thumb
 2228              		.thumb_func
 2229              		.fpu softvfp
 2231              	mpu_get_gyro_fsr:
 2232              	.LFB76:
1087:Modules/mpu6050/inv_mpu.c **** 	switch (st.chip_cfg.gyro_fsr) {
 2233              		.loc 1 1087 0
 2234              		.cfi_startproc
 2235              		@ args = 0, pretend = 0, frame = 0
 2236              		@ frame_needed = 0, uses_anonymous_args = 0
 2237              		@ link register save eliminated.
 2238              	.LVL188:
1088:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_250DPS:
 2239              		.loc 1 1088 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 80


 2240 0000 0D4B     		ldr	r3, .L207
 2241 0002 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 2242 0004 032B     		cmp	r3, #3
 2243 0006 13D8     		bhi	.L200
 2244 0008 DFE803F0 		tbb	[pc, r3]
 2245              	.L202:
 2246 000c 02       		.byte	(.L201-.L202)/2
 2247 000d 06       		.byte	(.L203-.L202)/2
 2248 000e 0A       		.byte	(.L204-.L202)/2
 2249 000f 0E       		.byte	(.L205-.L202)/2
 2250              		.p2align 1
 2251              	.L201:
1090:Modules/mpu6050/inv_mpu.c **** 			break;
 2252              		.loc 1 1090 0
 2253 0010 FA23     		movs	r3, #250
 2254 0012 0380     		strh	r3, [r0]	@ movhi
 2255              	.L206:
1106:Modules/mpu6050/inv_mpu.c **** 
 2256              		.loc 1 1106 0
 2257 0014 0020     		movs	r0, #0
 2258              	.LVL189:
 2259 0016 7047     		bx	lr
 2260              	.LVL190:
 2261              	.L203:
1093:Modules/mpu6050/inv_mpu.c **** 			break;
 2262              		.loc 1 1093 0
 2263 0018 4FF4FA73 		mov	r3, #500
 2264 001c 0380     		strh	r3, [r0]	@ movhi
1094:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_1000DPS:
 2265              		.loc 1 1094 0
 2266 001e F9E7     		b	.L206
 2267              	.L204:
1096:Modules/mpu6050/inv_mpu.c **** 			break;
 2268              		.loc 1 1096 0
 2269 0020 4FF47A73 		mov	r3, #1000
 2270 0024 0380     		strh	r3, [r0]	@ movhi
1097:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_2000DPS:
 2271              		.loc 1 1097 0
 2272 0026 F5E7     		b	.L206
 2273              	.L205:
1099:Modules/mpu6050/inv_mpu.c **** 			break;
 2274              		.loc 1 1099 0
 2275 0028 4FF4FA63 		mov	r3, #2000
 2276 002c 0380     		strh	r3, [r0]	@ movhi
1100:Modules/mpu6050/inv_mpu.c **** 		default:
 2277              		.loc 1 1100 0
 2278 002e F1E7     		b	.L206
 2279              	.L200:
1102:Modules/mpu6050/inv_mpu.c **** 			break;
 2280              		.loc 1 1102 0
 2281 0030 0023     		movs	r3, #0
 2282 0032 0380     		strh	r3, [r0]	@ movhi
1103:Modules/mpu6050/inv_mpu.c **** 	}
 2283              		.loc 1 1103 0
 2284 0034 EEE7     		b	.L206
 2285              	.L208:
 2286 0036 00BF     		.align	2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 81


 2287              	.L207:
 2288 0038 00000000 		.word	.LANCHOR0
 2289              		.cfi_endproc
 2290              	.LFE76:
 2292              		.section	.text.mpu_set_gyro_fsr,"ax",%progbits
 2293              		.align	1
 2294              		.global	mpu_set_gyro_fsr
 2295              		.syntax unified
 2296              		.thumb
 2297              		.thumb_func
 2298              		.fpu softvfp
 2300              	mpu_set_gyro_fsr:
 2301              	.LFB77:
1114:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
 2302              		.loc 1 1114 0
 2303              		.cfi_startproc
 2304              		@ args = 0, pretend = 0, frame = 8
 2305              		@ frame_needed = 0, uses_anonymous_args = 0
 2306              	.LVL191:
1117:Modules/mpu6050/inv_mpu.c **** 		return -1;
 2307              		.loc 1 1117 0
 2308 0000 224B     		ldr	r3, .L226
 2309 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 2310 0004 002B     		cmp	r3, #0
 2311 0006 36D0     		beq	.L217
1114:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
 2312              		.loc 1 1114 0
 2313 0008 00B5     		push	{lr}
 2314              	.LCFI51:
 2315              		.cfi_def_cfa_offset 4
 2316              		.cfi_offset 14, -4
 2317 000a 83B0     		sub	sp, sp, #12
 2318              	.LCFI52:
 2319              		.cfi_def_cfa_offset 16
1120:Modules/mpu6050/inv_mpu.c **** 		case 250:
 2320              		.loc 1 1120 0
 2321 000c B0F5FA7F 		cmp	r0, #500
 2322 0010 29D0     		beq	.L211
 2323 0012 09D9     		bls	.L225
 2324 0014 B0F57A7F 		cmp	r0, #1000
 2325 0018 29D0     		beq	.L214
 2326 001a B0F5FA6F 		cmp	r0, #2000
 2327 001e 2DD1     		bne	.L218
1131:Modules/mpu6050/inv_mpu.c **** 			break;
 2328              		.loc 1 1131 0
 2329 0020 1823     		movs	r3, #24
 2330 0022 8DF80730 		strb	r3, [sp, #7]
1132:Modules/mpu6050/inv_mpu.c **** 		default:
 2331              		.loc 1 1132 0
 2332 0026 04E0     		b	.L216
 2333              	.L225:
1120:Modules/mpu6050/inv_mpu.c **** 		case 250:
 2334              		.loc 1 1120 0
 2335 0028 FA28     		cmp	r0, #250
 2336 002a 27D1     		bne	.L218
1122:Modules/mpu6050/inv_mpu.c **** 			break;
 2337              		.loc 1 1122 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 82


 2338 002c 0023     		movs	r3, #0
 2339 002e 8DF80730 		strb	r3, [sp, #7]
 2340              	.L216:
1137:Modules/mpu6050/inv_mpu.c **** 		return 0;
 2341              		.loc 1 1137 0
 2342 0032 164B     		ldr	r3, .L226
 2343 0034 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 2344 0036 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 2345 003a B3EBD20F 		cmp	r3, r2, lsr #3
 2346 003e 20D0     		beq	.L219
1139:Modules/mpu6050/inv_mpu.c **** 		return -1;
 2347              		.loc 1 1139 0
 2348 0040 124B     		ldr	r3, .L226
 2349 0042 5868     		ldr	r0, [r3, #4]
 2350              	.LVL192:
 2351 0044 1968     		ldr	r1, [r3]
 2352 0046 0DF10703 		add	r3, sp, #7
 2353 004a 0122     		movs	r2, #1
 2354 004c 8979     		ldrb	r1, [r1, #6]	@ zero_extendqisi2
 2355 004e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2356 0050 FFF7FEFF 		bl	mod_Mpu_Write
 2357              	.LVL193:
 2358 0054 B8B9     		cbnz	r0, .L220
1141:Modules/mpu6050/inv_mpu.c **** 	return 0;
 2359              		.loc 1 1141 0
 2360 0056 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2361 005a DB08     		lsrs	r3, r3, #3
 2362 005c 0B4A     		ldr	r2, .L226
 2363 005e 1372     		strb	r3, [r2, #8]
 2364              	.L209:
1143:Modules/mpu6050/inv_mpu.c **** 
 2365              		.loc 1 1143 0
 2366 0060 03B0     		add	sp, sp, #12
 2367              	.LCFI53:
 2368              		.cfi_remember_state
 2369              		.cfi_def_cfa_offset 4
 2370              		@ sp needed
 2371 0062 5DF804FB 		ldr	pc, [sp], #4
 2372              	.LVL194:
 2373              	.L211:
 2374              	.LCFI54:
 2375              		.cfi_restore_state
1125:Modules/mpu6050/inv_mpu.c **** 			break;
 2376              		.loc 1 1125 0
 2377 0066 0823     		movs	r3, #8
 2378 0068 8DF80730 		strb	r3, [sp, #7]
1126:Modules/mpu6050/inv_mpu.c **** 		case 1000:
 2379              		.loc 1 1126 0
 2380 006c E1E7     		b	.L216
 2381              	.L214:
1128:Modules/mpu6050/inv_mpu.c **** 			break;
 2382              		.loc 1 1128 0
 2383 006e 1023     		movs	r3, #16
 2384 0070 8DF80730 		strb	r3, [sp, #7]
1129:Modules/mpu6050/inv_mpu.c **** 		case 2000:
 2385              		.loc 1 1129 0
 2386 0074 DDE7     		b	.L216
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 83


 2387              	.L217:
 2388              	.LCFI55:
 2389              		.cfi_def_cfa_offset 0
 2390              		.cfi_restore 14
1118:Modules/mpu6050/inv_mpu.c **** 
 2391              		.loc 1 1118 0
 2392 0076 4FF0FF30 		mov	r0, #-1
 2393              	.LVL195:
1143:Modules/mpu6050/inv_mpu.c **** 
 2394              		.loc 1 1143 0
 2395 007a 7047     		bx	lr
 2396              	.LVL196:
 2397              	.L218:
 2398              	.LCFI56:
 2399              		.cfi_def_cfa_offset 16
 2400              		.cfi_offset 14, -4
1134:Modules/mpu6050/inv_mpu.c **** 	}
 2401              		.loc 1 1134 0
 2402 007c 4FF0FF30 		mov	r0, #-1
 2403              	.LVL197:
 2404 0080 EEE7     		b	.L209
 2405              	.LVL198:
 2406              	.L219:
1138:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, &data))
 2407              		.loc 1 1138 0
 2408 0082 0020     		movs	r0, #0
 2409              	.LVL199:
 2410 0084 ECE7     		b	.L209
 2411              	.L220:
1140:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.gyro_fsr = data >> 3;
 2412              		.loc 1 1140 0
 2413 0086 4FF0FF30 		mov	r0, #-1
 2414 008a E9E7     		b	.L209
 2415              	.L227:
 2416              		.align	2
 2417              	.L226:
 2418 008c 00000000 		.word	.LANCHOR0
 2419              		.cfi_endproc
 2420              	.LFE77:
 2422              		.section	.text.mpu_get_accel_fsr,"ax",%progbits
 2423              		.align	1
 2424              		.global	mpu_get_accel_fsr
 2425              		.syntax unified
 2426              		.thumb
 2427              		.thumb_func
 2428              		.fpu softvfp
 2430              	mpu_get_accel_fsr:
 2431              	.LFB78:
1151:Modules/mpu6050/inv_mpu.c **** 	switch (st.chip_cfg.accel_fsr) {
 2432              		.loc 1 1151 0
 2433              		.cfi_startproc
 2434              		@ args = 0, pretend = 0, frame = 0
 2435              		@ frame_needed = 0, uses_anonymous_args = 0
 2436              		@ link register save eliminated.
 2437              	.LVL200:
1152:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_2G:
 2438              		.loc 1 1152 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 84


 2439 0000 0F4B     		ldr	r3, .L238
 2440 0002 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 2441 0004 032B     		cmp	r3, #3
 2442 0006 16D8     		bhi	.L236
 2443 0008 DFE803F0 		tbb	[pc, r3]
 2444              	.L231:
 2445 000c 02       		.byte	(.L230-.L231)/2
 2446 000d 0C       		.byte	(.L232-.L231)/2
 2447 000e 0F       		.byte	(.L233-.L231)/2
 2448 000f 12       		.byte	(.L234-.L231)/2
 2449              		.p2align 1
 2450              	.L230:
1154:Modules/mpu6050/inv_mpu.c **** 			break;
 2451              		.loc 1 1154 0
 2452 0010 0223     		movs	r3, #2
 2453 0012 0370     		strb	r3, [r0]
 2454              	.L235:
1168:Modules/mpu6050/inv_mpu.c **** 		fsr[0] <<= 1;
 2455              		.loc 1 1168 0
 2456 0014 0A4B     		ldr	r3, .L238
 2457 0016 DB7C     		ldrb	r3, [r3, #19]	@ zero_extendqisi2
 2458 0018 83B1     		cbz	r3, .L237
1169:Modules/mpu6050/inv_mpu.c **** 	return 0;
 2459              		.loc 1 1169 0
 2460 001a 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 2461 001c 5B00     		lsls	r3, r3, #1
 2462 001e 0370     		strb	r3, [r0]
1170:Modules/mpu6050/inv_mpu.c **** }
 2463              		.loc 1 1170 0
 2464 0020 0020     		movs	r0, #0
 2465              	.LVL201:
 2466 0022 7047     		bx	lr
 2467              	.LVL202:
 2468              	.L232:
1157:Modules/mpu6050/inv_mpu.c **** 			break;
 2469              		.loc 1 1157 0
 2470 0024 0423     		movs	r3, #4
 2471 0026 0370     		strb	r3, [r0]
1158:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_8G:
 2472              		.loc 1 1158 0
 2473 0028 F4E7     		b	.L235
 2474              	.L233:
1160:Modules/mpu6050/inv_mpu.c **** 			break;
 2475              		.loc 1 1160 0
 2476 002a 0823     		movs	r3, #8
 2477 002c 0370     		strb	r3, [r0]
1161:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_16G:
 2478              		.loc 1 1161 0
 2479 002e F1E7     		b	.L235
 2480              	.L234:
1163:Modules/mpu6050/inv_mpu.c **** 			break;
 2481              		.loc 1 1163 0
 2482 0030 1023     		movs	r3, #16
 2483 0032 0370     		strb	r3, [r0]
1164:Modules/mpu6050/inv_mpu.c **** 		default:
 2484              		.loc 1 1164 0
 2485 0034 EEE7     		b	.L235
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 85


 2486              	.L236:
1166:Modules/mpu6050/inv_mpu.c **** 	}
 2487              		.loc 1 1166 0
 2488 0036 4FF0FF30 		mov	r0, #-1
 2489              	.LVL203:
 2490 003a 7047     		bx	lr
 2491              	.LVL204:
 2492              	.L237:
1170:Modules/mpu6050/inv_mpu.c **** }
 2493              		.loc 1 1170 0
 2494 003c 0020     		movs	r0, #0
 2495              	.LVL205:
1171:Modules/mpu6050/inv_mpu.c **** 
 2496              		.loc 1 1171 0
 2497 003e 7047     		bx	lr
 2498              	.L239:
 2499              		.align	2
 2500              	.L238:
 2501 0040 00000000 		.word	.LANCHOR0
 2502              		.cfi_endproc
 2503              	.LFE78:
 2505              		.section	.text.mpu_set_accel_fsr,"ax",%progbits
 2506              		.align	1
 2507              		.global	mpu_set_accel_fsr
 2508              		.syntax unified
 2509              		.thumb
 2510              		.thumb_func
 2511              		.fpu softvfp
 2513              	mpu_set_accel_fsr:
 2514              	.LFB79:
1179:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
 2515              		.loc 1 1179 0
 2516              		.cfi_startproc
 2517              		@ args = 0, pretend = 0, frame = 8
 2518              		@ frame_needed = 0, uses_anonymous_args = 0
 2519              	.LVL206:
1182:Modules/mpu6050/inv_mpu.c **** 		return -1;
 2520              		.loc 1 1182 0
 2521 0000 234B     		ldr	r3, .L256
 2522 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 2523 0004 002B     		cmp	r3, #0
 2524 0006 37D0     		beq	.L248
1179:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
 2525              		.loc 1 1179 0
 2526 0008 00B5     		push	{lr}
 2527              	.LCFI57:
 2528              		.cfi_def_cfa_offset 4
 2529              		.cfi_offset 14, -4
 2530 000a 83B0     		sub	sp, sp, #12
 2531              	.LCFI58:
 2532              		.cfi_def_cfa_offset 16
1185:Modules/mpu6050/inv_mpu.c **** 		case 2:
 2533              		.loc 1 1185 0
 2534 000c 0238     		subs	r0, r0, #2
 2535              	.LVL207:
 2536 000e 0E28     		cmp	r0, #14
 2537 0010 35D8     		bhi	.L249
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 86


 2538 0012 DFE800F0 		tbb	[pc, r0]
 2539              	.L243:
 2540 0016 08       		.byte	(.L242-.L243)/2
 2541 0017 34       		.byte	(.L249-.L243)/2
 2542 0018 25       		.byte	(.L244-.L243)/2
 2543 0019 34       		.byte	(.L249-.L243)/2
 2544 001a 34       		.byte	(.L249-.L243)/2
 2545 001b 34       		.byte	(.L249-.L243)/2
 2546 001c 29       		.byte	(.L245-.L243)/2
 2547 001d 34       		.byte	(.L249-.L243)/2
 2548 001e 34       		.byte	(.L249-.L243)/2
 2549 001f 34       		.byte	(.L249-.L243)/2
 2550 0020 34       		.byte	(.L249-.L243)/2
 2551 0021 34       		.byte	(.L249-.L243)/2
 2552 0022 34       		.byte	(.L249-.L243)/2
 2553 0023 34       		.byte	(.L249-.L243)/2
 2554 0024 2D       		.byte	(.L246-.L243)/2
 2555 0025 00       		.p2align 1
 2556              	.L242:
1187:Modules/mpu6050/inv_mpu.c **** 			break;
 2557              		.loc 1 1187 0
 2558 0026 0023     		movs	r3, #0
 2559 0028 8DF80730 		strb	r3, [sp, #7]
 2560              	.L247:
1202:Modules/mpu6050/inv_mpu.c **** 		return 0;
 2561              		.loc 1 1202 0
 2562 002c 184B     		ldr	r3, .L256
 2563 002e 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 2564 0030 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 2565 0034 B3EBD20F 		cmp	r3, r2, lsr #3
 2566 0038 24D0     		beq	.L250
1204:Modules/mpu6050/inv_mpu.c **** 		return -1;
 2567              		.loc 1 1204 0
 2568 003a 154B     		ldr	r3, .L256
 2569 003c 5868     		ldr	r0, [r3, #4]
 2570 003e 1968     		ldr	r1, [r3]
 2571 0040 0DF10703 		add	r3, sp, #7
 2572 0044 0122     		movs	r2, #1
 2573 0046 C979     		ldrb	r1, [r1, #7]	@ zero_extendqisi2
 2574 0048 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2575 004a FFF7FEFF 		bl	mod_Mpu_Write
 2576              	.LVL208:
 2577 004e D8B9     		cbnz	r0, .L251
1206:Modules/mpu6050/inv_mpu.c **** 	return 0;
 2578              		.loc 1 1206 0
 2579 0050 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2580 0054 DB08     		lsrs	r3, r3, #3
 2581 0056 0E4A     		ldr	r2, .L256
 2582 0058 5372     		strb	r3, [r2, #9]
 2583              	.L240:
1208:Modules/mpu6050/inv_mpu.c **** 
 2584              		.loc 1 1208 0
 2585 005a 03B0     		add	sp, sp, #12
 2586              	.LCFI59:
 2587              		.cfi_remember_state
 2588              		.cfi_def_cfa_offset 4
 2589              		@ sp needed
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 87


 2590 005c 5DF804FB 		ldr	pc, [sp], #4
 2591              	.L244:
 2592              	.LCFI60:
 2593              		.cfi_restore_state
1190:Modules/mpu6050/inv_mpu.c **** 			break;
 2594              		.loc 1 1190 0
 2595 0060 0823     		movs	r3, #8
 2596 0062 8DF80730 		strb	r3, [sp, #7]
1191:Modules/mpu6050/inv_mpu.c **** 		case 8:
 2597              		.loc 1 1191 0
 2598 0066 E1E7     		b	.L247
 2599              	.L245:
1193:Modules/mpu6050/inv_mpu.c **** 			break;
 2600              		.loc 1 1193 0
 2601 0068 1023     		movs	r3, #16
 2602 006a 8DF80730 		strb	r3, [sp, #7]
1194:Modules/mpu6050/inv_mpu.c **** 		case 16:
 2603              		.loc 1 1194 0
 2604 006e DDE7     		b	.L247
 2605              	.L246:
1196:Modules/mpu6050/inv_mpu.c **** 			break;
 2606              		.loc 1 1196 0
 2607 0070 1823     		movs	r3, #24
 2608 0072 8DF80730 		strb	r3, [sp, #7]
1197:Modules/mpu6050/inv_mpu.c **** 		default:
 2609              		.loc 1 1197 0
 2610 0076 D9E7     		b	.L247
 2611              	.LVL209:
 2612              	.L248:
 2613              	.LCFI61:
 2614              		.cfi_def_cfa_offset 0
 2615              		.cfi_restore 14
1183:Modules/mpu6050/inv_mpu.c **** 
 2616              		.loc 1 1183 0
 2617 0078 4FF0FF30 		mov	r0, #-1
 2618              	.LVL210:
1208:Modules/mpu6050/inv_mpu.c **** 
 2619              		.loc 1 1208 0
 2620 007c 7047     		bx	lr
 2621              	.L249:
 2622              	.LCFI62:
 2623              		.cfi_def_cfa_offset 16
 2624              		.cfi_offset 14, -4
1199:Modules/mpu6050/inv_mpu.c **** 	}
 2625              		.loc 1 1199 0
 2626 007e 4FF0FF30 		mov	r0, #-1
 2627 0082 EAE7     		b	.L240
 2628              	.L250:
1203:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->accel_cfg, 1, &data))
 2629              		.loc 1 1203 0
 2630 0084 0020     		movs	r0, #0
 2631 0086 E8E7     		b	.L240
 2632              	.L251:
1205:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.accel_fsr = data >> 3;
 2633              		.loc 1 1205 0
 2634 0088 4FF0FF30 		mov	r0, #-1
 2635 008c E5E7     		b	.L240
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 88


 2636              	.L257:
 2637 008e 00BF     		.align	2
 2638              	.L256:
 2639 0090 00000000 		.word	.LANCHOR0
 2640              		.cfi_endproc
 2641              	.LFE79:
 2643              		.section	.text.mpu_get_lpf,"ax",%progbits
 2644              		.align	1
 2645              		.global	mpu_get_lpf
 2646              		.syntax unified
 2647              		.thumb
 2648              		.thumb_func
 2649              		.fpu softvfp
 2651              	mpu_get_lpf:
 2652              	.LFB80:
1216:Modules/mpu6050/inv_mpu.c **** 	switch (st.chip_cfg.lpf) {
 2653              		.loc 1 1216 0
 2654              		.cfi_startproc
 2655              		@ args = 0, pretend = 0, frame = 0
 2656              		@ frame_needed = 0, uses_anonymous_args = 0
 2657              		@ link register save eliminated.
 2658              	.LVL211:
1217:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_188HZ:
 2659              		.loc 1 1217 0
 2660 0000 0F4B     		ldr	r3, .L268
 2661 0002 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 2662 0004 013B     		subs	r3, r3, #1
 2663 0006 052B     		cmp	r3, #5
 2664 0008 17D8     		bhi	.L259
 2665 000a DFE803F0 		tbb	[pc, r3]
 2666              	.L261:
 2667 000e 03       		.byte	(.L260-.L261)/2
 2668 000f 07       		.byte	(.L262-.L261)/2
 2669 0010 0A       		.byte	(.L263-.L261)/2
 2670 0011 0D       		.byte	(.L264-.L261)/2
 2671 0012 10       		.byte	(.L265-.L261)/2
 2672 0013 13       		.byte	(.L266-.L261)/2
 2673              		.p2align 1
 2674              	.L260:
1219:Modules/mpu6050/inv_mpu.c **** 			break;
 2675              		.loc 1 1219 0
 2676 0014 BC23     		movs	r3, #188
 2677 0016 0380     		strh	r3, [r0]	@ movhi
 2678              	.L267:
1243:Modules/mpu6050/inv_mpu.c **** 
 2679              		.loc 1 1243 0
 2680 0018 0020     		movs	r0, #0
 2681              	.LVL212:
 2682 001a 7047     		bx	lr
 2683              	.LVL213:
 2684              	.L262:
1222:Modules/mpu6050/inv_mpu.c **** 			break;
 2685              		.loc 1 1222 0
 2686 001c 6223     		movs	r3, #98
 2687 001e 0380     		strh	r3, [r0]	@ movhi
1223:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_42HZ:
 2688              		.loc 1 1223 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 89


 2689 0020 FAE7     		b	.L267
 2690              	.L263:
1225:Modules/mpu6050/inv_mpu.c **** 			break;
 2691              		.loc 1 1225 0
 2692 0022 2A23     		movs	r3, #42
 2693 0024 0380     		strh	r3, [r0]	@ movhi
1226:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_20HZ:
 2694              		.loc 1 1226 0
 2695 0026 F7E7     		b	.L267
 2696              	.L264:
1228:Modules/mpu6050/inv_mpu.c **** 			break;
 2697              		.loc 1 1228 0
 2698 0028 1423     		movs	r3, #20
 2699 002a 0380     		strh	r3, [r0]	@ movhi
1229:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_10HZ:
 2700              		.loc 1 1229 0
 2701 002c F4E7     		b	.L267
 2702              	.L265:
1231:Modules/mpu6050/inv_mpu.c **** 			break;
 2703              		.loc 1 1231 0
 2704 002e 0A23     		movs	r3, #10
 2705 0030 0380     		strh	r3, [r0]	@ movhi
1232:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_5HZ:
 2706              		.loc 1 1232 0
 2707 0032 F1E7     		b	.L267
 2708              	.L266:
1234:Modules/mpu6050/inv_mpu.c **** 			break;
 2709              		.loc 1 1234 0
 2710 0034 0523     		movs	r3, #5
 2711 0036 0380     		strh	r3, [r0]	@ movhi
1235:Modules/mpu6050/inv_mpu.c **** 		case INV_FILTER_256HZ_NOLPF2:
 2712              		.loc 1 1235 0
 2713 0038 EEE7     		b	.L267
 2714              	.L259:
1239:Modules/mpu6050/inv_mpu.c **** 			break;
 2715              		.loc 1 1239 0
 2716 003a 0023     		movs	r3, #0
 2717 003c 0380     		strh	r3, [r0]	@ movhi
1240:Modules/mpu6050/inv_mpu.c **** 	}
 2718              		.loc 1 1240 0
 2719 003e EBE7     		b	.L267
 2720              	.L269:
 2721              		.align	2
 2722              	.L268:
 2723 0040 00000000 		.word	.LANCHOR0
 2724              		.cfi_endproc
 2725              	.LFE80:
 2727              		.section	.text.mpu_set_lpf,"ax",%progbits
 2728              		.align	1
 2729              		.global	mpu_set_lpf
 2730              		.syntax unified
 2731              		.thumb
 2732              		.thumb_func
 2733              		.fpu softvfp
 2735              	mpu_set_lpf:
 2736              	.LFB81:
1252:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 90


 2737              		.loc 1 1252 0
 2738              		.cfi_startproc
 2739              		@ args = 0, pretend = 0, frame = 8
 2740              		@ frame_needed = 0, uses_anonymous_args = 0
 2741              	.LVL214:
1255:Modules/mpu6050/inv_mpu.c **** 		return -1;
 2742              		.loc 1 1255 0
 2743 0000 234B     		ldr	r3, .L285
 2744 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 2745 0004 002B     		cmp	r3, #0
 2746 0006 3AD0     		beq	.L278
1252:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
 2747              		.loc 1 1252 0
 2748 0008 00B5     		push	{lr}
 2749              	.LCFI63:
 2750              		.cfi_def_cfa_offset 4
 2751              		.cfi_offset 14, -4
 2752 000a 83B0     		sub	sp, sp, #12
 2753              	.LCFI64:
 2754              		.cfi_def_cfa_offset 16
1258:Modules/mpu6050/inv_mpu.c **** 		data = INV_FILTER_188HZ;
 2755              		.loc 1 1258 0
 2756 000c BB28     		cmp	r0, #187
 2757 000e 1AD9     		bls	.L272
1259:Modules/mpu6050/inv_mpu.c **** 	else if (lpf >= 98)
 2758              		.loc 1 1259 0
 2759 0010 0123     		movs	r3, #1
 2760 0012 8DF80730 		strb	r3, [sp, #7]
 2761              	.L273:
1271:Modules/mpu6050/inv_mpu.c **** 		return 0;
 2762              		.loc 1 1271 0
 2763 0016 1E4B     		ldr	r3, .L285
 2764 0018 DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 2765 001a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2766 001e 9A42     		cmp	r2, r3
 2767 0020 30D0     		beq	.L279
1273:Modules/mpu6050/inv_mpu.c **** 		return -1;
 2768              		.loc 1 1273 0
 2769 0022 1B4B     		ldr	r3, .L285
 2770 0024 5868     		ldr	r0, [r3, #4]
 2771              	.LVL215:
 2772 0026 1968     		ldr	r1, [r3]
 2773 0028 0DF10703 		add	r3, sp, #7
 2774 002c 0122     		movs	r2, #1
 2775 002e 8978     		ldrb	r1, [r1, #2]	@ zero_extendqisi2
 2776 0030 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2777 0032 FFF7FEFF 		bl	mod_Mpu_Write
 2778              	.LVL216:
 2779 0036 38BB     		cbnz	r0, .L280
1275:Modules/mpu6050/inv_mpu.c **** 	return 0;
 2780              		.loc 1 1275 0
 2781 0038 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 2782 003c 144B     		ldr	r3, .L285
 2783 003e DA72     		strb	r2, [r3, #11]
 2784              	.L270:
1277:Modules/mpu6050/inv_mpu.c **** 
 2785              		.loc 1 1277 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 91


 2786 0040 03B0     		add	sp, sp, #12
 2787              	.LCFI65:
 2788              		.cfi_remember_state
 2789              		.cfi_def_cfa_offset 4
 2790              		@ sp needed
 2791 0042 5DF804FB 		ldr	pc, [sp], #4
 2792              	.LVL217:
 2793              	.L272:
 2794              	.LCFI66:
 2795              		.cfi_restore_state
1260:Modules/mpu6050/inv_mpu.c **** 		data = INV_FILTER_98HZ;
 2796              		.loc 1 1260 0
 2797 0046 6128     		cmp	r0, #97
 2798 0048 03D9     		bls	.L274
1261:Modules/mpu6050/inv_mpu.c **** 	else if (lpf >= 42)
 2799              		.loc 1 1261 0
 2800 004a 0223     		movs	r3, #2
 2801 004c 8DF80730 		strb	r3, [sp, #7]
 2802 0050 E1E7     		b	.L273
 2803              	.L274:
1262:Modules/mpu6050/inv_mpu.c **** 		data = INV_FILTER_42HZ;
 2804              		.loc 1 1262 0
 2805 0052 2928     		cmp	r0, #41
 2806 0054 03D9     		bls	.L275
1263:Modules/mpu6050/inv_mpu.c **** 	else if (lpf >= 20)
 2807              		.loc 1 1263 0
 2808 0056 0323     		movs	r3, #3
 2809 0058 8DF80730 		strb	r3, [sp, #7]
 2810 005c DBE7     		b	.L273
 2811              	.L275:
1264:Modules/mpu6050/inv_mpu.c **** 		data = INV_FILTER_20HZ;
 2812              		.loc 1 1264 0
 2813 005e 1328     		cmp	r0, #19
 2814 0060 03D9     		bls	.L276
1265:Modules/mpu6050/inv_mpu.c **** 	else if (lpf >= 10)
 2815              		.loc 1 1265 0
 2816 0062 0423     		movs	r3, #4
 2817 0064 8DF80730 		strb	r3, [sp, #7]
 2818 0068 D5E7     		b	.L273
 2819              	.L276:
1266:Modules/mpu6050/inv_mpu.c **** 		data = INV_FILTER_10HZ;
 2820              		.loc 1 1266 0
 2821 006a 0928     		cmp	r0, #9
 2822 006c 03D9     		bls	.L277
1267:Modules/mpu6050/inv_mpu.c **** 	else
 2823              		.loc 1 1267 0
 2824 006e 0523     		movs	r3, #5
 2825 0070 8DF80730 		strb	r3, [sp, #7]
 2826 0074 CFE7     		b	.L273
 2827              	.L277:
1269:Modules/mpu6050/inv_mpu.c **** 
 2828              		.loc 1 1269 0
 2829 0076 0623     		movs	r3, #6
 2830 0078 8DF80730 		strb	r3, [sp, #7]
 2831 007c CBE7     		b	.L273
 2832              	.L278:
 2833              	.LCFI67:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 92


 2834              		.cfi_def_cfa_offset 0
 2835              		.cfi_restore 14
1256:Modules/mpu6050/inv_mpu.c **** 
 2836              		.loc 1 1256 0
 2837 007e 4FF0FF30 		mov	r0, #-1
 2838              	.LVL218:
1277:Modules/mpu6050/inv_mpu.c **** 
 2839              		.loc 1 1277 0
 2840 0082 7047     		bx	lr
 2841              	.LVL219:
 2842              	.L279:
 2843              	.LCFI68:
 2844              		.cfi_def_cfa_offset 16
 2845              		.cfi_offset 14, -4
1272:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->lpf, 1, &data))
 2846              		.loc 1 1272 0
 2847 0084 0020     		movs	r0, #0
 2848              	.LVL220:
 2849 0086 DBE7     		b	.L270
 2850              	.L280:
1274:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lpf = data;
 2851              		.loc 1 1274 0
 2852 0088 4FF0FF30 		mov	r0, #-1
 2853 008c D8E7     		b	.L270
 2854              	.L286:
 2855 008e 00BF     		.align	2
 2856              	.L285:
 2857 0090 00000000 		.word	.LANCHOR0
 2858              		.cfi_endproc
 2859              	.LFE81:
 2861              		.section	.text.mpu_get_sample_rate,"ax",%progbits
 2862              		.align	1
 2863              		.global	mpu_get_sample_rate
 2864              		.syntax unified
 2865              		.thumb
 2866              		.thumb_func
 2867              		.fpu softvfp
 2869              	mpu_get_sample_rate:
 2870              	.LFB82:
1285:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.dmp_on)
 2871              		.loc 1 1285 0
 2872              		.cfi_startproc
 2873              		@ args = 0, pretend = 0, frame = 0
 2874              		@ frame_needed = 0, uses_anonymous_args = 0
 2875              		@ link register save eliminated.
 2876              	.LVL221:
1286:Modules/mpu6050/inv_mpu.c **** 		return -1;
 2877              		.loc 1 1286 0
 2878 0000 054B     		ldr	r3, .L290
 2879 0002 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 2880 0006 23B9     		cbnz	r3, .L289
1289:Modules/mpu6050/inv_mpu.c **** 	return 0;
 2881              		.loc 1 1289 0
 2882 0008 034B     		ldr	r3, .L290
 2883 000a DB89     		ldrh	r3, [r3, #14]
 2884 000c 0380     		strh	r3, [r0]	@ movhi
1290:Modules/mpu6050/inv_mpu.c **** }
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 93


 2885              		.loc 1 1290 0
 2886 000e 0020     		movs	r0, #0
 2887              	.LVL222:
 2888 0010 7047     		bx	lr
 2889              	.LVL223:
 2890              	.L289:
1287:Modules/mpu6050/inv_mpu.c **** 	else
 2891              		.loc 1 1287 0
 2892 0012 4FF0FF30 		mov	r0, #-1
 2893              	.LVL224:
1291:Modules/mpu6050/inv_mpu.c **** 
 2894              		.loc 1 1291 0
 2895 0016 7047     		bx	lr
 2896              	.L291:
 2897              		.align	2
 2898              	.L290:
 2899 0018 00000000 		.word	.LANCHOR0
 2900              		.cfi_endproc
 2901              	.LFE82:
 2903              		.section	.text.mpu_get_compass_sample_rate,"ax",%progbits
 2904              		.align	1
 2905              		.global	mpu_get_compass_sample_rate
 2906              		.syntax unified
 2907              		.thumb
 2908              		.thumb_func
 2909              		.fpu softvfp
 2911              	mpu_get_compass_sample_rate:
 2912              	.LFB84:
1347:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 2913              		.loc 1 1347 0
 2914              		.cfi_startproc
 2915              		@ args = 0, pretend = 0, frame = 0
 2916              		@ frame_needed = 0, uses_anonymous_args = 0
 2917              		@ link register save eliminated.
 2918              	.LVL225:
1352:Modules/mpu6050/inv_mpu.c **** 	return -1;
 2919              		.loc 1 1352 0
 2920 0000 0023     		movs	r3, #0
 2921 0002 0380     		strh	r3, [r0]	@ movhi
1355:Modules/mpu6050/inv_mpu.c **** 
 2922              		.loc 1 1355 0
 2923 0004 4FF0FF30 		mov	r0, #-1
 2924              	.LVL226:
 2925 0008 7047     		bx	lr
 2926              		.cfi_endproc
 2927              	.LFE84:
 2929              		.section	.text.mpu_set_compass_sample_rate,"ax",%progbits
 2930              		.align	1
 2931              		.global	mpu_set_compass_sample_rate
 2932              		.syntax unified
 2933              		.thumb
 2934              		.thumb_func
 2935              		.fpu softvfp
 2937              	mpu_set_compass_sample_rate:
 2938              	.LFB85:
1369:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 2939              		.loc 1 1369 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 94


 2940              		.cfi_startproc
 2941              		@ args = 0, pretend = 0, frame = 0
 2942              		@ frame_needed = 0, uses_anonymous_args = 0
 2943              		@ link register save eliminated.
 2944              	.LVL227:
1383:Modules/mpu6050/inv_mpu.c **** 
 2945              		.loc 1 1383 0
 2946 0000 4FF0FF30 		mov	r0, #-1
 2947              	.LVL228:
 2948 0004 7047     		bx	lr
 2949              		.cfi_endproc
 2950              	.LFE85:
 2952              		.section	.text.mpu_get_gyro_sens,"ax",%progbits
 2953              		.align	1
 2954              		.global	mpu_get_gyro_sens
 2955              		.syntax unified
 2956              		.thumb
 2957              		.thumb_func
 2958              		.fpu softvfp
 2960              	mpu_get_gyro_sens:
 2961              	.LFB86:
1391:Modules/mpu6050/inv_mpu.c **** 	switch (st.chip_cfg.gyro_fsr) {
 2962              		.loc 1 1391 0
 2963              		.cfi_startproc
 2964              		@ args = 0, pretend = 0, frame = 0
 2965              		@ frame_needed = 0, uses_anonymous_args = 0
 2966              		@ link register save eliminated.
 2967              	.LVL229:
1392:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_250DPS:
 2968              		.loc 1 1392 0
 2969 0000 0D4B     		ldr	r3, .L302
 2970 0002 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 2971 0004 032B     		cmp	r3, #3
 2972 0006 13D8     		bhi	.L301
 2973 0008 DFE803F0 		tbb	[pc, r3]
 2974              	.L297:
 2975 000c 02       		.byte	(.L296-.L297)/2
 2976 000d 06       		.byte	(.L298-.L297)/2
 2977 000e 0A       		.byte	(.L299-.L297)/2
 2978 000f 0E       		.byte	(.L300-.L297)/2
 2979              		.p2align 1
 2980              	.L296:
1394:Modules/mpu6050/inv_mpu.c **** 			break;
 2981              		.loc 1 1394 0
 2982 0010 0A4B     		ldr	r3, .L302+4
 2983 0012 0360     		str	r3, [r0]	@ float
1408:Modules/mpu6050/inv_mpu.c **** }
 2984              		.loc 1 1408 0
 2985 0014 0020     		movs	r0, #0
 2986              	.LVL230:
1395:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_500DPS:
 2987              		.loc 1 1395 0
 2988 0016 7047     		bx	lr
 2989              	.LVL231:
 2990              	.L298:
1397:Modules/mpu6050/inv_mpu.c **** 			break;
 2991              		.loc 1 1397 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 95


 2992 0018 094B     		ldr	r3, .L302+8
 2993 001a 0360     		str	r3, [r0]	@ float
1408:Modules/mpu6050/inv_mpu.c **** }
 2994              		.loc 1 1408 0
 2995 001c 0020     		movs	r0, #0
 2996              	.LVL232:
1398:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_1000DPS:
 2997              		.loc 1 1398 0
 2998 001e 7047     		bx	lr
 2999              	.LVL233:
 3000              	.L299:
1400:Modules/mpu6050/inv_mpu.c **** 			break;
 3001              		.loc 1 1400 0
 3002 0020 084B     		ldr	r3, .L302+12
 3003 0022 0360     		str	r3, [r0]	@ float
1408:Modules/mpu6050/inv_mpu.c **** }
 3004              		.loc 1 1408 0
 3005 0024 0020     		movs	r0, #0
 3006              	.LVL234:
1401:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_2000DPS:
 3007              		.loc 1 1401 0
 3008 0026 7047     		bx	lr
 3009              	.LVL235:
 3010              	.L300:
1403:Modules/mpu6050/inv_mpu.c **** 			break;
 3011              		.loc 1 1403 0
 3012 0028 074B     		ldr	r3, .L302+16
 3013 002a 0360     		str	r3, [r0]	@ float
1408:Modules/mpu6050/inv_mpu.c **** }
 3014              		.loc 1 1408 0
 3015 002c 0020     		movs	r0, #0
 3016              	.LVL236:
1404:Modules/mpu6050/inv_mpu.c **** 		default:
 3017              		.loc 1 1404 0
 3018 002e 7047     		bx	lr
 3019              	.LVL237:
 3020              	.L301:
1406:Modules/mpu6050/inv_mpu.c **** 	}
 3021              		.loc 1 1406 0
 3022 0030 4FF0FF30 		mov	r0, #-1
 3023              	.LVL238:
1409:Modules/mpu6050/inv_mpu.c **** 
 3024              		.loc 1 1409 0
 3025 0034 7047     		bx	lr
 3026              	.L303:
 3027 0036 00BF     		.align	2
 3028              	.L302:
 3029 0038 00000000 		.word	.LANCHOR0
 3030 003c 00000343 		.word	1124270080
 3031 0040 00008342 		.word	1115881472
 3032 0044 33330342 		.word	1107505971
 3033 0048 33338341 		.word	1099117363
 3034              		.cfi_endproc
 3035              	.LFE86:
 3037              		.section	.text.mpu_get_accel_sens,"ax",%progbits
 3038              		.align	1
 3039              		.global	mpu_get_accel_sens
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 96


 3040              		.syntax unified
 3041              		.thumb
 3042              		.thumb_func
 3043              		.fpu softvfp
 3045              	mpu_get_accel_sens:
 3046              	.LFB87:
1417:Modules/mpu6050/inv_mpu.c **** 	switch (st.chip_cfg.accel_fsr) {
 3047              		.loc 1 1417 0
 3048              		.cfi_startproc
 3049              		@ args = 0, pretend = 0, frame = 0
 3050              		@ frame_needed = 0, uses_anonymous_args = 0
 3051              		@ link register save eliminated.
 3052              	.LVL239:
1418:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_2G:
 3053              		.loc 1 1418 0
 3054 0000 114B     		ldr	r3, .L314
 3055 0002 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 3056 0004 032B     		cmp	r3, #3
 3057 0006 1AD8     		bhi	.L312
 3058 0008 DFE803F0 		tbb	[pc, r3]
 3059              	.L307:
 3060 000c 02       		.byte	(.L306-.L307)/2
 3061 000d 0D       		.byte	(.L308-.L307)/2
 3062 000e 11       		.byte	(.L309-.L307)/2
 3063 000f 15       		.byte	(.L310-.L307)/2
 3064              		.p2align 1
 3065              	.L306:
1420:Modules/mpu6050/inv_mpu.c **** 			break;
 3066              		.loc 1 1420 0
 3067 0010 4FF48043 		mov	r3, #16384
 3068 0014 0380     		strh	r3, [r0]	@ movhi
 3069              	.L311:
1434:Modules/mpu6050/inv_mpu.c **** 		sens[0] >>= 1;
 3070              		.loc 1 1434 0
 3071 0016 0C4B     		ldr	r3, .L314
 3072 0018 DB7C     		ldrb	r3, [r3, #19]	@ zero_extendqisi2
 3073 001a 9BB1     		cbz	r3, .L313
1435:Modules/mpu6050/inv_mpu.c **** 	return 0;
 3074              		.loc 1 1435 0
 3075 001c 0388     		ldrh	r3, [r0]
 3076 001e 5B08     		lsrs	r3, r3, #1
 3077 0020 0380     		strh	r3, [r0]	@ movhi
1436:Modules/mpu6050/inv_mpu.c **** }
 3078              		.loc 1 1436 0
 3079 0022 0020     		movs	r0, #0
 3080              	.LVL240:
 3081 0024 7047     		bx	lr
 3082              	.LVL241:
 3083              	.L308:
1423:Modules/mpu6050/inv_mpu.c **** 			break;
 3084              		.loc 1 1423 0
 3085 0026 41F69C73 		movw	r3, #8092
 3086 002a 0380     		strh	r3, [r0]	@ movhi
1424:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_8G:
 3087              		.loc 1 1424 0
 3088 002c F3E7     		b	.L311
 3089              	.L309:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 97


1426:Modules/mpu6050/inv_mpu.c **** 			break;
 3090              		.loc 1 1426 0
 3091 002e 4FF48053 		mov	r3, #4096
 3092 0032 0380     		strh	r3, [r0]	@ movhi
1427:Modules/mpu6050/inv_mpu.c **** 		case INV_FSR_16G:
 3093              		.loc 1 1427 0
 3094 0034 EFE7     		b	.L311
 3095              	.L310:
1429:Modules/mpu6050/inv_mpu.c **** 			break;
 3096              		.loc 1 1429 0
 3097 0036 4FF40063 		mov	r3, #2048
 3098 003a 0380     		strh	r3, [r0]	@ movhi
1430:Modules/mpu6050/inv_mpu.c **** 		default:
 3099              		.loc 1 1430 0
 3100 003c EBE7     		b	.L311
 3101              	.L312:
1432:Modules/mpu6050/inv_mpu.c **** 	}
 3102              		.loc 1 1432 0
 3103 003e 4FF0FF30 		mov	r0, #-1
 3104              	.LVL242:
 3105 0042 7047     		bx	lr
 3106              	.LVL243:
 3107              	.L313:
1436:Modules/mpu6050/inv_mpu.c **** }
 3108              		.loc 1 1436 0
 3109 0044 0020     		movs	r0, #0
 3110              	.LVL244:
1437:Modules/mpu6050/inv_mpu.c **** 
 3111              		.loc 1 1437 0
 3112 0046 7047     		bx	lr
 3113              	.L315:
 3114              		.align	2
 3115              	.L314:
 3116 0048 00000000 		.word	.LANCHOR0
 3117              		.cfi_endproc
 3118              	.LFE87:
 3120              		.section	.text.mpu_get_fifo_config,"ax",%progbits
 3121              		.align	1
 3122              		.global	mpu_get_fifo_config
 3123              		.syntax unified
 3124              		.thumb
 3125              		.thumb_func
 3126              		.fpu softvfp
 3128              	mpu_get_fifo_config:
 3129              	.LFB88:
1449:Modules/mpu6050/inv_mpu.c **** 	sensors[0] = st.chip_cfg.fifo_enable;
 3130              		.loc 1 1449 0
 3131              		.cfi_startproc
 3132              		@ args = 0, pretend = 0, frame = 0
 3133              		@ frame_needed = 0, uses_anonymous_args = 0
 3134              		@ link register save eliminated.
 3135              	.LVL245:
1450:Modules/mpu6050/inv_mpu.c **** 	return 0;
 3136              		.loc 1 1450 0
 3137 0000 024B     		ldr	r3, .L317
 3138 0002 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 3139 0004 0370     		strb	r3, [r0]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 98


1452:Modules/mpu6050/inv_mpu.c **** 
 3140              		.loc 1 1452 0
 3141 0006 0020     		movs	r0, #0
 3142              	.LVL246:
 3143 0008 7047     		bx	lr
 3144              	.L318:
 3145 000a 00BF     		.align	2
 3146              	.L317:
 3147 000c 00000000 		.word	.LANCHOR0
 3148              		.cfi_endproc
 3149              	.LFE88:
 3151              		.section	.text.mpu_configure_fifo,"ax",%progbits
 3152              		.align	1
 3153              		.global	mpu_configure_fifo
 3154              		.syntax unified
 3155              		.thumb
 3156              		.thumb_func
 3157              		.fpu softvfp
 3159              	mpu_configure_fifo:
 3160              	.LFB89:
1464:Modules/mpu6050/inv_mpu.c **** 	unsigned char prev;
 3161              		.loc 1 1464 0
 3162              		.cfi_startproc
 3163              		@ args = 0, pretend = 0, frame = 0
 3164              		@ frame_needed = 0, uses_anonymous_args = 0
 3165              	.LVL247:
 3166 0000 70B5     		push	{r4, r5, r6, lr}
 3167              	.LCFI69:
 3168              		.cfi_def_cfa_offset 16
 3169              		.cfi_offset 4, -16
 3170              		.cfi_offset 5, -12
 3171              		.cfi_offset 6, -8
 3172              		.cfi_offset 14, -4
 3173              	.LVL248:
1471:Modules/mpu6050/inv_mpu.c **** 		return 0;
 3174              		.loc 1 1471 0
 3175 0002 164B     		ldr	r3, .L329
 3176 0004 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 3177 0008 13BB     		cbnz	r3, .L325
 3178 000a 00F0FE04 		and	r4, r0, #254
1474:Modules/mpu6050/inv_mpu.c **** 			return -1;
 3179              		.loc 1 1474 0
 3180 000e 134B     		ldr	r3, .L329
 3181 0010 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 3182 0012 03B3     		cbz	r3, .L326
1476:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.fifo_enable = sensors & st.chip_cfg.sensors;
 3183              		.loc 1 1476 0
 3184 0014 114A     		ldr	r2, .L329
 3185 0016 167C     		ldrb	r6, [r2, #16]	@ zero_extendqisi2
 3186              	.LVL249:
1477:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.fifo_enable != sensors)
 3187              		.loc 1 1477 0
 3188 0018 2340     		ands	r3, r3, r4
 3189 001a 1374     		strb	r3, [r2, #16]
1478:Modules/mpu6050/inv_mpu.c **** 			/* You're not getting what you asked for. Some sensors are
 3190              		.loc 1 1478 0
 3191 001c A342     		cmp	r3, r4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 99


 3192 001e 11D0     		beq	.L327
1482:Modules/mpu6050/inv_mpu.c **** 		else
 3193              		.loc 1 1482 0
 3194 0020 4FF0FF35 		mov	r5, #-1
 3195              	.L321:
 3196              	.LVL250:
1485:Modules/mpu6050/inv_mpu.c **** 			set_int_enable(1);
 3197              		.loc 1 1485 0
 3198 0024 14B9     		cbnz	r4, .L322
1485:Modules/mpu6050/inv_mpu.c **** 			set_int_enable(1);
 3199              		.loc 1 1485 0 is_stmt 0 discriminator 1
 3200 0026 0D4B     		ldr	r3, .L329
 3201 0028 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 3202 002a 6BB1     		cbz	r3, .L323
 3203              	.L322:
1486:Modules/mpu6050/inv_mpu.c **** 		else
 3204              		.loc 1 1486 0 is_stmt 1
 3205 002c 0120     		movs	r0, #1
 3206              	.LVL251:
 3207 002e FFF7FEFF 		bl	set_int_enable
 3208              	.LVL252:
 3209              	.L324:
1489:Modules/mpu6050/inv_mpu.c **** 			if (mpu_reset_fifo()) {
 3210              		.loc 1 1489 0
 3211 0032 74B1     		cbz	r4, .L319
1490:Modules/mpu6050/inv_mpu.c **** 				st.chip_cfg.fifo_enable = prev;
 3212              		.loc 1 1490 0
 3213 0034 FFF7FEFF 		bl	mpu_reset_fifo
 3214              	.LVL253:
 3215 0038 58B1     		cbz	r0, .L319
1491:Modules/mpu6050/inv_mpu.c **** 				return -1;
 3216              		.loc 1 1491 0
 3217 003a 084B     		ldr	r3, .L329
 3218 003c 1E74     		strb	r6, [r3, #16]
1492:Modules/mpu6050/inv_mpu.c **** 			}
 3219              		.loc 1 1492 0
 3220 003e 4FF0FF35 		mov	r5, #-1
 3221              	.LVL254:
 3222 0042 06E0     		b	.L319
 3223              	.LVL255:
 3224              	.L327:
1484:Modules/mpu6050/inv_mpu.c **** 		if (sensors || st.chip_cfg.lp_accel_mode)
 3225              		.loc 1 1484 0
 3226 0044 0025     		movs	r5, #0
 3227 0046 EDE7     		b	.L321
 3228              	.LVL256:
 3229              	.L323:
1488:Modules/mpu6050/inv_mpu.c **** 		if (sensors) {
 3230              		.loc 1 1488 0
 3231 0048 0020     		movs	r0, #0
 3232              	.LVL257:
 3233 004a FFF7FEFF 		bl	set_int_enable
 3234              	.LVL258:
 3235 004e F0E7     		b	.L324
 3236              	.LVL259:
 3237              	.L325:
1472:Modules/mpu6050/inv_mpu.c **** 	else {
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 100


 3238              		.loc 1 1472 0
 3239 0050 0025     		movs	r5, #0
 3240              	.LVL260:
 3241              	.L319:
1498:Modules/mpu6050/inv_mpu.c **** 
 3242              		.loc 1 1498 0
 3243 0052 2846     		mov	r0, r5
 3244 0054 70BD     		pop	{r4, r5, r6, pc}
 3245              	.LVL261:
 3246              	.L326:
1475:Modules/mpu6050/inv_mpu.c **** 		prev = st.chip_cfg.fifo_enable;
 3247              		.loc 1 1475 0
 3248 0056 4FF0FF35 		mov	r5, #-1
 3249 005a FAE7     		b	.L319
 3250              	.L330:
 3251              		.align	2
 3252              	.L329:
 3253 005c 00000000 		.word	.LANCHOR0
 3254              		.cfi_endproc
 3255              	.LFE89:
 3257              		.section	.text.mpu_get_power_state,"ax",%progbits
 3258              		.align	1
 3259              		.global	mpu_get_power_state
 3260              		.syntax unified
 3261              		.thumb
 3262              		.thumb_func
 3263              		.fpu softvfp
 3265              	mpu_get_power_state:
 3266              	.LFB90:
1506:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.sensors)
 3267              		.loc 1 1506 0
 3268              		.cfi_startproc
 3269              		@ args = 0, pretend = 0, frame = 0
 3270              		@ frame_needed = 0, uses_anonymous_args = 0
 3271              		@ link register save eliminated.
 3272              	.LVL262:
1507:Modules/mpu6050/inv_mpu.c **** 		power_on[0] = 1;
 3273              		.loc 1 1507 0
 3274 0000 044B     		ldr	r3, .L335
 3275 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 3276 0004 1BB9     		cbnz	r3, .L334
1510:Modules/mpu6050/inv_mpu.c **** 	return 0;
 3277              		.loc 1 1510 0
 3278 0006 0023     		movs	r3, #0
 3279 0008 0370     		strb	r3, [r0]
 3280              	.L333:
1512:Modules/mpu6050/inv_mpu.c **** 
 3281              		.loc 1 1512 0
 3282 000a 0020     		movs	r0, #0
 3283              	.LVL263:
 3284 000c 7047     		bx	lr
 3285              	.LVL264:
 3286              	.L334:
1508:Modules/mpu6050/inv_mpu.c **** 	else
 3287              		.loc 1 1508 0
 3288 000e 0123     		movs	r3, #1
 3289 0010 0370     		strb	r3, [r0]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 101


 3290 0012 FAE7     		b	.L333
 3291              	.L336:
 3292              		.align	2
 3293              	.L335:
 3294 0014 00000000 		.word	.LANCHOR0
 3295              		.cfi_endproc
 3296              	.LFE90:
 3298              		.section	.text.mpu_get_int_status,"ax",%progbits
 3299              		.align	1
 3300              		.global	mpu_get_int_status
 3301              		.syntax unified
 3302              		.thumb
 3303              		.thumb_func
 3304              		.fpu softvfp
 3306              	mpu_get_int_status:
 3307              	.LFB92:
1602:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
 3308              		.loc 1 1602 0
 3309              		.cfi_startproc
 3310              		@ args = 0, pretend = 0, frame = 8
 3311              		@ frame_needed = 0, uses_anonymous_args = 0
 3312              	.LVL265:
1604:Modules/mpu6050/inv_mpu.c **** 		return -1;
 3313              		.loc 1 1604 0
 3314 0000 0F4B     		ldr	r3, .L345
 3315 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 3316 0004 ABB1     		cbz	r3, .L339
1602:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
 3317              		.loc 1 1602 0
 3318 0006 10B5     		push	{r4, lr}
 3319              	.LCFI70:
 3320              		.cfi_def_cfa_offset 8
 3321              		.cfi_offset 4, -8
 3322              		.cfi_offset 14, -4
 3323 0008 82B0     		sub	sp, sp, #8
 3324              	.LCFI71:
 3325              		.cfi_def_cfa_offset 16
 3326 000a 0446     		mov	r4, r0
1606:Modules/mpu6050/inv_mpu.c **** 		return -1;
 3327              		.loc 1 1606 0
 3328 000c 0C4B     		ldr	r3, .L345
 3329 000e 5868     		ldr	r0, [r3, #4]
 3330              	.LVL266:
 3331 0010 1968     		ldr	r1, [r3]
 3332 0012 01AB     		add	r3, sp, #4
 3333 0014 0222     		movs	r2, #2
 3334 0016 097C     		ldrb	r1, [r1, #16]	@ zero_extendqisi2
 3335 0018 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3336 001a FFF7FEFF 		bl	mod_Mpu_Read
 3337              	.LVL267:
 3338 001e 58B9     		cbnz	r0, .L340
1608:Modules/mpu6050/inv_mpu.c **** 	return 0;
 3339              		.loc 1 1608 0
 3340 0020 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 3341 0024 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 3342 0028 43EA0223 		orr	r3, r3, r2, lsl #8
 3343 002c 2380     		strh	r3, [r4]	@ movhi
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 102


 3344              	.L337:
1610:Modules/mpu6050/inv_mpu.c **** 
 3345              		.loc 1 1610 0
 3346 002e 02B0     		add	sp, sp, #8
 3347              	.LCFI72:
 3348              		.cfi_def_cfa_offset 8
 3349              		@ sp needed
 3350 0030 10BD     		pop	{r4, pc}
 3351              	.LVL268:
 3352              	.L339:
 3353              	.LCFI73:
 3354              		.cfi_def_cfa_offset 0
 3355              		.cfi_restore 4
 3356              		.cfi_restore 14
1605:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->dmp_int_status, 2, tmp))
 3357              		.loc 1 1605 0
 3358 0032 4FF0FF30 		mov	r0, #-1
 3359              	.LVL269:
1610:Modules/mpu6050/inv_mpu.c **** 
 3360              		.loc 1 1610 0
 3361 0036 7047     		bx	lr
 3362              	.LVL270:
 3363              	.L340:
 3364              	.LCFI74:
 3365              		.cfi_def_cfa_offset 16
 3366              		.cfi_offset 4, -8
 3367              		.cfi_offset 14, -4
1607:Modules/mpu6050/inv_mpu.c **** 	status[0] = (tmp[0] << 8) | tmp[1];
 3368              		.loc 1 1607 0
 3369 0038 4FF0FF30 		mov	r0, #-1
 3370 003c F7E7     		b	.L337
 3371              	.L346:
 3372 003e 00BF     		.align	2
 3373              	.L345:
 3374 0040 00000000 		.word	.LANCHOR0
 3375              		.cfi_endproc
 3376              	.LFE92:
 3378              		.section	.text.mpu_read_fifo,"ax",%progbits
 3379              		.align	1
 3380              		.global	mpu_read_fifo
 3381              		.syntax unified
 3382              		.thumb
 3383              		.thumb_func
 3384              		.fpu softvfp
 3386              	mpu_read_fifo:
 3387              	.LFB93:
1632:Modules/mpu6050/inv_mpu.c **** 	/* Assumes maximum packet size is gyro (6) + accel (6). */
 3388              		.loc 1 1632 0
 3389              		.cfi_startproc
 3390              		@ args = 4, pretend = 0, frame = 16
 3391              		@ frame_needed = 0, uses_anonymous_args = 0
 3392              	.LVL271:
1638:Modules/mpu6050/inv_mpu.c **** 		return -1;
 3393              		.loc 1 1638 0
 3394 0000 7D4A     		ldr	r2, .L374
 3395              	.LVL272:
 3396 0002 92F82420 		ldrb	r2, [r2, #36]	@ zero_extendqisi2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 103


 3397 0006 002A     		cmp	r2, #0
 3398 0008 40F0DB80 		bne	.L357
1641:Modules/mpu6050/inv_mpu.c **** 	if (!st.chip_cfg.sensors)
 3399              		.loc 1 1641 0
 3400 000c 1A70     		strb	r2, [r3]
1642:Modules/mpu6050/inv_mpu.c **** 		return -1;
 3401              		.loc 1 1642 0
 3402 000e 7A4A     		ldr	r2, .L374
 3403 0010 927A     		ldrb	r2, [r2, #10]	@ zero_extendqisi2
 3404 0012 002A     		cmp	r2, #0
 3405 0014 00F0D880 		beq	.L358
1644:Modules/mpu6050/inv_mpu.c **** 		return -1;
 3406              		.loc 1 1644 0
 3407 0018 774A     		ldr	r2, .L374
 3408 001a 127C     		ldrb	r2, [r2, #16]	@ zero_extendqisi2
 3409 001c 002A     		cmp	r2, #0
 3410 001e 00F0D680 		beq	.L359
1632:Modules/mpu6050/inv_mpu.c **** 	/* Assumes maximum packet size is gyro (6) + accel (6). */
 3411              		.loc 1 1632 0
 3412 0022 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3413              	.LCFI75:
 3414              		.cfi_def_cfa_offset 28
 3415              		.cfi_offset 4, -28
 3416              		.cfi_offset 5, -24
 3417              		.cfi_offset 6, -20
 3418              		.cfi_offset 7, -16
 3419              		.cfi_offset 8, -12
 3420              		.cfi_offset 9, -8
 3421              		.cfi_offset 14, -4
 3422 0026 85B0     		sub	sp, sp, #20
 3423              	.LCFI76:
 3424              		.cfi_def_cfa_offset 48
1647:Modules/mpu6050/inv_mpu.c **** 		packet_size += 2;
 3425              		.loc 1 1647 0
 3426 0028 12F04004 		ands	r4, r2, #64
 3427 002c 00D0     		beq	.L349
1648:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.fifo_enable & INV_Y_GYRO)
 3428              		.loc 1 1648 0
 3429 002e 0224     		movs	r4, #2
 3430              	.L349:
 3431              	.LVL273:
1649:Modules/mpu6050/inv_mpu.c **** 		packet_size += 2;
 3432              		.loc 1 1649 0
 3433 0030 12F0200F 		tst	r2, #32
 3434 0034 01D0     		beq	.L350
1650:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.fifo_enable & INV_Z_GYRO)
 3435              		.loc 1 1650 0
 3436 0036 0234     		adds	r4, r4, #2
 3437              	.LVL274:
 3438 0038 E4B2     		uxtb	r4, r4
 3439              	.LVL275:
 3440              	.L350:
1651:Modules/mpu6050/inv_mpu.c **** 		packet_size += 2;
 3441              		.loc 1 1651 0
 3442 003a 12F0100F 		tst	r2, #16
 3443 003e 01D0     		beq	.L351
1652:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.fifo_enable & INV_XYZ_ACCEL)
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 104


 3444              		.loc 1 1652 0
 3445 0040 0234     		adds	r4, r4, #2
 3446              	.LVL276:
 3447 0042 E4B2     		uxtb	r4, r4
 3448              	.LVL277:
 3449              	.L351:
1653:Modules/mpu6050/inv_mpu.c **** 		packet_size += 6;
 3450              		.loc 1 1653 0
 3451 0044 12F0080F 		tst	r2, #8
 3452 0048 01D0     		beq	.L352
1654:Modules/mpu6050/inv_mpu.c **** 
 3453              		.loc 1 1654 0
 3454 004a 0634     		adds	r4, r4, #6
 3455              	.LVL278:
 3456 004c E4B2     		uxtb	r4, r4
 3457              	.LVL279:
 3458              	.L352:
 3459 004e 1E46     		mov	r6, r3
 3460 0050 8946     		mov	r9, r1
 3461 0052 0746     		mov	r7, r0
1656:Modules/mpu6050/inv_mpu.c **** 		return -1;
 3462              		.loc 1 1656 0
 3463 0054 684B     		ldr	r3, .L374
 3464              	.LVL280:
 3465 0056 5868     		ldr	r0, [r3, #4]
 3466              	.LVL281:
 3467 0058 1968     		ldr	r1, [r3]
 3468              	.LVL282:
 3469 005a 01AB     		add	r3, sp, #4
 3470 005c 0222     		movs	r2, #2
 3471 005e 897A     		ldrb	r1, [r1, #10]	@ zero_extendqisi2
 3472 0060 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3473 0062 FFF7FEFF 		bl	mod_Mpu_Read
 3474              	.LVL283:
 3475 0066 0028     		cmp	r0, #0
 3476 0068 40F0B480 		bne	.L361
1658:Modules/mpu6050/inv_mpu.c **** 	if (fifo_count < packet_size)
 3477              		.loc 1 1658 0
 3478 006c 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 3479 0070 9DF80550 		ldrb	r5, [sp, #5]	@ zero_extendqisi2
 3480 0074 45EA0325 		orr	r5, r5, r3, lsl #8
 3481              	.LVL284:
1659:Modules/mpu6050/inv_mpu.c **** 		return 0;
 3482              		.loc 1 1659 0
 3483 0078 1FFA84F8 		uxth	r8, r4
 3484 007c A845     		cmp	r8, r5
 3485 007e 00F2AC80 		bhi	.L362
1662:Modules/mpu6050/inv_mpu.c **** 		/* FIFO is 50% full, better check overflow bit. */
 3486              		.loc 1 1662 0
 3487 0082 5D4B     		ldr	r3, .L374
 3488 0084 5868     		ldr	r0, [r3, #4]
 3489 0086 4388     		ldrh	r3, [r0, #2]
 3490 0088 B5EB530F 		cmp	r5, r3, lsr #1
 3491 008c 0FD9     		bls	.L353
1664:Modules/mpu6050/inv_mpu.c **** 			return -1;
 3492              		.loc 1 1664 0
 3493 008e 5A4B     		ldr	r3, .L374
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 105


 3494 0090 1968     		ldr	r1, [r3]
 3495 0092 01AB     		add	r3, sp, #4
 3496 0094 0122     		movs	r2, #1
 3497 0096 497C     		ldrb	r1, [r1, #17]	@ zero_extendqisi2
 3498 0098 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3499 009a FFF7FEFF 		bl	mod_Mpu_Read
 3500              	.LVL285:
 3501 009e 0028     		cmp	r0, #0
 3502 00a0 40F09F80 		bne	.L363
1666:Modules/mpu6050/inv_mpu.c **** 			mpu_reset_fifo();
 3503              		.loc 1 1666 0
 3504 00a4 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 3505 00a8 13F0100F 		tst	r3, #16
 3506 00ac 36D1     		bne	.L373
 3507              	.L353:
1673:Modules/mpu6050/inv_mpu.c **** 		return -1;
 3508              		.loc 1 1673 0
 3509 00ae 524B     		ldr	r3, .L374
 3510 00b0 5868     		ldr	r0, [r3, #4]
 3511 00b2 1968     		ldr	r1, [r3]
 3512 00b4 01AB     		add	r3, sp, #4
 3513 00b6 4246     		mov	r2, r8
 3514 00b8 C97A     		ldrb	r1, [r1, #11]	@ zero_extendqisi2
 3515 00ba 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3516 00bc FFF7FEFF 		bl	mod_Mpu_Read
 3517              	.LVL286:
 3518 00c0 0028     		cmp	r0, #0
 3519 00c2 40F09180 		bne	.L364
1675:Modules/mpu6050/inv_mpu.c **** 	sensors[0] = 0;
 3520              		.loc 1 1675 0
 3521 00c6 95FBF4F5 		sdiv	r5, r5, r4
 3522              	.LVL287:
 3523 00ca 013D     		subs	r5, r5, #1
 3524 00cc 0C9B     		ldr	r3, [sp, #48]
 3525 00ce 1D70     		strb	r5, [r3]
1676:Modules/mpu6050/inv_mpu.c **** 
 3526              		.loc 1 1676 0
 3527 00d0 0023     		movs	r3, #0
 3528 00d2 3370     		strb	r3, [r6]
1678:Modules/mpu6050/inv_mpu.c **** 		accel[0] = (data[index+0] << 8) | data[index+1];
 3529              		.loc 1 1678 0
 3530 00d4 3CB3     		cbz	r4, .L365
1678:Modules/mpu6050/inv_mpu.c **** 		accel[0] = (data[index+0] << 8) | data[index+1];
 3531              		.loc 1 1678 0 is_stmt 0 discriminator 1
 3532 00d6 484B     		ldr	r3, .L374
 3533 00d8 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 3534 00da 13F0080F 		tst	r3, #8
 3535 00de 6ED0     		beq	.L366
1679:Modules/mpu6050/inv_mpu.c **** 		accel[1] = (data[index+2] << 8) | data[index+3];
 3536              		.loc 1 1679 0 is_stmt 1
 3537 00e0 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 3538 00e4 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 3539 00e8 43EA0223 		orr	r3, r3, r2, lsl #8
 3540 00ec A9F80030 		strh	r3, [r9]	@ movhi
1680:Modules/mpu6050/inv_mpu.c **** 		accel[2] = (data[index+4] << 8) | data[index+5];
 3541              		.loc 1 1680 0
 3542 00f0 9DF80620 		ldrb	r2, [sp, #6]	@ zero_extendqisi2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 106


 3543 00f4 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 3544 00f8 43EA0223 		orr	r3, r3, r2, lsl #8
 3545 00fc A9F80230 		strh	r3, [r9, #2]	@ movhi
1681:Modules/mpu6050/inv_mpu.c **** 		sensors[0] |= INV_XYZ_ACCEL;
 3546              		.loc 1 1681 0
 3547 0100 9DF80820 		ldrb	r2, [sp, #8]	@ zero_extendqisi2
 3548 0104 9DF80930 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 3549 0108 43EA0223 		orr	r3, r3, r2, lsl #8
 3550 010c A9F80430 		strh	r3, [r9, #4]	@ movhi
1682:Modules/mpu6050/inv_mpu.c **** 		index += 6;
 3551              		.loc 1 1682 0
 3552 0110 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 3553 0112 43F00803 		orr	r3, r3, #8
 3554 0116 3370     		strb	r3, [r6]
 3555              	.LVL288:
1683:Modules/mpu6050/inv_mpu.c **** 	}
 3556              		.loc 1 1683 0
 3557 0118 0622     		movs	r2, #6
 3558 011a 05E0     		b	.L354
 3559              	.LVL289:
 3560              	.L373:
1667:Modules/mpu6050/inv_mpu.c **** 			return -2;
 3561              		.loc 1 1667 0
 3562 011c FFF7FEFF 		bl	mpu_reset_fifo
 3563              	.LVL290:
1668:Modules/mpu6050/inv_mpu.c **** 		}
 3564              		.loc 1 1668 0
 3565 0120 6FF00100 		mvn	r0, #1
 3566 0124 5AE0     		b	.L347
 3567              	.LVL291:
 3568              	.L365:
1636:Modules/mpu6050/inv_mpu.c **** 
 3569              		.loc 1 1636 0
 3570 0126 0022     		movs	r2, #0
 3571              	.LVL292:
 3572              	.L354:
1685:Modules/mpu6050/inv_mpu.c **** 		gyro[0] = (data[index+0] << 8) | data[index+1];
 3573              		.loc 1 1685 0
 3574 0128 9045     		cmp	r8, r2
 3575 012a 16D0     		beq	.L355
1685:Modules/mpu6050/inv_mpu.c **** 		gyro[0] = (data[index+0] << 8) | data[index+1];
 3576              		.loc 1 1685 0 is_stmt 0 discriminator 1
 3577 012c 324B     		ldr	r3, .L374
 3578 012e 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 3579 0130 13F0400F 		tst	r3, #64
 3580 0134 11D0     		beq	.L355
1686:Modules/mpu6050/inv_mpu.c **** 		sensors[0] |= INV_X_GYRO;
 3581              		.loc 1 1686 0 is_stmt 1
 3582 0136 04AB     		add	r3, sp, #16
 3583 0138 1344     		add	r3, r3, r2
 3584 013a 13F80C0C 		ldrb	r0, [r3, #-12]	@ zero_extendqisi2
 3585 013e 511C     		adds	r1, r2, #1
 3586 0140 04AB     		add	r3, sp, #16
 3587 0142 1944     		add	r1, r1, r3
 3588 0144 11F80C3C 		ldrb	r3, [r1, #-12]	@ zero_extendqisi2
 3589 0148 43EA0023 		orr	r3, r3, r0, lsl #8
 3590 014c 3B80     		strh	r3, [r7]	@ movhi
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 107


1687:Modules/mpu6050/inv_mpu.c **** 		index += 2;
 3591              		.loc 1 1687 0
 3592 014e 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 3593 0150 43F04003 		orr	r3, r3, #64
 3594 0154 3370     		strb	r3, [r6]
1688:Modules/mpu6050/inv_mpu.c **** 	}
 3595              		.loc 1 1688 0
 3596 0156 0232     		adds	r2, r2, #2
 3597              	.LVL293:
 3598 0158 92B2     		uxth	r2, r2
 3599              	.LVL294:
 3600              	.L355:
1690:Modules/mpu6050/inv_mpu.c **** 		gyro[1] = (data[index+0] << 8) | data[index+1];
 3601              		.loc 1 1690 0
 3602 015a 9045     		cmp	r8, r2
 3603 015c 16D0     		beq	.L356
1690:Modules/mpu6050/inv_mpu.c **** 		gyro[1] = (data[index+0] << 8) | data[index+1];
 3604              		.loc 1 1690 0 is_stmt 0 discriminator 1
 3605 015e 264B     		ldr	r3, .L374
 3606 0160 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 3607 0162 13F0200F 		tst	r3, #32
 3608 0166 11D0     		beq	.L356
1691:Modules/mpu6050/inv_mpu.c **** 		sensors[0] |= INV_Y_GYRO;
 3609              		.loc 1 1691 0 is_stmt 1
 3610 0168 04AB     		add	r3, sp, #16
 3611 016a 1344     		add	r3, r3, r2
 3612 016c 13F80C0C 		ldrb	r0, [r3, #-12]	@ zero_extendqisi2
 3613 0170 511C     		adds	r1, r2, #1
 3614 0172 04AB     		add	r3, sp, #16
 3615 0174 1944     		add	r1, r1, r3
 3616 0176 11F80C3C 		ldrb	r3, [r1, #-12]	@ zero_extendqisi2
 3617 017a 43EA0023 		orr	r3, r3, r0, lsl #8
 3618 017e 7B80     		strh	r3, [r7, #2]	@ movhi
1692:Modules/mpu6050/inv_mpu.c **** 		index += 2;
 3619              		.loc 1 1692 0
 3620 0180 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 3621 0182 43F02003 		orr	r3, r3, #32
 3622 0186 3370     		strb	r3, [r6]
1693:Modules/mpu6050/inv_mpu.c **** 	}
 3623              		.loc 1 1693 0
 3624 0188 0232     		adds	r2, r2, #2
 3625              	.LVL295:
 3626 018a 92B2     		uxth	r2, r2
 3627              	.LVL296:
 3628              	.L356:
1695:Modules/mpu6050/inv_mpu.c **** 		gyro[2] = (data[index+0] << 8) | data[index+1];
 3629              		.loc 1 1695 0
 3630 018c 9045     		cmp	r8, r2
 3631 018e 2ED0     		beq	.L367
1695:Modules/mpu6050/inv_mpu.c **** 		gyro[2] = (data[index+0] << 8) | data[index+1];
 3632              		.loc 1 1695 0 is_stmt 0 discriminator 1
 3633 0190 194B     		ldr	r3, .L374
 3634 0192 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 3635 0194 13F0100F 		tst	r3, #16
 3636 0198 2BD0     		beq	.L368
1696:Modules/mpu6050/inv_mpu.c **** 		sensors[0] |= INV_Z_GYRO;
 3637              		.loc 1 1696 0 is_stmt 1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 108


 3638 019a 04AB     		add	r3, sp, #16
 3639 019c 1344     		add	r3, r3, r2
 3640 019e 13F80C1C 		ldrb	r1, [r3, #-12]	@ zero_extendqisi2
 3641 01a2 0132     		adds	r2, r2, #1
 3642 01a4 04AB     		add	r3, sp, #16
 3643 01a6 1A44     		add	r2, r2, r3
 3644 01a8 12F80C3C 		ldrb	r3, [r2, #-12]	@ zero_extendqisi2
 3645 01ac 43EA0123 		orr	r3, r3, r1, lsl #8
 3646 01b0 BB80     		strh	r3, [r7, #4]	@ movhi
1697:Modules/mpu6050/inv_mpu.c **** 		index += 2;
 3647              		.loc 1 1697 0
 3648 01b2 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 3649 01b4 43F01003 		orr	r3, r3, #16
 3650 01b8 3370     		strb	r3, [r6]
1701:Modules/mpu6050/inv_mpu.c **** }
 3651              		.loc 1 1701 0
 3652 01ba 0020     		movs	r0, #0
 3653 01bc 0EE0     		b	.L347
 3654              	.LVL297:
 3655              	.L366:
1636:Modules/mpu6050/inv_mpu.c **** 
 3656              		.loc 1 1636 0
 3657 01be 0022     		movs	r2, #0
 3658 01c0 B2E7     		b	.L354
 3659              	.LVL298:
 3660              	.L357:
 3661              	.LCFI77:
 3662              		.cfi_def_cfa_offset 0
 3663              		.cfi_restore 4
 3664              		.cfi_restore 5
 3665              		.cfi_restore 6
 3666              		.cfi_restore 7
 3667              		.cfi_restore 8
 3668              		.cfi_restore 9
 3669              		.cfi_restore 14
1639:Modules/mpu6050/inv_mpu.c **** 
 3670              		.loc 1 1639 0
 3671 01c2 4FF0FF30 		mov	r0, #-1
 3672              	.LVL299:
 3673 01c6 7047     		bx	lr
 3674              	.LVL300:
 3675              	.L358:
1643:Modules/mpu6050/inv_mpu.c **** 	if (!st.chip_cfg.fifo_enable)
 3676              		.loc 1 1643 0
 3677 01c8 4FF0FF30 		mov	r0, #-1
 3678              	.LVL301:
 3679 01cc 7047     		bx	lr
 3680              	.LVL302:
 3681              	.L359:
1645:Modules/mpu6050/inv_mpu.c **** 
 3682              		.loc 1 1645 0
 3683 01ce 4FF0FF30 		mov	r0, #-1
 3684              	.LVL303:
1702:Modules/mpu6050/inv_mpu.c **** 
 3685              		.loc 1 1702 0
 3686 01d2 7047     		bx	lr
 3687              	.LVL304:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 109


 3688              	.L361:
 3689              	.LCFI78:
 3690              		.cfi_def_cfa_offset 48
 3691              		.cfi_offset 4, -28
 3692              		.cfi_offset 5, -24
 3693              		.cfi_offset 6, -20
 3694              		.cfi_offset 7, -16
 3695              		.cfi_offset 8, -12
 3696              		.cfi_offset 9, -8
 3697              		.cfi_offset 14, -4
1657:Modules/mpu6050/inv_mpu.c **** 	fifo_count = (data[0] << 8) | data[1];
 3698              		.loc 1 1657 0
 3699 01d4 4FF0FF30 		mov	r0, #-1
 3700 01d8 00E0     		b	.L347
 3701              	.LVL305:
 3702              	.L362:
1660:Modules/mpu6050/inv_mpu.c **** //    log_i("FIFO count: %hd\n", fifo_count);
 3703              		.loc 1 1660 0
 3704 01da 0020     		movs	r0, #0
 3705              	.LVL306:
 3706              	.L347:
1702:Modules/mpu6050/inv_mpu.c **** 
 3707              		.loc 1 1702 0
 3708 01dc 05B0     		add	sp, sp, #20
 3709              	.LCFI79:
 3710              		.cfi_remember_state
 3711              		.cfi_def_cfa_offset 28
 3712              		@ sp needed
 3713 01de BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3714              	.LVL307:
 3715              	.L363:
 3716              	.LCFI80:
 3717              		.cfi_restore_state
1665:Modules/mpu6050/inv_mpu.c **** 		if (data[0] & BIT_FIFO_OVERFLOW) {
 3718              		.loc 1 1665 0
 3719 01e2 4FF0FF30 		mov	r0, #-1
 3720 01e6 F9E7     		b	.L347
 3721              	.L364:
1674:Modules/mpu6050/inv_mpu.c **** 	more[0] = fifo_count / packet_size - 1;
 3722              		.loc 1 1674 0
 3723 01e8 4FF0FF30 		mov	r0, #-1
 3724 01ec F6E7     		b	.L347
 3725              	.LVL308:
 3726              	.L367:
1701:Modules/mpu6050/inv_mpu.c **** }
 3727              		.loc 1 1701 0
 3728 01ee 0020     		movs	r0, #0
 3729 01f0 F4E7     		b	.L347
 3730              	.L368:
 3731 01f2 0020     		movs	r0, #0
 3732 01f4 F2E7     		b	.L347
 3733              	.L375:
 3734 01f6 00BF     		.align	2
 3735              	.L374:
 3736 01f8 00000000 		.word	.LANCHOR0
 3737              		.cfi_endproc
 3738              	.LFE93:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 110


 3740              		.section	.text.mpu_read_fifo_stream,"ax",%progbits
 3741              		.align	1
 3742              		.global	mpu_read_fifo_stream
 3743              		.syntax unified
 3744              		.thumb
 3745              		.thumb_func
 3746              		.fpu softvfp
 3748              	mpu_read_fifo_stream:
 3749              	.LFB94:
1713:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
 3750              		.loc 1 1713 0
 3751              		.cfi_startproc
 3752              		@ args = 0, pretend = 0, frame = 8
 3753              		@ frame_needed = 0, uses_anonymous_args = 0
 3754              	.LVL309:
 3755 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 3756              	.LCFI81:
 3757              		.cfi_def_cfa_offset 20
 3758              		.cfi_offset 4, -20
 3759              		.cfi_offset 5, -16
 3760              		.cfi_offset 6, -12
 3761              		.cfi_offset 7, -8
 3762              		.cfi_offset 14, -4
 3763 0002 83B0     		sub	sp, sp, #12
 3764              	.LCFI82:
 3765              		.cfi_def_cfa_offset 32
1716:Modules/mpu6050/inv_mpu.c **** 		return -1;
 3766              		.loc 1 1716 0
 3767 0004 2D4F     		ldr	r7, .L388
 3768 0006 97F82470 		ldrb	r7, [r7, #36]	@ zero_extendqisi2
 3769 000a 002F     		cmp	r7, #0
 3770 000c 47D0     		beq	.L380
1718:Modules/mpu6050/inv_mpu.c **** 		return -1;
 3771              		.loc 1 1718 0
 3772 000e 2B4F     		ldr	r7, .L388
 3773 0010 BF7A     		ldrb	r7, [r7, #10]	@ zero_extendqisi2
 3774 0012 002F     		cmp	r7, #0
 3775 0014 46D0     		beq	.L381
 3776 0016 1646     		mov	r6, r2
 3777 0018 0F46     		mov	r7, r1
 3778 001a 0546     		mov	r5, r0
1721:Modules/mpu6050/inv_mpu.c **** 		return -1;
 3779              		.loc 1 1721 0
 3780 001c 274B     		ldr	r3, .L388
 3781 001e 5868     		ldr	r0, [r3, #4]
 3782              	.LVL310:
 3783 0020 1968     		ldr	r1, [r3]
 3784              	.LVL311:
 3785 0022 01AB     		add	r3, sp, #4
 3786 0024 0222     		movs	r2, #2
 3787              	.LVL312:
 3788 0026 897A     		ldrb	r1, [r1, #10]	@ zero_extendqisi2
 3789 0028 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3790 002a FFF7FEFF 		bl	mod_Mpu_Read
 3791              	.LVL313:
 3792 002e 0028     		cmp	r0, #0
 3793 0030 3BD1     		bne	.L382
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 111


1723:Modules/mpu6050/inv_mpu.c **** 	if (fifo_count < length) {
 3794              		.loc 1 1723 0
 3795 0032 9DF80400 		ldrb	r0, [sp, #4]	@ zero_extendqisi2
 3796 0036 9DF80540 		ldrb	r4, [sp, #5]	@ zero_extendqisi2
 3797 003a 44EA0024 		orr	r4, r4, r0, lsl #8
 3798              	.LVL314:
1724:Modules/mpu6050/inv_mpu.c **** 		more[0] = 0;
 3799              		.loc 1 1724 0
 3800 003e AC42     		cmp	r4, r5
 3801 0040 23D3     		bcc	.L386
1728:Modules/mpu6050/inv_mpu.c **** 		/* FIFO is 50% full, better check overflow bit. */
 3802              		.loc 1 1728 0
 3803 0042 1E4B     		ldr	r3, .L388
 3804 0044 5868     		ldr	r0, [r3, #4]
 3805 0046 4388     		ldrh	r3, [r0, #2]
 3806 0048 B4EB530F 		cmp	r4, r3, lsr #1
 3807 004c 0DD9     		bls	.L379
1730:Modules/mpu6050/inv_mpu.c **** 			return -1;
 3808              		.loc 1 1730 0
 3809 004e 1B4B     		ldr	r3, .L388
 3810 0050 1968     		ldr	r1, [r3]
 3811 0052 01AB     		add	r3, sp, #4
 3812 0054 0122     		movs	r2, #1
 3813 0056 497C     		ldrb	r1, [r1, #17]	@ zero_extendqisi2
 3814 0058 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3815 005a FFF7FEFF 		bl	mod_Mpu_Read
 3816              	.LVL315:
 3817 005e 38BB     		cbnz	r0, .L383
1732:Modules/mpu6050/inv_mpu.c **** 			mpu_reset_fifo();
 3818              		.loc 1 1732 0
 3819 0060 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 3820 0064 13F0100F 		tst	r3, #16
 3821 0068 14D1     		bne	.L387
 3822              	.L379:
1738:Modules/mpu6050/inv_mpu.c **** 		return -1;
 3823              		.loc 1 1738 0
 3824 006a 144B     		ldr	r3, .L388
 3825 006c 5868     		ldr	r0, [r3, #4]
 3826 006e 1968     		ldr	r1, [r3]
 3827 0070 3B46     		mov	r3, r7
 3828 0072 2A46     		mov	r2, r5
 3829 0074 C97A     		ldrb	r1, [r1, #11]	@ zero_extendqisi2
 3830 0076 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3831 0078 FFF7FEFF 		bl	mod_Mpu_Read
 3832              	.LVL316:
 3833 007c D8B9     		cbnz	r0, .L384
1740:Modules/mpu6050/inv_mpu.c **** 	return 0;
 3834              		.loc 1 1740 0
 3835 007e B4FBF5F4 		udiv	r4, r4, r5
 3836              	.LVL317:
 3837 0082 013C     		subs	r4, r4, #1
 3838 0084 3470     		strb	r4, [r6]
 3839              	.LVL318:
 3840              	.L376:
1742:Modules/mpu6050/inv_mpu.c **** 
 3841              		.loc 1 1742 0
 3842 0086 03B0     		add	sp, sp, #12
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 112


 3843              	.LCFI83:
 3844              		.cfi_remember_state
 3845              		.cfi_def_cfa_offset 20
 3846              		@ sp needed
 3847 0088 F0BD     		pop	{r4, r5, r6, r7, pc}
 3848              	.LVL319:
 3849              	.L386:
 3850              	.LCFI84:
 3851              		.cfi_restore_state
1725:Modules/mpu6050/inv_mpu.c **** 		return -1;
 3852              		.loc 1 1725 0
 3853 008a 0023     		movs	r3, #0
 3854 008c 3370     		strb	r3, [r6]
1726:Modules/mpu6050/inv_mpu.c **** 	}
 3855              		.loc 1 1726 0
 3856 008e 4FF0FF30 		mov	r0, #-1
 3857 0092 F8E7     		b	.L376
 3858              	.L387:
1733:Modules/mpu6050/inv_mpu.c **** 			return -2;
 3859              		.loc 1 1733 0
 3860 0094 FFF7FEFF 		bl	mpu_reset_fifo
 3861              	.LVL320:
1734:Modules/mpu6050/inv_mpu.c **** 		}
 3862              		.loc 1 1734 0
 3863 0098 6FF00100 		mvn	r0, #1
 3864 009c F3E7     		b	.L376
 3865              	.LVL321:
 3866              	.L380:
1717:Modules/mpu6050/inv_mpu.c **** 	if (!st.chip_cfg.sensors)
 3867              		.loc 1 1717 0
 3868 009e 4FF0FF30 		mov	r0, #-1
 3869              	.LVL322:
 3870 00a2 F0E7     		b	.L376
 3871              	.LVL323:
 3872              	.L381:
1719:Modules/mpu6050/inv_mpu.c **** 
 3873              		.loc 1 1719 0
 3874 00a4 4FF0FF30 		mov	r0, #-1
 3875              	.LVL324:
 3876 00a8 EDE7     		b	.L376
 3877              	.LVL325:
 3878              	.L382:
1722:Modules/mpu6050/inv_mpu.c **** 	fifo_count = (tmp[0] << 8) | tmp[1];
 3879              		.loc 1 1722 0
 3880 00aa 4FF0FF30 		mov	r0, #-1
 3881 00ae EAE7     		b	.L376
 3882              	.LVL326:
 3883              	.L383:
1731:Modules/mpu6050/inv_mpu.c **** 		if (tmp[0] & BIT_FIFO_OVERFLOW) {
 3884              		.loc 1 1731 0
 3885 00b0 4FF0FF30 		mov	r0, #-1
 3886 00b4 E7E7     		b	.L376
 3887              	.L384:
1739:Modules/mpu6050/inv_mpu.c **** 	more[0] = fifo_count / length - 1;
 3888              		.loc 1 1739 0
 3889 00b6 4FF0FF30 		mov	r0, #-1
 3890 00ba E4E7     		b	.L376
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 113


 3891              	.L389:
 3892              		.align	2
 3893              	.L388:
 3894 00bc 00000000 		.word	.LANCHOR0
 3895              		.cfi_endproc
 3896              	.LFE94:
 3898              		.section	.text.mpu_set_bypass,"ax",%progbits
 3899              		.align	1
 3900              		.global	mpu_set_bypass
 3901              		.syntax unified
 3902              		.thumb
 3903              		.thumb_func
 3904              		.fpu softvfp
 3906              	mpu_set_bypass:
 3907              	.LFB95:
1750:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp;
 3908              		.loc 1 1750 0
 3909              		.cfi_startproc
 3910              		@ args = 0, pretend = 0, frame = 8
 3911              		@ frame_needed = 0, uses_anonymous_args = 0
 3912              	.LVL327:
1753:Modules/mpu6050/inv_mpu.c **** 		return 0;
 3913              		.loc 1 1753 0
 3914 0000 584B     		ldr	r3, .L412
 3915 0002 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
 3916 0004 8342     		cmp	r3, r0
 3917 0006 00F09B80 		beq	.L401
1750:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp;
 3918              		.loc 1 1750 0
 3919 000a 10B5     		push	{r4, lr}
 3920              	.LCFI85:
 3921              		.cfi_def_cfa_offset 8
 3922              		.cfi_offset 4, -8
 3923              		.cfi_offset 14, -4
 3924 000c 82B0     		sub	sp, sp, #8
 3925              	.LCFI86:
 3926              		.cfi_def_cfa_offset 16
 3927 000e 0446     		mov	r4, r0
1756:Modules/mpu6050/inv_mpu.c **** 		if (i2c_read(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
 3928              		.loc 1 1756 0
 3929 0010 0028     		cmp	r0, #0
 3930 0012 43D0     		beq	.L392
1757:Modules/mpu6050/inv_mpu.c **** 			return -1;
 3931              		.loc 1 1757 0
 3932 0014 534B     		ldr	r3, .L412
 3933 0016 5868     		ldr	r0, [r3, #4]
 3934              	.LVL328:
 3935 0018 1968     		ldr	r1, [r3]
 3936 001a 0DF10703 		add	r3, sp, #7
 3937 001e 0122     		movs	r2, #1
 3938 0020 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 3939 0022 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3940 0024 FFF7FEFF 		bl	mod_Mpu_Read
 3941              	.LVL329:
 3942 0028 0028     		cmp	r0, #0
 3943 002a 40F08B80 		bne	.L402
1759:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 114


 3944              		.loc 1 1759 0
 3945 002e 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 3946 0032 22F02002 		bic	r2, r2, #32
 3947 0036 02AB     		add	r3, sp, #8
 3948 0038 03F8012D 		strb	r2, [r3, #-1]!
1760:Modules/mpu6050/inv_mpu.c **** 			return -1;
 3949              		.loc 1 1760 0
 3950 003c 494A     		ldr	r2, .L412
 3951 003e 5068     		ldr	r0, [r2, #4]
 3952 0040 1168     		ldr	r1, [r2]
 3953 0042 0122     		movs	r2, #1
 3954 0044 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 3955 0046 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3956 0048 FFF7FEFF 		bl	mod_Mpu_Write
 3957              	.LVL330:
 3958 004c 0028     		cmp	r0, #0
 3959 004e 7CD1     		bne	.L403
1762:Modules/mpu6050/inv_mpu.c **** 		tmp = BIT_BYPASS_EN;
 3960              		.loc 1 1762 0
 3961 0050 0320     		movs	r0, #3
 3962 0052 FFF7FEFF 		bl	delay_ms
 3963              	.LVL331:
1763:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.active_low_int)
 3964              		.loc 1 1763 0
 3965 0056 0223     		movs	r3, #2
 3966 0058 8DF80730 		strb	r3, [sp, #7]
1764:Modules/mpu6050/inv_mpu.c **** 			tmp |= BIT_ACTL;
 3967              		.loc 1 1764 0
 3968 005c 414B     		ldr	r3, .L412
 3969 005e 93F82230 		ldrb	r3, [r3, #34]	@ zero_extendqisi2
 3970 0062 13B1     		cbz	r3, .L393
1765:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.latched_int)
 3971              		.loc 1 1765 0
 3972 0064 8223     		movs	r3, #130
 3973 0066 8DF80730 		strb	r3, [sp, #7]
 3974              	.L393:
1766:Modules/mpu6050/inv_mpu.c **** 			tmp |= BIT_LATCH_EN | BIT_ANY_RD_CLR;
 3975              		.loc 1 1766 0
 3976 006a 3E4B     		ldr	r3, .L412
 3977 006c 93F82330 		ldrb	r3, [r3, #35]	@ zero_extendqisi2
 3978 0070 2BB1     		cbz	r3, .L394
1767:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
 3979              		.loc 1 1767 0
 3980 0072 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 3981 0076 43F03003 		orr	r3, r3, #48
 3982 007a 8DF80730 		strb	r3, [sp, #7]
 3983              	.L394:
1768:Modules/mpu6050/inv_mpu.c **** 			return -1;
 3984              		.loc 1 1768 0
 3985 007e 394B     		ldr	r3, .L412
 3986 0080 5868     		ldr	r0, [r3, #4]
 3987 0082 1968     		ldr	r1, [r3]
 3988 0084 0DF10703 		add	r3, sp, #7
 3989 0088 0122     		movs	r2, #1
 3990 008a 097D     		ldrb	r1, [r1, #20]	@ zero_extendqisi2
 3991 008c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3992 008e FFF7FEFF 		bl	mod_Mpu_Write
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 115


 3993              	.LVL332:
 3994 0092 0028     		cmp	r0, #0
 3995 0094 44D0     		beq	.L395
1769:Modules/mpu6050/inv_mpu.c **** 	} else {
 3996              		.loc 1 1769 0
 3997 0096 4FF0FF30 		mov	r0, #-1
 3998 009a 44E0     		b	.L390
 3999              	.LVL333:
 4000              	.L392:
1772:Modules/mpu6050/inv_mpu.c **** 			return -1;
 4001              		.loc 1 1772 0
 4002 009c 314B     		ldr	r3, .L412
 4003 009e 5868     		ldr	r0, [r3, #4]
 4004              	.LVL334:
 4005 00a0 1968     		ldr	r1, [r3]
 4006 00a2 0DF10703 		add	r3, sp, #7
 4007 00a6 0122     		movs	r2, #1
 4008 00a8 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 4009 00aa 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4010 00ac FFF7FEFF 		bl	mod_Mpu_Read
 4011              	.LVL335:
 4012 00b0 0028     		cmp	r0, #0
 4013 00b2 4DD1     		bne	.L405
1774:Modules/mpu6050/inv_mpu.c **** 			tmp |= BIT_AUX_IF_EN;
 4014              		.loc 1 1774 0
 4015 00b4 2B4B     		ldr	r3, .L412
 4016 00b6 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 4017 00b8 13F0010F 		tst	r3, #1
 4018 00bc 35D0     		beq	.L396
1775:Modules/mpu6050/inv_mpu.c **** 		else
 4019              		.loc 1 1775 0
 4020 00be 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 4021 00c2 43F02003 		orr	r3, r3, #32
 4022 00c6 8DF80730 		strb	r3, [sp, #7]
 4023              	.L397:
1778:Modules/mpu6050/inv_mpu.c **** 			return -1;
 4024              		.loc 1 1778 0
 4025 00ca 264B     		ldr	r3, .L412
 4026 00cc 5868     		ldr	r0, [r3, #4]
 4027 00ce 1968     		ldr	r1, [r3]
 4028 00d0 0DF10703 		add	r3, sp, #7
 4029 00d4 0122     		movs	r2, #1
 4030 00d6 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 4031 00d8 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4032 00da FFF7FEFF 		bl	mod_Mpu_Write
 4033              	.LVL336:
 4034 00de 0028     		cmp	r0, #0
 4035 00e0 39D1     		bne	.L406
1780:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.active_low_int)
 4036              		.loc 1 1780 0
 4037 00e2 0320     		movs	r0, #3
 4038 00e4 FFF7FEFF 		bl	delay_ms
 4039              	.LVL337:
1781:Modules/mpu6050/inv_mpu.c **** 			tmp = BIT_ACTL;
 4040              		.loc 1 1781 0
 4041 00e8 1E4B     		ldr	r3, .L412
 4042 00ea 93F82230 		ldrb	r3, [r3, #34]	@ zero_extendqisi2
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 116


 4043 00ee 1BB3     		cbz	r3, .L398
1782:Modules/mpu6050/inv_mpu.c **** 		else
 4044              		.loc 1 1782 0
 4045 00f0 8023     		movs	r3, #128
 4046 00f2 8DF80730 		strb	r3, [sp, #7]
 4047              	.L399:
1785:Modules/mpu6050/inv_mpu.c **** 			tmp |= BIT_LATCH_EN | BIT_ANY_RD_CLR;
 4048              		.loc 1 1785 0
 4049 00f6 1B4B     		ldr	r3, .L412
 4050 00f8 93F82330 		ldrb	r3, [r3, #35]	@ zero_extendqisi2
 4051 00fc 2BB1     		cbz	r3, .L400
1786:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
 4052              		.loc 1 1786 0
 4053 00fe 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 4054 0102 43F03003 		orr	r3, r3, #48
 4055 0106 8DF80730 		strb	r3, [sp, #7]
 4056              	.L400:
1787:Modules/mpu6050/inv_mpu.c **** 			return -1;
 4057              		.loc 1 1787 0
 4058 010a 164B     		ldr	r3, .L412
 4059 010c 5868     		ldr	r0, [r3, #4]
 4060 010e 1968     		ldr	r1, [r3]
 4061 0110 0DF10703 		add	r3, sp, #7
 4062 0114 0122     		movs	r2, #1
 4063 0116 097D     		ldrb	r1, [r1, #20]	@ zero_extendqisi2
 4064 0118 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4065 011a FFF7FEFF 		bl	mod_Mpu_Write
 4066              	.LVL338:
 4067 011e E8B9     		cbnz	r0, .L407
 4068              	.L395:
1790:Modules/mpu6050/inv_mpu.c **** 	return 0;
 4069              		.loc 1 1790 0
 4070 0120 104B     		ldr	r3, .L412
 4071 0122 9C74     		strb	r4, [r3, #18]
1791:Modules/mpu6050/inv_mpu.c **** }
 4072              		.loc 1 1791 0
 4073 0124 0020     		movs	r0, #0
 4074              	.L390:
1792:Modules/mpu6050/inv_mpu.c **** 
 4075              		.loc 1 1792 0
 4076 0126 02B0     		add	sp, sp, #8
 4077              	.LCFI87:
 4078              		.cfi_remember_state
 4079              		.cfi_def_cfa_offset 8
 4080              		@ sp needed
 4081 0128 10BD     		pop	{r4, pc}
 4082              	.L396:
 4083              	.LCFI88:
 4084              		.cfi_restore_state
1777:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
 4085              		.loc 1 1777 0
 4086 012a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 4087 012e 23F02003 		bic	r3, r3, #32
 4088 0132 8DF80730 		strb	r3, [sp, #7]
 4089 0136 C8E7     		b	.L397
 4090              	.L398:
1784:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.latched_int)
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 117


 4091              		.loc 1 1784 0
 4092 0138 0023     		movs	r3, #0
 4093 013a 8DF80730 		strb	r3, [sp, #7]
 4094 013e DAE7     		b	.L399
 4095              	.LVL339:
 4096              	.L401:
 4097              	.LCFI89:
 4098              		.cfi_def_cfa_offset 0
 4099              		.cfi_restore 4
 4100              		.cfi_restore 14
1754:Modules/mpu6050/inv_mpu.c **** 
 4101              		.loc 1 1754 0
 4102 0140 0020     		movs	r0, #0
 4103              	.LVL340:
1792:Modules/mpu6050/inv_mpu.c **** 
 4104              		.loc 1 1792 0
 4105 0142 7047     		bx	lr
 4106              	.L402:
 4107              	.LCFI90:
 4108              		.cfi_def_cfa_offset 16
 4109              		.cfi_offset 4, -8
 4110              		.cfi_offset 14, -4
1758:Modules/mpu6050/inv_mpu.c **** 		tmp &= ~BIT_AUX_IF_EN;
 4111              		.loc 1 1758 0
 4112 0144 4FF0FF30 		mov	r0, #-1
 4113 0148 EDE7     		b	.L390
 4114              	.L403:
1761:Modules/mpu6050/inv_mpu.c **** 		delay_ms(3);
 4115              		.loc 1 1761 0
 4116 014a 4FF0FF30 		mov	r0, #-1
 4117 014e EAE7     		b	.L390
 4118              	.L405:
1773:Modules/mpu6050/inv_mpu.c **** 		if (st.chip_cfg.sensors & INV_XYZ_COMPASS)
 4119              		.loc 1 1773 0
 4120 0150 4FF0FF30 		mov	r0, #-1
 4121 0154 E7E7     		b	.L390
 4122              	.L406:
1779:Modules/mpu6050/inv_mpu.c **** 		delay_ms(3);
 4123              		.loc 1 1779 0
 4124 0156 4FF0FF30 		mov	r0, #-1
 4125 015a E4E7     		b	.L390
 4126              	.L407:
1788:Modules/mpu6050/inv_mpu.c **** 	}
 4127              		.loc 1 1788 0
 4128 015c 4FF0FF30 		mov	r0, #-1
 4129 0160 E1E7     		b	.L390
 4130              	.L413:
 4131 0162 00BF     		.align	2
 4132              	.L412:
 4133 0164 00000000 		.word	.LANCHOR0
 4134              		.cfi_endproc
 4135              	.LFE95:
 4137              		.section	.text.mpu_set_int_level,"ax",%progbits
 4138              		.align	1
 4139              		.global	mpu_set_int_level
 4140              		.syntax unified
 4141              		.thumb
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 118


 4142              		.thumb_func
 4143              		.fpu softvfp
 4145              	mpu_set_int_level:
 4146              	.LFB96:
1800:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.active_low_int = active_low;
 4147              		.loc 1 1800 0
 4148              		.cfi_startproc
 4149              		@ args = 0, pretend = 0, frame = 0
 4150              		@ frame_needed = 0, uses_anonymous_args = 0
 4151              		@ link register save eliminated.
 4152              	.LVL341:
1801:Modules/mpu6050/inv_mpu.c **** 	return 0;
 4153              		.loc 1 1801 0
 4154 0000 024B     		ldr	r3, .L415
 4155 0002 83F82200 		strb	r0, [r3, #34]
1803:Modules/mpu6050/inv_mpu.c **** 
 4156              		.loc 1 1803 0
 4157 0006 0020     		movs	r0, #0
 4158              	.LVL342:
 4159 0008 7047     		bx	lr
 4160              	.L416:
 4161 000a 00BF     		.align	2
 4162              	.L415:
 4163 000c 00000000 		.word	.LANCHOR0
 4164              		.cfi_endproc
 4165              	.LFE96:
 4167              		.section	.text.mpu_set_int_latched,"ax",%progbits
 4168              		.align	1
 4169              		.global	mpu_set_int_latched
 4170              		.syntax unified
 4171              		.thumb
 4172              		.thumb_func
 4173              		.fpu softvfp
 4175              	mpu_set_int_latched:
 4176              	.LFB97:
1812:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp;
 4177              		.loc 1 1812 0
 4178              		.cfi_startproc
 4179              		@ args = 0, pretend = 0, frame = 8
 4180              		@ frame_needed = 0, uses_anonymous_args = 0
 4181              	.LVL343:
1814:Modules/mpu6050/inv_mpu.c **** 		return 0;
 4182              		.loc 1 1814 0
 4183 0000 1B4B     		ldr	r3, .L429
 4184 0002 93F82330 		ldrb	r3, [r3, #35]	@ zero_extendqisi2
 4185 0006 8342     		cmp	r3, r0
 4186 0008 2DD0     		beq	.L423
1812:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp;
 4187              		.loc 1 1812 0
 4188 000a 10B5     		push	{r4, lr}
 4189              	.LCFI91:
 4190              		.cfi_def_cfa_offset 8
 4191              		.cfi_offset 4, -8
 4192              		.cfi_offset 14, -4
 4193 000c 82B0     		sub	sp, sp, #8
 4194              	.LCFI92:
 4195              		.cfi_def_cfa_offset 16
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 119


1817:Modules/mpu6050/inv_mpu.c **** 		tmp = BIT_LATCH_EN | BIT_ANY_RD_CLR;
 4196              		.loc 1 1817 0
 4197 000e 30B3     		cbz	r0, .L419
1818:Modules/mpu6050/inv_mpu.c **** 	else
 4198              		.loc 1 1818 0
 4199 0010 3023     		movs	r3, #48
 4200 0012 8DF80730 		strb	r3, [sp, #7]
 4201              	.L420:
1821:Modules/mpu6050/inv_mpu.c **** 		tmp |= BIT_BYPASS_EN;
 4202              		.loc 1 1821 0
 4203 0016 164B     		ldr	r3, .L429
 4204 0018 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
 4205 001a 2BB1     		cbz	r3, .L421
1822:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.active_low_int)
 4206              		.loc 1 1822 0
 4207 001c 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 4208 0020 43F00203 		orr	r3, r3, #2
 4209 0024 8DF80730 		strb	r3, [sp, #7]
 4210              	.L421:
1823:Modules/mpu6050/inv_mpu.c **** 		tmp |= BIT_ACTL;
 4211              		.loc 1 1823 0
 4212 0028 114B     		ldr	r3, .L429
 4213 002a 93F82230 		ldrb	r3, [r3, #34]	@ zero_extendqisi2
 4214 002e 2BB1     		cbz	r3, .L422
1824:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
 4215              		.loc 1 1824 0
 4216 0030 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 4217 0034 63F07F03 		orn	r3, r3, #127
 4218 0038 8DF80730 		strb	r3, [sp, #7]
 4219              	.L422:
 4220 003c 0446     		mov	r4, r0
1825:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4221              		.loc 1 1825 0
 4222 003e 0C4B     		ldr	r3, .L429
 4223 0040 5868     		ldr	r0, [r3, #4]
 4224              	.LVL344:
 4225 0042 1968     		ldr	r1, [r3]
 4226 0044 0DF10703 		add	r3, sp, #7
 4227 0048 0122     		movs	r2, #1
 4228 004a 097D     		ldrb	r1, [r1, #20]	@ zero_extendqisi2
 4229 004c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4230 004e FFF7FEFF 		bl	mod_Mpu_Write
 4231              	.LVL345:
 4232 0052 50B9     		cbnz	r0, .L424
1827:Modules/mpu6050/inv_mpu.c **** 	return 0;
 4233              		.loc 1 1827 0
 4234 0054 064B     		ldr	r3, .L429
 4235 0056 83F82340 		strb	r4, [r3, #35]
 4236              	.L417:
1829:Modules/mpu6050/inv_mpu.c **** 
 4237              		.loc 1 1829 0
 4238 005a 02B0     		add	sp, sp, #8
 4239              	.LCFI93:
 4240              		.cfi_remember_state
 4241              		.cfi_def_cfa_offset 8
 4242              		@ sp needed
 4243 005c 10BD     		pop	{r4, pc}
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 120


 4244              	.LVL346:
 4245              	.L419:
 4246              	.LCFI94:
 4247              		.cfi_restore_state
1820:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.bypass_mode)
 4248              		.loc 1 1820 0
 4249 005e 0023     		movs	r3, #0
 4250 0060 8DF80730 		strb	r3, [sp, #7]
 4251 0064 D7E7     		b	.L420
 4252              	.L423:
 4253              	.LCFI95:
 4254              		.cfi_def_cfa_offset 0
 4255              		.cfi_restore 4
 4256              		.cfi_restore 14
1815:Modules/mpu6050/inv_mpu.c **** 
 4257              		.loc 1 1815 0
 4258 0066 0020     		movs	r0, #0
 4259              	.LVL347:
1829:Modules/mpu6050/inv_mpu.c **** 
 4260              		.loc 1 1829 0
 4261 0068 7047     		bx	lr
 4262              	.L424:
 4263              	.LCFI96:
 4264              		.cfi_def_cfa_offset 16
 4265              		.cfi_offset 4, -8
 4266              		.cfi_offset 14, -4
1826:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.latched_int = enable;
 4267              		.loc 1 1826 0
 4268 006a 4FF0FF30 		mov	r0, #-1
 4269 006e F4E7     		b	.L417
 4270              	.L430:
 4271              		.align	2
 4272              	.L429:
 4273 0070 00000000 		.word	.LANCHOR0
 4274              		.cfi_endproc
 4275              	.LFE97:
 4277              		.section	.text.mpu_lp_accel_mode,"ax",%progbits
 4278              		.align	1
 4279              		.global	mpu_lp_accel_mode
 4280              		.syntax unified
 4281              		.thumb
 4282              		.thumb_func
 4283              		.fpu softvfp
 4285              	mpu_lp_accel_mode:
 4286              	.LFB70:
 821:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
 4287              		.loc 1 821 0
 4288              		.cfi_startproc
 4289              		@ args = 0, pretend = 0, frame = 8
 4290              		@ frame_needed = 0, uses_anonymous_args = 0
 4291              	.LVL348:
 824:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4292              		.loc 1 824 0
 4293 0000 2828     		cmp	r0, #40
 4294 0002 5FD8     		bhi	.L438
 821:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
 4295              		.loc 1 821 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 121


 4296 0004 10B5     		push	{r4, lr}
 4297              	.LCFI97:
 4298              		.cfi_def_cfa_offset 8
 4299              		.cfi_offset 4, -8
 4300              		.cfi_offset 14, -4
 4301 0006 82B0     		sub	sp, sp, #8
 4302              	.LCFI98:
 4303              		.cfi_def_cfa_offset 16
 4304 0008 0446     		mov	r4, r0
 827:Modules/mpu6050/inv_mpu.c **** 		mpu_set_int_latched(0);
 4305              		.loc 1 827 0
 4306 000a B8B9     		cbnz	r0, .L433
 828:Modules/mpu6050/inv_mpu.c **** 		tmp[0] = 0;
 4307              		.loc 1 828 0
 4308 000c 0020     		movs	r0, #0
 4309              	.LVL349:
 4310 000e FFF7FEFF 		bl	mpu_set_int_latched
 4311              	.LVL350:
 829:Modules/mpu6050/inv_mpu.c **** 		tmp[1] = BIT_STBY_XYZG;
 4312              		.loc 1 829 0
 4313 0012 0023     		movs	r3, #0
 4314 0014 8DF80430 		strb	r3, [sp, #4]
 830:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
 4315              		.loc 1 830 0
 4316 0018 0723     		movs	r3, #7
 4317 001a 8DF80530 		strb	r3, [sp, #5]
 831:Modules/mpu6050/inv_mpu.c **** 			return -1;
 4318              		.loc 1 831 0
 4319 001e 2E4B     		ldr	r3, .L447
 4320 0020 5868     		ldr	r0, [r3, #4]
 4321 0022 1968     		ldr	r1, [r3]
 4322 0024 01AB     		add	r3, sp, #4
 4323 0026 0222     		movs	r2, #2
 4324 0028 897C     		ldrb	r1, [r1, #18]	@ zero_extendqisi2
 4325 002a 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4326 002c FFF7FEFF 		bl	mod_Mpu_Write
 4327              	.LVL351:
 4328 0030 0028     		cmp	r0, #0
 4329 0032 4AD1     		bne	.L439
 833:Modules/mpu6050/inv_mpu.c **** 		return 0;
 4330              		.loc 1 833 0
 4331 0034 284B     		ldr	r3, .L447
 4332 0036 1875     		strb	r0, [r3, #20]
 4333              	.L431:
 896:Modules/mpu6050/inv_mpu.c **** 
 4334              		.loc 1 896 0
 4335 0038 02B0     		add	sp, sp, #8
 4336              	.LCFI99:
 4337              		.cfi_remember_state
 4338              		.cfi_def_cfa_offset 8
 4339              		@ sp needed
 4340 003a 10BD     		pop	{r4, pc}
 4341              	.LVL352:
 4342              	.L433:
 4343              	.LCFI100:
 4344              		.cfi_restore_state
 843:Modules/mpu6050/inv_mpu.c **** #if defined MPU6050
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 122


 4345              		.loc 1 843 0
 4346 003c 0120     		movs	r0, #1
 4347              	.LVL353:
 4348 003e FFF7FEFF 		bl	mpu_set_int_latched
 4349              	.LVL354:
 845:Modules/mpu6050/inv_mpu.c **** 	if (rate == 1) {
 4350              		.loc 1 845 0
 4351 0042 2023     		movs	r3, #32
 4352 0044 8DF80430 		strb	r3, [sp, #4]
 846:Modules/mpu6050/inv_mpu.c **** 		tmp[1] = INV_LPA_1_25HZ;
 4353              		.loc 1 846 0
 4354 0048 012C     		cmp	r4, #1
 4355 004a 26D0     		beq	.L445
 849:Modules/mpu6050/inv_mpu.c **** 		tmp[1] = INV_LPA_5HZ;
 4356              		.loc 1 849 0
 4357 004c 052C     		cmp	r4, #5
 4358 004e 2BD9     		bls	.L446
 852:Modules/mpu6050/inv_mpu.c **** 		tmp[1] = INV_LPA_20HZ;
 4359              		.loc 1 852 0
 4360 0050 142C     		cmp	r4, #20
 4361 0052 30D8     		bhi	.L437
 853:Modules/mpu6050/inv_mpu.c **** 		mpu_set_lpf(10);
 4362              		.loc 1 853 0
 4363 0054 0223     		movs	r3, #2
 4364 0056 8DF80530 		strb	r3, [sp, #5]
 854:Modules/mpu6050/inv_mpu.c **** 	} else {
 4365              		.loc 1 854 0
 4366 005a 0A20     		movs	r0, #10
 4367 005c FFF7FEFF 		bl	mpu_set_lpf
 4368              	.LVL355:
 4369              	.L435:
 859:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
 4370              		.loc 1 859 0
 4371 0060 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 4372 0064 9B01     		lsls	r3, r3, #6
 4373 0066 43F00703 		orr	r3, r3, #7
 4374 006a 8DF80530 		strb	r3, [sp, #5]
 860:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4375              		.loc 1 860 0
 4376 006e 1A4B     		ldr	r3, .L447
 4377 0070 5868     		ldr	r0, [r3, #4]
 4378 0072 1968     		ldr	r1, [r3]
 4379 0074 01AB     		add	r3, sp, #4
 4380 0076 0222     		movs	r2, #2
 4381 0078 897C     		ldrb	r1, [r1, #18]	@ zero_extendqisi2
 4382 007a 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4383 007c FFF7FEFF 		bl	mod_Mpu_Write
 4384              	.LVL356:
 4385 0080 30BB     		cbnz	r0, .L440
 890:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.clk_src = 0;
 4386              		.loc 1 890 0
 4387 0082 154B     		ldr	r3, .L447
 4388 0084 0822     		movs	r2, #8
 4389 0086 9A72     		strb	r2, [r3, #10]
 891:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lp_accel_mode = 1;
 4390              		.loc 1 891 0
 4391 0088 0024     		movs	r4, #0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 123


 4392 008a 1C73     		strb	r4, [r3, #12]
 892:Modules/mpu6050/inv_mpu.c **** 	mpu_configure_fifo(0);
 4393              		.loc 1 892 0
 4394 008c 0122     		movs	r2, #1
 4395 008e 1A75     		strb	r2, [r3, #20]
 893:Modules/mpu6050/inv_mpu.c **** 
 4396              		.loc 1 893 0
 4397 0090 2046     		mov	r0, r4
 4398 0092 FFF7FEFF 		bl	mpu_configure_fifo
 4399              	.LVL357:
 895:Modules/mpu6050/inv_mpu.c **** }
 4400              		.loc 1 895 0
 4401 0096 2046     		mov	r0, r4
 4402 0098 CEE7     		b	.L431
 4403              	.L445:
 847:Modules/mpu6050/inv_mpu.c **** 		mpu_set_lpf(5);
 4404              		.loc 1 847 0
 4405 009a 0023     		movs	r3, #0
 4406 009c 8DF80530 		strb	r3, [sp, #5]
 848:Modules/mpu6050/inv_mpu.c **** 	} else if (rate <= 5) {
 4407              		.loc 1 848 0
 4408 00a0 0520     		movs	r0, #5
 4409 00a2 FFF7FEFF 		bl	mpu_set_lpf
 4410              	.LVL358:
 4411 00a6 DBE7     		b	.L435
 4412              	.L446:
 850:Modules/mpu6050/inv_mpu.c **** 		mpu_set_lpf(5);
 4413              		.loc 1 850 0
 4414 00a8 0123     		movs	r3, #1
 4415 00aa 8DF80530 		strb	r3, [sp, #5]
 851:Modules/mpu6050/inv_mpu.c **** 	} else if (rate <= 20) {
 4416              		.loc 1 851 0
 4417 00ae 0520     		movs	r0, #5
 4418 00b0 FFF7FEFF 		bl	mpu_set_lpf
 4419              	.LVL359:
 4420 00b4 D4E7     		b	.L435
 4421              	.L437:
 856:Modules/mpu6050/inv_mpu.c **** 		mpu_set_lpf(20);
 4422              		.loc 1 856 0
 4423 00b6 0323     		movs	r3, #3
 4424 00b8 8DF80530 		strb	r3, [sp, #5]
 857:Modules/mpu6050/inv_mpu.c **** 	}
 4425              		.loc 1 857 0
 4426 00bc 1420     		movs	r0, #20
 4427 00be FFF7FEFF 		bl	mpu_set_lpf
 4428              	.LVL360:
 4429 00c2 CDE7     		b	.L435
 4430              	.LVL361:
 4431              	.L438:
 4432              	.LCFI101:
 4433              		.cfi_def_cfa_offset 0
 4434              		.cfi_restore 4
 4435              		.cfi_restore 14
 825:Modules/mpu6050/inv_mpu.c **** 
 4436              		.loc 1 825 0
 4437 00c4 4FF0FF30 		mov	r0, #-1
 4438              	.LVL362:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 124


 896:Modules/mpu6050/inv_mpu.c **** 
 4439              		.loc 1 896 0
 4440 00c8 7047     		bx	lr
 4441              	.L439:
 4442              	.LCFI102:
 4443              		.cfi_def_cfa_offset 16
 4444              		.cfi_offset 4, -8
 4445              		.cfi_offset 14, -4
 832:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.lp_accel_mode = 0;
 4446              		.loc 1 832 0
 4447 00ca 4FF0FF30 		mov	r0, #-1
 4448 00ce B3E7     		b	.L431
 4449              	.L440:
 861:Modules/mpu6050/inv_mpu.c **** #elif defined MPU6500
 4450              		.loc 1 861 0
 4451 00d0 4FF0FF30 		mov	r0, #-1
 4452 00d4 B0E7     		b	.L431
 4453              	.L448:
 4454 00d6 00BF     		.align	2
 4455              	.L447:
 4456 00d8 00000000 		.word	.LANCHOR0
 4457              		.cfi_endproc
 4458              	.LFE70:
 4460              		.section	.text.mpu_set_sample_rate,"ax",%progbits
 4461              		.align	1
 4462              		.global	mpu_set_sample_rate
 4463              		.syntax unified
 4464              		.thumb
 4465              		.thumb_func
 4466              		.fpu softvfp
 4468              	mpu_set_sample_rate:
 4469              	.LFB83:
1300:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
 4470              		.loc 1 1300 0
 4471              		.cfi_startproc
 4472              		@ args = 0, pretend = 0, frame = 8
 4473              		@ frame_needed = 0, uses_anonymous_args = 0
 4474              	.LVL363:
1303:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4475              		.loc 1 1303 0
 4476 0000 264B     		ldr	r3, .L464
 4477 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 4478 0004 002B     		cmp	r3, #0
 4479 0006 3FD0     		beq	.L454
1300:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
 4480              		.loc 1 1300 0
 4481 0008 10B5     		push	{r4, lr}
 4482              	.LCFI103:
 4483              		.cfi_def_cfa_offset 8
 4484              		.cfi_offset 4, -8
 4485              		.cfi_offset 14, -4
 4486 000a 82B0     		sub	sp, sp, #8
 4487              	.LCFI104:
 4488              		.cfi_def_cfa_offset 16
 4489 000c 0446     		mov	r4, r0
1306:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4490              		.loc 1 1306 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 125


 4491 000e 234B     		ldr	r3, .L464
 4492 0010 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 4493 0014 002B     		cmp	r3, #0
 4494 0016 3AD1     		bne	.L455
1309:Modules/mpu6050/inv_mpu.c **** 			if (rate && (rate <= 40)) {
 4495              		.loc 1 1309 0
 4496 0018 204B     		ldr	r3, .L464
 4497 001a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 4498 001c 33B1     		cbz	r3, .L451
1310:Modules/mpu6050/inv_mpu.c **** 				/* Just stay in low-power accel mode. */
 4499              		.loc 1 1310 0
 4500 001e 431E     		subs	r3, r0, #1
 4501 0020 9BB2     		uxth	r3, r3
 4502 0022 272B     		cmp	r3, #39
 4503 0024 0AD9     		bls	.L463
1318:Modules/mpu6050/inv_mpu.c **** 		}
 4504              		.loc 1 1318 0
 4505 0026 0020     		movs	r0, #0
 4506              	.LVL364:
 4507 0028 FFF7FEFF 		bl	mpu_lp_accel_mode
 4508              	.LVL365:
 4509              	.L451:
1320:Modules/mpu6050/inv_mpu.c **** 			rate = 4;
 4510              		.loc 1 1320 0
 4511 002c 032C     		cmp	r4, #3
 4512 002e 0AD9     		bls	.L456
1322:Modules/mpu6050/inv_mpu.c **** 			rate = 1000;
 4513              		.loc 1 1322 0
 4514 0030 B4F57A7F 		cmp	r4, #1000
 4515 0034 08D9     		bls	.L453
1323:Modules/mpu6050/inv_mpu.c **** 
 4516              		.loc 1 1323 0
 4517 0036 4FF47A74 		mov	r4, #1000
 4518 003a 05E0     		b	.L453
 4519              	.LVL366:
 4520              	.L463:
1312:Modules/mpu6050/inv_mpu.c **** 				return 0;
 4521              		.loc 1 1312 0
 4522 003c C0B2     		uxtb	r0, r0
 4523              	.LVL367:
 4524 003e FFF7FEFF 		bl	mpu_lp_accel_mode
 4525              	.LVL368:
1313:Modules/mpu6050/inv_mpu.c **** 			}
 4526              		.loc 1 1313 0
 4527 0042 0020     		movs	r0, #0
 4528 0044 1EE0     		b	.L449
 4529              	.L456:
1321:Modules/mpu6050/inv_mpu.c **** 		else if (rate > 1000)
 4530              		.loc 1 1321 0
 4531 0046 0424     		movs	r4, #4
 4532              	.L453:
 4533              	.LVL369:
1325:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->rate_div, 1, &data))
 4534              		.loc 1 1325 0
 4535 0048 4FF47A70 		mov	r0, #1000
 4536 004c 90FBF4F0 		sdiv	r0, r0, r4
 4537 0050 0138     		subs	r0, r0, #1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 126


 4538 0052 02AB     		add	r3, sp, #8
 4539 0054 03F8010D 		strb	r0, [r3, #-1]!
1326:Modules/mpu6050/inv_mpu.c **** 			return -1;
 4540              		.loc 1 1326 0
 4541 0058 104A     		ldr	r2, .L464
 4542 005a 5068     		ldr	r0, [r2, #4]
 4543 005c 1168     		ldr	r1, [r2]
 4544 005e 0122     		movs	r2, #1
 4545 0060 4978     		ldrb	r1, [r1, #1]	@ zero_extendqisi2
 4546 0062 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4547 0064 FFF7FEFF 		bl	mod_Mpu_Write
 4548              	.LVL370:
 4549 0068 A0B9     		cbnz	r0, .L458
1329:Modules/mpu6050/inv_mpu.c **** 
 4550              		.loc 1 1329 0
 4551 006a 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
 4552 006e 431C     		adds	r3, r0, #1
 4553 0070 4FF47A70 		mov	r0, #1000
 4554 0074 90FBF3F0 		sdiv	r0, r0, r3
 4555 0078 084B     		ldr	r3, .L464
 4556 007a D881     		strh	r0, [r3, #14]	@ movhi
1336:Modules/mpu6050/inv_mpu.c **** 		return 0;
 4557              		.loc 1 1336 0
 4558 007c 4008     		lsrs	r0, r0, #1
 4559 007e FFF7FEFF 		bl	mpu_set_lpf
 4560              	.LVL371:
1337:Modules/mpu6050/inv_mpu.c **** 	}
 4561              		.loc 1 1337 0
 4562 0082 0020     		movs	r0, #0
 4563              	.LVL372:
 4564              	.L449:
1339:Modules/mpu6050/inv_mpu.c **** 
 4565              		.loc 1 1339 0
 4566 0084 02B0     		add	sp, sp, #8
 4567              	.LCFI105:
 4568              		.cfi_def_cfa_offset 8
 4569              		@ sp needed
 4570 0086 10BD     		pop	{r4, pc}
 4571              	.LVL373:
 4572              	.L454:
 4573              	.LCFI106:
 4574              		.cfi_def_cfa_offset 0
 4575              		.cfi_restore 4
 4576              		.cfi_restore 14
1304:Modules/mpu6050/inv_mpu.c **** 
 4577              		.loc 1 1304 0
 4578 0088 4FF0FF30 		mov	r0, #-1
 4579              	.LVL374:
1339:Modules/mpu6050/inv_mpu.c **** 
 4580              		.loc 1 1339 0
 4581 008c 7047     		bx	lr
 4582              	.LVL375:
 4583              	.L455:
 4584              	.LCFI107:
 4585              		.cfi_def_cfa_offset 16
 4586              		.cfi_offset 4, -8
 4587              		.cfi_offset 14, -4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 127


1307:Modules/mpu6050/inv_mpu.c **** 	else {
 4588              		.loc 1 1307 0
 4589 008e 4FF0FF30 		mov	r0, #-1
 4590              	.LVL376:
 4591 0092 F7E7     		b	.L449
 4592              	.LVL377:
 4593              	.L458:
1327:Modules/mpu6050/inv_mpu.c **** 
 4594              		.loc 1 1327 0
 4595 0094 4FF0FF30 		mov	r0, #-1
 4596 0098 F4E7     		b	.L449
 4597              	.L465:
 4598 009a 00BF     		.align	2
 4599              	.L464:
 4600 009c 00000000 		.word	.LANCHOR0
 4601              		.cfi_endproc
 4602              	.LFE83:
 4604              		.section	.text.mpu_set_sensors,"ax",%progbits
 4605              		.align	1
 4606              		.global	mpu_set_sensors
 4607              		.syntax unified
 4608              		.thumb
 4609              		.thumb_func
 4610              		.fpu softvfp
 4612              	mpu_set_sensors:
 4613              	.LFB91:
1525:Modules/mpu6050/inv_mpu.c **** 	unsigned char data;
 4614              		.loc 1 1525 0
 4615              		.cfi_startproc
 4616              		@ args = 0, pretend = 0, frame = 8
 4617              		@ frame_needed = 0, uses_anonymous_args = 0
 4618              	.LVL378:
 4619 0000 10B5     		push	{r4, lr}
 4620              	.LCFI108:
 4621              		.cfi_def_cfa_offset 8
 4622              		.cfi_offset 4, -8
 4623              		.cfi_offset 14, -4
 4624 0002 82B0     		sub	sp, sp, #8
 4625              	.LCFI109:
 4626              		.cfi_def_cfa_offset 16
 4627 0004 0446     		mov	r4, r0
1531:Modules/mpu6050/inv_mpu.c **** 		data = INV_CLK_PLL;
 4628              		.loc 1 1531 0
 4629 0006 10F0700F 		tst	r0, #112
 4630 000a 50D0     		beq	.L467
1532:Modules/mpu6050/inv_mpu.c **** 	else if (sensors)
 4631              		.loc 1 1532 0
 4632 000c 0123     		movs	r3, #1
 4633 000e 8DF80730 		strb	r3, [sp, #7]
 4634              	.L468:
1537:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.sensors = 0;
 4635              		.loc 1 1537 0
 4636 0012 334B     		ldr	r3, .L482
 4637 0014 5868     		ldr	r0, [r3, #4]
 4638              	.LVL379:
 4639 0016 1968     		ldr	r1, [r3]
 4640 0018 0DF10703 		add	r3, sp, #7
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 128


 4641 001c 0122     		movs	r2, #1
 4642 001e 897C     		ldrb	r1, [r1, #18]	@ zero_extendqisi2
 4643 0020 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4644 0022 FFF7FEFF 		bl	mod_Mpu_Write
 4645              	.LVL380:
 4646 0026 0028     		cmp	r0, #0
 4647 0028 4AD1     		bne	.L479
1541:Modules/mpu6050/inv_mpu.c **** 
 4648              		.loc 1 1541 0
 4649 002a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 4650 002e 03F0BF03 		and	r3, r3, #191
 4651 0032 2B4A     		ldr	r2, .L482
 4652 0034 1373     		strb	r3, [r2, #12]
1543:Modules/mpu6050/inv_mpu.c **** 	if (!(sensors & INV_X_GYRO))
 4653              		.loc 1 1543 0
 4654 0036 0023     		movs	r3, #0
 4655 0038 8DF80730 		strb	r3, [sp, #7]
1544:Modules/mpu6050/inv_mpu.c **** 		data |= BIT_STBY_XG;
 4656              		.loc 1 1544 0
 4657 003c 14F0400F 		tst	r4, #64
 4658 0040 02D1     		bne	.L472
1545:Modules/mpu6050/inv_mpu.c **** 	if (!(sensors & INV_Y_GYRO))
 4659              		.loc 1 1545 0
 4660 0042 0423     		movs	r3, #4
 4661 0044 8DF80730 		strb	r3, [sp, #7]
 4662              	.L472:
1546:Modules/mpu6050/inv_mpu.c **** 		data |= BIT_STBY_YG;
 4663              		.loc 1 1546 0
 4664 0048 14F0200F 		tst	r4, #32
 4665 004c 05D1     		bne	.L473
1547:Modules/mpu6050/inv_mpu.c **** 	if (!(sensors & INV_Z_GYRO))
 4666              		.loc 1 1547 0
 4667 004e 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 4668 0052 43F00203 		orr	r3, r3, #2
 4669 0056 8DF80730 		strb	r3, [sp, #7]
 4670              	.L473:
1548:Modules/mpu6050/inv_mpu.c **** 		data |= BIT_STBY_ZG;
 4671              		.loc 1 1548 0
 4672 005a 14F0100F 		tst	r4, #16
 4673 005e 05D1     		bne	.L474
1549:Modules/mpu6050/inv_mpu.c **** 	if (!(sensors & INV_XYZ_ACCEL))
 4674              		.loc 1 1549 0
 4675 0060 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 4676 0064 43F00103 		orr	r3, r3, #1
 4677 0068 8DF80730 		strb	r3, [sp, #7]
 4678              	.L474:
1550:Modules/mpu6050/inv_mpu.c **** 		data |= BIT_STBY_XYZA;
 4679              		.loc 1 1550 0
 4680 006c 14F0080F 		tst	r4, #8
 4681 0070 05D1     		bne	.L475
1551:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_2, 1, &data)) {
 4682              		.loc 1 1551 0
 4683 0072 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 4684 0076 43F03803 		orr	r3, r3, #56
 4685 007a 8DF80730 		strb	r3, [sp, #7]
 4686              	.L475:
1552:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.sensors = 0;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 129


 4687              		.loc 1 1552 0
 4688 007e 184B     		ldr	r3, .L482
 4689 0080 5868     		ldr	r0, [r3, #4]
 4690 0082 1968     		ldr	r1, [r3]
 4691 0084 0DF10703 		add	r3, sp, #7
 4692 0088 0122     		movs	r2, #1
 4693 008a C97C     		ldrb	r1, [r1, #19]	@ zero_extendqisi2
 4694 008c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4695 008e FFF7FEFF 		bl	mod_Mpu_Write
 4696              	.LVL381:
 4697 0092 D8B9     		cbnz	r0, .L480
1557:Modules/mpu6050/inv_mpu.c **** 		/* Latched interrupts only used in LP accel mode. */
 4698              		.loc 1 1557 0
 4699 0094 0CB1     		cbz	r4, .L477
1557:Modules/mpu6050/inv_mpu.c **** 		/* Latched interrupts only used in LP accel mode. */
 4700              		.loc 1 1557 0 is_stmt 0 discriminator 1
 4701 0096 082C     		cmp	r4, #8
 4702 0098 1ED1     		bne	.L481
 4703              	.L477:
1590:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lp_accel_mode = 0;
 4704              		.loc 1 1590 0 is_stmt 1
 4705 009a 114B     		ldr	r3, .L482
 4706 009c 9C72     		strb	r4, [r3, #10]
1591:Modules/mpu6050/inv_mpu.c **** 	delay_ms(50);
 4707              		.loc 1 1591 0
 4708 009e 0024     		movs	r4, #0
 4709 00a0 1C75     		strb	r4, [r3, #20]
1592:Modules/mpu6050/inv_mpu.c **** 	return 0;
 4710              		.loc 1 1592 0
 4711 00a2 3220     		movs	r0, #50
 4712 00a4 FFF7FEFF 		bl	delay_ms
 4713              	.LVL382:
1593:Modules/mpu6050/inv_mpu.c **** }
 4714              		.loc 1 1593 0
 4715 00a8 2046     		mov	r0, r4
 4716              	.L466:
1594:Modules/mpu6050/inv_mpu.c **** 
 4717              		.loc 1 1594 0
 4718 00aa 02B0     		add	sp, sp, #8
 4719              	.LCFI110:
 4720              		.cfi_remember_state
 4721              		.cfi_def_cfa_offset 8
 4722              		@ sp needed
 4723 00ac 10BD     		pop	{r4, pc}
 4724              	.LVL383:
 4725              	.L467:
 4726              	.LCFI111:
 4727              		.cfi_restore_state
1533:Modules/mpu6050/inv_mpu.c **** 		data = 0;
 4728              		.loc 1 1533 0
 4729 00ae 18B1     		cbz	r0, .L469
1534:Modules/mpu6050/inv_mpu.c **** 	else
 4730              		.loc 1 1534 0
 4731 00b0 0023     		movs	r3, #0
 4732 00b2 8DF80730 		strb	r3, [sp, #7]
 4733 00b6 ACE7     		b	.L468
 4734              	.L469:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 130


1536:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, &data)) {
 4735              		.loc 1 1536 0
 4736 00b8 4023     		movs	r3, #64
 4737 00ba 8DF80730 		strb	r3, [sp, #7]
 4738 00be A8E7     		b	.L468
 4739              	.LVL384:
 4740              	.L479:
1538:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4741              		.loc 1 1538 0
 4742 00c0 074B     		ldr	r3, .L482
 4743 00c2 0022     		movs	r2, #0
 4744 00c4 9A72     		strb	r2, [r3, #10]
1539:Modules/mpu6050/inv_mpu.c **** 	}
 4745              		.loc 1 1539 0
 4746 00c6 4FF0FF30 		mov	r0, #-1
 4747 00ca EEE7     		b	.L466
 4748              	.L480:
1553:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4749              		.loc 1 1553 0
 4750 00cc 044B     		ldr	r3, .L482
 4751 00ce 0022     		movs	r2, #0
 4752 00d0 9A72     		strb	r2, [r3, #10]
1554:Modules/mpu6050/inv_mpu.c **** 	}
 4753              		.loc 1 1554 0
 4754 00d2 4FF0FF30 		mov	r0, #-1
 4755 00d6 E8E7     		b	.L466
 4756              	.L481:
1559:Modules/mpu6050/inv_mpu.c **** 
 4757              		.loc 1 1559 0
 4758 00d8 0020     		movs	r0, #0
 4759 00da FFF7FEFF 		bl	mpu_set_int_latched
 4760              	.LVL385:
 4761 00de DCE7     		b	.L477
 4762              	.L483:
 4763              		.align	2
 4764              	.L482:
 4765 00e0 00000000 		.word	.LANCHOR0
 4766              		.cfi_endproc
 4767              	.LFE91:
 4769              		.section	.text.mpu_init,"ax",%progbits
 4770              		.align	1
 4771              		.global	mpu_init
 4772              		.syntax unified
 4773              		.thumb
 4774              		.thumb_func
 4775              		.fpu softvfp
 4777              	mpu_init:
 4778              	.LFB69:
 690:Modules/mpu6050/inv_mpu.c **** 	unsigned char data[6], rev;
 4779              		.loc 1 690 0
 4780              		.cfi_startproc
 4781              		@ args = 0, pretend = 0, frame = 8
 4782              		@ frame_needed = 0, uses_anonymous_args = 0
 4783 0000 10B5     		push	{r4, lr}
 4784              	.LCFI112:
 4785              		.cfi_def_cfa_offset 8
 4786              		.cfi_offset 4, -8
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 131


 4787              		.cfi_offset 14, -4
 4788 0002 82B0     		sub	sp, sp, #8
 4789              	.LCFI113:
 4790              		.cfi_def_cfa_offset 16
 694:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 4791              		.loc 1 694 0
 4792 0004 02AB     		add	r3, sp, #8
 4793 0006 8022     		movs	r2, #128
 4794 0008 03F8082D 		strb	r2, [r3, #-8]!
 695:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4795              		.loc 1 695 0
 4796 000c 664A     		ldr	r2, .L506
 4797 000e 5068     		ldr	r0, [r2, #4]
 4798 0010 1168     		ldr	r1, [r2]
 4799 0012 0122     		movs	r2, #1
 4800 0014 897C     		ldrb	r1, [r1, #18]	@ zero_extendqisi2
 4801 0016 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4802 0018 FFF7FEFF 		bl	mod_Mpu_Write
 4803              	.LVL386:
 4804 001c 0028     		cmp	r0, #0
 4805 001e 40F0A480 		bne	.L492
 697:Modules/mpu6050/inv_mpu.c **** 
 4806              		.loc 1 697 0
 4807 0022 6420     		movs	r0, #100
 4808 0024 FFF7FEFF 		bl	delay_ms
 4809              	.LVL387:
 700:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 4810              		.loc 1 700 0
 4811 0028 02AB     		add	r3, sp, #8
 4812 002a 0022     		movs	r2, #0
 4813 002c 03F8082D 		strb	r2, [r3, #-8]!
 701:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4814              		.loc 1 701 0
 4815 0030 5D4A     		ldr	r2, .L506
 4816 0032 5068     		ldr	r0, [r2, #4]
 4817 0034 1168     		ldr	r1, [r2]
 4818 0036 0122     		movs	r2, #1
 4819 0038 897C     		ldrb	r1, [r1, #18]	@ zero_extendqisi2
 4820 003a 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4821 003c FFF7FEFF 		bl	mod_Mpu_Write
 4822              	.LVL388:
 4823 0040 0028     		cmp	r0, #0
 4824 0042 40F09580 		bne	.L493
 706:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4825              		.loc 1 706 0
 4826 0046 584B     		ldr	r3, .L506
 4827 0048 5868     		ldr	r0, [r3, #4]
 4828 004a 1968     		ldr	r1, [r3]
 4829 004c 6B46     		mov	r3, sp
 4830 004e 0622     		movs	r2, #6
 4831 0050 897D     		ldrb	r1, [r1, #22]	@ zero_extendqisi2
 4832 0052 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4833 0054 FFF7FEFF 		bl	mod_Mpu_Read
 4834              	.LVL389:
 4835 0058 0028     		cmp	r0, #0
 4836 005a 40F08C80 		bne	.L494
 708:Modules/mpu6050/inv_mpu.c **** 		  (data[1] & 0x01);
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 132


 4837              		.loc 1 708 0
 4838 005e 9DF80510 		ldrb	r1, [sp, #5]	@ zero_extendqisi2
 4839 0062 8900     		lsls	r1, r1, #2
 4840 0064 01F00403 		and	r3, r1, #4
 4841 0068 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 4842 006c 4900     		lsls	r1, r1, #1
 4843 006e 01F00201 		and	r1, r1, #2
 4844 0072 1943     		orrs	r1, r1, r3
 709:Modules/mpu6050/inv_mpu.c **** 
 4845              		.loc 1 709 0
 4846 0074 9DF90130 		ldrsb	r3, [sp, #1]
 4847 0078 03F00103 		and	r3, r3, #1
 4848              	.LVL390:
 711:Modules/mpu6050/inv_mpu.c **** 		/* Congrats, these parts are better. */
 4849              		.loc 1 711 0
 4850 007c 1943     		orrs	r1, r1, r3
 4851              	.LVL391:
 4852 007e 52D0     		beq	.L486
 713:Modules/mpu6050/inv_mpu.c **** 			st.chip_cfg.accel_half = 1;
 4853              		.loc 1 713 0
 4854 0080 0129     		cmp	r1, #1
 4855 0082 46D0     		beq	.L503
 715:Modules/mpu6050/inv_mpu.c **** 			st.chip_cfg.accel_half = 0;
 4856              		.loc 1 715 0
 4857 0084 0229     		cmp	r1, #2
 4858 0086 48D1     		bne	.L489
 716:Modules/mpu6050/inv_mpu.c **** 		else {
 4859              		.loc 1 716 0
 4860 0088 474B     		ldr	r3, .L506
 4861 008a 0022     		movs	r2, #0
 4862 008c DA74     		strb	r2, [r3, #19]
 4863              	.LVL392:
 4864              	.L488:
 755:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.gyro_fsr = 0xFF;
 4865              		.loc 1 755 0
 4866 008e 464B     		ldr	r3, .L506
 4867 0090 FF22     		movs	r2, #255
 4868 0092 9A72     		strb	r2, [r3, #10]
 756:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.accel_fsr = 0xFF;
 4869              		.loc 1 756 0
 4870 0094 1A72     		strb	r2, [r3, #8]
 757:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lpf = 0xFF;
 4871              		.loc 1 757 0
 4872 0096 5A72     		strb	r2, [r3, #9]
 758:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.sample_rate = 0xFFFF;
 4873              		.loc 1 758 0
 4874 0098 DA72     		strb	r2, [r3, #11]
 759:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.fifo_enable = 0xFF;
 4875              		.loc 1 759 0
 4876 009a 4FF6FF71 		movw	r1, #65535
 4877 009e D981     		strh	r1, [r3, #14]	@ movhi
 760:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.bypass_mode = 0xFF;
 4878              		.loc 1 760 0
 4879 00a0 1A74     		strb	r2, [r3, #16]
 761:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 4880              		.loc 1 761 0
 4881 00a2 9A74     		strb	r2, [r3, #18]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 133


 766:Modules/mpu6050/inv_mpu.c **** 	/* Handled in next call to mpu_set_bypass. */
 4882              		.loc 1 766 0
 4883 00a4 0122     		movs	r2, #1
 4884 00a6 1A73     		strb	r2, [r3, #12]
 768:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.latched_int = 0;
 4885              		.loc 1 768 0
 4886 00a8 83F82220 		strb	r2, [r3, #34]
 769:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.int_motion_only = 0;
 4887              		.loc 1 769 0
 4888 00ac 0022     		movs	r2, #0
 4889 00ae 83F82320 		strb	r2, [r3, #35]
 770:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lp_accel_mode = 0;
 4890              		.loc 1 770 0
 4891 00b2 5A75     		strb	r2, [r3, #21]
 771:Modules/mpu6050/inv_mpu.c **** 	memset(&st.chip_cfg.cache, 0, sizeof(st.chip_cfg.cache));
 4892              		.loc 1 771 0
 4893 00b4 1A75     		strb	r2, [r3, #20]
 772:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.dmp_on = 0;
 4894              		.loc 1 772 0
 4895 00b6 C3F81620 		str	r2, [r3, #22]	@ unaligned
 4896 00ba C3F81A20 		str	r2, [r3, #26]	@ unaligned
 4897 00be C3F81E20 		str	r2, [r3, #30]	@ unaligned
 773:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.dmp_loaded = 0;
 4898              		.loc 1 773 0
 4899 00c2 83F82420 		strb	r2, [r3, #36]
 774:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.dmp_sample_rate = 0;
 4900              		.loc 1 774 0
 4901 00c6 83F82520 		strb	r2, [r3, #37]
 775:Modules/mpu6050/inv_mpu.c **** 
 4902              		.loc 1 775 0
 4903 00ca DA84     		strh	r2, [r3, #38]	@ movhi
 777:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4904              		.loc 1 777 0
 4905 00cc 4FF4FA60 		mov	r0, #2000
 4906 00d0 FFF7FEFF 		bl	mpu_set_gyro_fsr
 4907              	.LVL393:
 4908 00d4 0028     		cmp	r0, #0
 4909 00d6 54D1     		bne	.L496
 779:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4910              		.loc 1 779 0
 4911 00d8 0220     		movs	r0, #2
 4912 00da FFF7FEFF 		bl	mpu_set_accel_fsr
 4913              	.LVL394:
 4914 00de 0028     		cmp	r0, #0
 4915 00e0 52D1     		bne	.L497
 781:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4916              		.loc 1 781 0
 4917 00e2 2A20     		movs	r0, #42
 4918 00e4 FFF7FEFF 		bl	mpu_set_lpf
 4919              	.LVL395:
 4920 00e8 0028     		cmp	r0, #0
 4921 00ea 50D1     		bne	.L498
 783:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4922              		.loc 1 783 0
 4923 00ec 3220     		movs	r0, #50
 4924 00ee FFF7FEFF 		bl	mpu_set_sample_rate
 4925              	.LVL396:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 134


 4926 00f2 0028     		cmp	r0, #0
 4927 00f4 4ED1     		bne	.L499
 785:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4928              		.loc 1 785 0
 4929 00f6 FFF7FEFF 		bl	mpu_configure_fifo
 4930              	.LVL397:
 4931 00fa 0028     		cmp	r0, #0
 4932 00fc 4DD1     		bne	.L500
 797:Modules/mpu6050/inv_mpu.c **** 		return -1;
 4933              		.loc 1 797 0
 4934 00fe FFF7FEFF 		bl	mpu_set_bypass
 4935              	.LVL398:
 4936 0102 0446     		mov	r4, r0
 4937 0104 0028     		cmp	r0, #0
 4938 0106 4BD1     		bne	.L501
 801:Modules/mpu6050/inv_mpu.c **** 	return 0;
 4939              		.loc 1 801 0
 4940 0108 FFF7FEFF 		bl	mpu_set_sensors
 4941              	.LVL399:
 4942              	.L484:
 803:Modules/mpu6050/inv_mpu.c **** 
 4943              		.loc 1 803 0
 4944 010c 2046     		mov	r0, r4
 4945 010e 02B0     		add	sp, sp, #8
 4946              	.LCFI114:
 4947              		.cfi_remember_state
 4948              		.cfi_def_cfa_offset 8
 4949              		@ sp needed
 4950 0110 10BD     		pop	{r4, pc}
 4951              	.LVL400:
 4952              	.L503:
 4953              	.LCFI115:
 4954              		.cfi_restore_state
 714:Modules/mpu6050/inv_mpu.c **** 		else if (rev == 2)
 4955              		.loc 1 714 0
 4956 0112 254B     		ldr	r3, .L506
 4957 0114 0122     		movs	r2, #1
 4958 0116 DA74     		strb	r2, [r3, #19]
 4959 0118 B9E7     		b	.L488
 4960              	.L489:
 718:Modules/mpu6050/inv_mpu.c **** 			return -1;
 4961              		.loc 1 718 0
 4962 011a 2448     		ldr	r0, .L506+4
 4963 011c FFF7FEFF 		bl	printf
 4964              	.LVL401:
 719:Modules/mpu6050/inv_mpu.c **** 		}
 4965              		.loc 1 719 0
 4966 0120 4FF0FF34 		mov	r4, #-1
 4967 0124 F2E7     		b	.L484
 4968              	.LVL402:
 4969              	.L486:
 722:Modules/mpu6050/inv_mpu.c **** 			return -1;
 4970              		.loc 1 722 0
 4971 0126 204B     		ldr	r3, .L506
 4972 0128 5868     		ldr	r0, [r3, #4]
 4973 012a 1968     		ldr	r1, [r3]
 4974              	.LVL403:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 135


 4975 012c 6B46     		mov	r3, sp
 4976 012e 0122     		movs	r2, #1
 4977 0130 C978     		ldrb	r1, [r1, #3]	@ zero_extendqisi2
 4978 0132 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4979 0134 FFF7FEFF 		bl	mod_Mpu_Read
 4980              	.LVL404:
 4981 0138 00BB     		cbnz	r0, .L495
 724:Modules/mpu6050/inv_mpu.c **** 		if (!rev) {
 4982              		.loc 1 724 0
 4983 013a 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
 4984              	.LVL405:
 725:Modules/mpu6050/inv_mpu.c **** 			log_e("Product ID read as 0 indicates device is either "
 4985              		.loc 1 725 0
 4986 013e 13F00F03 		ands	r3, r3, #15
 4987              	.LVL406:
 4988 0142 05D0     		beq	.L504
 729:Modules/mpu6050/inv_mpu.c **** 			log_i("Half sensitivity part found.\n");
 4989              		.loc 1 729 0
 4990 0144 042B     		cmp	r3, #4
 4991 0146 09D0     		beq	.L505
 733:Modules/mpu6050/inv_mpu.c **** 	}
 4992              		.loc 1 733 0
 4993 0148 174B     		ldr	r3, .L506
 4994 014a 0022     		movs	r2, #0
 4995 014c DA74     		strb	r2, [r3, #19]
 4996 014e 9EE7     		b	.L488
 4997              	.L504:
 726:Modules/mpu6050/inv_mpu.c **** 				  "incompatible or an MPU3050.\n");
 4998              		.loc 1 726 0
 4999 0150 1748     		ldr	r0, .L506+8
 5000 0152 FFF7FEFF 		bl	puts
 5001              	.LVL407:
 728:Modules/mpu6050/inv_mpu.c **** 		} else if (rev == 4) {
 5002              		.loc 1 728 0
 5003 0156 4FF0FF34 		mov	r4, #-1
 5004 015a D7E7     		b	.L484
 5005              	.LVL408:
 5006              	.L505:
 730:Modules/mpu6050/inv_mpu.c **** 			st.chip_cfg.accel_half = 1;
 5007              		.loc 1 730 0
 5008 015c 1548     		ldr	r0, .L506+12
 5009 015e FFF7FEFF 		bl	puts
 5010              	.LVL409:
 731:Modules/mpu6050/inv_mpu.c **** 		} else
 5011              		.loc 1 731 0
 5012 0162 114B     		ldr	r3, .L506
 5013 0164 0122     		movs	r2, #1
 5014 0166 DA74     		strb	r2, [r3, #19]
 5015 0168 91E7     		b	.L488
 5016              	.L492:
 696:Modules/mpu6050/inv_mpu.c **** 	delay_ms(100);
 5017              		.loc 1 696 0
 5018 016a 4FF0FF34 		mov	r4, #-1
 5019 016e CDE7     		b	.L484
 5020              	.L493:
 702:Modules/mpu6050/inv_mpu.c **** 
 5021              		.loc 1 702 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 136


 5022 0170 4FF0FF34 		mov	r4, #-1
 5023 0174 CAE7     		b	.L484
 5024              	.L494:
 707:Modules/mpu6050/inv_mpu.c **** 	rev = ((data[5] & 0x01) << 2) | ((data[3] & 0x01) << 1) |
 5025              		.loc 1 707 0
 5026 0176 4FF0FF34 		mov	r4, #-1
 5027 017a C7E7     		b	.L484
 5028              	.L495:
 723:Modules/mpu6050/inv_mpu.c **** 		rev = data[0] & 0x0F;
 5029              		.loc 1 723 0
 5030 017c 4FF0FF34 		mov	r4, #-1
 5031 0180 C4E7     		b	.L484
 5032              	.L496:
 778:Modules/mpu6050/inv_mpu.c **** 	if (mpu_set_accel_fsr(2))
 5033              		.loc 1 778 0
 5034 0182 4FF0FF34 		mov	r4, #-1
 5035 0186 C1E7     		b	.L484
 5036              	.L497:
 780:Modules/mpu6050/inv_mpu.c **** 	if (mpu_set_lpf(42))
 5037              		.loc 1 780 0
 5038 0188 4FF0FF34 		mov	r4, #-1
 5039 018c BEE7     		b	.L484
 5040              	.L498:
 782:Modules/mpu6050/inv_mpu.c **** 	if (mpu_set_sample_rate(50))
 5041              		.loc 1 782 0
 5042 018e 4FF0FF34 		mov	r4, #-1
 5043 0192 BBE7     		b	.L484
 5044              	.L499:
 784:Modules/mpu6050/inv_mpu.c **** 	if (mpu_configure_fifo(0))
 5045              		.loc 1 784 0
 5046 0194 4FF0FF34 		mov	r4, #-1
 5047 0198 B8E7     		b	.L484
 5048              	.L500:
 786:Modules/mpu6050/inv_mpu.c **** 
 5049              		.loc 1 786 0
 5050 019a 4FF0FF34 		mov	r4, #-1
 5051 019e B5E7     		b	.L484
 5052              	.L501:
 798:Modules/mpu6050/inv_mpu.c **** #endif
 5053              		.loc 1 798 0
 5054 01a0 4FF0FF34 		mov	r4, #-1
 5055 01a4 B2E7     		b	.L484
 5056              	.L507:
 5057 01a6 00BF     		.align	2
 5058              	.L506:
 5059 01a8 00000000 		.word	.LANCHOR0
 5060 01ac 00000000 		.word	.LC1
 5061 01b0 28000000 		.word	.LC2
 5062 01b4 74000000 		.word	.LC3
 5063              		.cfi_endproc
 5064              	.LFE69:
 5066              		.section	.text.mpu_write_mem,"ax",%progbits
 5067              		.align	1
 5068              		.global	mpu_write_mem
 5069              		.syntax unified
 5070              		.thumb
 5071              		.thumb_func
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 137


 5072              		.fpu softvfp
 5074              	mpu_write_mem:
 5075              	.LFB103:
2080:Modules/mpu6050/inv_mpu.c **** 
2081:Modules/mpu6050/inv_mpu.c **** /**
2082:Modules/mpu6050/inv_mpu.c ****  *  @brief      Trigger gyro/accel/compass self-test.
2083:Modules/mpu6050/inv_mpu.c ****  *  On success/error, the self-test returns a mask representing the sensor(s)
2084:Modules/mpu6050/inv_mpu.c ****  *  that failed. For each bit, a one (1) represents a "pass" case; conversely,
2085:Modules/mpu6050/inv_mpu.c ****  *  a zero (0) indicates a failure.
2086:Modules/mpu6050/inv_mpu.c ****  *
2087:Modules/mpu6050/inv_mpu.c ****  *  \n The mask is defined as follows:
2088:Modules/mpu6050/inv_mpu.c ****  *  \n Bit 0:   Gyro.
2089:Modules/mpu6050/inv_mpu.c ****  *  \n Bit 1:   Accel.
2090:Modules/mpu6050/inv_mpu.c ****  *  \n Bit 2:   Compass.
2091:Modules/mpu6050/inv_mpu.c ****  *
2092:Modules/mpu6050/inv_mpu.c ****  *  \n Currently, the hardware self-test is unsupported for MPU6500. However,
2093:Modules/mpu6050/inv_mpu.c ****  *  this function can still be used to obtain the accel and gyro biases.
2094:Modules/mpu6050/inv_mpu.c ****  *
2095:Modules/mpu6050/inv_mpu.c ****  *  \n This function must be called with the device either face-up or face-down
2096:Modules/mpu6050/inv_mpu.c ****  *  (z-axis is parallel to gravity).
2097:Modules/mpu6050/inv_mpu.c ****  *  @param[out] gyro        Gyro biases in q16 format.
2098:Modules/mpu6050/inv_mpu.c ****  *  @param[out] accel       Accel biases (if applicable) in q16 format.
2099:Modules/mpu6050/inv_mpu.c ****  *  @return     Result mask (see above).
2100:Modules/mpu6050/inv_mpu.c ****  */
2101:Modules/mpu6050/inv_mpu.c **** int mpu_run_self_test(long *gyro, long *accel)
2102:Modules/mpu6050/inv_mpu.c **** {
2103:Modules/mpu6050/inv_mpu.c **** #ifdef MPU6050
2104:Modules/mpu6050/inv_mpu.c **** 	const unsigned char tries = 2;
2105:Modules/mpu6050/inv_mpu.c **** 	long gyro_st[3], accel_st[3];
2106:Modules/mpu6050/inv_mpu.c **** 	unsigned char accel_result, gyro_result;
2107:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
2108:Modules/mpu6050/inv_mpu.c **** 	unsigned char compass_result;
2109:Modules/mpu6050/inv_mpu.c **** #endif
2110:Modules/mpu6050/inv_mpu.c **** 	int ii;
2111:Modules/mpu6050/inv_mpu.c **** #endif
2112:Modules/mpu6050/inv_mpu.c **** 	int result;
2113:Modules/mpu6050/inv_mpu.c **** 	unsigned char accel_fsr, fifo_sensors, sensors_on;
2114:Modules/mpu6050/inv_mpu.c **** 	unsigned short gyro_fsr, sample_rate, lpf;
2115:Modules/mpu6050/inv_mpu.c **** 	unsigned char dmp_was_on;
2116:Modules/mpu6050/inv_mpu.c **** 
2117:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.dmp_on) {
2118:Modules/mpu6050/inv_mpu.c **** 		mpu_set_dmp_state(0);
2119:Modules/mpu6050/inv_mpu.c **** 		dmp_was_on = 1;
2120:Modules/mpu6050/inv_mpu.c **** 	} else
2121:Modules/mpu6050/inv_mpu.c **** 		dmp_was_on = 0;
2122:Modules/mpu6050/inv_mpu.c **** 
2123:Modules/mpu6050/inv_mpu.c **** 	/* Get initial settings. */
2124:Modules/mpu6050/inv_mpu.c **** 	mpu_get_gyro_fsr(&gyro_fsr);
2125:Modules/mpu6050/inv_mpu.c **** 	mpu_get_accel_fsr(&accel_fsr);
2126:Modules/mpu6050/inv_mpu.c **** 	mpu_get_lpf(&lpf);
2127:Modules/mpu6050/inv_mpu.c **** 	mpu_get_sample_rate(&sample_rate);
2128:Modules/mpu6050/inv_mpu.c **** 	sensors_on = st.chip_cfg.sensors;
2129:Modules/mpu6050/inv_mpu.c **** 	mpu_get_fifo_config(&fifo_sensors);
2130:Modules/mpu6050/inv_mpu.c **** 
2131:Modules/mpu6050/inv_mpu.c **** 	/* For older chips, the self-test will be different. */
2132:Modules/mpu6050/inv_mpu.c **** #if defined MPU6050
2133:Modules/mpu6050/inv_mpu.c **** 	for (ii = 0; ii < tries; ii++)
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 138


2134:Modules/mpu6050/inv_mpu.c **** 		if (!get_st_biases(gyro, accel, 0))
2135:Modules/mpu6050/inv_mpu.c **** 			break;
2136:Modules/mpu6050/inv_mpu.c **** 	if (ii == tries) {
2137:Modules/mpu6050/inv_mpu.c **** 		/* If we reach this point, we most likely encountered an I2C error.
2138:Modules/mpu6050/inv_mpu.c **** 		 * We'll just report an error for all three sensors.
2139:Modules/mpu6050/inv_mpu.c **** 		 */
2140:Modules/mpu6050/inv_mpu.c **** 		result = 0;
2141:Modules/mpu6050/inv_mpu.c **** 		goto restore;
2142:Modules/mpu6050/inv_mpu.c **** 	}
2143:Modules/mpu6050/inv_mpu.c **** 	for (ii = 0; ii < tries; ii++)
2144:Modules/mpu6050/inv_mpu.c **** 		if (!get_st_biases(gyro_st, accel_st, 1))
2145:Modules/mpu6050/inv_mpu.c **** 			break;
2146:Modules/mpu6050/inv_mpu.c **** 	if (ii == tries) {
2147:Modules/mpu6050/inv_mpu.c **** 		/* Again, probably an I2C error. */
2148:Modules/mpu6050/inv_mpu.c **** 		result = 0;
2149:Modules/mpu6050/inv_mpu.c **** 		goto restore;
2150:Modules/mpu6050/inv_mpu.c **** 	}
2151:Modules/mpu6050/inv_mpu.c **** 	accel_result = accel_self_test(accel, accel_st);
2152:Modules/mpu6050/inv_mpu.c **** 	gyro_result = gyro_self_test(gyro, gyro_st);
2153:Modules/mpu6050/inv_mpu.c **** 
2154:Modules/mpu6050/inv_mpu.c **** 	result = 0;
2155:Modules/mpu6050/inv_mpu.c **** 	if (!gyro_result)
2156:Modules/mpu6050/inv_mpu.c **** 		result |= 0x01;
2157:Modules/mpu6050/inv_mpu.c **** 	if (!accel_result)
2158:Modules/mpu6050/inv_mpu.c **** 		result |= 0x02;
2159:Modules/mpu6050/inv_mpu.c **** 
2160:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
2161:Modules/mpu6050/inv_mpu.c **** 	compass_result = compass_self_test();
2162:Modules/mpu6050/inv_mpu.c ****     if (!compass_result)
2163:Modules/mpu6050/inv_mpu.c ****         result |= 0x04;
2164:Modules/mpu6050/inv_mpu.c **** #endif
2165:Modules/mpu6050/inv_mpu.c **** 	restore:
2166:Modules/mpu6050/inv_mpu.c **** #elif defined MPU6500
2167:Modules/mpu6050/inv_mpu.c **** 	/* For now, this function will return a "pass" result for all three sensors
2168:Modules/mpu6050/inv_mpu.c ****      * for compatibility with current test applications.
2169:Modules/mpu6050/inv_mpu.c ****      */
2170:Modules/mpu6050/inv_mpu.c ****     get_st_biases(gyro, accel, 0);
2171:Modules/mpu6050/inv_mpu.c ****     result = 0x7;
2172:Modules/mpu6050/inv_mpu.c **** #endif
2173:Modules/mpu6050/inv_mpu.c **** 	/* Set to invalid values to ensure no I2C writes are skipped. */
2174:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.gyro_fsr = 0xFF;
2175:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.accel_fsr = 0xFF;
2176:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lpf = 0xFF;
2177:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.sample_rate = 0xFFFF;
2178:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.sensors = 0xFF;
2179:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.fifo_enable = 0xFF;
2180:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.clk_src = INV_CLK_PLL;
2181:Modules/mpu6050/inv_mpu.c **** 	mpu_set_gyro_fsr(gyro_fsr);
2182:Modules/mpu6050/inv_mpu.c **** 	mpu_set_accel_fsr(accel_fsr);
2183:Modules/mpu6050/inv_mpu.c **** 	mpu_set_lpf(lpf);
2184:Modules/mpu6050/inv_mpu.c **** 	mpu_set_sample_rate(sample_rate);
2185:Modules/mpu6050/inv_mpu.c **** 	mpu_set_sensors(sensors_on);
2186:Modules/mpu6050/inv_mpu.c **** 	mpu_configure_fifo(fifo_sensors);
2187:Modules/mpu6050/inv_mpu.c **** 
2188:Modules/mpu6050/inv_mpu.c **** 	if (dmp_was_on)
2189:Modules/mpu6050/inv_mpu.c **** 		mpu_set_dmp_state(1);
2190:Modules/mpu6050/inv_mpu.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 139


2191:Modules/mpu6050/inv_mpu.c **** 	return result;
2192:Modules/mpu6050/inv_mpu.c **** }
2193:Modules/mpu6050/inv_mpu.c **** 
2194:Modules/mpu6050/inv_mpu.c **** /**
2195:Modules/mpu6050/inv_mpu.c ****  *  @brief      Write to the DMP memory.
2196:Modules/mpu6050/inv_mpu.c ****  *  This function prevents I2C writes past the bank boundaries. The DMP memory
2197:Modules/mpu6050/inv_mpu.c ****  *  is only accessible when the chip is awake.
2198:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  mem_addr    Memory location (bank << 8 | start address)
2199:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  length      Number of bytes to write.
2200:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  data        Bytes to write to memory.
2201:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
2202:Modules/mpu6050/inv_mpu.c ****  */
2203:Modules/mpu6050/inv_mpu.c **** int mpu_write_mem(unsigned short mem_addr, unsigned short length,
2204:Modules/mpu6050/inv_mpu.c **** 				  unsigned char *data)
2205:Modules/mpu6050/inv_mpu.c **** {
 5076              		.loc 1 2205 0
 5077              		.cfi_startproc
 5078              		@ args = 0, pretend = 0, frame = 8
 5079              		@ frame_needed = 0, uses_anonymous_args = 0
 5080              	.LVL410:
2206:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
2207:Modules/mpu6050/inv_mpu.c **** 
2208:Modules/mpu6050/inv_mpu.c **** 	if (!data)
 5081              		.loc 1 2208 0
 5082 0000 5AB3     		cbz	r2, .L510
2205:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
 5083              		.loc 1 2205 0
 5084 0002 70B5     		push	{r4, r5, r6, lr}
 5085              	.LCFI116:
 5086              		.cfi_def_cfa_offset 16
 5087              		.cfi_offset 4, -16
 5088              		.cfi_offset 5, -12
 5089              		.cfi_offset 6, -8
 5090              		.cfi_offset 14, -4
 5091 0004 82B0     		sub	sp, sp, #8
 5092              	.LCFI117:
 5093              		.cfi_def_cfa_offset 24
 5094 0006 1646     		mov	r6, r2
2209:Modules/mpu6050/inv_mpu.c **** 		return -1;
2210:Modules/mpu6050/inv_mpu.c **** 	if (!st.chip_cfg.sensors)
 5095              		.loc 1 2210 0
 5096 0008 1A4A     		ldr	r2, .L520
 5097              	.LVL411:
 5098 000a 927A     		ldrb	r2, [r2, #10]	@ zero_extendqisi2
 5099 000c 42B3     		cbz	r2, .L511
2211:Modules/mpu6050/inv_mpu.c **** 		return -1;
2212:Modules/mpu6050/inv_mpu.c **** 
2213:Modules/mpu6050/inv_mpu.c **** 	tmp[0] = (unsigned char)(mem_addr >> 8);
 5100              		.loc 1 2213 0
 5101 000e 020A     		lsrs	r2, r0, #8
 5102 0010 8DF80420 		strb	r2, [sp, #4]
2214:Modules/mpu6050/inv_mpu.c **** 	tmp[1] = (unsigned char)(mem_addr & 0xFF);
 5103              		.loc 1 2214 0
 5104 0014 C0B2     		uxtb	r0, r0
 5105              	.LVL412:
 5106 0016 8DF80500 		strb	r0, [sp, #5]
2215:Modules/mpu6050/inv_mpu.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 140


2216:Modules/mpu6050/inv_mpu.c **** 	/* Check bank boundaries. */
2217:Modules/mpu6050/inv_mpu.c **** 	if (tmp[1] + length > st.hw->bank_size)
 5107              		.loc 1 2217 0
 5108 001a 0844     		add	r0, r0, r1
 5109 001c 154A     		ldr	r2, .L520
 5110 001e 5568     		ldr	r5, [r2, #4]
 5111 0020 6A89     		ldrh	r2, [r5, #10]
 5112 0022 9042     		cmp	r0, r2
 5113 0024 1FDC     		bgt	.L512
 5114 0026 0C46     		mov	r4, r1
2218:Modules/mpu6050/inv_mpu.c **** 		return -1;
2219:Modules/mpu6050/inv_mpu.c **** 
2220:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->bank_sel, 2, tmp))
 5115              		.loc 1 2220 0
 5116 0028 124B     		ldr	r3, .L520
 5117 002a 1968     		ldr	r1, [r3]
 5118              	.LVL413:
 5119 002c 01AB     		add	r3, sp, #4
 5120 002e 0222     		movs	r2, #2
 5121 0030 097E     		ldrb	r1, [r1, #24]	@ zero_extendqisi2
 5122 0032 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 5123 0034 FFF7FEFF 		bl	mod_Mpu_Write
 5124              	.LVL414:
 5125 0038 C0B9     		cbnz	r0, .L513
2221:Modules/mpu6050/inv_mpu.c **** 		return -1;
2222:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->mem_r_w, length, data))
 5126              		.loc 1 2222 0
 5127 003a 0E4B     		ldr	r3, .L520
 5128 003c 5868     		ldr	r0, [r3, #4]
 5129 003e 1968     		ldr	r1, [r3]
 5130 0040 3346     		mov	r3, r6
 5131 0042 2246     		mov	r2, r4
 5132 0044 497D     		ldrb	r1, [r1, #21]	@ zero_extendqisi2
 5133 0046 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5134 0048 FFF7FEFF 		bl	mod_Mpu_Write
 5135              	.LVL415:
 5136 004c 10B9     		cbnz	r0, .L519
2223:Modules/mpu6050/inv_mpu.c **** 		return -1;
2224:Modules/mpu6050/inv_mpu.c **** 	return 0;
 5137              		.loc 1 2224 0
 5138 004e 0020     		movs	r0, #0
 5139              	.L508:
2225:Modules/mpu6050/inv_mpu.c **** }
 5140              		.loc 1 2225 0
 5141 0050 02B0     		add	sp, sp, #8
 5142              	.LCFI118:
 5143              		.cfi_remember_state
 5144              		.cfi_def_cfa_offset 16
 5145              		@ sp needed
 5146 0052 70BD     		pop	{r4, r5, r6, pc}
 5147              	.LVL416:
 5148              	.L519:
 5149              	.LCFI119:
 5150              		.cfi_restore_state
2223:Modules/mpu6050/inv_mpu.c **** 		return -1;
 5151              		.loc 1 2223 0
 5152 0054 4FF0FF30 		mov	r0, #-1
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 141


 5153 0058 FAE7     		b	.L508
 5154              	.LVL417:
 5155              	.L510:
 5156              	.LCFI120:
 5157              		.cfi_def_cfa_offset 0
 5158              		.cfi_restore 4
 5159              		.cfi_restore 5
 5160              		.cfi_restore 6
 5161              		.cfi_restore 14
2209:Modules/mpu6050/inv_mpu.c **** 	if (!st.chip_cfg.sensors)
 5162              		.loc 1 2209 0
 5163 005a 4FF0FF30 		mov	r0, #-1
 5164              	.LVL418:
 5165              		.loc 1 2225 0
 5166 005e 7047     		bx	lr
 5167              	.LVL419:
 5168              	.L511:
 5169              	.LCFI121:
 5170              		.cfi_def_cfa_offset 24
 5171              		.cfi_offset 4, -16
 5172              		.cfi_offset 5, -12
 5173              		.cfi_offset 6, -8
 5174              		.cfi_offset 14, -4
2211:Modules/mpu6050/inv_mpu.c **** 
 5175              		.loc 1 2211 0
 5176 0060 4FF0FF30 		mov	r0, #-1
 5177              	.LVL420:
 5178 0064 F4E7     		b	.L508
 5179              	.L512:
2218:Modules/mpu6050/inv_mpu.c **** 
 5180              		.loc 1 2218 0
 5181 0066 4FF0FF30 		mov	r0, #-1
 5182 006a F1E7     		b	.L508
 5183              	.LVL421:
 5184              	.L513:
2221:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->mem_r_w, length, data))
 5185              		.loc 1 2221 0
 5186 006c 4FF0FF30 		mov	r0, #-1
 5187 0070 EEE7     		b	.L508
 5188              	.L521:
 5189 0072 00BF     		.align	2
 5190              	.L520:
 5191 0074 00000000 		.word	.LANCHOR0
 5192              		.cfi_endproc
 5193              	.LFE103:
 5195              		.section	.text.mpu_read_mem,"ax",%progbits
 5196              		.align	1
 5197              		.global	mpu_read_mem
 5198              		.syntax unified
 5199              		.thumb
 5200              		.thumb_func
 5201              		.fpu softvfp
 5203              	mpu_read_mem:
 5204              	.LFB104:
2226:Modules/mpu6050/inv_mpu.c **** 
2227:Modules/mpu6050/inv_mpu.c **** /**
2228:Modules/mpu6050/inv_mpu.c ****  *  @brief      Read from the DMP memory.
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 142


2229:Modules/mpu6050/inv_mpu.c ****  *  This function prevents I2C reads past the bank boundaries. The DMP memory
2230:Modules/mpu6050/inv_mpu.c ****  *  is only accessible when the chip is awake.
2231:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  mem_addr    Memory location (bank << 8 | start address)
2232:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  length      Number of bytes to read.
2233:Modules/mpu6050/inv_mpu.c ****  *  @param[out] data        Bytes read from memory.
2234:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
2235:Modules/mpu6050/inv_mpu.c ****  */
2236:Modules/mpu6050/inv_mpu.c **** int mpu_read_mem(unsigned short mem_addr, unsigned short length,
2237:Modules/mpu6050/inv_mpu.c **** 				 unsigned char *data)
2238:Modules/mpu6050/inv_mpu.c **** {
 5205              		.loc 1 2238 0
 5206              		.cfi_startproc
 5207              		@ args = 0, pretend = 0, frame = 8
 5208              		@ frame_needed = 0, uses_anonymous_args = 0
 5209              	.LVL422:
2239:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
2240:Modules/mpu6050/inv_mpu.c **** 
2241:Modules/mpu6050/inv_mpu.c **** 	if (!data)
 5210              		.loc 1 2241 0
 5211 0000 5AB3     		cbz	r2, .L524
2238:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[2];
 5212              		.loc 1 2238 0
 5213 0002 70B5     		push	{r4, r5, r6, lr}
 5214              	.LCFI122:
 5215              		.cfi_def_cfa_offset 16
 5216              		.cfi_offset 4, -16
 5217              		.cfi_offset 5, -12
 5218              		.cfi_offset 6, -8
 5219              		.cfi_offset 14, -4
 5220 0004 82B0     		sub	sp, sp, #8
 5221              	.LCFI123:
 5222              		.cfi_def_cfa_offset 24
 5223 0006 1646     		mov	r6, r2
2242:Modules/mpu6050/inv_mpu.c **** 		return -1;
2243:Modules/mpu6050/inv_mpu.c **** 	if (!st.chip_cfg.sensors)
 5224              		.loc 1 2243 0
 5225 0008 1A4A     		ldr	r2, .L534
 5226              	.LVL423:
 5227 000a 927A     		ldrb	r2, [r2, #10]	@ zero_extendqisi2
 5228 000c 42B3     		cbz	r2, .L525
2244:Modules/mpu6050/inv_mpu.c **** 		return -1;
2245:Modules/mpu6050/inv_mpu.c **** 
2246:Modules/mpu6050/inv_mpu.c **** 	tmp[0] = (unsigned char)(mem_addr >> 8);
 5229              		.loc 1 2246 0
 5230 000e 020A     		lsrs	r2, r0, #8
 5231 0010 8DF80420 		strb	r2, [sp, #4]
2247:Modules/mpu6050/inv_mpu.c **** 	tmp[1] = (unsigned char)(mem_addr & 0xFF);
 5232              		.loc 1 2247 0
 5233 0014 C0B2     		uxtb	r0, r0
 5234              	.LVL424:
 5235 0016 8DF80500 		strb	r0, [sp, #5]
2248:Modules/mpu6050/inv_mpu.c **** 
2249:Modules/mpu6050/inv_mpu.c **** 	/* Check bank boundaries. */
2250:Modules/mpu6050/inv_mpu.c **** 	if (tmp[1] + length > st.hw->bank_size)
 5236              		.loc 1 2250 0
 5237 001a 0844     		add	r0, r0, r1
 5238 001c 154A     		ldr	r2, .L534
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 143


 5239 001e 5568     		ldr	r5, [r2, #4]
 5240 0020 6A89     		ldrh	r2, [r5, #10]
 5241 0022 9042     		cmp	r0, r2
 5242 0024 1FDC     		bgt	.L526
 5243 0026 0C46     		mov	r4, r1
2251:Modules/mpu6050/inv_mpu.c **** 		return -1;
2252:Modules/mpu6050/inv_mpu.c **** 
2253:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->bank_sel, 2, tmp))
 5244              		.loc 1 2253 0
 5245 0028 124B     		ldr	r3, .L534
 5246 002a 1968     		ldr	r1, [r3]
 5247              	.LVL425:
 5248 002c 01AB     		add	r3, sp, #4
 5249 002e 0222     		movs	r2, #2
 5250 0030 097E     		ldrb	r1, [r1, #24]	@ zero_extendqisi2
 5251 0032 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 5252 0034 FFF7FEFF 		bl	mod_Mpu_Write
 5253              	.LVL426:
 5254 0038 C0B9     		cbnz	r0, .L527
2254:Modules/mpu6050/inv_mpu.c **** 		return -1;
2255:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->mem_r_w, length, data))
 5255              		.loc 1 2255 0
 5256 003a 0E4B     		ldr	r3, .L534
 5257 003c 5868     		ldr	r0, [r3, #4]
 5258 003e 1968     		ldr	r1, [r3]
 5259 0040 3346     		mov	r3, r6
 5260 0042 2246     		mov	r2, r4
 5261 0044 497D     		ldrb	r1, [r1, #21]	@ zero_extendqisi2
 5262 0046 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5263 0048 FFF7FEFF 		bl	mod_Mpu_Read
 5264              	.LVL427:
 5265 004c 10B9     		cbnz	r0, .L533
2256:Modules/mpu6050/inv_mpu.c **** 		return -1;
2257:Modules/mpu6050/inv_mpu.c **** 	return 0;
 5266              		.loc 1 2257 0
 5267 004e 0020     		movs	r0, #0
 5268              	.L522:
2258:Modules/mpu6050/inv_mpu.c **** }
 5269              		.loc 1 2258 0
 5270 0050 02B0     		add	sp, sp, #8
 5271              	.LCFI124:
 5272              		.cfi_remember_state
 5273              		.cfi_def_cfa_offset 16
 5274              		@ sp needed
 5275 0052 70BD     		pop	{r4, r5, r6, pc}
 5276              	.LVL428:
 5277              	.L533:
 5278              	.LCFI125:
 5279              		.cfi_restore_state
2256:Modules/mpu6050/inv_mpu.c **** 		return -1;
 5280              		.loc 1 2256 0
 5281 0054 4FF0FF30 		mov	r0, #-1
 5282 0058 FAE7     		b	.L522
 5283              	.LVL429:
 5284              	.L524:
 5285              	.LCFI126:
 5286              		.cfi_def_cfa_offset 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 144


 5287              		.cfi_restore 4
 5288              		.cfi_restore 5
 5289              		.cfi_restore 6
 5290              		.cfi_restore 14
2242:Modules/mpu6050/inv_mpu.c **** 	if (!st.chip_cfg.sensors)
 5291              		.loc 1 2242 0
 5292 005a 4FF0FF30 		mov	r0, #-1
 5293              	.LVL430:
 5294              		.loc 1 2258 0
 5295 005e 7047     		bx	lr
 5296              	.LVL431:
 5297              	.L525:
 5298              	.LCFI127:
 5299              		.cfi_def_cfa_offset 24
 5300              		.cfi_offset 4, -16
 5301              		.cfi_offset 5, -12
 5302              		.cfi_offset 6, -8
 5303              		.cfi_offset 14, -4
2244:Modules/mpu6050/inv_mpu.c **** 
 5304              		.loc 1 2244 0
 5305 0060 4FF0FF30 		mov	r0, #-1
 5306              	.LVL432:
 5307 0064 F4E7     		b	.L522
 5308              	.L526:
2251:Modules/mpu6050/inv_mpu.c **** 
 5309              		.loc 1 2251 0
 5310 0066 4FF0FF30 		mov	r0, #-1
 5311 006a F1E7     		b	.L522
 5312              	.LVL433:
 5313              	.L527:
2254:Modules/mpu6050/inv_mpu.c **** 	if (i2c_read(st.hw->addr, st.reg->mem_r_w, length, data))
 5314              		.loc 1 2254 0
 5315 006c 4FF0FF30 		mov	r0, #-1
 5316 0070 EEE7     		b	.L522
 5317              	.L535:
 5318 0072 00BF     		.align	2
 5319              	.L534:
 5320 0074 00000000 		.word	.LANCHOR0
 5321              		.cfi_endproc
 5322              	.LFE104:
 5324              		.section	.text.mpu_load_firmware,"ax",%progbits
 5325              		.align	1
 5326              		.global	mpu_load_firmware
 5327              		.syntax unified
 5328              		.thumb
 5329              		.thumb_func
 5330              		.fpu softvfp
 5332              	mpu_load_firmware:
 5333              	.LFB105:
2259:Modules/mpu6050/inv_mpu.c **** 
2260:Modules/mpu6050/inv_mpu.c **** /**
2261:Modules/mpu6050/inv_mpu.c ****  *  @brief      Load and verify DMP image.
2262:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  length      Length of DMP image.
2263:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  firmware    DMP code.
2264:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  start_addr  Starting address of DMP code memory.
2265:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  sample_rate Fixed sampling rate used when DMP is enabled.
2266:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 145


2267:Modules/mpu6050/inv_mpu.c ****  */
2268:Modules/mpu6050/inv_mpu.c **** int mpu_load_firmware(unsigned short length, const unsigned char *firmware,
2269:Modules/mpu6050/inv_mpu.c **** 					  unsigned short start_addr, unsigned short sample_rate)
2270:Modules/mpu6050/inv_mpu.c **** {
 5334              		.loc 1 2270 0
 5335              		.cfi_startproc
 5336              		@ args = 0, pretend = 0, frame = 24
 5337              		@ frame_needed = 0, uses_anonymous_args = 0
 5338              	.LVL434:
 5339 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5340              	.LCFI128:
 5341              		.cfi_def_cfa_offset 36
 5342              		.cfi_offset 4, -36
 5343              		.cfi_offset 5, -32
 5344              		.cfi_offset 6, -28
 5345              		.cfi_offset 7, -24
 5346              		.cfi_offset 8, -20
 5347              		.cfi_offset 9, -16
 5348              		.cfi_offset 10, -12
 5349              		.cfi_offset 11, -8
 5350              		.cfi_offset 14, -4
 5351 0004 87B0     		sub	sp, sp, #28
 5352              	.LCFI129:
 5353              		.cfi_def_cfa_offset 64
2271:Modules/mpu6050/inv_mpu.c **** 	unsigned short ii;
2272:Modules/mpu6050/inv_mpu.c **** 	unsigned short this_write;
2273:Modules/mpu6050/inv_mpu.c **** 	/* Must divide evenly into st.hw->bank_size to avoid bank crossings. */
2274:Modules/mpu6050/inv_mpu.c **** #define LOAD_CHUNK  (16)
2275:Modules/mpu6050/inv_mpu.c **** 	unsigned char cur[LOAD_CHUNK], tmp[2];
2276:Modules/mpu6050/inv_mpu.c **** 
2277:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.dmp_loaded)
 5354              		.loc 1 2277 0
 5355 0006 2A4C     		ldr	r4, .L548
 5356 0008 94F82540 		ldrb	r4, [r4, #37]	@ zero_extendqisi2
 5357 000c 002C     		cmp	r4, #0
 5358 000e 3CD1     		bne	.L540
2278:Modules/mpu6050/inv_mpu.c **** 		/* DMP should only be loaded once. */
2279:Modules/mpu6050/inv_mpu.c **** 		return -1;
2280:Modules/mpu6050/inv_mpu.c **** 
2281:Modules/mpu6050/inv_mpu.c **** 	if (!firmware)
 5359              		.loc 1 2281 0
 5360 0010 0029     		cmp	r1, #0
 5361 0012 3DD0     		beq	.L541
 5362 0014 9A46     		mov	r10, r3
 5363 0016 9146     		mov	r9, r2
 5364 0018 8846     		mov	r8, r1
 5365 001a 0746     		mov	r7, r0
 5366              	.LVL435:
 5367              	.L538:
2282:Modules/mpu6050/inv_mpu.c **** 		return -1;
2283:Modules/mpu6050/inv_mpu.c **** 	for (ii = 0; ii < length; ii += this_write) {
 5368              		.loc 1 2283 0 discriminator 1
 5369 001c BC42     		cmp	r4, r7
 5370 001e 1BD2     		bcs	.L547
2284:Modules/mpu6050/inv_mpu.c **** 		this_write = min(LOAD_CHUNK, length - ii);
 5371              		.loc 1 2284 0
 5372 0020 3E1B     		subs	r6, r7, r4
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 146


 5373 0022 102E     		cmp	r6, #16
 5374 0024 A8BF     		it	ge
 5375 0026 1026     		movge	r6, #16
 5376 0028 B5B2     		uxth	r5, r6
 5377              	.LVL436:
2285:Modules/mpu6050/inv_mpu.c **** 		if (mpu_write_mem(ii, this_write, (unsigned char*)&firmware[ii]))
 5378              		.loc 1 2285 0
 5379 002a 08EB040B 		add	fp, r8, r4
 5380 002e 5A46     		mov	r2, fp
 5381 0030 2946     		mov	r1, r5
 5382 0032 2046     		mov	r0, r4
 5383 0034 FFF7FEFF 		bl	mpu_write_mem
 5384              	.LVL437:
 5385 0038 68BB     		cbnz	r0, .L542
2286:Modules/mpu6050/inv_mpu.c **** 			return -1;
2287:Modules/mpu6050/inv_mpu.c **** 		if (mpu_read_mem(ii, this_write, cur))
 5386              		.loc 1 2287 0
 5387 003a 02AA     		add	r2, sp, #8
 5388 003c 2946     		mov	r1, r5
 5389 003e 2046     		mov	r0, r4
 5390 0040 FFF7FEFF 		bl	mpu_read_mem
 5391              	.LVL438:
 5392 0044 50BB     		cbnz	r0, .L543
2288:Modules/mpu6050/inv_mpu.c **** 			return -1;
2289:Modules/mpu6050/inv_mpu.c **** 		if (memcmp(firmware+ii, cur, this_write))
 5393              		.loc 1 2289 0
 5394 0046 2A46     		mov	r2, r5
 5395 0048 02A9     		add	r1, sp, #8
 5396 004a 5846     		mov	r0, fp
 5397 004c FFF7FEFF 		bl	memcmp
 5398              	.LVL439:
 5399 0050 38BB     		cbnz	r0, .L544
2283:Modules/mpu6050/inv_mpu.c **** 		this_write = min(LOAD_CHUNK, length - ii);
 5400              		.loc 1 2283 0 discriminator 2
 5401 0052 2C44     		add	r4, r4, r5
 5402              	.LVL440:
 5403 0054 A4B2     		uxth	r4, r4
 5404              	.LVL441:
 5405 0056 E1E7     		b	.L538
 5406              	.LVL442:
 5407              	.L547:
2290:Modules/mpu6050/inv_mpu.c **** 			return -2;
2291:Modules/mpu6050/inv_mpu.c **** 	}
2292:Modules/mpu6050/inv_mpu.c **** 
2293:Modules/mpu6050/inv_mpu.c **** 	/* Set program start address. */
2294:Modules/mpu6050/inv_mpu.c **** 	tmp[0] = start_addr >> 8;
 5408              		.loc 1 2294 0
 5409 0058 4FEA1923 		lsr	r3, r9, #8
 5410 005c 8DF80430 		strb	r3, [sp, #4]
2295:Modules/mpu6050/inv_mpu.c **** 	tmp[1] = start_addr & 0xFF;
 5411              		.loc 1 2295 0
 5412 0060 8DF80590 		strb	r9, [sp, #5]
2296:Modules/mpu6050/inv_mpu.c **** 	if (i2c_write(st.hw->addr, st.reg->prgm_start_h, 2, tmp))
 5413              		.loc 1 2296 0
 5414 0064 124B     		ldr	r3, .L548
 5415 0066 5868     		ldr	r0, [r3, #4]
 5416 0068 1968     		ldr	r1, [r3]
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 147


 5417 006a 01AB     		add	r3, sp, #4
 5418 006c 0222     		movs	r2, #2
 5419 006e 897E     		ldrb	r1, [r1, #26]	@ zero_extendqisi2
 5420 0070 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5421 0072 FFF7FEFF 		bl	mod_Mpu_Write
 5422              	.LVL443:
 5423 0076 B8B9     		cbnz	r0, .L545
2297:Modules/mpu6050/inv_mpu.c **** 		return -1;
2298:Modules/mpu6050/inv_mpu.c **** 
2299:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.dmp_loaded = 1;
 5424              		.loc 1 2299 0
 5425 0078 0D4B     		ldr	r3, .L548
 5426 007a 0122     		movs	r2, #1
 5427 007c 83F82520 		strb	r2, [r3, #37]
2300:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.dmp_sample_rate = sample_rate;
 5428              		.loc 1 2300 0
 5429 0080 A3F826A0 		strh	r10, [r3, #38]	@ movhi
 5430              	.LVL444:
 5431              	.L536:
2301:Modules/mpu6050/inv_mpu.c **** 	return 0;
2302:Modules/mpu6050/inv_mpu.c **** }
 5432              		.loc 1 2302 0
 5433 0084 07B0     		add	sp, sp, #28
 5434              	.LCFI130:
 5435              		.cfi_remember_state
 5436              		.cfi_def_cfa_offset 36
 5437              		@ sp needed
 5438 0086 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5439              	.LVL445:
 5440              	.L540:
 5441              	.LCFI131:
 5442              		.cfi_restore_state
2279:Modules/mpu6050/inv_mpu.c **** 
 5443              		.loc 1 2279 0
 5444 008a 4FF0FF30 		mov	r0, #-1
 5445              	.LVL446:
 5446 008e F9E7     		b	.L536
 5447              	.LVL447:
 5448              	.L541:
2282:Modules/mpu6050/inv_mpu.c **** 	for (ii = 0; ii < length; ii += this_write) {
 5449              		.loc 1 2282 0
 5450 0090 4FF0FF30 		mov	r0, #-1
 5451              	.LVL448:
 5452 0094 F6E7     		b	.L536
 5453              	.LVL449:
 5454              	.L542:
2286:Modules/mpu6050/inv_mpu.c **** 		if (mpu_read_mem(ii, this_write, cur))
 5455              		.loc 1 2286 0
 5456 0096 4FF0FF30 		mov	r0, #-1
 5457 009a F3E7     		b	.L536
 5458              	.L543:
2288:Modules/mpu6050/inv_mpu.c **** 		if (memcmp(firmware+ii, cur, this_write))
 5459              		.loc 1 2288 0
 5460 009c 4FF0FF30 		mov	r0, #-1
 5461 00a0 F0E7     		b	.L536
 5462              	.L544:
2290:Modules/mpu6050/inv_mpu.c **** 	}
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 148


 5463              		.loc 1 2290 0
 5464 00a2 6FF00100 		mvn	r0, #1
 5465 00a6 EDE7     		b	.L536
 5466              	.LVL450:
 5467              	.L545:
2297:Modules/mpu6050/inv_mpu.c **** 
 5468              		.loc 1 2297 0
 5469 00a8 4FF0FF30 		mov	r0, #-1
 5470 00ac EAE7     		b	.L536
 5471              	.L549:
 5472 00ae 00BF     		.align	2
 5473              	.L548:
 5474 00b0 00000000 		.word	.LANCHOR0
 5475              		.cfi_endproc
 5476              	.LFE105:
 5478              		.section	.text.mpu_set_dmp_state,"ax",%progbits
 5479              		.align	1
 5480              		.global	mpu_set_dmp_state
 5481              		.syntax unified
 5482              		.thumb
 5483              		.thumb_func
 5484              		.fpu softvfp
 5486              	mpu_set_dmp_state:
 5487              	.LFB106:
2303:Modules/mpu6050/inv_mpu.c **** 
2304:Modules/mpu6050/inv_mpu.c **** /**
2305:Modules/mpu6050/inv_mpu.c ****  *  @brief      Enable/disable DMP support.
2306:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  enable  1 to turn on the DMP.
2307:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
2308:Modules/mpu6050/inv_mpu.c ****  */
2309:Modules/mpu6050/inv_mpu.c **** int mpu_set_dmp_state(unsigned char enable)
2310:Modules/mpu6050/inv_mpu.c **** {
 5488              		.loc 1 2310 0
 5489              		.cfi_startproc
 5490              		@ args = 0, pretend = 0, frame = 8
 5491              		@ frame_needed = 0, uses_anonymous_args = 0
 5492              	.LVL451:
2311:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp;
2312:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.dmp_on == enable)
 5493              		.loc 1 2312 0
 5494 0000 224B     		ldr	r3, .L559
 5495 0002 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 5496 0006 8342     		cmp	r3, r0
 5497 0008 3AD0     		beq	.L553
2310:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp;
 5498              		.loc 1 2310 0
 5499 000a 30B5     		push	{r4, r5, lr}
 5500              	.LCFI132:
 5501              		.cfi_def_cfa_offset 12
 5502              		.cfi_offset 4, -12
 5503              		.cfi_offset 5, -8
 5504              		.cfi_offset 14, -4
 5505 000c 83B0     		sub	sp, sp, #12
 5506              	.LCFI133:
 5507              		.cfi_def_cfa_offset 24
2313:Modules/mpu6050/inv_mpu.c **** 		return 0;
2314:Modules/mpu6050/inv_mpu.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 149


2315:Modules/mpu6050/inv_mpu.c **** 	if (enable) {
 5508              		.loc 1 2315 0
 5509 000e 10B3     		cbz	r0, .L552
2316:Modules/mpu6050/inv_mpu.c **** 		if (!st.chip_cfg.dmp_loaded)
 5510              		.loc 1 2316 0
 5511 0010 1E4B     		ldr	r3, .L559
 5512 0012 93F82530 		ldrb	r3, [r3, #37]	@ zero_extendqisi2
 5513 0016 002B     		cmp	r3, #0
 5514 0018 34D0     		beq	.L554
2317:Modules/mpu6050/inv_mpu.c **** 			return -1;
2318:Modules/mpu6050/inv_mpu.c **** 		/* Disable data ready interrupt. */
2319:Modules/mpu6050/inv_mpu.c **** 		set_int_enable(0);
 5515              		.loc 1 2319 0
 5516 001a 0020     		movs	r0, #0
 5517              	.LVL452:
 5518 001c FFF7FEFF 		bl	set_int_enable
 5519              	.LVL453:
2320:Modules/mpu6050/inv_mpu.c **** 		/* Disable bypass mode. */
2321:Modules/mpu6050/inv_mpu.c **** 		mpu_set_bypass(0);
 5520              		.loc 1 2321 0
 5521 0020 0020     		movs	r0, #0
 5522 0022 FFF7FEFF 		bl	mpu_set_bypass
 5523              	.LVL454:
2322:Modules/mpu6050/inv_mpu.c **** 		/* Keep constant sample rate, FIFO rate controlled by DMP. */
2323:Modules/mpu6050/inv_mpu.c **** 		mpu_set_sample_rate(st.chip_cfg.dmp_sample_rate);
 5524              		.loc 1 2323 0
 5525 0026 194D     		ldr	r5, .L559
 5526 0028 E88C     		ldrh	r0, [r5, #38]
 5527 002a FFF7FEFF 		bl	mpu_set_sample_rate
 5528              	.LVL455:
2324:Modules/mpu6050/inv_mpu.c **** 		/* Remove FIFO elements. */
2325:Modules/mpu6050/inv_mpu.c **** 		tmp = 0;
 5529              		.loc 1 2325 0
 5530 002e 0024     		movs	r4, #0
 5531 0030 02AB     		add	r3, sp, #8
 5532 0032 03F8014D 		strb	r4, [r3, #-1]!
2326:Modules/mpu6050/inv_mpu.c **** 		i2c_write(st.hw->addr, 0x23, 1, &tmp);
 5533              		.loc 1 2326 0
 5534 0036 6868     		ldr	r0, [r5, #4]
 5535 0038 0122     		movs	r2, #1
 5536 003a 2321     		movs	r1, #35
 5537 003c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5538 003e FFF7FEFF 		bl	mod_Mpu_Write
 5539              	.LVL456:
2327:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.dmp_on = 1;
 5540              		.loc 1 2327 0
 5541 0042 0120     		movs	r0, #1
 5542 0044 85F82400 		strb	r0, [r5, #36]
2328:Modules/mpu6050/inv_mpu.c **** 		/* Enable DMP interrupt. */
2329:Modules/mpu6050/inv_mpu.c **** 		set_int_enable(1);
 5543              		.loc 1 2329 0
 5544 0048 FFF7FEFF 		bl	set_int_enable
 5545              	.LVL457:
2330:Modules/mpu6050/inv_mpu.c **** 		mpu_reset_fifo();
 5546              		.loc 1 2330 0
 5547 004c FFF7FEFF 		bl	mpu_reset_fifo
 5548              	.LVL458:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 150


2331:Modules/mpu6050/inv_mpu.c **** 	} else {
2332:Modules/mpu6050/inv_mpu.c **** 		/* Disable DMP interrupt. */
2333:Modules/mpu6050/inv_mpu.c **** 		set_int_enable(0);
2334:Modules/mpu6050/inv_mpu.c **** 		/* Restore FIFO settings. */
2335:Modules/mpu6050/inv_mpu.c **** 		tmp = st.chip_cfg.fifo_enable;
2336:Modules/mpu6050/inv_mpu.c **** 		i2c_write(st.hw->addr, 0x23, 1, &tmp);
2337:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.dmp_on = 0;
2338:Modules/mpu6050/inv_mpu.c **** 		mpu_reset_fifo();
2339:Modules/mpu6050/inv_mpu.c **** 	}
2340:Modules/mpu6050/inv_mpu.c **** 	return 0;
 5549              		.loc 1 2340 0
 5550 0050 2046     		mov	r0, r4
 5551              	.L550:
2341:Modules/mpu6050/inv_mpu.c **** }
 5552              		.loc 1 2341 0
 5553 0052 03B0     		add	sp, sp, #12
 5554              	.LCFI134:
 5555              		.cfi_remember_state
 5556              		.cfi_def_cfa_offset 12
 5557              		@ sp needed
 5558 0054 30BD     		pop	{r4, r5, pc}
 5559              	.LVL459:
 5560              	.L552:
 5561              	.LCFI135:
 5562              		.cfi_restore_state
2333:Modules/mpu6050/inv_mpu.c **** 		/* Restore FIFO settings. */
 5563              		.loc 1 2333 0
 5564 0056 0020     		movs	r0, #0
 5565              	.LVL460:
 5566 0058 FFF7FEFF 		bl	set_int_enable
 5567              	.LVL461:
2335:Modules/mpu6050/inv_mpu.c **** 		i2c_write(st.hw->addr, 0x23, 1, &tmp);
 5568              		.loc 1 2335 0
 5569 005c 0B4D     		ldr	r5, .L559
 5570 005e 2A7C     		ldrb	r2, [r5, #16]	@ zero_extendqisi2
 5571 0060 02AB     		add	r3, sp, #8
 5572 0062 03F8012D 		strb	r2, [r3, #-1]!
2336:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.dmp_on = 0;
 5573              		.loc 1 2336 0
 5574 0066 6868     		ldr	r0, [r5, #4]
 5575 0068 0122     		movs	r2, #1
 5576 006a 2321     		movs	r1, #35
 5577 006c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5578 006e FFF7FEFF 		bl	mod_Mpu_Write
 5579              	.LVL462:
2337:Modules/mpu6050/inv_mpu.c **** 		mpu_reset_fifo();
 5580              		.loc 1 2337 0
 5581 0072 0024     		movs	r4, #0
 5582 0074 85F82440 		strb	r4, [r5, #36]
2338:Modules/mpu6050/inv_mpu.c **** 	}
 5583              		.loc 1 2338 0
 5584 0078 FFF7FEFF 		bl	mpu_reset_fifo
 5585              	.LVL463:
2340:Modules/mpu6050/inv_mpu.c **** }
 5586              		.loc 1 2340 0
 5587 007c 2046     		mov	r0, r4
 5588 007e E8E7     		b	.L550
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 151


 5589              	.LVL464:
 5590              	.L553:
 5591              	.LCFI136:
 5592              		.cfi_def_cfa_offset 0
 5593              		.cfi_restore 4
 5594              		.cfi_restore 5
 5595              		.cfi_restore 14
2313:Modules/mpu6050/inv_mpu.c **** 
 5596              		.loc 1 2313 0
 5597 0080 0020     		movs	r0, #0
 5598              	.LVL465:
 5599              		.loc 1 2341 0
 5600 0082 7047     		bx	lr
 5601              	.LVL466:
 5602              	.L554:
 5603              	.LCFI137:
 5604              		.cfi_def_cfa_offset 24
 5605              		.cfi_offset 4, -12
 5606              		.cfi_offset 5, -8
 5607              		.cfi_offset 14, -4
2317:Modules/mpu6050/inv_mpu.c **** 		/* Disable data ready interrupt. */
 5608              		.loc 1 2317 0
 5609 0084 4FF0FF30 		mov	r0, #-1
 5610              	.LVL467:
 5611 0088 E3E7     		b	.L550
 5612              	.L560:
 5613 008a 00BF     		.align	2
 5614              	.L559:
 5615 008c 00000000 		.word	.LANCHOR0
 5616              		.cfi_endproc
 5617              	.LFE106:
 5619              		.section	.text.mpu_run_self_test,"ax",%progbits
 5620              		.align	1
 5621              		.global	mpu_run_self_test
 5622              		.syntax unified
 5623              		.thumb
 5624              		.thumb_func
 5625              		.fpu softvfp
 5627              	mpu_run_self_test:
 5628              	.LFB102:
2102:Modules/mpu6050/inv_mpu.c **** #ifdef MPU6050
 5629              		.loc 1 2102 0
 5630              		.cfi_startproc
 5631              		@ args = 0, pretend = 0, frame = 32
 5632              		@ frame_needed = 0, uses_anonymous_args = 0
 5633              	.LVL468:
 5634 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 5635              	.LCFI138:
 5636              		.cfi_def_cfa_offset 24
 5637              		.cfi_offset 4, -24
 5638              		.cfi_offset 5, -20
 5639              		.cfi_offset 6, -16
 5640              		.cfi_offset 7, -12
 5641              		.cfi_offset 8, -8
 5642              		.cfi_offset 14, -4
 5643 0004 88B0     		sub	sp, sp, #32
 5644              	.LCFI139:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 152


 5645              		.cfi_def_cfa_offset 56
 5646 0006 0646     		mov	r6, r0
 5647 0008 0F46     		mov	r7, r1
 5648              	.LVL469:
2117:Modules/mpu6050/inv_mpu.c **** 		mpu_set_dmp_state(0);
 5649              		.loc 1 2117 0
 5650 000a 3C4B     		ldr	r3, .L579
 5651 000c 93F82450 		ldrb	r5, [r3, #36]	@ zero_extendqisi2
 5652 0010 FDB9     		cbnz	r5, .L576
 5653              	.LVL470:
 5654              	.L562:
2124:Modules/mpu6050/inv_mpu.c **** 	mpu_get_accel_fsr(&accel_fsr);
 5655              		.loc 1 2124 0
 5656 0012 01A8     		add	r0, sp, #4
 5657 0014 FFF7FEFF 		bl	mpu_get_gyro_fsr
 5658              	.LVL471:
2125:Modules/mpu6050/inv_mpu.c **** 	mpu_get_lpf(&lpf);
 5659              		.loc 1 2125 0
 5660 0018 0DF10700 		add	r0, sp, #7
 5661 001c FFF7FEFF 		bl	mpu_get_accel_fsr
 5662              	.LVL472:
2126:Modules/mpu6050/inv_mpu.c **** 	mpu_get_sample_rate(&sample_rate);
 5663              		.loc 1 2126 0
 5664 0020 6846     		mov	r0, sp
 5665 0022 FFF7FEFF 		bl	mpu_get_lpf
 5666              	.LVL473:
2127:Modules/mpu6050/inv_mpu.c **** 	sensors_on = st.chip_cfg.sensors;
 5667              		.loc 1 2127 0
 5668 0026 0DF10200 		add	r0, sp, #2
 5669 002a FFF7FEFF 		bl	mpu_get_sample_rate
 5670              	.LVL474:
2128:Modules/mpu6050/inv_mpu.c **** 	mpu_get_fifo_config(&fifo_sensors);
 5671              		.loc 1 2128 0
 5672 002e 334B     		ldr	r3, .L579
 5673 0030 93F80A80 		ldrb	r8, [r3, #10]	@ zero_extendqisi2
 5674              	.LVL475:
2129:Modules/mpu6050/inv_mpu.c **** 
 5675              		.loc 1 2129 0
 5676 0034 0DF10600 		add	r0, sp, #6
 5677 0038 FFF7FEFF 		bl	mpu_get_fifo_config
 5678              	.LVL476:
2133:Modules/mpu6050/inv_mpu.c **** 		if (!get_st_biases(gyro, accel, 0))
 5679              		.loc 1 2133 0
 5680 003c 0024     		movs	r4, #0
 5681              	.LVL477:
 5682              	.L563:
2133:Modules/mpu6050/inv_mpu.c **** 		if (!get_st_biases(gyro, accel, 0))
 5683              		.loc 1 2133 0 is_stmt 0 discriminator 1
 5684 003e 012C     		cmp	r4, #1
 5685 0040 0CDC     		bgt	.L564
2134:Modules/mpu6050/inv_mpu.c **** 			break;
 5686              		.loc 1 2134 0 is_stmt 1
 5687 0042 0022     		movs	r2, #0
 5688 0044 3946     		mov	r1, r7
 5689 0046 3046     		mov	r0, r6
 5690 0048 FFF7FEFF 		bl	get_st_biases
 5691              	.LVL478:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 153


 5692 004c 30B1     		cbz	r0, .L564
2133:Modules/mpu6050/inv_mpu.c **** 		if (!get_st_biases(gyro, accel, 0))
 5693              		.loc 1 2133 0 discriminator 2
 5694 004e 0134     		adds	r4, r4, #1
 5695              	.LVL479:
 5696 0050 F5E7     		b	.L563
 5697              	.LVL480:
 5698              	.L576:
2118:Modules/mpu6050/inv_mpu.c **** 		dmp_was_on = 1;
 5699              		.loc 1 2118 0
 5700 0052 0020     		movs	r0, #0
 5701              	.LVL481:
 5702 0054 FFF7FEFF 		bl	mpu_set_dmp_state
 5703              	.LVL482:
2119:Modules/mpu6050/inv_mpu.c **** 	} else
 5704              		.loc 1 2119 0
 5705 0058 0125     		movs	r5, #1
 5706 005a DAE7     		b	.L562
 5707              	.LVL483:
 5708              	.L564:
2136:Modules/mpu6050/inv_mpu.c **** 		/* If we reach this point, we most likely encountered an I2C error.
 5709              		.loc 1 2136 0
 5710 005c 022C     		cmp	r4, #2
 5711 005e 20D0     		beq	.L572
2143:Modules/mpu6050/inv_mpu.c **** 		if (!get_st_biases(gyro_st, accel_st, 1))
 5712              		.loc 1 2143 0
 5713 0060 0024     		movs	r4, #0
 5714              	.LVL484:
 5715              	.L567:
2143:Modules/mpu6050/inv_mpu.c **** 		if (!get_st_biases(gyro_st, accel_st, 1))
 5716              		.loc 1 2143 0 is_stmt 0 discriminator 1
 5717 0062 012C     		cmp	r4, #1
 5718 0064 07DC     		bgt	.L568
2144:Modules/mpu6050/inv_mpu.c **** 			break;
 5719              		.loc 1 2144 0 is_stmt 1
 5720 0066 0122     		movs	r2, #1
 5721 0068 02A9     		add	r1, sp, #8
 5722 006a 05A8     		add	r0, sp, #20
 5723 006c FFF7FEFF 		bl	get_st_biases
 5724              	.LVL485:
 5725 0070 08B1     		cbz	r0, .L568
2143:Modules/mpu6050/inv_mpu.c **** 		if (!get_st_biases(gyro_st, accel_st, 1))
 5726              		.loc 1 2143 0 discriminator 2
 5727 0072 0134     		adds	r4, r4, #1
 5728              	.LVL486:
 5729 0074 F5E7     		b	.L567
 5730              	.L568:
2146:Modules/mpu6050/inv_mpu.c **** 		/* Again, probably an I2C error. */
 5731              		.loc 1 2146 0
 5732 0076 022C     		cmp	r4, #2
 5733 0078 01D1     		bne	.L577
2148:Modules/mpu6050/inv_mpu.c **** 		goto restore;
 5734              		.loc 1 2148 0
 5735 007a 0024     		movs	r4, #0
 5736              	.LVL487:
 5737 007c 12E0     		b	.L566
 5738              	.LVL488:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 154


 5739              	.L577:
2151:Modules/mpu6050/inv_mpu.c **** 	gyro_result = gyro_self_test(gyro, gyro_st);
 5740              		.loc 1 2151 0
 5741 007e 02A9     		add	r1, sp, #8
 5742 0080 3846     		mov	r0, r7
 5743 0082 FFF7FEFF 		bl	accel_self_test
 5744              	.LVL489:
 5745 0086 C7B2     		uxtb	r7, r0
 5746              	.LVL490:
2152:Modules/mpu6050/inv_mpu.c **** 
 5747              		.loc 1 2152 0
 5748 0088 05A9     		add	r1, sp, #20
 5749 008a 3046     		mov	r0, r6
 5750 008c FFF7FEFF 		bl	gyro_self_test
 5751              	.LVL491:
 5752 0090 C0B2     		uxtb	r0, r0
 5753              	.LVL492:
2155:Modules/mpu6050/inv_mpu.c **** 		result |= 0x01;
 5754              		.loc 1 2155 0
 5755 0092 20B1     		cbz	r0, .L574
2154:Modules/mpu6050/inv_mpu.c **** 	if (!gyro_result)
 5756              		.loc 1 2154 0
 5757 0094 0024     		movs	r4, #0
 5758              	.LVL493:
 5759              	.L570:
2157:Modules/mpu6050/inv_mpu.c **** 		result |= 0x02;
 5760              		.loc 1 2157 0
 5761 0096 2FB9     		cbnz	r7, .L566
2158:Modules/mpu6050/inv_mpu.c **** 
 5762              		.loc 1 2158 0
 5763 0098 44F00204 		orr	r4, r4, #2
 5764              	.LVL494:
 5765 009c 02E0     		b	.L566
 5766              	.LVL495:
 5767              	.L574:
2156:Modules/mpu6050/inv_mpu.c **** 	if (!accel_result)
 5768              		.loc 1 2156 0
 5769 009e 0124     		movs	r4, #1
 5770              	.LVL496:
 5771 00a0 F9E7     		b	.L570
 5772              	.LVL497:
 5773              	.L572:
2140:Modules/mpu6050/inv_mpu.c **** 		goto restore;
 5774              		.loc 1 2140 0
 5775 00a2 0024     		movs	r4, #0
 5776              	.LVL498:
 5777              	.L566:
2174:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.accel_fsr = 0xFF;
 5778              		.loc 1 2174 0
 5779 00a4 154B     		ldr	r3, .L579
 5780 00a6 FF22     		movs	r2, #255
 5781 00a8 1A72     		strb	r2, [r3, #8]
2175:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lpf = 0xFF;
 5782              		.loc 1 2175 0
 5783 00aa 5A72     		strb	r2, [r3, #9]
2176:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.sample_rate = 0xFFFF;
 5784              		.loc 1 2176 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 155


 5785 00ac DA72     		strb	r2, [r3, #11]
2177:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.sensors = 0xFF;
 5786              		.loc 1 2177 0
 5787 00ae 4FF6FF71 		movw	r1, #65535
 5788 00b2 D981     		strh	r1, [r3, #14]	@ movhi
2178:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.fifo_enable = 0xFF;
 5789              		.loc 1 2178 0
 5790 00b4 9A72     		strb	r2, [r3, #10]
2179:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.clk_src = INV_CLK_PLL;
 5791              		.loc 1 2179 0
 5792 00b6 1A74     		strb	r2, [r3, #16]
2180:Modules/mpu6050/inv_mpu.c **** 	mpu_set_gyro_fsr(gyro_fsr);
 5793              		.loc 1 2180 0
 5794 00b8 0122     		movs	r2, #1
 5795 00ba 1A73     		strb	r2, [r3, #12]
2181:Modules/mpu6050/inv_mpu.c **** 	mpu_set_accel_fsr(accel_fsr);
 5796              		.loc 1 2181 0
 5797 00bc BDF80400 		ldrh	r0, [sp, #4]
 5798 00c0 FFF7FEFF 		bl	mpu_set_gyro_fsr
 5799              	.LVL499:
2182:Modules/mpu6050/inv_mpu.c **** 	mpu_set_lpf(lpf);
 5800              		.loc 1 2182 0
 5801 00c4 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
 5802 00c8 FFF7FEFF 		bl	mpu_set_accel_fsr
 5803              	.LVL500:
2183:Modules/mpu6050/inv_mpu.c **** 	mpu_set_sample_rate(sample_rate);
 5804              		.loc 1 2183 0
 5805 00cc BDF80000 		ldrh	r0, [sp]
 5806 00d0 FFF7FEFF 		bl	mpu_set_lpf
 5807              	.LVL501:
2184:Modules/mpu6050/inv_mpu.c **** 	mpu_set_sensors(sensors_on);
 5808              		.loc 1 2184 0
 5809 00d4 BDF80200 		ldrh	r0, [sp, #2]
 5810 00d8 FFF7FEFF 		bl	mpu_set_sample_rate
 5811              	.LVL502:
2185:Modules/mpu6050/inv_mpu.c **** 	mpu_configure_fifo(fifo_sensors);
 5812              		.loc 1 2185 0
 5813 00dc 4046     		mov	r0, r8
 5814 00de FFF7FEFF 		bl	mpu_set_sensors
 5815              	.LVL503:
2186:Modules/mpu6050/inv_mpu.c **** 
 5816              		.loc 1 2186 0
 5817 00e2 9DF80600 		ldrb	r0, [sp, #6]	@ zero_extendqisi2
 5818 00e6 FFF7FEFF 		bl	mpu_configure_fifo
 5819              	.LVL504:
2188:Modules/mpu6050/inv_mpu.c **** 		mpu_set_dmp_state(1);
 5820              		.loc 1 2188 0
 5821 00ea 1DB9     		cbnz	r5, .L578
 5822              	.L561:
2192:Modules/mpu6050/inv_mpu.c **** 
 5823              		.loc 1 2192 0
 5824 00ec 2046     		mov	r0, r4
 5825 00ee 08B0     		add	sp, sp, #32
 5826              	.LCFI140:
 5827              		.cfi_remember_state
 5828              		.cfi_def_cfa_offset 24
 5829              		@ sp needed
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 156


 5830 00f0 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 5831              	.LVL505:
 5832              	.L578:
 5833              	.LCFI141:
 5834              		.cfi_restore_state
2189:Modules/mpu6050/inv_mpu.c **** 
 5835              		.loc 1 2189 0
 5836 00f4 0120     		movs	r0, #1
 5837 00f6 FFF7FEFF 		bl	mpu_set_dmp_state
 5838              	.LVL506:
2191:Modules/mpu6050/inv_mpu.c **** }
 5839              		.loc 1 2191 0
 5840 00fa F7E7     		b	.L561
 5841              	.L580:
 5842              		.align	2
 5843              	.L579:
 5844 00fc 00000000 		.word	.LANCHOR0
 5845              		.cfi_endproc
 5846              	.LFE102:
 5848              		.section	.text.mpu_get_dmp_state,"ax",%progbits
 5849              		.align	1
 5850              		.global	mpu_get_dmp_state
 5851              		.syntax unified
 5852              		.thumb
 5853              		.thumb_func
 5854              		.fpu softvfp
 5856              	mpu_get_dmp_state:
 5857              	.LFB107:
2342:Modules/mpu6050/inv_mpu.c **** 
2343:Modules/mpu6050/inv_mpu.c **** /**
2344:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get DMP state.
2345:Modules/mpu6050/inv_mpu.c ****  *  @param[out] enabled 1 if enabled.
2346:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
2347:Modules/mpu6050/inv_mpu.c ****  */
2348:Modules/mpu6050/inv_mpu.c **** int mpu_get_dmp_state(unsigned char *enabled)
2349:Modules/mpu6050/inv_mpu.c **** {
 5858              		.loc 1 2349 0
 5859              		.cfi_startproc
 5860              		@ args = 0, pretend = 0, frame = 0
 5861              		@ frame_needed = 0, uses_anonymous_args = 0
 5862              		@ link register save eliminated.
 5863              	.LVL507:
2350:Modules/mpu6050/inv_mpu.c **** 	enabled[0] = st.chip_cfg.dmp_on;
 5864              		.loc 1 2350 0
 5865 0000 024B     		ldr	r3, .L582
 5866 0002 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 5867 0006 0370     		strb	r3, [r0]
2351:Modules/mpu6050/inv_mpu.c **** 	return 0;
2352:Modules/mpu6050/inv_mpu.c **** }
 5868              		.loc 1 2352 0
 5869 0008 0020     		movs	r0, #0
 5870              	.LVL508:
 5871 000a 7047     		bx	lr
 5872              	.L583:
 5873              		.align	2
 5874              	.L582:
 5875 000c 00000000 		.word	.LANCHOR0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 157


 5876              		.cfi_endproc
 5877              	.LFE107:
 5879              		.section	.text.setup_compass,"ax",%progbits
 5880              		.align	1
 5881              		.global	setup_compass
 5882              		.syntax unified
 5883              		.thumb
 5884              		.thumb_func
 5885              		.fpu softvfp
 5887              	setup_compass:
 5888              	.LFB108:
2353:Modules/mpu6050/inv_mpu.c **** 
2354:Modules/mpu6050/inv_mpu.c **** 
2355:Modules/mpu6050/inv_mpu.c **** /* This initialization is similar to the one in ak8975.c. */
2356:Modules/mpu6050/inv_mpu.c **** int setup_compass(void)
2357:Modules/mpu6050/inv_mpu.c **** {
 5889              		.loc 1 2357 0
 5890              		.cfi_startproc
 5891              		@ args = 0, pretend = 0, frame = 0
 5892              		@ frame_needed = 0, uses_anonymous_args = 0
 5893              		@ link register save eliminated.
2358:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
2359:Modules/mpu6050/inv_mpu.c **** 	unsigned char data[4], akm_addr;
2360:Modules/mpu6050/inv_mpu.c **** 
2361:Modules/mpu6050/inv_mpu.c ****     mpu_set_bypass(1);
2362:Modules/mpu6050/inv_mpu.c **** 
2363:Modules/mpu6050/inv_mpu.c ****     /* Find compass. Possible addresses range from 0x0C to 0x0F. */
2364:Modules/mpu6050/inv_mpu.c ****     for (akm_addr = 0x0C; akm_addr <= 0x0F; akm_addr++) {
2365:Modules/mpu6050/inv_mpu.c ****         int result;
2366:Modules/mpu6050/inv_mpu.c ****         result = i2c_read(akm_addr, AKM_REG_WHOAMI, 1, data);
2367:Modules/mpu6050/inv_mpu.c ****         if (!result && (data[0] == AKM_WHOAMI))
2368:Modules/mpu6050/inv_mpu.c ****             break;
2369:Modules/mpu6050/inv_mpu.c ****     }
2370:Modules/mpu6050/inv_mpu.c **** 
2371:Modules/mpu6050/inv_mpu.c ****     if (akm_addr > 0x0F) {
2372:Modules/mpu6050/inv_mpu.c ****         log_e("Compass not found.\n");
2373:Modules/mpu6050/inv_mpu.c ****         return -1;
2374:Modules/mpu6050/inv_mpu.c ****     }
2375:Modules/mpu6050/inv_mpu.c **** 
2376:Modules/mpu6050/inv_mpu.c ****     st.chip_cfg.compass_addr = akm_addr;
2377:Modules/mpu6050/inv_mpu.c **** 
2378:Modules/mpu6050/inv_mpu.c ****     data[0] = AKM_POWER_DOWN;
2379:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, data))
2380:Modules/mpu6050/inv_mpu.c ****         return -1;
2381:Modules/mpu6050/inv_mpu.c ****     delay_ms(1);
2382:Modules/mpu6050/inv_mpu.c **** 
2383:Modules/mpu6050/inv_mpu.c ****     data[0] = AKM_FUSE_ROM_ACCESS;
2384:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, data))
2385:Modules/mpu6050/inv_mpu.c ****         return -1;
2386:Modules/mpu6050/inv_mpu.c ****     delay_ms(1);
2387:Modules/mpu6050/inv_mpu.c **** 
2388:Modules/mpu6050/inv_mpu.c ****     /* Get sensitivity adjustment data from fuse ROM. */
2389:Modules/mpu6050/inv_mpu.c ****     if (i2c_read(st.chip_cfg.compass_addr, AKM_REG_ASAX, 3, data))
2390:Modules/mpu6050/inv_mpu.c ****         return -1;
2391:Modules/mpu6050/inv_mpu.c ****     st.chip_cfg.mag_sens_adj[0] = (long)data[0] + 128;
2392:Modules/mpu6050/inv_mpu.c ****     st.chip_cfg.mag_sens_adj[1] = (long)data[1] + 128;
2393:Modules/mpu6050/inv_mpu.c ****     st.chip_cfg.mag_sens_adj[2] = (long)data[2] + 128;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 158


2394:Modules/mpu6050/inv_mpu.c **** 
2395:Modules/mpu6050/inv_mpu.c ****     data[0] = AKM_POWER_DOWN;
2396:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, data))
2397:Modules/mpu6050/inv_mpu.c ****         return -1;
2398:Modules/mpu6050/inv_mpu.c ****     delay_ms(1);
2399:Modules/mpu6050/inv_mpu.c **** 
2400:Modules/mpu6050/inv_mpu.c ****     mpu_set_bypass(0);
2401:Modules/mpu6050/inv_mpu.c **** 
2402:Modules/mpu6050/inv_mpu.c ****     /* Set up master mode, master clock, and ES bit. */
2403:Modules/mpu6050/inv_mpu.c ****     data[0] = 0x40;
2404:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->i2c_mst, 1, data))
2405:Modules/mpu6050/inv_mpu.c ****         return -1;
2406:Modules/mpu6050/inv_mpu.c **** 
2407:Modules/mpu6050/inv_mpu.c ****     /* Slave 0 reads from AKM data registers. */
2408:Modules/mpu6050/inv_mpu.c ****     data[0] = BIT_I2C_READ | st.chip_cfg.compass_addr;
2409:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s0_addr, 1, data))
2410:Modules/mpu6050/inv_mpu.c ****         return -1;
2411:Modules/mpu6050/inv_mpu.c **** 
2412:Modules/mpu6050/inv_mpu.c ****     /* Compass reads start at this register. */
2413:Modules/mpu6050/inv_mpu.c ****     data[0] = AKM_REG_ST1;
2414:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s0_reg, 1, data))
2415:Modules/mpu6050/inv_mpu.c ****         return -1;
2416:Modules/mpu6050/inv_mpu.c **** 
2417:Modules/mpu6050/inv_mpu.c ****     /* Enable slave 0, 8-byte reads. */
2418:Modules/mpu6050/inv_mpu.c ****     data[0] = BIT_SLAVE_EN | 8;
2419:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s0_ctrl, 1, data))
2420:Modules/mpu6050/inv_mpu.c ****         return -1;
2421:Modules/mpu6050/inv_mpu.c **** 
2422:Modules/mpu6050/inv_mpu.c ****     /* Slave 1 changes AKM measurement mode. */
2423:Modules/mpu6050/inv_mpu.c ****     data[0] = st.chip_cfg.compass_addr;
2424:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s1_addr, 1, data))
2425:Modules/mpu6050/inv_mpu.c ****         return -1;
2426:Modules/mpu6050/inv_mpu.c **** 
2427:Modules/mpu6050/inv_mpu.c ****     /* AKM measurement mode register. */
2428:Modules/mpu6050/inv_mpu.c ****     data[0] = AKM_REG_CNTL;
2429:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s1_reg, 1, data))
2430:Modules/mpu6050/inv_mpu.c ****         return -1;
2431:Modules/mpu6050/inv_mpu.c **** 
2432:Modules/mpu6050/inv_mpu.c ****     /* Enable slave 1, 1-byte writes. */
2433:Modules/mpu6050/inv_mpu.c ****     data[0] = BIT_SLAVE_EN | 1;
2434:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s1_ctrl, 1, data))
2435:Modules/mpu6050/inv_mpu.c ****         return -1;
2436:Modules/mpu6050/inv_mpu.c **** 
2437:Modules/mpu6050/inv_mpu.c ****     /* Set slave 1 data. */
2438:Modules/mpu6050/inv_mpu.c ****     data[0] = AKM_SINGLE_MEASUREMENT;
2439:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s1_do, 1, data))
2440:Modules/mpu6050/inv_mpu.c ****         return -1;
2441:Modules/mpu6050/inv_mpu.c **** 
2442:Modules/mpu6050/inv_mpu.c ****     /* Trigger slave 0 and slave 1 actions at each sample. */
2443:Modules/mpu6050/inv_mpu.c ****     data[0] = 0x03;
2444:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->i2c_delay_ctrl, 1, data))
2445:Modules/mpu6050/inv_mpu.c ****         return -1;
2446:Modules/mpu6050/inv_mpu.c **** 
2447:Modules/mpu6050/inv_mpu.c **** #ifdef MPU9150
2448:Modules/mpu6050/inv_mpu.c ****     /* For the MPU9150, the auxiliary I2C bus needs to be set to VDD. */
2449:Modules/mpu6050/inv_mpu.c ****     data[0] = BIT_I2C_MST_VDDIO;
2450:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->yg_offs_tc, 1, data))
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 159


2451:Modules/mpu6050/inv_mpu.c ****         return -1;
2452:Modules/mpu6050/inv_mpu.c **** #endif
2453:Modules/mpu6050/inv_mpu.c **** 
2454:Modules/mpu6050/inv_mpu.c ****     return 0;
2455:Modules/mpu6050/inv_mpu.c **** #else
2456:Modules/mpu6050/inv_mpu.c **** 	return -1;
2457:Modules/mpu6050/inv_mpu.c **** #endif
2458:Modules/mpu6050/inv_mpu.c **** }
 5894              		.loc 1 2458 0
 5895 0000 4FF0FF30 		mov	r0, #-1
 5896 0004 7047     		bx	lr
 5897              		.cfi_endproc
 5898              	.LFE108:
 5900              		.section	.text.mpu_get_compass_reg,"ax",%progbits
 5901              		.align	1
 5902              		.global	mpu_get_compass_reg
 5903              		.syntax unified
 5904              		.thumb
 5905              		.thumb_func
 5906              		.fpu softvfp
 5908              	mpu_get_compass_reg:
 5909              	.LFB109:
2459:Modules/mpu6050/inv_mpu.c **** 
2460:Modules/mpu6050/inv_mpu.c **** /**
2461:Modules/mpu6050/inv_mpu.c ****  *  @brief      Read raw compass data.
2462:Modules/mpu6050/inv_mpu.c ****  *  @param[out] data        Raw data in hardware units.
2463:Modules/mpu6050/inv_mpu.c ****  *  @param[out] timestamp   Timestamp in milliseconds. Null if not needed.
2464:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
2465:Modules/mpu6050/inv_mpu.c ****  */
2466:Modules/mpu6050/inv_mpu.c **** int mpu_get_compass_reg(short *data, unsigned long *timestamp)
2467:Modules/mpu6050/inv_mpu.c **** {
 5910              		.loc 1 2467 0
 5911              		.cfi_startproc
 5912              		@ args = 0, pretend = 0, frame = 0
 5913              		@ frame_needed = 0, uses_anonymous_args = 0
 5914              		@ link register save eliminated.
 5915              	.LVL509:
2468:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
2469:Modules/mpu6050/inv_mpu.c **** 	unsigned char tmp[9];
2470:Modules/mpu6050/inv_mpu.c **** 
2471:Modules/mpu6050/inv_mpu.c ****     if (!(st.chip_cfg.sensors & INV_XYZ_COMPASS))
2472:Modules/mpu6050/inv_mpu.c ****         return -1;
2473:Modules/mpu6050/inv_mpu.c **** 
2474:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_BYPASS
2475:Modules/mpu6050/inv_mpu.c ****     if (i2c_read(st.chip_cfg.compass_addr, AKM_REG_ST1, 8, tmp))
2476:Modules/mpu6050/inv_mpu.c ****         return -1;
2477:Modules/mpu6050/inv_mpu.c ****     tmp[8] = AKM_SINGLE_MEASUREMENT;
2478:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, tmp+8))
2479:Modules/mpu6050/inv_mpu.c ****         return -1;
2480:Modules/mpu6050/inv_mpu.c **** #else
2481:Modules/mpu6050/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->raw_compass, 8, tmp))
2482:Modules/mpu6050/inv_mpu.c ****         return -1;
2483:Modules/mpu6050/inv_mpu.c **** #endif
2484:Modules/mpu6050/inv_mpu.c **** 
2485:Modules/mpu6050/inv_mpu.c **** #if defined AK8975_SECONDARY
2486:Modules/mpu6050/inv_mpu.c ****     /* AK8975 doesn't have the overrun error bit. */
2487:Modules/mpu6050/inv_mpu.c ****     if (!(tmp[0] & AKM_DATA_READY))
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 160


2488:Modules/mpu6050/inv_mpu.c ****         return -2;
2489:Modules/mpu6050/inv_mpu.c ****     if ((tmp[7] & AKM_OVERFLOW) || (tmp[7] & AKM_DATA_ERROR))
2490:Modules/mpu6050/inv_mpu.c ****         return -3;
2491:Modules/mpu6050/inv_mpu.c **** #elif defined AK8963_SECONDARY
2492:Modules/mpu6050/inv_mpu.c ****     /* AK8963 doesn't have the data read error bit. */
2493:Modules/mpu6050/inv_mpu.c ****     if (!(tmp[0] & AKM_DATA_READY) || (tmp[0] & AKM_DATA_OVERRUN))
2494:Modules/mpu6050/inv_mpu.c ****         return -2;
2495:Modules/mpu6050/inv_mpu.c ****     if (tmp[7] & AKM_OVERFLOW)
2496:Modules/mpu6050/inv_mpu.c ****         return -3;
2497:Modules/mpu6050/inv_mpu.c **** #endif
2498:Modules/mpu6050/inv_mpu.c ****     data[0] = (tmp[2] << 8) | tmp[1];
2499:Modules/mpu6050/inv_mpu.c ****     data[1] = (tmp[4] << 8) | tmp[3];
2500:Modules/mpu6050/inv_mpu.c ****     data[2] = (tmp[6] << 8) | tmp[5];
2501:Modules/mpu6050/inv_mpu.c **** 
2502:Modules/mpu6050/inv_mpu.c ****     data[0] = ((long)data[0] * st.chip_cfg.mag_sens_adj[0]) >> 8;
2503:Modules/mpu6050/inv_mpu.c ****     data[1] = ((long)data[1] * st.chip_cfg.mag_sens_adj[1]) >> 8;
2504:Modules/mpu6050/inv_mpu.c ****     data[2] = ((long)data[2] * st.chip_cfg.mag_sens_adj[2]) >> 8;
2505:Modules/mpu6050/inv_mpu.c **** 
2506:Modules/mpu6050/inv_mpu.c ****     if (timestamp)
2507:Modules/mpu6050/inv_mpu.c ****         get_ms(timestamp);
2508:Modules/mpu6050/inv_mpu.c ****     return 0;
2509:Modules/mpu6050/inv_mpu.c **** #else
2510:Modules/mpu6050/inv_mpu.c **** 	return -1;
2511:Modules/mpu6050/inv_mpu.c **** #endif
2512:Modules/mpu6050/inv_mpu.c **** }
 5916              		.loc 1 2512 0
 5917 0000 4FF0FF30 		mov	r0, #-1
 5918              	.LVL510:
 5919 0004 7047     		bx	lr
 5920              		.cfi_endproc
 5921              	.LFE109:
 5923              		.section	.text.mpu_get_compass_fsr,"ax",%progbits
 5924              		.align	1
 5925              		.global	mpu_get_compass_fsr
 5926              		.syntax unified
 5927              		.thumb
 5928              		.thumb_func
 5929              		.fpu softvfp
 5931              	mpu_get_compass_fsr:
 5932              	.LFB110:
2513:Modules/mpu6050/inv_mpu.c **** 
2514:Modules/mpu6050/inv_mpu.c **** /**
2515:Modules/mpu6050/inv_mpu.c ****  *  @brief      Get the compass full-scale range.
2516:Modules/mpu6050/inv_mpu.c ****  *  @param[out] fsr Current full-scale range.
2517:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
2518:Modules/mpu6050/inv_mpu.c ****  */
2519:Modules/mpu6050/inv_mpu.c **** int mpu_get_compass_fsr(unsigned short *fsr)
2520:Modules/mpu6050/inv_mpu.c **** {
 5933              		.loc 1 2520 0
 5934              		.cfi_startproc
 5935              		@ args = 0, pretend = 0, frame = 0
 5936              		@ frame_needed = 0, uses_anonymous_args = 0
 5937              		@ link register save eliminated.
 5938              	.LVL511:
2521:Modules/mpu6050/inv_mpu.c **** #ifdef AK89xx_SECONDARY
2522:Modules/mpu6050/inv_mpu.c **** 	fsr[0] = st.hw->compass_fsr;
2523:Modules/mpu6050/inv_mpu.c ****     return 0;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 161


2524:Modules/mpu6050/inv_mpu.c **** #else
2525:Modules/mpu6050/inv_mpu.c **** 	return -1;
2526:Modules/mpu6050/inv_mpu.c **** #endif
2527:Modules/mpu6050/inv_mpu.c **** }
 5939              		.loc 1 2527 0
 5940 0000 4FF0FF30 		mov	r0, #-1
 5941              	.LVL512:
 5942 0004 7047     		bx	lr
 5943              		.cfi_endproc
 5944              	.LFE110:
 5946              		.section	.text.mpu_lp_motion_interrupt,"ax",%progbits
 5947              		.align	1
 5948              		.global	mpu_lp_motion_interrupt
 5949              		.syntax unified
 5950              		.thumb
 5951              		.thumb_func
 5952              		.fpu softvfp
 5954              	mpu_lp_motion_interrupt:
 5955              	.LFB111:
2528:Modules/mpu6050/inv_mpu.c **** 
2529:Modules/mpu6050/inv_mpu.c **** /**
2530:Modules/mpu6050/inv_mpu.c ****  *  @brief      Enters LP accel motion interrupt mode.
2531:Modules/mpu6050/inv_mpu.c ****  *  The behavior of this feature is very different between the MPU6050 and the
2532:Modules/mpu6050/inv_mpu.c ****  *  MPU6500. Each chip's version of this feature is explained below.
2533:Modules/mpu6050/inv_mpu.c ****  *
2534:Modules/mpu6050/inv_mpu.c ****  *  \n MPU6050:
2535:Modules/mpu6050/inv_mpu.c ****  *  \n When this mode is first enabled, the hardware captures a single accel
2536:Modules/mpu6050/inv_mpu.c ****  *  sample, and subsequent samples are compared with this one to determine if
2537:Modules/mpu6050/inv_mpu.c ****  *  the device is in motion. Therefore, whenever this "locked" sample needs to
2538:Modules/mpu6050/inv_mpu.c ****  *  be changed, this function must be called again.
2539:Modules/mpu6050/inv_mpu.c ****  *
2540:Modules/mpu6050/inv_mpu.c ****  *  \n The hardware motion threshold can be between 32mg and 8160mg in 32mg
2541:Modules/mpu6050/inv_mpu.c ****  *  increments.
2542:Modules/mpu6050/inv_mpu.c ****  *
2543:Modules/mpu6050/inv_mpu.c ****  *  \n Low-power accel mode supports the following frequencies:
2544:Modules/mpu6050/inv_mpu.c ****  *  \n 1.25Hz, 5Hz, 20Hz, 40Hz
2545:Modules/mpu6050/inv_mpu.c ****  *
2546:Modules/mpu6050/inv_mpu.c ****  *  \n MPU6500:
2547:Modules/mpu6050/inv_mpu.c ****  *  \n Unlike the MPU6050 version, the hardware does not "lock in" a reference
2548:Modules/mpu6050/inv_mpu.c ****  *  sample. The hardware monitors the accel data and detects any large change
2549:Modules/mpu6050/inv_mpu.c ****  *  over a short period of time.
2550:Modules/mpu6050/inv_mpu.c ****  *
2551:Modules/mpu6050/inv_mpu.c ****  *  \n The hardware motion threshold can be between 4mg and 1020mg in 4mg
2552:Modules/mpu6050/inv_mpu.c ****  *  increments.
2553:Modules/mpu6050/inv_mpu.c ****  *
2554:Modules/mpu6050/inv_mpu.c ****  *  \n MPU6500 Low-power accel mode supports the following frequencies:
2555:Modules/mpu6050/inv_mpu.c ****  *  \n 1.25Hz, 2.5Hz, 5Hz, 10Hz, 20Hz, 40Hz, 80Hz, 160Hz, 320Hz, 640Hz
2556:Modules/mpu6050/inv_mpu.c ****  *
2557:Modules/mpu6050/inv_mpu.c ****  *  \n\n NOTES:
2558:Modules/mpu6050/inv_mpu.c ****  *  \n The driver will round down @e thresh to the nearest supported value if
2559:Modules/mpu6050/inv_mpu.c ****  *  an unsupported threshold is selected.
2560:Modules/mpu6050/inv_mpu.c ****  *  \n To select a fractional wake-up frequency, round down the value passed to
2561:Modules/mpu6050/inv_mpu.c ****  *  @e lpa_freq.
2562:Modules/mpu6050/inv_mpu.c ****  *  \n The MPU6500 does not support a delay parameter. If this function is used
2563:Modules/mpu6050/inv_mpu.c ****  *  for the MPU6500, the value passed to @e time will be ignored.
2564:Modules/mpu6050/inv_mpu.c ****  *  \n To disable this mode, set @e lpa_freq to zero. The driver will restore
2565:Modules/mpu6050/inv_mpu.c ****  *  the previous configuration.
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 162


2566:Modules/mpu6050/inv_mpu.c ****  *
2567:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  thresh      Motion threshold in mg.
2568:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  time        Duration in milliseconds that the accel data must
2569:Modules/mpu6050/inv_mpu.c ****  *                          exceed @e thresh before motion is reported.
2570:Modules/mpu6050/inv_mpu.c ****  *  @param[in]  lpa_freq    Minimum sampling rate, or zero to disable.
2571:Modules/mpu6050/inv_mpu.c ****  *  @return     0 if successful.
2572:Modules/mpu6050/inv_mpu.c ****  */
2573:Modules/mpu6050/inv_mpu.c **** int mpu_lp_motion_interrupt(unsigned short thresh, unsigned char time,
2574:Modules/mpu6050/inv_mpu.c **** 							unsigned char lpa_freq)
2575:Modules/mpu6050/inv_mpu.c **** {
 5956              		.loc 1 2575 0
 5957              		.cfi_startproc
 5958              		@ args = 0, pretend = 0, frame = 8
 5959              		@ frame_needed = 0, uses_anonymous_args = 0
 5960              	.LVL513:
 5961 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 5962              	.LCFI142:
 5963              		.cfi_def_cfa_offset 20
 5964              		.cfi_offset 4, -20
 5965              		.cfi_offset 5, -16
 5966              		.cfi_offset 6, -12
 5967              		.cfi_offset 7, -8
 5968              		.cfi_offset 14, -4
 5969 0002 83B0     		sub	sp, sp, #12
 5970              	.LCFI143:
 5971              		.cfi_def_cfa_offset 32
2576:Modules/mpu6050/inv_mpu.c **** 	unsigned char data[3];
2577:Modules/mpu6050/inv_mpu.c **** 
2578:Modules/mpu6050/inv_mpu.c **** 	if (lpa_freq) {
 5972              		.loc 1 2578 0
 5973 0004 002A     		cmp	r2, #0
 5974 0006 00F0D780 		beq	.L602
 5975 000a 0E46     		mov	r6, r1
 5976 000c 1746     		mov	r7, r2
 5977              	.LBB4:
2579:Modules/mpu6050/inv_mpu.c **** 		unsigned char thresh_hw;
2580:Modules/mpu6050/inv_mpu.c **** 
2581:Modules/mpu6050/inv_mpu.c **** #if defined MPU6050
2582:Modules/mpu6050/inv_mpu.c **** 		/* 1LSb = 32mg. */
2583:Modules/mpu6050/inv_mpu.c **** 		if (thresh > 8160)
 5978              		.loc 1 2583 0
 5979 000e B0F5FF5F 		cmp	r0, #8160
 5980 0012 04D8     		bhi	.L603
2584:Modules/mpu6050/inv_mpu.c **** 			thresh_hw = 255;
2585:Modules/mpu6050/inv_mpu.c **** 		else if (thresh < 32)
 5981              		.loc 1 2585 0
 5982 0014 1F28     		cmp	r0, #31
 5983 0016 74D9     		bls	.L604
2586:Modules/mpu6050/inv_mpu.c **** 			thresh_hw = 1;
2587:Modules/mpu6050/inv_mpu.c **** 		else
2588:Modules/mpu6050/inv_mpu.c **** 			thresh_hw = thresh >> 5;
 5984              		.loc 1 2588 0
 5985 0018 C0F34715 		ubfx	r5, r0, #5, #8
 5986              	.LVL514:
 5987 001c 00E0     		b	.L589
 5988              	.LVL515:
 5989              	.L603:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 163


2584:Modules/mpu6050/inv_mpu.c **** 			thresh_hw = 255;
 5990              		.loc 1 2584 0
 5991 001e FF25     		movs	r5, #255
 5992              	.L589:
 5993              	.LVL516:
2589:Modules/mpu6050/inv_mpu.c **** #elif defined MPU6500
2590:Modules/mpu6050/inv_mpu.c **** 		/* 1LSb = 4mg. */
2591:Modules/mpu6050/inv_mpu.c ****         if (thresh > 1020)
2592:Modules/mpu6050/inv_mpu.c ****             thresh_hw = 255;
2593:Modules/mpu6050/inv_mpu.c ****         else if (thresh < 4)
2594:Modules/mpu6050/inv_mpu.c ****             thresh_hw = 1;
2595:Modules/mpu6050/inv_mpu.c ****         else
2596:Modules/mpu6050/inv_mpu.c ****             thresh_hw = thresh >> 2;
2597:Modules/mpu6050/inv_mpu.c **** #endif
2598:Modules/mpu6050/inv_mpu.c **** 
2599:Modules/mpu6050/inv_mpu.c **** 		if (!time)
 5994              		.loc 1 2599 0
 5995 0020 06B9     		cbnz	r6, .L590
2600:Modules/mpu6050/inv_mpu.c **** 			/* Minimum duration must be 1ms. */
2601:Modules/mpu6050/inv_mpu.c **** 			time = 1;
 5996              		.loc 1 2601 0
 5997 0022 0126     		movs	r6, #1
 5998              	.L590:
 5999              	.LVL517:
2602:Modules/mpu6050/inv_mpu.c **** 
2603:Modules/mpu6050/inv_mpu.c **** #if defined MPU6050
2604:Modules/mpu6050/inv_mpu.c **** 		if (lpa_freq > 40)
 6000              		.loc 1 2604 0
 6001 0024 282F     		cmp	r7, #40
 6002 0026 00F2D980 		bhi	.L606
2605:Modules/mpu6050/inv_mpu.c **** #elif defined MPU6500
2606:Modules/mpu6050/inv_mpu.c **** 			if (lpa_freq > 640)
2607:Modules/mpu6050/inv_mpu.c **** #endif
2608:Modules/mpu6050/inv_mpu.c **** 			/* At this point, the chip has not been re-configured, so the
2609:Modules/mpu6050/inv_mpu.c **** 			 * function can safely exit.
2610:Modules/mpu6050/inv_mpu.c **** 			 */
2611:Modules/mpu6050/inv_mpu.c **** 			return -1;
2612:Modules/mpu6050/inv_mpu.c **** 
2613:Modules/mpu6050/inv_mpu.c **** 		if (!st.chip_cfg.int_motion_only) {
 6003              		.loc 1 2613 0
 6004 002a 6F4B     		ldr	r3, .L614
 6005 002c 5B7D     		ldrb	r3, [r3, #21]	@ zero_extendqisi2
 6006 002e FBB9     		cbnz	r3, .L592
2614:Modules/mpu6050/inv_mpu.c **** 			/* Store current settings for later. */
2615:Modules/mpu6050/inv_mpu.c **** 			if (st.chip_cfg.dmp_on) {
 6007              		.loc 1 2615 0
 6008 0030 6D4B     		ldr	r3, .L614
 6009 0032 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 6010 0036 002B     		cmp	r3, #0
 6011 0038 65D1     		bne	.L609
2616:Modules/mpu6050/inv_mpu.c **** 				mpu_set_dmp_state(0);
2617:Modules/mpu6050/inv_mpu.c **** 				st.chip_cfg.cache.dmp_on = 1;
2618:Modules/mpu6050/inv_mpu.c **** 			} else
2619:Modules/mpu6050/inv_mpu.c **** 				st.chip_cfg.cache.dmp_on = 0;
 6012              		.loc 1 2619 0
 6013 003a 6B4B     		ldr	r3, .L614
 6014 003c 0022     		movs	r2, #0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 164


 6015              	.LVL518:
 6016 003e 83F82020 		strb	r2, [r3, #32]
 6017              	.LVL519:
 6018              	.L594:
2620:Modules/mpu6050/inv_mpu.c **** 			mpu_get_gyro_fsr(&st.chip_cfg.cache.gyro_fsr);
 6019              		.loc 1 2620 0
 6020 0042 694C     		ldr	r4, .L614
 6021 0044 04F11600 		add	r0, r4, #22
 6022 0048 FFF7FEFF 		bl	mpu_get_gyro_fsr
 6023              	.LVL520:
2621:Modules/mpu6050/inv_mpu.c **** 			mpu_get_accel_fsr(&st.chip_cfg.cache.accel_fsr);
 6024              		.loc 1 2621 0
 6025 004c 04F11800 		add	r0, r4, #24
 6026 0050 FFF7FEFF 		bl	mpu_get_accel_fsr
 6027              	.LVL521:
2622:Modules/mpu6050/inv_mpu.c **** 			mpu_get_lpf(&st.chip_cfg.cache.lpf);
 6028              		.loc 1 2622 0
 6029 0054 04F11A00 		add	r0, r4, #26
 6030 0058 FFF7FEFF 		bl	mpu_get_lpf
 6031              	.LVL522:
2623:Modules/mpu6050/inv_mpu.c **** 			mpu_get_sample_rate(&st.chip_cfg.cache.sample_rate);
 6032              		.loc 1 2623 0
 6033 005c 04F11C00 		add	r0, r4, #28
 6034 0060 FFF7FEFF 		bl	mpu_get_sample_rate
 6035              	.LVL523:
2624:Modules/mpu6050/inv_mpu.c **** 			st.chip_cfg.cache.sensors_on = st.chip_cfg.sensors;
 6036              		.loc 1 2624 0
 6037 0064 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 6038 0066 A377     		strb	r3, [r4, #30]
2625:Modules/mpu6050/inv_mpu.c **** 			mpu_get_fifo_config(&st.chip_cfg.cache.fifo_sensors);
 6039              		.loc 1 2625 0
 6040 0068 04F11F00 		add	r0, r4, #31
 6041 006c FFF7FEFF 		bl	mpu_get_fifo_config
 6042              	.LVL524:
 6043              	.L592:
2626:Modules/mpu6050/inv_mpu.c **** 		}
2627:Modules/mpu6050/inv_mpu.c **** 
2628:Modules/mpu6050/inv_mpu.c **** #ifdef MPU6050
2629:Modules/mpu6050/inv_mpu.c **** 		/* Disable hardware interrupts for now. */
2630:Modules/mpu6050/inv_mpu.c **** 		set_int_enable(0);
 6044              		.loc 1 2630 0
 6045 0070 0020     		movs	r0, #0
 6046 0072 FFF7FEFF 		bl	set_int_enable
 6047              	.LVL525:
2631:Modules/mpu6050/inv_mpu.c **** 
2632:Modules/mpu6050/inv_mpu.c **** 		/* Enter full-power accel-only mode. */
2633:Modules/mpu6050/inv_mpu.c **** 		mpu_lp_accel_mode(0);
 6048              		.loc 1 2633 0
 6049 0076 0020     		movs	r0, #0
 6050 0078 FFF7FEFF 		bl	mpu_lp_accel_mode
 6051              	.LVL526:
2634:Modules/mpu6050/inv_mpu.c **** 
2635:Modules/mpu6050/inv_mpu.c **** 		/* Override current LPF (and HPF) settings to obtain a valid accel
2636:Modules/mpu6050/inv_mpu.c **** 		 * reading.
2637:Modules/mpu6050/inv_mpu.c **** 		 */
2638:Modules/mpu6050/inv_mpu.c **** 		data[0] = INV_FILTER_256HZ_NOLPF2;
 6052              		.loc 1 2638 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 165


 6053 007c 02AB     		add	r3, sp, #8
 6054 007e 0022     		movs	r2, #0
 6055 0080 03F8042D 		strb	r2, [r3, #-4]!
2639:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->lpf, 1, data))
 6056              		.loc 1 2639 0
 6057 0084 584A     		ldr	r2, .L614
 6058 0086 5068     		ldr	r0, [r2, #4]
 6059 0088 1168     		ldr	r1, [r2]
 6060 008a 0122     		movs	r2, #1
 6061 008c 8978     		ldrb	r1, [r1, #2]	@ zero_extendqisi2
 6062 008e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6063 0090 FFF7FEFF 		bl	mod_Mpu_Write
 6064              	.LVL527:
 6065 0094 0028     		cmp	r0, #0
 6066 0096 40F0A480 		bne	.L607
2640:Modules/mpu6050/inv_mpu.c **** 			return -1;
2641:Modules/mpu6050/inv_mpu.c **** 
2642:Modules/mpu6050/inv_mpu.c **** 		/* NOTE: Digital high pass filter should be configured here. Since this
2643:Modules/mpu6050/inv_mpu.c **** 		 * driver doesn't modify those bits anywhere, they should already be
2644:Modules/mpu6050/inv_mpu.c **** 		 * cleared by default.
2645:Modules/mpu6050/inv_mpu.c **** 		 */
2646:Modules/mpu6050/inv_mpu.c **** 
2647:Modules/mpu6050/inv_mpu.c **** 		/* Configure the device to send motion interrupts. */
2648:Modules/mpu6050/inv_mpu.c **** 		/* Enable motion interrupt. */
2649:Modules/mpu6050/inv_mpu.c **** 		data[0] = BIT_MOT_INT_EN;
 6067              		.loc 1 2649 0
 6068 009a 02AB     		add	r3, sp, #8
 6069 009c 4022     		movs	r2, #64
 6070 009e 03F8042D 		strb	r2, [r3, #-4]!
2650:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->int_enable, 1, data))
 6071              		.loc 1 2650 0
 6072 00a2 514A     		ldr	r2, .L614
 6073 00a4 5068     		ldr	r0, [r2, #4]
 6074 00a6 1168     		ldr	r1, [r2]
 6075 00a8 0122     		movs	r2, #1
 6076 00aa C97B     		ldrb	r1, [r1, #15]	@ zero_extendqisi2
 6077 00ac 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6078 00ae FFF7FEFF 		bl	mod_Mpu_Write
 6079              	.LVL528:
 6080 00b2 80B3     		cbz	r0, .L610
 6081              	.LVL529:
 6082              	.L595:
 6083              	.LBE4:
2651:Modules/mpu6050/inv_mpu.c **** 			goto lp_int_restore;
2652:Modules/mpu6050/inv_mpu.c **** 
2653:Modules/mpu6050/inv_mpu.c **** 		/* Set motion interrupt parameters. */
2654:Modules/mpu6050/inv_mpu.c **** 		data[0] = thresh_hw;
2655:Modules/mpu6050/inv_mpu.c **** 		data[1] = time;
2656:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->motion_thr, 2, data))
2657:Modules/mpu6050/inv_mpu.c **** 			goto lp_int_restore;
2658:Modules/mpu6050/inv_mpu.c **** 
2659:Modules/mpu6050/inv_mpu.c **** 		/* Force hardware to "lock" current accel sample. */
2660:Modules/mpu6050/inv_mpu.c **** 		delay_ms(5);
2661:Modules/mpu6050/inv_mpu.c **** 		data[0] = (st.chip_cfg.accel_fsr << 3) | BITS_HPF;
2662:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->accel_cfg, 1, data))
2663:Modules/mpu6050/inv_mpu.c **** 			goto lp_int_restore;
2664:Modules/mpu6050/inv_mpu.c **** 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 166


2665:Modules/mpu6050/inv_mpu.c **** 		/* Set up LP accel mode. */
2666:Modules/mpu6050/inv_mpu.c **** 		data[0] = BIT_LPA_CYCLE;
2667:Modules/mpu6050/inv_mpu.c **** 		if (lpa_freq == 1)
2668:Modules/mpu6050/inv_mpu.c **** 			data[1] = INV_LPA_1_25HZ;
2669:Modules/mpu6050/inv_mpu.c **** 		else if (lpa_freq <= 5)
2670:Modules/mpu6050/inv_mpu.c **** 			data[1] = INV_LPA_5HZ;
2671:Modules/mpu6050/inv_mpu.c **** 		else if (lpa_freq <= 20)
2672:Modules/mpu6050/inv_mpu.c **** 			data[1] = INV_LPA_20HZ;
2673:Modules/mpu6050/inv_mpu.c **** 		else
2674:Modules/mpu6050/inv_mpu.c **** 			data[1] = INV_LPA_40HZ;
2675:Modules/mpu6050/inv_mpu.c **** 		data[1] = (data[1] << 6) | BIT_STBY_XYZG;
2676:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, data))
2677:Modules/mpu6050/inv_mpu.c **** 			goto lp_int_restore;
2678:Modules/mpu6050/inv_mpu.c **** 
2679:Modules/mpu6050/inv_mpu.c **** 		st.chip_cfg.int_motion_only = 1;
2680:Modules/mpu6050/inv_mpu.c **** 		return 0;
2681:Modules/mpu6050/inv_mpu.c **** #elif defined MPU6500
2682:Modules/mpu6050/inv_mpu.c **** 		/* Disable hardware interrupts. */
2683:Modules/mpu6050/inv_mpu.c ****         set_int_enable(0);
2684:Modules/mpu6050/inv_mpu.c **** 
2685:Modules/mpu6050/inv_mpu.c ****         /* Enter full-power accel-only mode, no FIFO/DMP. */
2686:Modules/mpu6050/inv_mpu.c ****         data[0] = 0;
2687:Modules/mpu6050/inv_mpu.c ****         data[1] = 0;
2688:Modules/mpu6050/inv_mpu.c ****         data[2] = BIT_STBY_XYZG;
2689:Modules/mpu6050/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 3, data))
2690:Modules/mpu6050/inv_mpu.c ****             goto lp_int_restore;
2691:Modules/mpu6050/inv_mpu.c **** 
2692:Modules/mpu6050/inv_mpu.c ****         /* Set motion threshold. */
2693:Modules/mpu6050/inv_mpu.c ****         data[0] = thresh_hw;
2694:Modules/mpu6050/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->motion_thr, 1, data))
2695:Modules/mpu6050/inv_mpu.c ****             goto lp_int_restore;
2696:Modules/mpu6050/inv_mpu.c **** 
2697:Modules/mpu6050/inv_mpu.c ****         /* Set wake frequency. */
2698:Modules/mpu6050/inv_mpu.c ****         if (lpa_freq == 1)
2699:Modules/mpu6050/inv_mpu.c ****             data[0] = INV_LPA_1_25HZ;
2700:Modules/mpu6050/inv_mpu.c ****         else if (lpa_freq == 2)
2701:Modules/mpu6050/inv_mpu.c ****             data[0] = INV_LPA_2_5HZ;
2702:Modules/mpu6050/inv_mpu.c ****         else if (lpa_freq <= 5)
2703:Modules/mpu6050/inv_mpu.c ****             data[0] = INV_LPA_5HZ;
2704:Modules/mpu6050/inv_mpu.c ****         else if (lpa_freq <= 10)
2705:Modules/mpu6050/inv_mpu.c ****             data[0] = INV_LPA_10HZ;
2706:Modules/mpu6050/inv_mpu.c ****         else if (lpa_freq <= 20)
2707:Modules/mpu6050/inv_mpu.c ****             data[0] = INV_LPA_20HZ;
2708:Modules/mpu6050/inv_mpu.c ****         else if (lpa_freq <= 40)
2709:Modules/mpu6050/inv_mpu.c ****             data[0] = INV_LPA_40HZ;
2710:Modules/mpu6050/inv_mpu.c ****         else if (lpa_freq <= 80)
2711:Modules/mpu6050/inv_mpu.c ****             data[0] = INV_LPA_80HZ;
2712:Modules/mpu6050/inv_mpu.c ****         else if (lpa_freq <= 160)
2713:Modules/mpu6050/inv_mpu.c ****             data[0] = INV_LPA_160HZ;
2714:Modules/mpu6050/inv_mpu.c ****         else if (lpa_freq <= 320)
2715:Modules/mpu6050/inv_mpu.c ****             data[0] = INV_LPA_320HZ;
2716:Modules/mpu6050/inv_mpu.c ****         else
2717:Modules/mpu6050/inv_mpu.c ****             data[0] = INV_LPA_640HZ;
2718:Modules/mpu6050/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->lp_accel_odr, 1, data))
2719:Modules/mpu6050/inv_mpu.c ****             goto lp_int_restore;
2720:Modules/mpu6050/inv_mpu.c **** 
2721:Modules/mpu6050/inv_mpu.c ****         /* Enable motion interrupt (MPU6500 version). */
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 167


2722:Modules/mpu6050/inv_mpu.c ****         data[0] = BITS_WOM_EN;
2723:Modules/mpu6050/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->accel_intel, 1, data))
2724:Modules/mpu6050/inv_mpu.c ****             goto lp_int_restore;
2725:Modules/mpu6050/inv_mpu.c **** 
2726:Modules/mpu6050/inv_mpu.c ****         /* Enable cycle mode. */
2727:Modules/mpu6050/inv_mpu.c ****         data[0] = BIT_LPA_CYCLE;
2728:Modules/mpu6050/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
2729:Modules/mpu6050/inv_mpu.c ****             goto lp_int_restore;
2730:Modules/mpu6050/inv_mpu.c **** 
2731:Modules/mpu6050/inv_mpu.c ****         /* Enable interrupt. */
2732:Modules/mpu6050/inv_mpu.c ****         data[0] = BIT_MOT_INT_EN;
2733:Modules/mpu6050/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, data))
2734:Modules/mpu6050/inv_mpu.c ****             goto lp_int_restore;
2735:Modules/mpu6050/inv_mpu.c **** 
2736:Modules/mpu6050/inv_mpu.c ****         st.chip_cfg.int_motion_only = 1;
2737:Modules/mpu6050/inv_mpu.c ****         return 0;
2738:Modules/mpu6050/inv_mpu.c **** #endif
2739:Modules/mpu6050/inv_mpu.c **** 	} else {
2740:Modules/mpu6050/inv_mpu.c **** 		/* Don't "restore" the previous state if no state has been saved. */
2741:Modules/mpu6050/inv_mpu.c **** 		int ii;
2742:Modules/mpu6050/inv_mpu.c **** 		char *cache_ptr = (char*)&st.chip_cfg.cache;
2743:Modules/mpu6050/inv_mpu.c **** 		for (ii = 0; ii < sizeof(st.chip_cfg.cache); ii++) {
2744:Modules/mpu6050/inv_mpu.c **** 			if (cache_ptr[ii] != 0)
2745:Modules/mpu6050/inv_mpu.c **** 				goto lp_int_restore;
2746:Modules/mpu6050/inv_mpu.c **** 		}
2747:Modules/mpu6050/inv_mpu.c **** 		/* If we reach this point, motion interrupt mode hasn't been used yet. */
2748:Modules/mpu6050/inv_mpu.c **** 		return -1;
2749:Modules/mpu6050/inv_mpu.c **** 	}
2750:Modules/mpu6050/inv_mpu.c **** 	lp_int_restore:
2751:Modules/mpu6050/inv_mpu.c **** 	/* Set to invalid values to ensure no I2C writes are skipped. */
2752:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.gyro_fsr = 0xFF;
 6084              		.loc 1 2752 0
 6085 00b4 4C4C     		ldr	r4, .L614
 6086 00b6 FF23     		movs	r3, #255
 6087 00b8 2372     		strb	r3, [r4, #8]
2753:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.accel_fsr = 0xFF;
 6088              		.loc 1 2753 0
 6089 00ba 6372     		strb	r3, [r4, #9]
2754:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.lpf = 0xFF;
 6090              		.loc 1 2754 0
 6091 00bc E372     		strb	r3, [r4, #11]
2755:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.sample_rate = 0xFFFF;
 6092              		.loc 1 2755 0
 6093 00be 4FF6FF72 		movw	r2, #65535
 6094 00c2 E281     		strh	r2, [r4, #14]	@ movhi
2756:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.sensors = 0xFF;
 6095              		.loc 1 2756 0
 6096 00c4 A372     		strb	r3, [r4, #10]
2757:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.fifo_enable = 0xFF;
 6097              		.loc 1 2757 0
 6098 00c6 2374     		strb	r3, [r4, #16]
2758:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.clk_src = INV_CLK_PLL;
 6099              		.loc 1 2758 0
 6100 00c8 0123     		movs	r3, #1
 6101 00ca 2373     		strb	r3, [r4, #12]
2759:Modules/mpu6050/inv_mpu.c **** 	mpu_set_sensors(st.chip_cfg.cache.sensors_on);
 6102              		.loc 1 2759 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 168


 6103 00cc A07F     		ldrb	r0, [r4, #30]	@ zero_extendqisi2
 6104 00ce FFF7FEFF 		bl	mpu_set_sensors
 6105              	.LVL530:
2760:Modules/mpu6050/inv_mpu.c **** 	mpu_set_gyro_fsr(st.chip_cfg.cache.gyro_fsr);
 6106              		.loc 1 2760 0
 6107 00d2 E08A     		ldrh	r0, [r4, #22]
 6108 00d4 FFF7FEFF 		bl	mpu_set_gyro_fsr
 6109              	.LVL531:
2761:Modules/mpu6050/inv_mpu.c **** 	mpu_set_accel_fsr(st.chip_cfg.cache.accel_fsr);
 6110              		.loc 1 2761 0
 6111 00d8 207E     		ldrb	r0, [r4, #24]	@ zero_extendqisi2
 6112 00da FFF7FEFF 		bl	mpu_set_accel_fsr
 6113              	.LVL532:
2762:Modules/mpu6050/inv_mpu.c **** 	mpu_set_lpf(st.chip_cfg.cache.lpf);
 6114              		.loc 1 2762 0
 6115 00de 608B     		ldrh	r0, [r4, #26]
 6116 00e0 FFF7FEFF 		bl	mpu_set_lpf
 6117              	.LVL533:
2763:Modules/mpu6050/inv_mpu.c **** 	mpu_set_sample_rate(st.chip_cfg.cache.sample_rate);
 6118              		.loc 1 2763 0
 6119 00e4 A08B     		ldrh	r0, [r4, #28]
 6120 00e6 FFF7FEFF 		bl	mpu_set_sample_rate
 6121              	.LVL534:
2764:Modules/mpu6050/inv_mpu.c **** 	mpu_configure_fifo(st.chip_cfg.cache.fifo_sensors);
 6122              		.loc 1 2764 0
 6123 00ea E07F     		ldrb	r0, [r4, #31]	@ zero_extendqisi2
 6124 00ec FFF7FEFF 		bl	mpu_configure_fifo
 6125              	.LVL535:
2765:Modules/mpu6050/inv_mpu.c **** 
2766:Modules/mpu6050/inv_mpu.c **** 	if (st.chip_cfg.cache.dmp_on)
 6126              		.loc 1 2766 0
 6127 00f0 94F82030 		ldrb	r3, [r4, #32]	@ zero_extendqisi2
 6128 00f4 002B     		cmp	r3, #0
 6129 00f6 6DD1     		bne	.L611
 6130              	.L601:
2767:Modules/mpu6050/inv_mpu.c **** 		mpu_set_dmp_state(1);
2768:Modules/mpu6050/inv_mpu.c **** 
2769:Modules/mpu6050/inv_mpu.c **** #ifdef MPU6500
2770:Modules/mpu6050/inv_mpu.c **** 	/* Disable motion interrupt (MPU6500 version). */
2771:Modules/mpu6050/inv_mpu.c ****     data[0] = 0;
2772:Modules/mpu6050/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->accel_intel, 1, data))
2773:Modules/mpu6050/inv_mpu.c ****         goto lp_int_restore;
2774:Modules/mpu6050/inv_mpu.c **** #endif
2775:Modules/mpu6050/inv_mpu.c **** 
2776:Modules/mpu6050/inv_mpu.c **** 	st.chip_cfg.int_motion_only = 0;
 6131              		.loc 1 2776 0
 6132 00f8 0020     		movs	r0, #0
 6133 00fa 3B4B     		ldr	r3, .L614
 6134 00fc 5875     		strb	r0, [r3, #21]
 6135              	.L587:
2777:Modules/mpu6050/inv_mpu.c **** 	return 0;
2778:Modules/mpu6050/inv_mpu.c **** }
 6136              		.loc 1 2778 0
 6137 00fe 03B0     		add	sp, sp, #12
 6138              	.LCFI144:
 6139              		.cfi_remember_state
 6140              		.cfi_def_cfa_offset 20
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 169


 6141              		@ sp needed
 6142 0100 F0BD     		pop	{r4, r5, r6, r7, pc}
 6143              	.LVL536:
 6144              	.L604:
 6145              	.LCFI145:
 6146              		.cfi_restore_state
 6147              	.LBB5:
2586:Modules/mpu6050/inv_mpu.c **** 		else
 6148              		.loc 1 2586 0
 6149 0102 0125     		movs	r5, #1
 6150 0104 8CE7     		b	.L589
 6151              	.LVL537:
 6152              	.L609:
2616:Modules/mpu6050/inv_mpu.c **** 				st.chip_cfg.cache.dmp_on = 1;
 6153              		.loc 1 2616 0
 6154 0106 0020     		movs	r0, #0
 6155              	.LVL538:
 6156 0108 FFF7FEFF 		bl	mpu_set_dmp_state
 6157              	.LVL539:
2617:Modules/mpu6050/inv_mpu.c **** 			} else
 6158              		.loc 1 2617 0
 6159 010c 364B     		ldr	r3, .L614
 6160 010e 0122     		movs	r2, #1
 6161 0110 83F82020 		strb	r2, [r3, #32]
 6162 0114 95E7     		b	.L594
 6163              	.L610:
2654:Modules/mpu6050/inv_mpu.c **** 		data[1] = time;
 6164              		.loc 1 2654 0
 6165 0116 8DF80450 		strb	r5, [sp, #4]
2655:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->motion_thr, 2, data))
 6166              		.loc 1 2655 0
 6167 011a 8DF80560 		strb	r6, [sp, #5]
2656:Modules/mpu6050/inv_mpu.c **** 			goto lp_int_restore;
 6168              		.loc 1 2656 0
 6169 011e 324B     		ldr	r3, .L614
 6170 0120 5868     		ldr	r0, [r3, #4]
 6171 0122 1968     		ldr	r1, [r3]
 6172 0124 01AB     		add	r3, sp, #4
 6173 0126 0222     		movs	r2, #2
 6174 0128 097A     		ldrb	r1, [r1, #8]	@ zero_extendqisi2
 6175 012a 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6176 012c FFF7FEFF 		bl	mod_Mpu_Write
 6177              	.LVL540:
 6178 0130 0028     		cmp	r0, #0
 6179 0132 BFD1     		bne	.L595
2660:Modules/mpu6050/inv_mpu.c **** 		data[0] = (st.chip_cfg.accel_fsr << 3) | BITS_HPF;
 6180              		.loc 1 2660 0
 6181 0134 0520     		movs	r0, #5
 6182 0136 FFF7FEFF 		bl	delay_ms
 6183              	.LVL541:
2661:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->accel_cfg, 1, data))
 6184              		.loc 1 2661 0
 6185 013a 2B49     		ldr	r1, .L614
 6186 013c 4A7A     		ldrb	r2, [r1, #9]	@ zero_extendqisi2
 6187 013e D200     		lsls	r2, r2, #3
 6188 0140 42F00702 		orr	r2, r2, #7
 6189 0144 02AB     		add	r3, sp, #8
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 170


 6190 0146 03F8042D 		strb	r2, [r3, #-4]!
2662:Modules/mpu6050/inv_mpu.c **** 			goto lp_int_restore;
 6191              		.loc 1 2662 0
 6192 014a 4868     		ldr	r0, [r1, #4]
 6193 014c 0968     		ldr	r1, [r1]
 6194 014e 0122     		movs	r2, #1
 6195 0150 C979     		ldrb	r1, [r1, #7]	@ zero_extendqisi2
 6196 0152 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6197 0154 FFF7FEFF 		bl	mod_Mpu_Write
 6198              	.LVL542:
 6199 0158 0028     		cmp	r0, #0
 6200 015a ABD1     		bne	.L595
2666:Modules/mpu6050/inv_mpu.c **** 		if (lpa_freq == 1)
 6201              		.loc 1 2666 0
 6202 015c 2023     		movs	r3, #32
 6203 015e 8DF80430 		strb	r3, [sp, #4]
2667:Modules/mpu6050/inv_mpu.c **** 			data[1] = INV_LPA_1_25HZ;
 6204              		.loc 1 2667 0
 6205 0162 012F     		cmp	r7, #1
 6206 0164 05D0     		beq	.L612
2669:Modules/mpu6050/inv_mpu.c **** 			data[1] = INV_LPA_5HZ;
 6207              		.loc 1 2669 0
 6208 0166 052F     		cmp	r7, #5
 6209 0168 1CD8     		bhi	.L598
2670:Modules/mpu6050/inv_mpu.c **** 		else if (lpa_freq <= 20)
 6210              		.loc 1 2670 0
 6211 016a 0123     		movs	r3, #1
 6212 016c 8DF80530 		strb	r3, [sp, #5]
 6213 0170 02E0     		b	.L597
 6214              	.L612:
2668:Modules/mpu6050/inv_mpu.c **** 		else if (lpa_freq <= 5)
 6215              		.loc 1 2668 0
 6216 0172 0023     		movs	r3, #0
 6217 0174 8DF80530 		strb	r3, [sp, #5]
 6218              	.L597:
2675:Modules/mpu6050/inv_mpu.c **** 		if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, data))
 6219              		.loc 1 2675 0
 6220 0178 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 6221 017c 9B01     		lsls	r3, r3, #6
 6222 017e 43F00703 		orr	r3, r3, #7
 6223 0182 8DF80530 		strb	r3, [sp, #5]
2676:Modules/mpu6050/inv_mpu.c **** 			goto lp_int_restore;
 6224              		.loc 1 2676 0
 6225 0186 184B     		ldr	r3, .L614
 6226 0188 5868     		ldr	r0, [r3, #4]
 6227 018a 1968     		ldr	r1, [r3]
 6228 018c 01AB     		add	r3, sp, #4
 6229 018e 0222     		movs	r2, #2
 6230 0190 897C     		ldrb	r1, [r1, #18]	@ zero_extendqisi2
 6231 0192 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6232 0194 FFF7FEFF 		bl	mod_Mpu_Write
 6233              	.LVL543:
 6234 0198 0028     		cmp	r0, #0
 6235 019a 8BD1     		bne	.L595
2679:Modules/mpu6050/inv_mpu.c **** 		return 0;
 6236              		.loc 1 2679 0
 6237 019c 124B     		ldr	r3, .L614
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 171


 6238 019e 0122     		movs	r2, #1
 6239 01a0 5A75     		strb	r2, [r3, #21]
2680:Modules/mpu6050/inv_mpu.c **** #elif defined MPU6500
 6240              		.loc 1 2680 0
 6241 01a2 ACE7     		b	.L587
 6242              	.L598:
2671:Modules/mpu6050/inv_mpu.c **** 			data[1] = INV_LPA_20HZ;
 6243              		.loc 1 2671 0
 6244 01a4 142F     		cmp	r7, #20
 6245 01a6 03D8     		bhi	.L599
2672:Modules/mpu6050/inv_mpu.c **** 		else
 6246              		.loc 1 2672 0
 6247 01a8 0223     		movs	r3, #2
 6248 01aa 8DF80530 		strb	r3, [sp, #5]
 6249 01ae E3E7     		b	.L597
 6250              	.L599:
2674:Modules/mpu6050/inv_mpu.c **** 		data[1] = (data[1] << 6) | BIT_STBY_XYZG;
 6251              		.loc 1 2674 0
 6252 01b0 0323     		movs	r3, #3
 6253 01b2 8DF80530 		strb	r3, [sp, #5]
 6254 01b6 DFE7     		b	.L597
 6255              	.LVL544:
 6256              	.L602:
 6257              	.LBE5:
 6258              	.LBB6:
2743:Modules/mpu6050/inv_mpu.c **** 			if (cache_ptr[ii] != 0)
 6259              		.loc 1 2743 0
 6260 01b8 0023     		movs	r3, #0
 6261              	.LVL545:
 6262              	.L588:
2743:Modules/mpu6050/inv_mpu.c **** 			if (cache_ptr[ii] != 0)
 6263              		.loc 1 2743 0 is_stmt 0 discriminator 1
 6264 01ba 0B2B     		cmp	r3, #11
 6265 01bc 07D8     		bhi	.L613
2744:Modules/mpu6050/inv_mpu.c **** 				goto lp_int_restore;
 6266              		.loc 1 2744 0 is_stmt 1
 6267 01be 0A4A     		ldr	r2, .L614
 6268 01c0 1A44     		add	r2, r2, r3
 6269 01c2 927D     		ldrb	r2, [r2, #22]	@ zero_extendqisi2
 6270 01c4 002A     		cmp	r2, #0
 6271 01c6 7FF475AF 		bne	.L595
2743:Modules/mpu6050/inv_mpu.c **** 			if (cache_ptr[ii] != 0)
 6272              		.loc 1 2743 0 discriminator 2
 6273 01ca 0133     		adds	r3, r3, #1
 6274              	.LVL546:
 6275 01cc F5E7     		b	.L588
 6276              	.L613:
2748:Modules/mpu6050/inv_mpu.c **** 	}
 6277              		.loc 1 2748 0
 6278 01ce 4FF0FF30 		mov	r0, #-1
 6279              	.LVL547:
 6280 01d2 94E7     		b	.L587
 6281              	.LVL548:
 6282              	.L611:
 6283              	.LBE6:
2767:Modules/mpu6050/inv_mpu.c **** 
 6284              		.loc 1 2767 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 172


 6285 01d4 0120     		movs	r0, #1
 6286 01d6 FFF7FEFF 		bl	mpu_set_dmp_state
 6287              	.LVL549:
 6288 01da 8DE7     		b	.L601
 6289              	.LVL550:
 6290              	.L606:
 6291              	.LBB7:
2611:Modules/mpu6050/inv_mpu.c **** 
 6292              		.loc 1 2611 0
 6293 01dc 4FF0FF30 		mov	r0, #-1
 6294              	.LVL551:
 6295 01e0 8DE7     		b	.L587
 6296              	.LVL552:
 6297              	.L607:
2640:Modules/mpu6050/inv_mpu.c **** 
 6298              		.loc 1 2640 0
 6299 01e2 4FF0FF30 		mov	r0, #-1
 6300 01e6 8AE7     		b	.L587
 6301              	.L615:
 6302              		.align	2
 6303              	.L614:
 6304 01e8 00000000 		.word	.LANCHOR0
 6305              	.LBE7:
 6306              		.cfi_endproc
 6307              	.LFE111:
 6309              		.section	.text.run_self_test,"ax",%progbits
 6310              		.align	1
 6311              		.global	run_self_test
 6312              		.syntax unified
 6313              		.thumb
 6314              		.thumb_func
 6315              		.fpu softvfp
 6317              	run_self_test:
 6318              	.LFB112:
2779:Modules/mpu6050/inv_mpu.c **** //////////////////////////////////////////////////////////////////////////////////
2780:Modules/mpu6050/inv_mpu.c **** //添加的代码部分
2781:Modules/mpu6050/inv_mpu.c **** //////////////////////////////////////////////////////////////////////////////////
2782:Modules/mpu6050/inv_mpu.c **** //本程序只供学习使用，未经作者许可，不得用于其它任何用途
2783:Modules/mpu6050/inv_mpu.c **** //ALIENTEK STM32开发板
2784:Modules/mpu6050/inv_mpu.c **** //MPU6050 DMP 驱动代码
2785:Modules/mpu6050/inv_mpu.c **** //正点原子@ALIENTEK
2786:Modules/mpu6050/inv_mpu.c **** //技术论坛:www.openedv.com
2787:Modules/mpu6050/inv_mpu.c **** //创建日期:2015/1/17
2788:Modules/mpu6050/inv_mpu.c **** //版本：V1.0
2789:Modules/mpu6050/inv_mpu.c **** //版权所有，盗版必究。
2790:Modules/mpu6050/inv_mpu.c **** //Copyright(C) 广州市星翼电子科技有限公司 2009-2019
2791:Modules/mpu6050/inv_mpu.c **** //All rights reserved
2792:Modules/mpu6050/inv_mpu.c **** //////////////////////////////////////////////////////////////////////////////////
2793:Modules/mpu6050/inv_mpu.c **** 
2794:Modules/mpu6050/inv_mpu.c **** //q30格式,long转float时的除数.
2795:Modules/mpu6050/inv_mpu.c **** #define q30  1073741824.0f
2796:Modules/mpu6050/inv_mpu.c **** 
2797:Modules/mpu6050/inv_mpu.c **** //陀螺仪方向设置
2798:Modules/mpu6050/inv_mpu.c **** static signed char gyro_orientation[9] = { 1, 0, 0,
2799:Modules/mpu6050/inv_mpu.c **** 										   0, 1, 0,
2800:Modules/mpu6050/inv_mpu.c **** 										   0, 0, 1};
2801:Modules/mpu6050/inv_mpu.c **** //MPU6050自测试
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 173


2802:Modules/mpu6050/inv_mpu.c **** //返回值:0,正常
2803:Modules/mpu6050/inv_mpu.c **** //    其他,失败
2804:Modules/mpu6050/inv_mpu.c **** u8 run_self_test(void)
2805:Modules/mpu6050/inv_mpu.c **** {
 6319              		.loc 1 2805 0
 6320              		.cfi_startproc
 6321              		@ args = 0, pretend = 0, frame = 32
 6322              		@ frame_needed = 0, uses_anonymous_args = 0
 6323 0000 10B5     		push	{r4, lr}
 6324              	.LCFI146:
 6325              		.cfi_def_cfa_offset 8
 6326              		.cfi_offset 4, -8
 6327              		.cfi_offset 14, -4
 6328 0002 88B0     		sub	sp, sp, #32
 6329              	.LCFI147:
 6330              		.cfi_def_cfa_offset 40
2806:Modules/mpu6050/inv_mpu.c **** 	int result;
2807:Modules/mpu6050/inv_mpu.c **** 	//char test_packet[4] = {0};
2808:Modules/mpu6050/inv_mpu.c **** 	long gyro[3], accel[3];
2809:Modules/mpu6050/inv_mpu.c **** 	result = mpu_run_self_test(gyro, accel);
 6331              		.loc 1 2809 0
 6332 0004 02A9     		add	r1, sp, #8
 6333 0006 05A8     		add	r0, sp, #20
 6334 0008 FFF7FEFF 		bl	mpu_run_self_test
 6335              	.LVL553:
2810:Modules/mpu6050/inv_mpu.c **** 	if (result == 0x3)
 6336              		.loc 1 2810 0
 6337 000c 0328     		cmp	r0, #3
 6338 000e 02D0     		beq	.L620
2811:Modules/mpu6050/inv_mpu.c **** 	{
2812:Modules/mpu6050/inv_mpu.c **** 		/* Test passed. We can trust the gyro data here, so let's push it down
2813:Modules/mpu6050/inv_mpu.c **** 		* to the DMP.
2814:Modules/mpu6050/inv_mpu.c **** 		*/
2815:Modules/mpu6050/inv_mpu.c **** 		float sens;
2816:Modules/mpu6050/inv_mpu.c **** 		unsigned short accel_sens;
2817:Modules/mpu6050/inv_mpu.c **** 		mpu_get_gyro_sens(&sens);
2818:Modules/mpu6050/inv_mpu.c **** 		gyro[0] = (long)(gyro[0] * sens);
2819:Modules/mpu6050/inv_mpu.c **** 		gyro[1] = (long)(gyro[1] * sens);
2820:Modules/mpu6050/inv_mpu.c **** 		gyro[2] = (long)(gyro[2] * sens);
2821:Modules/mpu6050/inv_mpu.c **** 		dmp_set_gyro_bias(gyro);
2822:Modules/mpu6050/inv_mpu.c **** 		mpu_get_accel_sens(&accel_sens);
2823:Modules/mpu6050/inv_mpu.c **** 		accel[0] *= accel_sens;
2824:Modules/mpu6050/inv_mpu.c **** 		accel[1] *= accel_sens;
2825:Modules/mpu6050/inv_mpu.c **** 		accel[2] *= accel_sens;
2826:Modules/mpu6050/inv_mpu.c **** 		dmp_set_accel_bias(accel);
2827:Modules/mpu6050/inv_mpu.c **** 		return 0;
2828:Modules/mpu6050/inv_mpu.c **** 	}else return 1;
 6339              		.loc 1 2828 0
 6340 0010 0120     		movs	r0, #1
 6341              	.LVL554:
 6342              	.L617:
2829:Modules/mpu6050/inv_mpu.c **** }
 6343              		.loc 1 2829 0 discriminator 1
 6344 0012 08B0     		add	sp, sp, #32
 6345              	.LCFI148:
 6346              		.cfi_remember_state
 6347              		.cfi_def_cfa_offset 8
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 174


 6348              		@ sp needed
 6349 0014 10BD     		pop	{r4, pc}
 6350              	.LVL555:
 6351              	.L620:
 6352              	.LCFI149:
 6353              		.cfi_restore_state
 6354              	.LBB8:
2817:Modules/mpu6050/inv_mpu.c **** 		gyro[0] = (long)(gyro[0] * sens);
 6355              		.loc 1 2817 0
 6356 0016 01A8     		add	r0, sp, #4
 6357              	.LVL556:
 6358 0018 FFF7FEFF 		bl	mpu_get_gyro_sens
 6359              	.LVL557:
2818:Modules/mpu6050/inv_mpu.c **** 		gyro[1] = (long)(gyro[1] * sens);
 6360              		.loc 1 2818 0
 6361 001c 019C     		ldr	r4, [sp, #4]	@ float
 6362 001e 0598     		ldr	r0, [sp, #20]
 6363 0020 FFF7FEFF 		bl	__aeabi_i2f
 6364              	.LVL558:
 6365 0024 2146     		mov	r1, r4
 6366 0026 FFF7FEFF 		bl	__aeabi_fmul
 6367              	.LVL559:
 6368 002a FFF7FEFF 		bl	__aeabi_f2iz
 6369              	.LVL560:
 6370 002e 0590     		str	r0, [sp, #20]
2819:Modules/mpu6050/inv_mpu.c **** 		gyro[2] = (long)(gyro[2] * sens);
 6371              		.loc 1 2819 0
 6372 0030 0698     		ldr	r0, [sp, #24]
 6373 0032 FFF7FEFF 		bl	__aeabi_i2f
 6374              	.LVL561:
 6375 0036 2146     		mov	r1, r4
 6376 0038 FFF7FEFF 		bl	__aeabi_fmul
 6377              	.LVL562:
 6378 003c FFF7FEFF 		bl	__aeabi_f2iz
 6379              	.LVL563:
 6380 0040 0690     		str	r0, [sp, #24]
2820:Modules/mpu6050/inv_mpu.c **** 		dmp_set_gyro_bias(gyro);
 6381              		.loc 1 2820 0
 6382 0042 0798     		ldr	r0, [sp, #28]
 6383 0044 FFF7FEFF 		bl	__aeabi_i2f
 6384              	.LVL564:
 6385 0048 2146     		mov	r1, r4
 6386 004a FFF7FEFF 		bl	__aeabi_fmul
 6387              	.LVL565:
 6388 004e FFF7FEFF 		bl	__aeabi_f2iz
 6389              	.LVL566:
 6390 0052 0790     		str	r0, [sp, #28]
2821:Modules/mpu6050/inv_mpu.c **** 		mpu_get_accel_sens(&accel_sens);
 6391              		.loc 1 2821 0
 6392 0054 05A8     		add	r0, sp, #20
 6393 0056 FFF7FEFF 		bl	dmp_set_gyro_bias
 6394              	.LVL567:
2822:Modules/mpu6050/inv_mpu.c **** 		accel[0] *= accel_sens;
 6395              		.loc 1 2822 0
 6396 005a 0DF10200 		add	r0, sp, #2
 6397 005e FFF7FEFF 		bl	mpu_get_accel_sens
 6398              	.LVL568:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 175


2823:Modules/mpu6050/inv_mpu.c **** 		accel[1] *= accel_sens;
 6399              		.loc 1 2823 0
 6400 0062 BDF80230 		ldrh	r3, [sp, #2]
 6401 0066 029A     		ldr	r2, [sp, #8]
 6402 0068 03FB02F2 		mul	r2, r3, r2
 6403 006c 0292     		str	r2, [sp, #8]
2824:Modules/mpu6050/inv_mpu.c **** 		accel[2] *= accel_sens;
 6404              		.loc 1 2824 0
 6405 006e 039A     		ldr	r2, [sp, #12]
 6406 0070 03FB02F2 		mul	r2, r3, r2
 6407 0074 0392     		str	r2, [sp, #12]
2825:Modules/mpu6050/inv_mpu.c **** 		dmp_set_accel_bias(accel);
 6408              		.loc 1 2825 0
 6409 0076 049A     		ldr	r2, [sp, #16]
 6410 0078 03FB02F3 		mul	r3, r3, r2
 6411 007c 0493     		str	r3, [sp, #16]
2826:Modules/mpu6050/inv_mpu.c **** 		return 0;
 6412              		.loc 1 2826 0
 6413 007e 02A8     		add	r0, sp, #8
 6414 0080 FFF7FEFF 		bl	dmp_set_accel_bias
 6415              	.LVL569:
2827:Modules/mpu6050/inv_mpu.c **** 	}else return 1;
 6416              		.loc 1 2827 0
 6417 0084 0020     		movs	r0, #0
 6418 0086 C4E7     		b	.L617
 6419              	.LBE8:
 6420              		.cfi_endproc
 6421              	.LFE112:
 6423              		.section	.text.inv_row_2_scale,"ax",%progbits
 6424              		.align	1
 6425              		.global	inv_row_2_scale
 6426              		.syntax unified
 6427              		.thumb
 6428              		.thumb_func
 6429              		.fpu softvfp
 6431              	inv_row_2_scale:
 6432              	.LFB114:
2830:Modules/mpu6050/inv_mpu.c **** //陀螺仪方向控制
2831:Modules/mpu6050/inv_mpu.c **** unsigned short inv_orientation_matrix_to_scalar(
2832:Modules/mpu6050/inv_mpu.c **** 		const signed char *mtx)
2833:Modules/mpu6050/inv_mpu.c **** {
2834:Modules/mpu6050/inv_mpu.c **** 	unsigned short scalar;
2835:Modules/mpu6050/inv_mpu.c **** 	/*
2836:Modules/mpu6050/inv_mpu.c **** 	   XYZ  010_001_000 Identity Matrix
2837:Modules/mpu6050/inv_mpu.c **** 	   XZY  001_010_000
2838:Modules/mpu6050/inv_mpu.c **** 	   YXZ  010_000_001
2839:Modules/mpu6050/inv_mpu.c **** 	   YZX  000_010_001
2840:Modules/mpu6050/inv_mpu.c **** 	   ZXY  001_000_010
2841:Modules/mpu6050/inv_mpu.c **** 	   ZYX  000_001_010
2842:Modules/mpu6050/inv_mpu.c **** 	 */
2843:Modules/mpu6050/inv_mpu.c **** 
2844:Modules/mpu6050/inv_mpu.c **** 	scalar = inv_row_2_scale(mtx);
2845:Modules/mpu6050/inv_mpu.c **** 	scalar |= inv_row_2_scale(mtx + 3) << 3;
2846:Modules/mpu6050/inv_mpu.c **** 	scalar |= inv_row_2_scale(mtx + 6) << 6;
2847:Modules/mpu6050/inv_mpu.c **** 
2848:Modules/mpu6050/inv_mpu.c **** 
2849:Modules/mpu6050/inv_mpu.c **** 	return scalar;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 176


2850:Modules/mpu6050/inv_mpu.c **** }
2851:Modules/mpu6050/inv_mpu.c **** //方向转换
2852:Modules/mpu6050/inv_mpu.c **** unsigned short inv_row_2_scale(const signed char *row)
2853:Modules/mpu6050/inv_mpu.c **** {
 6433              		.loc 1 2853 0
 6434              		.cfi_startproc
 6435              		@ args = 0, pretend = 0, frame = 0
 6436              		@ frame_needed = 0, uses_anonymous_args = 0
 6437              		@ link register save eliminated.
 6438              	.LVL570:
2854:Modules/mpu6050/inv_mpu.c **** 	unsigned short b;
2855:Modules/mpu6050/inv_mpu.c **** 
2856:Modules/mpu6050/inv_mpu.c **** 	if (row[0] > 0)
 6439              		.loc 1 2856 0
 6440 0000 90F90030 		ldrsb	r3, [r0]
 6441 0004 002B     		cmp	r3, #0
 6442 0006 01DD     		ble	.L629
2857:Modules/mpu6050/inv_mpu.c **** 		b = 0;
 6443              		.loc 1 2857 0
 6444 0008 0020     		movs	r0, #0
 6445              	.LVL571:
 6446 000a 7047     		bx	lr
 6447              	.LVL572:
 6448              	.L629:
2858:Modules/mpu6050/inv_mpu.c **** 	else if (row[0] < 0)
 6449              		.loc 1 2858 0
 6450 000c 0FDB     		blt	.L624
2859:Modules/mpu6050/inv_mpu.c **** 		b = 4;
2860:Modules/mpu6050/inv_mpu.c **** 	else if (row[1] > 0)
 6451              		.loc 1 2860 0
 6452 000e 90F90130 		ldrsb	r3, [r0, #1]
 6453 0012 002B     		cmp	r3, #0
 6454 0014 01DD     		ble	.L630
2861:Modules/mpu6050/inv_mpu.c **** 		b = 1;
 6455              		.loc 1 2861 0
 6456 0016 0120     		movs	r0, #1
 6457              	.LVL573:
 6458 0018 7047     		bx	lr
 6459              	.LVL574:
 6460              	.L630:
2862:Modules/mpu6050/inv_mpu.c **** 	else if (row[1] < 0)
 6461              		.loc 1 2862 0
 6462 001a 0ADB     		blt	.L626
2863:Modules/mpu6050/inv_mpu.c **** 		b = 5;
2864:Modules/mpu6050/inv_mpu.c **** 	else if (row[2] > 0)
 6463              		.loc 1 2864 0
 6464 001c 90F90230 		ldrsb	r3, [r0, #2]
 6465 0020 002B     		cmp	r3, #0
 6466 0022 08DC     		bgt	.L627
2865:Modules/mpu6050/inv_mpu.c **** 		b = 2;
2866:Modules/mpu6050/inv_mpu.c **** 	else if (row[2] < 0)
 6467              		.loc 1 2866 0
 6468 0024 01DB     		blt	.L631
2867:Modules/mpu6050/inv_mpu.c **** 		b = 6;
2868:Modules/mpu6050/inv_mpu.c **** 	else
2869:Modules/mpu6050/inv_mpu.c **** 		b = 7;      // error
 6469              		.loc 1 2869 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 177


 6470 0026 0720     		movs	r0, #7
 6471              	.LVL575:
2870:Modules/mpu6050/inv_mpu.c **** 	return b;
2871:Modules/mpu6050/inv_mpu.c **** }
 6472              		.loc 1 2871 0
 6473 0028 7047     		bx	lr
 6474              	.LVL576:
 6475              	.L631:
2867:Modules/mpu6050/inv_mpu.c **** 		b = 6;
 6476              		.loc 1 2867 0
 6477 002a 0620     		movs	r0, #6
 6478              	.LVL577:
 6479 002c 7047     		bx	lr
 6480              	.LVL578:
 6481              	.L624:
2859:Modules/mpu6050/inv_mpu.c **** 	else if (row[1] > 0)
 6482              		.loc 1 2859 0
 6483 002e 0420     		movs	r0, #4
 6484              	.LVL579:
 6485 0030 7047     		bx	lr
 6486              	.LVL580:
 6487              	.L626:
2863:Modules/mpu6050/inv_mpu.c **** 	else if (row[2] > 0)
 6488              		.loc 1 2863 0
 6489 0032 0520     		movs	r0, #5
 6490              	.LVL581:
 6491 0034 7047     		bx	lr
 6492              	.LVL582:
 6493              	.L627:
2865:Modules/mpu6050/inv_mpu.c **** 	else if (row[2] < 0)
 6494              		.loc 1 2865 0
 6495 0036 0220     		movs	r0, #2
 6496              	.LVL583:
 6497 0038 7047     		bx	lr
 6498              		.cfi_endproc
 6499              	.LFE114:
 6501              		.section	.text.inv_orientation_matrix_to_scalar,"ax",%progbits
 6502              		.align	1
 6503              		.global	inv_orientation_matrix_to_scalar
 6504              		.syntax unified
 6505              		.thumb
 6506              		.thumb_func
 6507              		.fpu softvfp
 6509              	inv_orientation_matrix_to_scalar:
 6510              	.LFB113:
2833:Modules/mpu6050/inv_mpu.c **** 	unsigned short scalar;
 6511              		.loc 1 2833 0
 6512              		.cfi_startproc
 6513              		@ args = 0, pretend = 0, frame = 0
 6514              		@ frame_needed = 0, uses_anonymous_args = 0
 6515              	.LVL584:
 6516 0000 38B5     		push	{r3, r4, r5, lr}
 6517              	.LCFI150:
 6518              		.cfi_def_cfa_offset 16
 6519              		.cfi_offset 3, -16
 6520              		.cfi_offset 4, -12
 6521              		.cfi_offset 5, -8
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 178


 6522              		.cfi_offset 14, -4
 6523 0002 0546     		mov	r5, r0
2844:Modules/mpu6050/inv_mpu.c **** 	scalar |= inv_row_2_scale(mtx + 3) << 3;
 6524              		.loc 1 2844 0
 6525 0004 FFF7FEFF 		bl	inv_row_2_scale
 6526              	.LVL585:
 6527 0008 0446     		mov	r4, r0
 6528              	.LVL586:
2845:Modules/mpu6050/inv_mpu.c **** 	scalar |= inv_row_2_scale(mtx + 6) << 6;
 6529              		.loc 1 2845 0
 6530 000a E81C     		adds	r0, r5, #3
 6531 000c FFF7FEFF 		bl	inv_row_2_scale
 6532              	.LVL587:
 6533 0010 44EAC004 		orr	r4, r4, r0, lsl #3
 6534              	.LVL588:
 6535 0014 24B2     		sxth	r4, r4
 6536              	.LVL589:
2846:Modules/mpu6050/inv_mpu.c **** 
 6537              		.loc 1 2846 0
 6538 0016 A81D     		adds	r0, r5, #6
 6539 0018 FFF7FEFF 		bl	inv_row_2_scale
 6540              	.LVL590:
 6541 001c 44EA8010 		orr	r0, r4, r0, lsl #6
 6542              	.LVL591:
2850:Modules/mpu6050/inv_mpu.c **** //方向转换
 6543              		.loc 1 2850 0
 6544 0020 80B2     		uxth	r0, r0
 6545 0022 38BD     		pop	{r3, r4, r5, pc}
 6546              		.cfi_endproc
 6547              	.LFE113:
 6549              		.section	.text.mget_ms,"ax",%progbits
 6550              		.align	1
 6551              		.global	mget_ms
 6552              		.syntax unified
 6553              		.thumb
 6554              		.thumb_func
 6555              		.fpu softvfp
 6557              	mget_ms:
 6558              	.LFB115:
2872:Modules/mpu6050/inv_mpu.c **** //空函数,未用到.
2873:Modules/mpu6050/inv_mpu.c **** void mget_ms(unsigned long *time)
2874:Modules/mpu6050/inv_mpu.c **** {
 6559              		.loc 1 2874 0
 6560              		.cfi_startproc
 6561              		@ args = 0, pretend = 0, frame = 0
 6562              		@ frame_needed = 0, uses_anonymous_args = 0
 6563              		@ link register save eliminated.
 6564              	.LVL592:
2875:Modules/mpu6050/inv_mpu.c **** 
2876:Modules/mpu6050/inv_mpu.c **** }
 6565              		.loc 1 2876 0
 6566 0000 7047     		bx	lr
 6567              		.cfi_endproc
 6568              	.LFE115:
 6570              		.section	.text.mpu_dmp_init,"ax",%progbits
 6571              		.align	1
 6572              		.global	mpu_dmp_init
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 179


 6573              		.syntax unified
 6574              		.thumb
 6575              		.thumb_func
 6576              		.fpu softvfp
 6578              	mpu_dmp_init:
 6579              	.LFB116:
2877:Modules/mpu6050/inv_mpu.c **** //mpu6050,dmp初始化
2878:Modules/mpu6050/inv_mpu.c **** //返回值:0,正常
2879:Modules/mpu6050/inv_mpu.c **** //    其他,失败
2880:Modules/mpu6050/inv_mpu.c **** u8 mpu_dmp_init(void)
2881:Modules/mpu6050/inv_mpu.c **** {
 6580              		.loc 1 2881 0
 6581              		.cfi_startproc
 6582              		@ args = 0, pretend = 0, frame = 0
 6583              		@ frame_needed = 0, uses_anonymous_args = 0
 6584 0000 08B5     		push	{r3, lr}
 6585              	.LCFI151:
 6586              		.cfi_def_cfa_offset 8
 6587              		.cfi_offset 3, -8
 6588              		.cfi_offset 14, -4
 6589              	.LVL593:
2882:Modules/mpu6050/inv_mpu.c **** 	u8 res=0;
2883:Modules/mpu6050/inv_mpu.c **** 	mod_Mpu6050DataLineInit(); 	//初始化IIC总线
 6590              		.loc 1 2883 0
 6591 0002 FFF7FEFF 		bl	mod_Mpu6050DataLineInit
 6592              	.LVL594:
2884:Modules/mpu6050/inv_mpu.c **** 	if(mpu_init()==0)	//初始化MPU6050
 6593              		.loc 1 2884 0
 6594 0006 FFF7FEFF 		bl	mpu_init
 6595              	.LVL595:
 6596 000a 80BB     		cbnz	r0, .L637
2885:Modules/mpu6050/inv_mpu.c **** 	{
2886:Modules/mpu6050/inv_mpu.c **** 		res=mpu_set_sensors(INV_XYZ_GYRO|INV_XYZ_ACCEL);//设置所需要的传感器
 6597              		.loc 1 2886 0
 6598 000c 7820     		movs	r0, #120
 6599 000e FFF7FEFF 		bl	mpu_set_sensors
 6600              	.LVL596:
 6601 0012 C0B2     		uxtb	r0, r0
 6602              	.LVL597:
2887:Modules/mpu6050/inv_mpu.c **** 		if(res)return 1;
 6603              		.loc 1 2887 0
 6604 0014 08B1     		cbz	r0, .L647
 6605 0016 0120     		movs	r0, #1
 6606              	.LVL598:
 6607 0018 2AE0     		b	.L636
 6608              	.LVL599:
 6609              	.L647:
2888:Modules/mpu6050/inv_mpu.c **** 		res=mpu_configure_fifo(INV_XYZ_GYRO|INV_XYZ_ACCEL);//设置FIFO
 6610              		.loc 1 2888 0
 6611 001a 7820     		movs	r0, #120
 6612              	.LVL600:
 6613 001c FFF7FEFF 		bl	mpu_configure_fifo
 6614              	.LVL601:
 6615 0020 C0B2     		uxtb	r0, r0
 6616              	.LVL602:
2889:Modules/mpu6050/inv_mpu.c **** 		if(res)return 2;
 6617              		.loc 1 2889 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 180


 6618 0022 30BB     		cbnz	r0, .L639
2890:Modules/mpu6050/inv_mpu.c **** 		res=mpu_set_sample_rate(DEFAULT_MPU_HZ);	//设置采样率
 6619              		.loc 1 2890 0
 6620 0024 6420     		movs	r0, #100
 6621              	.LVL603:
 6622 0026 FFF7FEFF 		bl	mpu_set_sample_rate
 6623              	.LVL604:
 6624 002a C0B2     		uxtb	r0, r0
 6625              	.LVL605:
2891:Modules/mpu6050/inv_mpu.c **** 		if(res)return 3;
 6626              		.loc 1 2891 0
 6627 002c 18BB     		cbnz	r0, .L640
2892:Modules/mpu6050/inv_mpu.c **** 		res=dmp_load_motion_driver_firmware();		//加载dmp固件
 6628              		.loc 1 2892 0
 6629 002e FFF7FEFF 		bl	dmp_load_motion_driver_firmware
 6630              	.LVL606:
 6631 0032 C0B2     		uxtb	r0, r0
 6632              	.LVL607:
2893:Modules/mpu6050/inv_mpu.c **** 		if(res)return 4;
 6633              		.loc 1 2893 0
 6634 0034 08BB     		cbnz	r0, .L641
2894:Modules/mpu6050/inv_mpu.c **** 		res=dmp_set_orientation(inv_orientation_matrix_to_scalar(gyro_orientation));//设置陀螺仪方
 6635              		.loc 1 2894 0
 6636 0036 1648     		ldr	r0, .L648
 6637              	.LVL608:
 6638 0038 FFF7FEFF 		bl	inv_orientation_matrix_to_scalar
 6639              	.LVL609:
 6640 003c FFF7FEFF 		bl	dmp_set_orientation
 6641              	.LVL610:
 6642 0040 C0B2     		uxtb	r0, r0
 6643              	.LVL611:
2895:Modules/mpu6050/inv_mpu.c **** 		if(res)return 5;
 6644              		.loc 1 2895 0
 6645 0042 E0B9     		cbnz	r0, .L642
2896:Modules/mpu6050/inv_mpu.c **** 		res=dmp_enable_feature(DMP_FEATURE_6X_LP_QUAT|DMP_FEATURE_TAP|	//设置dmp功能
 6646              		.loc 1 2896 0
 6647 0044 40F27310 		movw	r0, #371
 6648              	.LVL612:
 6649 0048 FFF7FEFF 		bl	dmp_enable_feature
 6650              	.LVL613:
 6651 004c C0B2     		uxtb	r0, r0
 6652              	.LVL614:
2897:Modules/mpu6050/inv_mpu.c **** 							   DMP_FEATURE_ANDROID_ORIENT|DMP_FEATURE_SEND_RAW_ACCEL|DMP_FEATURE_SEND_CAL_GYRO|
2898:Modules/mpu6050/inv_mpu.c **** 							   DMP_FEATURE_GYRO_CAL);
2899:Modules/mpu6050/inv_mpu.c **** 		if(res)return 6;
 6653              		.loc 1 2899 0
 6654 004e C0B9     		cbnz	r0, .L643
2900:Modules/mpu6050/inv_mpu.c **** 		res=dmp_set_fifo_rate(DEFAULT_MPU_HZ);	//设置DMP输出速率(最大不超过200Hz)
 6655              		.loc 1 2900 0
 6656 0050 6420     		movs	r0, #100
 6657              	.LVL615:
 6658 0052 FFF7FEFF 		bl	dmp_set_fifo_rate
 6659              	.LVL616:
 6660 0056 C0B2     		uxtb	r0, r0
 6661              	.LVL617:
2901:Modules/mpu6050/inv_mpu.c **** 		if(res)return 7;
 6662              		.loc 1 2901 0
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 181


 6663 0058 A8B9     		cbnz	r0, .L644
2902:Modules/mpu6050/inv_mpu.c **** 		res=run_self_test();		//自检
 6664              		.loc 1 2902 0
 6665 005a FFF7FEFF 		bl	run_self_test
 6666              	.LVL618:
2903:Modules/mpu6050/inv_mpu.c **** 		if(res)return 8;
 6667              		.loc 1 2903 0
 6668 005e A0B9     		cbnz	r0, .L645
2904:Modules/mpu6050/inv_mpu.c **** 		res=mpu_set_dmp_state(1);	//使能DMP
 6669              		.loc 1 2904 0
 6670 0060 0120     		movs	r0, #1
 6671              	.LVL619:
 6672 0062 FFF7FEFF 		bl	mpu_set_dmp_state
 6673              	.LVL620:
 6674 0066 C0B2     		uxtb	r0, r0
 6675              	.LVL621:
2905:Modules/mpu6050/inv_mpu.c **** 		if(res)return 9;
 6676              		.loc 1 2905 0
 6677 0068 10B1     		cbz	r0, .L636
 6678 006a 0920     		movs	r0, #9
 6679              	.LVL622:
 6680 006c 00E0     		b	.L636
 6681              	.LVL623:
 6682              	.L637:
2906:Modules/mpu6050/inv_mpu.c **** 	}else return 10;
 6683              		.loc 1 2906 0
 6684 006e 0A20     		movs	r0, #10
 6685              	.LVL624:
 6686              	.L636:
2907:Modules/mpu6050/inv_mpu.c **** 	return 0;
2908:Modules/mpu6050/inv_mpu.c **** }
 6687              		.loc 1 2908 0
 6688 0070 08BD     		pop	{r3, pc}
 6689              	.LVL625:
 6690              	.L639:
2889:Modules/mpu6050/inv_mpu.c **** 		res=mpu_set_sample_rate(DEFAULT_MPU_HZ);	//设置采样率
 6691              		.loc 1 2889 0
 6692 0072 0220     		movs	r0, #2
 6693              	.LVL626:
 6694 0074 FCE7     		b	.L636
 6695              	.LVL627:
 6696              	.L640:
2891:Modules/mpu6050/inv_mpu.c **** 		res=dmp_load_motion_driver_firmware();		//加载dmp固件
 6697              		.loc 1 2891 0
 6698 0076 0320     		movs	r0, #3
 6699              	.LVL628:
 6700 0078 FAE7     		b	.L636
 6701              	.LVL629:
 6702              	.L641:
2893:Modules/mpu6050/inv_mpu.c **** 		res=dmp_set_orientation(inv_orientation_matrix_to_scalar(gyro_orientation));//设置陀螺仪方
 6703              		.loc 1 2893 0
 6704 007a 0420     		movs	r0, #4
 6705              	.LVL630:
 6706 007c F8E7     		b	.L636
 6707              	.LVL631:
 6708              	.L642:
2895:Modules/mpu6050/inv_mpu.c **** 		res=dmp_enable_feature(DMP_FEATURE_6X_LP_QUAT|DMP_FEATURE_TAP|	//设置dmp功能
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 182


 6709              		.loc 1 2895 0
 6710 007e 0520     		movs	r0, #5
 6711              	.LVL632:
 6712 0080 F6E7     		b	.L636
 6713              	.LVL633:
 6714              	.L643:
2899:Modules/mpu6050/inv_mpu.c **** 		res=dmp_set_fifo_rate(DEFAULT_MPU_HZ);	//设置DMP输出速率(最大不超过200Hz)
 6715              		.loc 1 2899 0
 6716 0082 0620     		movs	r0, #6
 6717              	.LVL634:
 6718 0084 F4E7     		b	.L636
 6719              	.LVL635:
 6720              	.L644:
2901:Modules/mpu6050/inv_mpu.c **** 		res=run_self_test();		//自检
 6721              		.loc 1 2901 0
 6722 0086 0720     		movs	r0, #7
 6723              	.LVL636:
 6724 0088 F2E7     		b	.L636
 6725              	.LVL637:
 6726              	.L645:
2903:Modules/mpu6050/inv_mpu.c **** 		res=mpu_set_dmp_state(1);	//使能DMP
 6727              		.loc 1 2903 0
 6728 008a 0820     		movs	r0, #8
 6729              	.LVL638:
 6730 008c F0E7     		b	.L636
 6731              	.L649:
 6732 008e 00BF     		.align	2
 6733              	.L648:
 6734 0090 00000000 		.word	.LANCHOR1
 6735              		.cfi_endproc
 6736              	.LFE116:
 6738              		.global	__aeabi_f2d
 6739              		.global	__aeabi_dmul
 6740              		.global	__aeabi_d2f
 6741              		.section	.text.mpu_dmp_get_data,"ax",%progbits
 6742              		.align	1
 6743              		.global	mpu_dmp_get_data
 6744              		.syntax unified
 6745              		.thumb
 6746              		.thumb_func
 6747              		.fpu softvfp
 6749              	mpu_dmp_get_data:
 6750              	.LFB117:
2909:Modules/mpu6050/inv_mpu.c **** //得到dmp处理后的数据(注意,本函数需要比较多堆栈,局部变量有点多)
2910:Modules/mpu6050/inv_mpu.c **** //pitch:俯仰角 精度:0.1°   范围:-90.0° <---> +90.0°
2911:Modules/mpu6050/inv_mpu.c **** //roll:横滚角  精度:0.1°   范围:-180.0°<---> +180.0°
2912:Modules/mpu6050/inv_mpu.c **** //yaw:航向角   精度:0.1°   范围:-180.0°<---> +180.0°
2913:Modules/mpu6050/inv_mpu.c **** //返回值:0,正常
2914:Modules/mpu6050/inv_mpu.c **** //    其他,失败
2915:Modules/mpu6050/inv_mpu.c **** u8 mpu_dmp_get_data(float *pitch,float *roll,float *yaw)
2916:Modules/mpu6050/inv_mpu.c **** {
 6751              		.loc 1 2916 0
 6752              		.cfi_startproc
 6753              		@ args = 0, pretend = 0, frame = 56
 6754              		@ frame_needed = 0, uses_anonymous_args = 0
 6755              	.LVL639:
 6756 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 183


 6757              	.LCFI152:
 6758              		.cfi_def_cfa_offset 36
 6759              		.cfi_offset 4, -36
 6760              		.cfi_offset 5, -32
 6761              		.cfi_offset 6, -28
 6762              		.cfi_offset 7, -24
 6763              		.cfi_offset 8, -20
 6764              		.cfi_offset 9, -16
 6765              		.cfi_offset 10, -12
 6766              		.cfi_offset 11, -8
 6767              		.cfi_offset 14, -4
 6768 0004 91B0     		sub	sp, sp, #68
 6769              	.LCFI153:
 6770              		.cfi_def_cfa_offset 104
 6771 0006 8146     		mov	r9, r0
 6772 0008 8846     		mov	r8, r1
 6773 000a 1746     		mov	r7, r2
 6774              	.LVL640:
2917:Modules/mpu6050/inv_mpu.c **** 	float q0=1.0f,q1=0.0f,q2=0.0f,q3=0.0f;
2918:Modules/mpu6050/inv_mpu.c **** 	unsigned long sensor_timestamp;
2919:Modules/mpu6050/inv_mpu.c **** 	short gyro[3], accel[3], sensors;
2920:Modules/mpu6050/inv_mpu.c **** 	unsigned char more;
2921:Modules/mpu6050/inv_mpu.c **** 	long quat[4];
2922:Modules/mpu6050/inv_mpu.c **** 	if(dmp_read_fifo(gyro, accel, quat, &sensor_timestamp, &sensors,&more))return 1;
 6775              		.loc 1 2922 0
 6776 000c 0DF12903 		add	r3, sp, #41
 6777 0010 0193     		str	r3, [sp, #4]
 6778 0012 0DF12A03 		add	r3, sp, #42
 6779 0016 0093     		str	r3, [sp]
 6780 0018 0FAB     		add	r3, sp, #60
 6781 001a 06AA     		add	r2, sp, #24
 6782              	.LVL641:
 6783 001c 0BA9     		add	r1, sp, #44
 6784              	.LVL642:
 6785 001e 0DA8     		add	r0, sp, #52
 6786              	.LVL643:
 6787 0020 FFF7FEFF 		bl	dmp_read_fifo
 6788              	.LVL644:
 6789 0024 0028     		cmp	r0, #0
 6790 0026 40F0C580 		bne	.L652
2923:Modules/mpu6050/inv_mpu.c **** 	/* Gyro and accel data are written to the FIFO by the DMP in chip frame and hardware units.
2924:Modules/mpu6050/inv_mpu.c **** 	 * This behavior is convenient because it keeps the gyro and accel outputs of dmp_read_fifo and mp
2925:Modules/mpu6050/inv_mpu.c **** 	**/
2926:Modules/mpu6050/inv_mpu.c **** 	/*if (sensors & INV_XYZ_GYRO )
2927:Modules/mpu6050/inv_mpu.c **** 	send_packet(PACKET_TYPE_GYRO, gyro);
2928:Modules/mpu6050/inv_mpu.c **** 	if (sensors & INV_XYZ_ACCEL)
2929:Modules/mpu6050/inv_mpu.c **** 	send_packet(PACKET_TYPE_ACCEL, accel); */
2930:Modules/mpu6050/inv_mpu.c **** 	/* Unlike gyro and accel, quaternions are written to the FIFO in the body frame, q30.
2931:Modules/mpu6050/inv_mpu.c **** 	 * The orientation is set by the scalar passed to dmp_set_orientation during initialization.
2932:Modules/mpu6050/inv_mpu.c **** 	**/
2933:Modules/mpu6050/inv_mpu.c **** 	if(sensors&INV_WXYZ_QUAT)
 6791              		.loc 1 2933 0
 6792 002a BDF82A30 		ldrh	r3, [sp, #42]
 6793 002e 13F4807F 		tst	r3, #256
 6794 0032 00F0C380 		beq	.L653
2934:Modules/mpu6050/inv_mpu.c **** 	{
2935:Modules/mpu6050/inv_mpu.c **** 		q0 = quat[0] / q30;	//q30格式转换为浮点数
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 184


 6795              		.loc 1 2935 0
 6796 0036 0698     		ldr	r0, [sp, #24]
 6797 0038 FFF7FEFF 		bl	__aeabi_i2f
 6798              	.LVL645:
 6799 003c 4FF04251 		mov	r1, #813694976
 6800 0040 FFF7FEFF 		bl	__aeabi_fmul
 6801              	.LVL646:
 6802 0044 0646     		mov	r6, r0
 6803              	.LVL647:
2936:Modules/mpu6050/inv_mpu.c **** 		q1 = quat[1] / q30;
 6804              		.loc 1 2936 0
 6805 0046 0798     		ldr	r0, [sp, #28]
 6806              	.LVL648:
 6807 0048 FFF7FEFF 		bl	__aeabi_i2f
 6808              	.LVL649:
 6809 004c 4FF04251 		mov	r1, #813694976
 6810 0050 FFF7FEFF 		bl	__aeabi_fmul
 6811              	.LVL650:
 6812 0054 0546     		mov	r5, r0
 6813              	.LVL651:
2937:Modules/mpu6050/inv_mpu.c **** 		q2 = quat[2] / q30;
 6814              		.loc 1 2937 0
 6815 0056 0898     		ldr	r0, [sp, #32]
 6816              	.LVL652:
 6817 0058 FFF7FEFF 		bl	__aeabi_i2f
 6818              	.LVL653:
 6819 005c 4FF04251 		mov	r1, #813694976
 6820 0060 FFF7FEFF 		bl	__aeabi_fmul
 6821              	.LVL654:
 6822 0064 0446     		mov	r4, r0
 6823              	.LVL655:
2938:Modules/mpu6050/inv_mpu.c **** 		q3 = quat[3] / q30;
 6824              		.loc 1 2938 0
 6825 0066 0998     		ldr	r0, [sp, #36]
 6826              	.LVL656:
 6827 0068 FFF7FEFF 		bl	__aeabi_i2f
 6828              	.LVL657:
 6829 006c 4FF04251 		mov	r1, #813694976
 6830 0070 FFF7FEFF 		bl	__aeabi_fmul
 6831              	.LVL658:
 6832 0074 8346     		mov	fp, r0
 6833              	.LVL659:
2939:Modules/mpu6050/inv_mpu.c **** 		//计算得到俯仰角/横滚角/航向角
2940:Modules/mpu6050/inv_mpu.c **** 		*pitch = asin(-2 * q1 * q3 + 2 * q0* q2)* 57.3;	// pitch
 6834              		.loc 1 2940 0
 6835 0076 4FF04041 		mov	r1, #-1073741824
 6836 007a 2846     		mov	r0, r5
 6837              	.LVL660:
 6838 007c FFF7FEFF 		bl	__aeabi_fmul
 6839              	.LVL661:
 6840 0080 0290     		str	r0, [sp, #8]	@ float
 6841 0082 5946     		mov	r1, fp
 6842 0084 FFF7FEFF 		bl	__aeabi_fmul
 6843              	.LVL662:
 6844 0088 8246     		mov	r10, r0
 6845 008a 3146     		mov	r1, r6
 6846 008c 3046     		mov	r0, r6
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 185


 6847 008e FFF7FEFF 		bl	__aeabi_fadd
 6848              	.LVL663:
 6849 0092 0490     		str	r0, [sp, #16]	@ float
 6850 0094 2146     		mov	r1, r4
 6851 0096 FFF7FEFF 		bl	__aeabi_fmul
 6852              	.LVL664:
 6853 009a 0146     		mov	r1, r0
 6854 009c 5046     		mov	r0, r10
 6855 009e FFF7FEFF 		bl	__aeabi_fadd
 6856              	.LVL665:
 6857 00a2 FFF7FEFF 		bl	__aeabi_f2d
 6858              	.LVL666:
 6859 00a6 FFF7FEFF 		bl	asin
 6860              	.LVL667:
 6861 00aa 45A3     		adr	r3, .L655
 6862 00ac D3E90023 		ldrd	r2, [r3]
 6863 00b0 FFF7FEFF 		bl	__aeabi_dmul
 6864              	.LVL668:
 6865 00b4 FFF7FEFF 		bl	__aeabi_d2f
 6866              	.LVL669:
 6867 00b8 C9F80000 		str	r0, [r9]	@ float
2941:Modules/mpu6050/inv_mpu.c **** 		*roll  = atan2(2 * q2 * q3 + 2 * q0 * q1, -2 * q1 * q1 - 2 * q2* q2 + 1)* 57.3;	// roll
 6868              		.loc 1 2941 0
 6869 00bc 2146     		mov	r1, r4
 6870 00be 2046     		mov	r0, r4
 6871 00c0 FFF7FEFF 		bl	__aeabi_fadd
 6872              	.LVL670:
 6873 00c4 0590     		str	r0, [sp, #20]	@ float
 6874 00c6 5946     		mov	r1, fp
 6875 00c8 FFF7FEFF 		bl	__aeabi_fmul
 6876              	.LVL671:
 6877 00cc 8146     		mov	r9, r0
 6878              	.LVL672:
 6879 00ce 2946     		mov	r1, r5
 6880 00d0 0498     		ldr	r0, [sp, #16]	@ float
 6881 00d2 FFF7FEFF 		bl	__aeabi_fmul
 6882              	.LVL673:
 6883 00d6 0146     		mov	r1, r0
 6884 00d8 4846     		mov	r0, r9
 6885 00da FFF7FEFF 		bl	__aeabi_fadd
 6886              	.LVL674:
 6887 00de 8146     		mov	r9, r0
 6888 00e0 2946     		mov	r1, r5
 6889 00e2 0298     		ldr	r0, [sp, #8]	@ float
 6890 00e4 FFF7FEFF 		bl	__aeabi_fmul
 6891              	.LVL675:
 6892 00e8 8246     		mov	r10, r0
 6893 00ea 2146     		mov	r1, r4
 6894 00ec 0598     		ldr	r0, [sp, #20]	@ float
 6895 00ee FFF7FEFF 		bl	__aeabi_fmul
 6896              	.LVL676:
 6897 00f2 0146     		mov	r1, r0
 6898 00f4 5046     		mov	r0, r10
 6899 00f6 FFF7FEFF 		bl	__aeabi_fsub
 6900              	.LVL677:
 6901 00fa 4FF07E51 		mov	r1, #1065353216
 6902 00fe FFF7FEFF 		bl	__aeabi_fadd
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 186


 6903              	.LVL678:
 6904 0102 FFF7FEFF 		bl	__aeabi_f2d
 6905              	.LVL679:
 6906 0106 CDE90201 		strd	r0, [sp, #8]
 6907 010a 4846     		mov	r0, r9
 6908 010c FFF7FEFF 		bl	__aeabi_f2d
 6909              	.LVL680:
 6910 0110 DDE90223 		ldrd	r2, [sp, #8]
 6911 0114 FFF7FEFF 		bl	atan2
 6912              	.LVL681:
 6913 0118 29A3     		adr	r3, .L655
 6914 011a D3E90023 		ldrd	r2, [r3]
 6915 011e FFF7FEFF 		bl	__aeabi_dmul
 6916              	.LVL682:
 6917 0122 FFF7FEFF 		bl	__aeabi_d2f
 6918              	.LVL683:
 6919 0126 C8F80000 		str	r0, [r8]	@ float
2942:Modules/mpu6050/inv_mpu.c **** 		*yaw   = atan2(2*(q1*q2 + q0*q3),q0*q0+q1*q1-q2*q2-q3*q3) * 57.3;	//yaw
 6920              		.loc 1 2942 0
 6921 012a 2146     		mov	r1, r4
 6922 012c 2846     		mov	r0, r5
 6923 012e FFF7FEFF 		bl	__aeabi_fmul
 6924              	.LVL684:
 6925 0132 8046     		mov	r8, r0
 6926              	.LVL685:
 6927 0134 5946     		mov	r1, fp
 6928 0136 3046     		mov	r0, r6
 6929 0138 FFF7FEFF 		bl	__aeabi_fmul
 6930              	.LVL686:
 6931 013c 0146     		mov	r1, r0
 6932 013e 4046     		mov	r0, r8
 6933 0140 FFF7FEFF 		bl	__aeabi_fadd
 6934              	.LVL687:
 6935 0144 0146     		mov	r1, r0
 6936 0146 FFF7FEFF 		bl	__aeabi_fadd
 6937              	.LVL688:
 6938 014a 8046     		mov	r8, r0
 6939 014c 3146     		mov	r1, r6
 6940 014e 3046     		mov	r0, r6
 6941 0150 FFF7FEFF 		bl	__aeabi_fmul
 6942              	.LVL689:
 6943 0154 0646     		mov	r6, r0
 6944              	.LVL690:
 6945 0156 2946     		mov	r1, r5
 6946 0158 2846     		mov	r0, r5
 6947 015a FFF7FEFF 		bl	__aeabi_fmul
 6948              	.LVL691:
 6949 015e 0146     		mov	r1, r0
 6950 0160 3046     		mov	r0, r6
 6951 0162 FFF7FEFF 		bl	__aeabi_fadd
 6952              	.LVL692:
 6953 0166 0546     		mov	r5, r0
 6954              	.LVL693:
 6955 0168 2146     		mov	r1, r4
 6956 016a 2046     		mov	r0, r4
 6957 016c FFF7FEFF 		bl	__aeabi_fmul
 6958              	.LVL694:
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 187


 6959 0170 0146     		mov	r1, r0
 6960 0172 2846     		mov	r0, r5
 6961 0174 FFF7FEFF 		bl	__aeabi_fsub
 6962              	.LVL695:
 6963 0178 0446     		mov	r4, r0
 6964              	.LVL696:
 6965 017a 5946     		mov	r1, fp
 6966 017c 5846     		mov	r0, fp
 6967 017e FFF7FEFF 		bl	__aeabi_fmul
 6968              	.LVL697:
 6969 0182 0146     		mov	r1, r0
 6970 0184 2046     		mov	r0, r4
 6971 0186 FFF7FEFF 		bl	__aeabi_fsub
 6972              	.LVL698:
 6973 018a FFF7FEFF 		bl	__aeabi_f2d
 6974              	.LVL699:
 6975 018e 0446     		mov	r4, r0
 6976 0190 0D46     		mov	r5, r1
 6977 0192 4046     		mov	r0, r8
 6978 0194 FFF7FEFF 		bl	__aeabi_f2d
 6979              	.LVL700:
 6980 0198 2246     		mov	r2, r4
 6981 019a 2B46     		mov	r3, r5
 6982 019c FFF7FEFF 		bl	atan2
 6983              	.LVL701:
 6984 01a0 07A3     		adr	r3, .L655
 6985 01a2 D3E90023 		ldrd	r2, [r3]
 6986 01a6 FFF7FEFF 		bl	__aeabi_dmul
 6987              	.LVL702:
 6988 01aa FFF7FEFF 		bl	__aeabi_d2f
 6989              	.LVL703:
 6990 01ae 3860     		str	r0, [r7]	@ float
2943:Modules/mpu6050/inv_mpu.c **** 	}else return 2;
2944:Modules/mpu6050/inv_mpu.c **** 	return 0;
 6991              		.loc 1 2944 0
 6992 01b0 0020     		movs	r0, #0
 6993 01b2 00E0     		b	.L651
 6994              	.LVL704:
 6995              	.L652:
2922:Modules/mpu6050/inv_mpu.c **** 	/* Gyro and accel data are written to the FIFO by the DMP in chip frame and hardware units.
 6996              		.loc 1 2922 0
 6997 01b4 0120     		movs	r0, #1
 6998              	.LVL705:
 6999              	.L651:
2945:Modules/mpu6050/inv_mpu.c **** }
 7000              		.loc 1 2945 0
 7001 01b6 11B0     		add	sp, sp, #68
 7002              	.LCFI154:
 7003              		.cfi_remember_state
 7004              		.cfi_def_cfa_offset 36
 7005              		@ sp needed
 7006 01b8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7007              	.LVL706:
 7008              	.L653:
 7009              	.LCFI155:
 7010              		.cfi_restore_state
2943:Modules/mpu6050/inv_mpu.c **** 	}else return 2;
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 188


 7011              		.loc 1 2943 0
 7012 01bc 0220     		movs	r0, #2
 7013 01be FAE7     		b	.L651
 7014              	.L656:
 7015              		.align	3
 7016              	.L655:
 7017 01c0 66666666 		.word	1717986918
 7018 01c4 66A64C40 		.word	1078765158
 7019              		.cfi_endproc
 7020              	.LFE117:
 7022              		.global	test
 7023              		.global	hw
 7024              		.global	reg
 7025              		.section	.data.gyro_orientation,"aw",%progbits
 7026              		.align	2
 7027              		.set	.LANCHOR1,. + 0
 7030              	gyro_orientation:
 7031 0000 01       		.byte	1
 7032 0001 00       		.byte	0
 7033 0002 00       		.byte	0
 7034 0003 00       		.byte	0
 7035 0004 01       		.byte	1
 7036 0005 00       		.byte	0
 7037 0006 00       		.byte	0
 7038 0007 00       		.byte	0
 7039 0008 01       		.byte	1
 7040              		.section	.data.st,"aw",%progbits
 7041              		.align	2
 7042              		.set	.LANCHOR0,. + 0
 7045              	st:
 7046 0000 00000000 		.word	reg
 7047 0004 00000000 		.word	hw
 7048 0008 00       		.byte	0
 7049 0009 00000000 		.space	31
 7049      00000000 
 7049      00000000 
 7049      00000000 
 7049      00000000 
 7050 0028 00000000 		.word	test
 7051              		.section	.rodata.hw,"a",%progbits
 7052              		.align	2
 7055              	hw:
 7056 0000 68       		.byte	104
 7057 0001 00       		.space	1
 7058 0002 0004     		.short	1024
 7059 0004 76       		.byte	118
 7060 0005 00       		.space	1
 7061 0006 5401     		.short	340
 7062 0008 F7FD     		.short	-521
 7063 000a 0001     		.short	256
 7064              		.section	.rodata.mpu_init.str1.4,"aMS",%progbits,1
 7065              		.align	2
 7066              	.LC1:
 7067 0000 556E7375 		.ascii	"Unsupported software product rev %d.\012\000"
 7067      70706F72 
 7067      74656420 
 7067      736F6674 
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 189


 7067      77617265 
 7068 0026 0000     		.space	2
 7069              	.LC2:
 7070 0028 50726F64 		.ascii	"Product ID read as 0 indicates device is either inc"
 7070      75637420 
 7070      49442072 
 7070      65616420 
 7070      61732030 
 7071 005b 6F6D7061 		.ascii	"ompatible or an MPU3050.\000"
 7071      7469626C 
 7071      65206F72 
 7071      20616E20 
 7071      4D505533 
 7072              	.LC3:
 7073 0074 48616C66 		.ascii	"Half sensitivity part found.\000"
 7073      2073656E 
 7073      73697469 
 7073      76697479 
 7073      20706172 
 7074              		.section	.rodata.mpu_reg_dump.str1.4,"aMS",%progbits,1
 7075              		.align	2
 7076              	.LC0:
 7077 0000 25233578 		.ascii	"%#5x: %#5x\015\012\000"
 7077      3A202523 
 7077      35780D0A 
 7077      00
 7078              		.section	.rodata.reg,"a",%progbits
 7079              		.align	2
 7082              	reg:
 7083 0000 75       		.byte	117
 7084 0001 19       		.byte	25
 7085 0002 1A       		.byte	26
 7086 0003 0C       		.byte	12
 7087 0004 6A       		.byte	106
 7088 0005 23       		.byte	35
 7089 0006 1B       		.byte	27
 7090 0007 1C       		.byte	28
 7091 0008 1F       		.byte	31
 7092 0009 20       		.byte	32
 7093 000a 72       		.byte	114
 7094 000b 74       		.byte	116
 7095 000c 43       		.byte	67
 7096 000d 3B       		.byte	59
 7097 000e 41       		.byte	65
 7098 000f 38       		.byte	56
 7099 0010 39       		.byte	57
 7100 0011 3A       		.byte	58
 7101 0012 6B       		.byte	107
 7102 0013 6C       		.byte	108
 7103 0014 37       		.byte	55
 7104 0015 6F       		.byte	111
 7105 0016 06       		.byte	6
 7106 0017 24       		.byte	36
 7107 0018 6D       		.byte	109
 7108 0019 6E       		.byte	110
 7109 001a 70       		.byte	112
 7110              		.section	.rodata.test,"a",%progbits
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 190


 7111              		.align	2
 7114              	test:
 7115 0000 83000000 		.word	131
 7116 0004 00080000 		.word	2048
 7117 0008 00       		.byte	0
 7118 0009 01       		.byte	1
 7119 000a 00       		.byte	0
 7120 000b 18       		.byte	24
 7121 000c 3200     		.short	50
 7122 000e 05       		.byte	5
 7123 000f 00       		.space	1
 7124 0010 00002041 		.word	1092616192
 7125 0014 0000D242 		.word	1121058816
 7126 0018 295C0F3E 		.word	1041194025
 7127 001c 9A99993E 		.word	1050253722
 7128 0020 3333733F 		.word	1064514355
 7129 0024 295C0F3E 		.word	1041194025
 7130              		.text
 7131              	.Letext0:
 7132              		.file 2 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/machine/_
 7133              		.file 3 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_stdi
 7134              		.file 4 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/lock.
 7135              		.file 5 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_type
 7136              		.file 6 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-7-2017-q4-major/lib/gcc/arm-none-eabi/7.2.1/inc
 7137              		.file 7 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/reent
 7138              		.file 8 "Inc/core_cm3.h"
 7139              		.file 9 "startup/inc/sys.h"
 7140              		.file 10 "tools/inc/malloc.h"
 7141              		.file 11 "tools/inc/tskmanager.h"
 7142              		.file 12 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/stdlib.h
 7143              		.file 13 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/math.h"
 7144              		.file 14 "Modules/mpu6050/inc/inv_mpu_dmp_motion_driver.h"
 7145              		.file 15 "Modules/mpu6050/inc/mod_mpu6050.h"
 7146              		.file 16 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/string.h
 7147              		.file 17 "/Users/zy/Desktop/Tools/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/stdio.h"
 7148              		.file 18 "<built-in>"
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 191


DEFINED SYMBOLS
                            *ABS*:0000000000000000 inv_mpu.c
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:17     .text.get_accel_prod_shift:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:23     .text.get_accel_prod_shift:0000000000000000 get_accel_prod_shift
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:150    .text.get_accel_prod_shift:00000000000000b0 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:163    .text.accel_self_test:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:169    .text.accel_self_test:0000000000000000 accel_self_test
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:291    .text.accel_self_test:0000000000000098 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:298    .text.gyro_self_test:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:304    .text.gyro_self_test:0000000000000000 gyro_self_test
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:466    .text.gyro_self_test:00000000000000e4 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:476    .text.set_int_enable:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:482    .text.set_int_enable:0000000000000000 set_int_enable
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:603    .text.set_int_enable:0000000000000094 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:609    .text.get_st_biases:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:615    .text.get_st_biases:0000000000000000 get_st_biases
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1008   .text.get_st_biases:00000000000002c8 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1013   .text.get_st_biases:00000000000002d0 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1219   .text.mpu_reg_dump:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1226   .text.mpu_reg_dump:0000000000000000 mpu_reg_dump
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1304   .text.mpu_reg_dump:0000000000000050 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1310   .text.mpu_read_reg:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1317   .text.mpu_read_reg:0000000000000000 mpu_read_reg
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1387   .text.mpu_read_reg:000000000000003c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1392   .text.mpu_get_gyro_reg:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1399   .text.mpu_get_gyro_reg:0000000000000000 mpu_get_gyro_reg
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1479   .text.mpu_get_gyro_reg:0000000000000060 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1484   .text.mpu_get_accel_reg:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1491   .text.mpu_get_accel_reg:0000000000000000 mpu_get_accel_reg
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1571   .text.mpu_get_accel_reg:0000000000000060 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1578   .text.mpu_get_temperature:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1585   .text.mpu_get_temperature:0000000000000000 mpu_get_temperature
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1699   .text.mpu_get_temperature:0000000000000080 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1705   .text.mpu_set_accel_bias:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1712   .text.mpu_set_accel_bias:0000000000000000 mpu_set_accel_bias
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1904   .text.mpu_set_accel_bias:000000000000010c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1909   .text.mpu_reset_fifo:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:1916   .text.mpu_reset_fifo:0000000000000000 mpu_reset_fifo
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2219   .text.mpu_reset_fifo:00000000000001f0 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2224   .text.mpu_get_gyro_fsr:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2231   .text.mpu_get_gyro_fsr:0000000000000000 mpu_get_gyro_fsr
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2246   .text.mpu_get_gyro_fsr:000000000000000c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2250   .text.mpu_get_gyro_fsr:0000000000000010 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2288   .text.mpu_get_gyro_fsr:0000000000000038 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2293   .text.mpu_set_gyro_fsr:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2300   .text.mpu_set_gyro_fsr:0000000000000000 mpu_set_gyro_fsr
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2418   .text.mpu_set_gyro_fsr:000000000000008c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2423   .text.mpu_get_accel_fsr:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2430   .text.mpu_get_accel_fsr:0000000000000000 mpu_get_accel_fsr
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2445   .text.mpu_get_accel_fsr:000000000000000c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2449   .text.mpu_get_accel_fsr:0000000000000010 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2501   .text.mpu_get_accel_fsr:0000000000000040 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2506   .text.mpu_set_accel_fsr:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2513   .text.mpu_set_accel_fsr:0000000000000000 mpu_set_accel_fsr
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2540   .text.mpu_set_accel_fsr:0000000000000016 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2639   .text.mpu_set_accel_fsr:0000000000000090 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2644   .text.mpu_get_lpf:0000000000000000 $t
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 192


/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2651   .text.mpu_get_lpf:0000000000000000 mpu_get_lpf
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2667   .text.mpu_get_lpf:000000000000000e $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2673   .text.mpu_get_lpf:0000000000000014 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2723   .text.mpu_get_lpf:0000000000000040 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2728   .text.mpu_set_lpf:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2735   .text.mpu_set_lpf:0000000000000000 mpu_set_lpf
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2857   .text.mpu_set_lpf:0000000000000090 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2862   .text.mpu_get_sample_rate:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2869   .text.mpu_get_sample_rate:0000000000000000 mpu_get_sample_rate
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2899   .text.mpu_get_sample_rate:0000000000000018 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2904   .text.mpu_get_compass_sample_rate:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2911   .text.mpu_get_compass_sample_rate:0000000000000000 mpu_get_compass_sample_rate
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2930   .text.mpu_set_compass_sample_rate:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2937   .text.mpu_set_compass_sample_rate:0000000000000000 mpu_set_compass_sample_rate
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2953   .text.mpu_get_gyro_sens:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2960   .text.mpu_get_gyro_sens:0000000000000000 mpu_get_gyro_sens
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2975   .text.mpu_get_gyro_sens:000000000000000c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2979   .text.mpu_get_gyro_sens:0000000000000010 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3029   .text.mpu_get_gyro_sens:0000000000000038 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3038   .text.mpu_get_accel_sens:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3045   .text.mpu_get_accel_sens:0000000000000000 mpu_get_accel_sens
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3060   .text.mpu_get_accel_sens:000000000000000c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3064   .text.mpu_get_accel_sens:0000000000000010 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3116   .text.mpu_get_accel_sens:0000000000000048 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3121   .text.mpu_get_fifo_config:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3128   .text.mpu_get_fifo_config:0000000000000000 mpu_get_fifo_config
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3147   .text.mpu_get_fifo_config:000000000000000c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3152   .text.mpu_configure_fifo:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3159   .text.mpu_configure_fifo:0000000000000000 mpu_configure_fifo
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3253   .text.mpu_configure_fifo:000000000000005c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3258   .text.mpu_get_power_state:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3265   .text.mpu_get_power_state:0000000000000000 mpu_get_power_state
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3294   .text.mpu_get_power_state:0000000000000014 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3299   .text.mpu_get_int_status:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3306   .text.mpu_get_int_status:0000000000000000 mpu_get_int_status
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3374   .text.mpu_get_int_status:0000000000000040 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3379   .text.mpu_read_fifo:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3386   .text.mpu_read_fifo:0000000000000000 mpu_read_fifo
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3736   .text.mpu_read_fifo:00000000000001f8 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3741   .text.mpu_read_fifo_stream:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3748   .text.mpu_read_fifo_stream:0000000000000000 mpu_read_fifo_stream
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3894   .text.mpu_read_fifo_stream:00000000000000bc $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3899   .text.mpu_set_bypass:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:3906   .text.mpu_set_bypass:0000000000000000 mpu_set_bypass
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4133   .text.mpu_set_bypass:0000000000000164 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4138   .text.mpu_set_int_level:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4145   .text.mpu_set_int_level:0000000000000000 mpu_set_int_level
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4163   .text.mpu_set_int_level:000000000000000c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4168   .text.mpu_set_int_latched:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4175   .text.mpu_set_int_latched:0000000000000000 mpu_set_int_latched
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4273   .text.mpu_set_int_latched:0000000000000070 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4278   .text.mpu_lp_accel_mode:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4285   .text.mpu_lp_accel_mode:0000000000000000 mpu_lp_accel_mode
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4456   .text.mpu_lp_accel_mode:00000000000000d8 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4461   .text.mpu_set_sample_rate:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4468   .text.mpu_set_sample_rate:0000000000000000 mpu_set_sample_rate
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4600   .text.mpu_set_sample_rate:000000000000009c $d
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 193


/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4605   .text.mpu_set_sensors:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4612   .text.mpu_set_sensors:0000000000000000 mpu_set_sensors
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4765   .text.mpu_set_sensors:00000000000000e0 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4770   .text.mpu_init:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:4777   .text.mpu_init:0000000000000000 mpu_init
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5059   .text.mpu_init:00000000000001a8 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5067   .text.mpu_write_mem:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5074   .text.mpu_write_mem:0000000000000000 mpu_write_mem
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5191   .text.mpu_write_mem:0000000000000074 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5196   .text.mpu_read_mem:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5203   .text.mpu_read_mem:0000000000000000 mpu_read_mem
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5320   .text.mpu_read_mem:0000000000000074 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5325   .text.mpu_load_firmware:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5332   .text.mpu_load_firmware:0000000000000000 mpu_load_firmware
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5474   .text.mpu_load_firmware:00000000000000b0 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5479   .text.mpu_set_dmp_state:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5486   .text.mpu_set_dmp_state:0000000000000000 mpu_set_dmp_state
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5615   .text.mpu_set_dmp_state:000000000000008c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5620   .text.mpu_run_self_test:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5627   .text.mpu_run_self_test:0000000000000000 mpu_run_self_test
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5844   .text.mpu_run_self_test:00000000000000fc $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5849   .text.mpu_get_dmp_state:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5856   .text.mpu_get_dmp_state:0000000000000000 mpu_get_dmp_state
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5875   .text.mpu_get_dmp_state:000000000000000c $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5880   .text.setup_compass:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5887   .text.setup_compass:0000000000000000 setup_compass
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5901   .text.mpu_get_compass_reg:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5908   .text.mpu_get_compass_reg:0000000000000000 mpu_get_compass_reg
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5924   .text.mpu_get_compass_fsr:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5931   .text.mpu_get_compass_fsr:0000000000000000 mpu_get_compass_fsr
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5947   .text.mpu_lp_motion_interrupt:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:5954   .text.mpu_lp_motion_interrupt:0000000000000000 mpu_lp_motion_interrupt
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6304   .text.mpu_lp_motion_interrupt:00000000000001e8 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6310   .text.run_self_test:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6317   .text.run_self_test:0000000000000000 run_self_test
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6424   .text.inv_row_2_scale:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6431   .text.inv_row_2_scale:0000000000000000 inv_row_2_scale
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6502   .text.inv_orientation_matrix_to_scalar:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6509   .text.inv_orientation_matrix_to_scalar:0000000000000000 inv_orientation_matrix_to_scalar
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6550   .text.mget_ms:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6557   .text.mget_ms:0000000000000000 mget_ms
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6571   .text.mpu_dmp_init:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6578   .text.mpu_dmp_init:0000000000000000 mpu_dmp_init
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6734   .text.mpu_dmp_init:0000000000000090 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6742   .text.mpu_dmp_get_data:0000000000000000 $t
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:6749   .text.mpu_dmp_get_data:0000000000000000 mpu_dmp_get_data
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7017   .text.mpu_dmp_get_data:00000000000001c0 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7114   .rodata.test:0000000000000000 test
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7055   .rodata.hw:0000000000000000 hw
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7082   .rodata.reg:0000000000000000 reg
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7026   .data.gyro_orientation:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7030   .data.gyro_orientation:0000000000000000 gyro_orientation
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7041   .data.st:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7045   .data.st:0000000000000000 st
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7052   .rodata.hw:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7065   .rodata.mpu_init.str1.4:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7075   .rodata.mpu_reg_dump.str1.4:0000000000000000 $d
ARM GAS  /var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s 			page 194


/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7079   .rodata.reg:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:7111   .rodata.test:0000000000000000 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2555   .text.mpu_set_accel_fsr:0000000000000025 $d
/var/folders/vc/p32jbmgs3k17njj5gy_2_k3w0000gn/T//ccOkZTay.s:2555   .text.mpu_set_accel_fsr:0000000000000026 $t

UNDEFINED SYMBOLS
__aeabi_fmul
mod_Mpu_Read
__aeabi_i2f
__aeabi_fcmpeq
__aeabi_fdiv
__aeabi_fsub
__aeabi_fcmpgt
__aeabi_fcmplt
mod_Mpu_Write
__aeabi_ldivmod
delay_ms
printf
__aeabi_fadd
__aeabi_f2iz
puts
memcmp
dmp_set_gyro_bias
dmp_set_accel_bias
mod_Mpu6050DataLineInit
dmp_load_motion_driver_firmware
dmp_set_orientation
dmp_enable_feature
dmp_set_fifo_rate
__aeabi_f2d
__aeabi_dmul
__aeabi_d2f
dmp_read_fifo
asin
atan2
